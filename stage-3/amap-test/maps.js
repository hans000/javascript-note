(function(config){!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global=global||self).AMap=factory()}(this,function(){"use strict";var shared,worker,AMap;function define(_,chunk){var factory,workerUrl;shared?worker?(workerUrl='var sharedChunk = {key:"'+config[0]+'",db:"'+(config[14]||"")+'",nebulaVersion:"'+(config[15]||"")+'",movingDraw:'+Boolean(window.movingDraw)+',host:"'+config[2]+'",}; ('+shared+")(sharedChunk); ("+worker+")(sharedChunk);",factory={key:config[0],movingDraw:window.movingDraw},shared(factory),factory=chunk(factory),workerUrl="undefined"!=typeof URL?window.URL.createObjectURL(new Blob([workerUrl],{type:"text/javascript"})):"",(AMap=factory(config)).getConfig().workerUrl=workerUrl):worker=chunk:shared=chunk}define(["exports"],function(exports){var Status,a,a=Status=Status||{};a.loading="loading",a.loaded="loaded";var Queue=(b.prototype.add=function(t,i){for(var e=t.length,r=0,n=function(){(r+=1)===e&&i&&i()},a=0,o=t;a<o.length;a++){var s=o[a];this._add(s,n)}},b.prototype.has=function(t){return(t=this.tT[t])&&t.status===Status.loaded},b.prototype.finish=function(t){(t=this.tT[t]).status=Status.loaded;for(var i=0,e=t.pI;i<e.length;i++){var r=e[i];r&&r()}},b.prototype._add=function(t,i){var e=this.tT[t];e?e.status===Status.loading?e.pI.push(i):i():this.tT[t]={pI:[i],status:Status.loading}},b);function b(){this.tT={}}var M={nS:function(clsName,clsText){try{eval(clsText)}catch(e){throw e}},eS:{iS:"1612511548514"}},Module=M,extendStatics=function(t,i){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)};function __extends(t,i){function e(){this.constructor=t}extendStatics(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}function __spreadArrays(){for(var t=0,i=0,e=arguments.length;i<e;i++)t+=arguments[i].length;for(var r=Array(t),n=0,i=0;i<e;i++)for(var a=arguments[i],o=0,s=a.length;o<s;o++,n++)r[n]=a[o];return r}function isBrowser(){return"undefined"!=typeof window&&"undefined"!=typeof document}function isWasmSuppport(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate&&TextDecoder&&TextEncoder){var t=new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0]));if(t instanceof WebAssembly.Module)return new WebAssembly.Instance(t)instanceof WebAssembly.Instance}}catch(t){}return!1}exports.Ln=function(){return exports.Ln=Object.assign||function(t){for(var i,e=1,r=arguments.length;e<r;e++)for(var n in i=arguments[e])Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);return t},exports.Ln.apply(this,arguments)};var testWepP=function(t){var i=new Image;i.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",i.onload=i.onerror=function(){t(2===i.height)}};function isWorkerEnv(){try{return document,!1}catch(t){return!0}}function getSupport(t){var i=isWasmSuppport(),e=navigator.userAgent.toLowerCase(),n=(r=function(t){return-1!==e.indexOf(t)})("macintosh"),a=r("ipad;")||r("ipad "),o=r("ipod touch;"),s=r("iphone;")||r("iphone "),h=s||a||o,u=(n||h)&&r("safari")&&r("version/"),l=r("macwechat"),c=r("windowswechat"),f={touch:!1,mac:n,Ue:!1,webkit:!1,$e:!1,scale:1,android:!1,DW:isWorkerEnv(),wasm:i,safari:u,AQ:l,gQ:c};if(isBrowser()){var d=window,g=(v=document).documentElement,p=/([a-z0-9]*\d+[a-z0-9]*)/,y="microsoft basic render driver;vmware svga 3d;Intel 965GM;Intel B43;Intel G41;Intel G45;Intel G965;Intel GMA 3600;Intel Mobile 4;Intel Mobile 45;Intel Mobile 965".split(";"),b="ActiveXObject"in d,x=0!=window.detectRetina&&("devicePixelRatio"in d&&1<d.devicePixelRatio||b&&"matchMedia"in d&&d.matchMedia("(min-resolution:144dpi)")&&d.matchMedia("(min-resolution:144dpi)").matches),m=r("windows nt"),w=(e.search(/windows nt [1-5]\./),e.search(/windows nt 5\.[12]/),r("windows nt 10"),r("windows phone")),R=r("Mb2345Browser"),T=(h&&e.search(/ os [456]_/),h&&e.search(/ os [4-8]_/),h&&e.search(/ os [78]_/),h&&r("os 8_"),h&&r("os 10_")),A=r("android"),M=0;A&&(M=parseInt(e.split("android")[1])||0);var S,P=A&&M<4,C=(A&&5<=M||e.search(/android 4.4/),A?"android":h?"ios":m?"windows":n?"mac":"other"),$=b&&!d.XMLHttpRequest,I=b&&!v.querySelector,k=b&&!v.addEventListener,L=b&&r("msie 9"),N=b&&r("msie 10"),O=b&&r("rv:11"),E=k||L,_=r("edge"),j=(r("qtweb"),r("ucbrowser")),F=r("alipay")||A&&j,U=(r("miuibrowser"),r("micromessenger")),D=r("dingtalk"),B=r("mqqbrowser"),G=r("baidubrowser"),V=r("crios/"),H=r("chrome/"),z=!((H||V)&&r("chromium"))&&(H&&30<parseInt(e.split("chrome/")[1])||V&&30<parseInt(e.split("crios/")[1])),W=r("firefox"),K=W&&27<parseInt(e.split("firefox/")[1]),q=u&&7<parseInt(e.split("version/")[1]),Y=(h&&r("aliapp"),A||h||w||r("mobile")),J="ontouchstart"in v,Z=d.navigator&&d.navigator.msPointerEnabled&&!!d.navigator.msMaxTouchPoints,X=d.navigator&&!!d.navigator.maxTouchPoints,Q=!J&&(X||Z),o=J||Q,l=function(){if(!Y)return d.devicePixelRatio||1;var t=document.getElementsByTagName("meta");if(window.parent&&window.parent!==window)try{if(window.parent.location.origin!==window.location.origin)return 1;t=window.parent.document.getElementsByTagName("meta")}catch(t){return 1}for(var i=t.length-1;0<=i;--i)if("viewport"===t[i].name){var n,a,e=t[i].content,r=void 0;return-1!==e.indexOf("initial-scale")&&(r=parseFloat(e.split("initial-scale=")[1])),n=-1!==e.indexOf("minimum-scale")?parseFloat(e.split("minimum-scale=")[1]):0,a=-1!==e.indexOf("maximum-scale")?parseFloat(e.split("maximum-scale=")[1]):1/0,r?n<=a?a<r?a:r<n?n:r:(console&&console.log&&console.log("viewport参数不合法"),null):n<=a?1<=n?1:Math.min(a,1):(console&&console.log&&console.log("viewport参数不合法"),null)}}(),tt=x&&(!Y||!!l&&1<=l),c=b&&"transition"in g.style,M=!!v.createElementNS&&!!v.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,it=v.createElement("canvas"),et=!(!it||!it.getContext),V=window.URL||window.webkitURL,rt=!0!==window.disableWorker&&!b&&!(j&&A&&!z)&&window.Worker&&V&&V.createObjectURL&&window.Blob,nt="",at="",ot=0,w=0!=window.higtQualityRender||!x,J=window.movingDraw,v=window.preserveDrawingBuffer,st=window.forceWebGL?{alpha:!0,antialias:w,depth:!0,stencil:!0,preserveDrawingBuffer:v}:{alpha:!0,antialias:w,depth:!0,preserveDrawingBuffer:void 0===v||v,stencil:!0},V=function(){if(!et||!rt)return!1;for(var t=["webgl","experimental-webgl","moz-webgl"],i=null,e=0;e<t.length;e+=1){try{i=it.getContext(t[e],st)}catch(t){}if(i){if(i.drawingBufferWidth!==it.width||i.drawingBufferHeight!==it.height)return!1;if(!i.getShaderPrecisionFormat||!i.getParameter||!i.getExtension)return!1;ot=i.getParameter(i.MAX_RENDERBUFFER_SIZE);var r=i.getParameter(i.MAX_VIEWPORT_DIMS);return r?(ot=Math.min(ot,r[0],r[1]),u&&"mac"==C&&(ot=Math.min(ot,4096)),r=Math.max(screen.width,screen.height),tt&&(r*=Math.min(2,window.devicePixelRatio||1)),!(ot<r)&&(!(i.getShaderPrecisionFormat(35632,36338).precision<23||i.getShaderPrecisionFormat(35633,36338).precision<23)&&((!(r=function(t){if(!t)return null;var i=null;if((e=(t=t.toLowerCase()).match(/angle \((.*)\)/))&&(t=(t=e[1]).replace(/\s*direct3d.*$/,"")),0<=(t=t.replace(/\s*\([^\)]*wddm[^\)]*\)/,"")).indexOf("intel"))return i=["Intel"],0<=t.indexOf("mobile")&&i.push("Mobile"),(0<=t.indexOf("gma")||0<=t.indexOf("graphics media accelerator"))&&i.push("GMA"),0<=t.indexOf("haswell")?i.push("Haswell"):0<=t.indexOf("ivy")?i.push("HD 4000"):0<=t.indexOf("sandy")?i.push("HD 3000"):0<=t.indexOf("ironlake")?i.push("HD"):(0<=t.indexOf("hd")&&i.push("HD"),(r=t.match(p))&&i.push(r[1].toUpperCase())),i.join(" ");if(0<=t.indexOf("nvidia")||0<=t.indexOf("quadro")||0<=t.indexOf("geforce")||0<=t.indexOf("nvs"))return i=["nVidia"],0<=t.indexOf("geforce")&&i.push("geForce"),0<=t.indexOf("quadro")&&i.push("Quadro"),0<=t.indexOf("nvs")&&i.push("NVS"),t.match(/\bion\b/)&&i.push("ION"),t.match(/gtx\b/)?i.push("GTX"):t.match(/gts\b/)?i.push("GTS"):t.match(/gt\b/)?i.push("GT"):t.match(/gs\b/)?i.push("GS"):t.match(/ge\b/)?i.push("GE"):t.match(/fx\b/)&&i.push("FX"),(r=t.match(p))&&i.push(r[1].toUpperCase().replace("GS","")),0<=t.indexOf("titan")?i.push("TITAN"):0<=t.indexOf("ti")&&i.push("Ti"),i.join(" ");if(0<=t.indexOf("amd")||0<=t.indexOf("ati")||0<=t.indexOf("radeon")||0<=t.indexOf("firegl")||0<=t.indexOf("firepro")){var r,e,i=["AMD"];return 0<=t.indexOf("mobil")&&i.push("Mobility"),0<=(e=t.indexOf("radeon"))&&i.push("Radeon"),0<=t.indexOf("firepro")?i.push("FirePro"):0<=t.indexOf("firegl")&&i.push("FireGL"),0<=t.indexOf("hd")&&i.push("HD"),0<=e&&(t=t.substring(e)),(r=t.match(p))&&i.push(r[1].toUpperCase().replace("HD","")),i.join(" ")}return t.substring(0,100)}(at=i.getExtension("WEBGL_debug_renderer_info")?i.getParameter(37446):null))||-1===y.indexOf(r))&&(nt=t[e],!0)))):!1}}return!1}(),w=void 0===t[8]||t[8],V=(v=window.Uint8Array&&w&&!window.forbidenWebGL&&V&&(window.forceWebGL||(z||K||q||_||U||D)&&"other"!=C))?"w":"d",z=r("webkit"),K="WebKitCSSMatrix"in d&&"m11"in new window.WebKitCSSMatrix,q="MozPerspective"in g.style,D="vV"in g.style,r=c||K||q||D,g=void 0!==t[12]?t[12]:null,ht=!0;try{void 0===d.localStorage?ht=!1:(S=(new Date).getTime()+"",d.localStorage.setItem("_test",S),d.localStorage.getItem("_test")!==S&&(ht=!1),d.localStorage.removeItem("_test"))}catch(t){ht=!1}t=parseInt(e.split("chrome/")[1]),f={iPad:a,iPhone:s,size:s?100:A?200:500,mac:n,windows:m,ios:h,uT:T,android:A,android23:P,cT:F,plat:C,baidu:G,qq:B,safari:u,wechat:U,ie:b,ie6:$,ie7:I,ie9:L,ie10:N,ielt9:k,fT:E,ie11:O,edge:_,hT:b&&!O,lT:R,RL:ht,vT:g,geolocation:Y||b&&!k||_,SL:j,uc:j&&!H,chrome:H,gT:!0,firefox:W,$e:Y,mobileWebkit:Y&&z,mobileWebkit3d:Y&&K,mobileOpera:Y&&d.opera,Ue:x,bT:l,Mr:tt,touch:o,msPointer:Z,pointer:X,yT:Q,pT:H&&57<=t,mT:!Y&&H&&64<=t,webkit:z,ie3d:c,webkit3d:K,gecko3d:q,opera3d:D,any3d:r,isSvg:M,isCanvas:et,isWorker:rt,TT:!1,isWebGL:v,AT:nt,xT:st,ST:at,wT:ot,MT:!1,movingDraw:J,baseRender:w?V:"d",scale:x?2:1,getContext:function(t,i){return t.getContext(nt,st)},mH:!1,wasm:i},testWepP(function(t){f.mH=t})}return f}var Browser=getSupport("undefined"==typeof config?[]:config),projections={},Projection=(Ac.prototype.moveWithPixel=function(t,i,e){var r=this.getResolution(e),e=i[0]*r,r=i[1]*r,t=this.project(t[0],t[1]);return this.unproject(t[0]+e,t[1]+r)},Ac.prototype.moveWithPos=function(t,i){return i=[(t=this.project(t[0],t[1]))[0]+i[0],t[1]+i[1]],this.unproject(i[0],i[1])},Ac);function Ac(t,i,e,r){this.project=i,this.unproject=e,this.getResolution=r,projections[t]=this}var ProjectionManager={getProjection:function(t){return projections[t]}},LngLat=new Projection("EPSG:4326",function(t,i){return[t,i]},function(t,i){return[t,i]},function(t){return.703125/Math.pow(2,t)}),SphericalMercator=(Zc=Math.PI/180,$c=180/Math.PI,_c=6378137,new Projection("EPSG:3857",function(t,i){var e=85.0511287798;return i=Math.max(Math.min(e,i),-e),t*=Zc,i*=Zc,i=Math.log(Math.tan(Math.PI/4+i/2)),[t*_c,i*_c]},function(t,i){return[t/_c*$c,(2*Math.atan(Math.exp(i/_c))-Math.PI/2)*$c]},function(t){return 156543.03392804097/Math.pow(2,t)})),Zc,$c,_c,E4326=ProjectionManager.getProjection("EPSG:4326"),E3857=ProjectionManager.getProjection("EPSG:3857"),HALF_WORLD_SIZE=20037508.342789244,LngLat$1={Ro:[-180,-90,180,90],project:function(t,i,e){return i=E4326.project(t,i),this.transform(i[0],i[1],e)},unproject:function(t,i,e){return e=this.Xs(t,i,e),E4326.unproject(e[0],e[1])},transform:function(t,i,e){var r=void 0===e?180:256<<e,n=2*r,a=this.Ro[2]-this.Ro[0],e=this.Ro[3]-this.Ro[1];return[t=(t-this.Ro[0])/a*n,i=r-(i-this.Ro[1])/e*r]},Xs:function(t,i,e){return[t=360*(t/(2*(e=void 0===e?180:256<<e))-.5),i=180*-(i/e-.5)]},nt:function(t,i,e){return this.Xs(t,i,e)},wu:function(t,i,e){return this.Xs(t,i,e)},yo:function(t,i,e){var r=0<t/this.Ro[3]?Math.abs(Math.floor(t/this.Ro[3])):Math.abs(Math.ceil(t/this.Ro[3])),n=0<i/this.Ro[3]?Math.abs(Math.floor(i/this.Ro[3])):Math.abs(Math.ceil(i/this.Ro[3])),a=t%this.Ro[3],o=i%this.Ro[3],o=this.transform(a,o,e);return t=this.wu(t,t,e)[0]*r+o[0],i=this.wu(i,i,e)[1]*n+o[1],[t-(e=this.transform(0,0,e))[0],i-e[1]]},Bb:function(t,i,e){return e.X(t,i)},qb:function(t,i,e){return e.H(t,i)},Gd:function(t,i,e,r){var n=r.X(t[0],t[1]);return[(e=r.X(t[0]+i,t[1]+e))[0]-n[0],e[1]-n[1]]}},SphericalMercator$1={Ro:[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],project:function(t,i,e){return i=E3857.project(t,i),this.transform(i[0],i[1],e)},unproject:function(t,i,e){return e=this.Xs(t,i,e),E3857.unproject(e[0],e[1])},transform:function(t,i,e){var r;t=Math.min(20037508.342789244,Math.max(t,-20037508.342789244)),i=Math.min(20037508.342789244,Math.max(i,-20037508.342789244)),r=void 0===e?40075016.68557849:256*Math.pow(2,e);var n=this.Ro[2]-this.Ro[0],e=this.Ro[3]-this.Ro[1];return[t=(t-this.Ro[0])/n*r,i=r-(i-this.Ro[1])/e*r]},Xs:function(t,i,e){return[t=(t/(e=void 0===e?40075016.68557849:256*Math.pow(2,e))-.5)*this.Ro[2]*2,i=-(i/e-.5)*this.Ro[2]*2]},nt:function(t,i,e,r){return[t=this.Xs(t,i,e)[0]-this.Ro[0],i=this.Ro[2]-this.Xs(t,i,e)[1]]},wu:function(t,i,e,r){var n=r.center,a=r.size,r=(r.rotation||0)/180*Math.PI,i=(t=this.transform(t,i,e))[0],t=t[1],e=i-(n=this.transform(n[0],n[1],e))[0],i=t-n[1],t=Math.sqrt(Math.pow(e,2)+Math.pow(i,2)),n=0==i?Math.PI/2:Math.atan(Math.abs(e/i)),r=e*i<=0?n+r:n-r,e=0<e?r:-r,i=0<i?1:-1;return[a[0]/2+t*Math.sin(e),a[1]/2+t*Math.cos(r)*i]},yo:function(t,i,e,r){var n=0<t/this.Ro[3]?Math.abs(Math.floor(t/this.Ro[3])):Math.abs(Math.ceil(t/this.Ro[3])),a=0<i/this.Ro[3]?Math.abs(Math.floor(i/this.Ro[3])):Math.abs(Math.ceil(i/this.Ro[3])),o=t%this.Ro[3],s=i%this.Ro[3],o=this.transform(o,s,e),e=(s=this.transform(0,0,e))[0],s=s[1];return[(t=e*n+o[0])-e,(i=s*a+o[1])-s]},Bb:function(t,i,e){return e.X(t,i)},qb:function(t,i,e){return e.H(t,i)},Gd:function(t,i,e,r){var n=r.X(t[0],t[1]);return[(e=r.X(t[0]+i,t[1]+e))[0]-n[0],e[1]-n[1]]}},transform={"EPSG:4326":LngLat$1,"EPSG:3857":SphericalMercator$1};Module.transform=transform;var isSupportFloat32Array="undefined"!=typeof Float32Array;isSupportFloat32Array||(window.Float32Array=void 0,setMatrixArrayType(Array));var EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array;function setMatrixArrayType(t){ARRAY_TYPE=t}function fromValues(t,i,e,r){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=i,n[2]=e,n[3]=r,n}function create(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function identity(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function invert(t,i){var e=i[0],r=i[1],n=i[2],a=i[3],o=i[4],s=i[5],h=i[6],u=i[7],l=i[8],c=i[9],f=i[10],d=i[11],v=i[12],g=i[13],p=i[14],y=i[15],b=e*s-r*o,x=e*h-n*o,m=e*u-a*o,w=r*h-n*s,R=r*u-a*s,T=n*u-a*h,A=l*g-c*v,M=l*p-f*v,S=l*y-d*v,P=c*p-f*g,C=c*y-d*g,$=f*y-d*p;return(i=b*$-x*C+m*P+w*S-R*M+T*A)?(i=1/i,t[0]=(s*$-h*C+u*P)*i,t[1]=(n*C-r*$-a*P)*i,t[2]=(g*T-p*R+y*w)*i,t[3]=(f*R-c*T-d*w)*i,t[4]=(h*S-o*$-u*M)*i,t[5]=(e*$-n*S+a*M)*i,t[6]=(p*m-v*T-y*x)*i,t[7]=(l*T-f*m+d*x)*i,t[8]=(o*C-s*S+u*A)*i,t[9]=(r*S-e*C-a*A)*i,t[10]=(v*R-g*m+y*b)*i,t[11]=(c*m-l*R-d*b)*i,t[12]=(s*M-o*P-h*A)*i,t[13]=(e*P-r*M+n*A)*i,t[14]=(g*x-v*w-p*b)*i,t[15]=(l*w-c*x+f*b)*i,t):null}function multiply(t,i,e){var r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],h=i[5],u=i[6],l=i[7],c=i[8],f=i[9],d=i[10],v=i[11],g=i[12],p=i[13],y=i[14],b=i[15],x=e[0],m=e[1],w=e[2],i=e[3];return t[0]=x*r+m*s+w*c+i*g,t[1]=x*n+m*h+w*f+i*p,t[2]=x*a+m*u+w*d+i*y,t[3]=x*o+m*l+w*v+i*b,x=e[4],m=e[5],w=e[6],i=e[7],t[4]=x*r+m*s+w*c+i*g,t[5]=x*n+m*h+w*f+i*p,t[6]=x*a+m*u+w*d+i*y,t[7]=x*o+m*l+w*v+i*b,x=e[8],m=e[9],w=e[10],i=e[11],t[8]=x*r+m*s+w*c+i*g,t[9]=x*n+m*h+w*f+i*p,t[10]=x*a+m*u+w*d+i*y,t[11]=x*o+m*l+w*v+i*b,x=e[12],m=e[13],w=e[14],i=e[15],t[12]=x*r+m*s+w*c+i*g,t[13]=x*n+m*h+w*f+i*p,t[14]=x*a+m*u+w*d+i*y,t[15]=x*o+m*l+w*v+i*b,t}function getTranslation(t,i){return t[0]=i[12],t[1]=i[13],t[2]=i[14],t}function perspective(t,i,e,r,n){return i=1/Math.tan(i/2),t[0]=i/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(i=1/(r-n),t[10]=(n+r)*i,t[14]=2*n*r*i):(t[10]=-1,t[14]=-2*r),t}function ortho(t,i,e,r,n,a,o){var s=1/(i-e),h=1/(r-n),u=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(i+e)*s,t[13]=(n+r)*h,t[14]=(o+a)*u,t[15]=1,t}function lookAt(t,i,e,r){var n,a=i[0],o=i[1],s=i[2],h=r[0],u=r[1],l=r[2],c=e[0],f=e[1],d=e[2];return Math.abs(a-c)<EPSILON&&Math.abs(o-f)<EPSILON&&Math.abs(s-d)<EPSILON?identity(t):(n=a-c,i=o-f,r=s-d,c=u*(r*=e=1/Math.hypot(n,i,r))-l*(i*=e),f=l*(n*=e)-h*r,d=h*i-u*n,(e=Math.hypot(c,f,d))?(c*=e=1/e,f*=e,d*=e):d=f=c=0,l=i*d-r*f,h=r*c-n*d,u=n*f-i*c,(e=Math.hypot(l,h,u))?(l*=e=1/e,h*=e,u*=e):u=h=l=0,t[0]=c,t[1]=l,t[2]=n,t[3]=0,t[4]=f,t[5]=h,t[6]=i,t[7]=0,t[8]=d,t[9]=u,t[10]=r,t[11]=0,t[12]=-(c*a+f*o+d*s),t[13]=-(l*a+h*o+u*s),t[14]=-(n*a+i*o+r*s),t[15]=1,t)}function equals(t,i){var e=t[0],r=t[1],n=t[2],a=t[3],o=t[4],s=t[5],h=t[6],u=t[7],l=t[8],c=t[9],f=t[10],d=t[11],v=t[12],g=t[13],p=t[14],y=t[15],b=i[0],x=i[1],m=i[2],w=i[3],R=i[4],T=i[5],A=i[6],M=i[7],S=i[8],P=i[9],C=i[10],$=i[11],I=i[12],k=i[13],t=i[14],i=i[15];return Math.abs(e-b)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(b))&&Math.abs(r-x)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(n-m)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(a-w)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-R)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(R))&&Math.abs(s-T)<=EPSILON*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(h-A)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(u-M)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(l-S)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(c-P)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(f-C)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(d-$)<=EPSILON*Math.max(1,Math.abs(d),Math.abs($))&&Math.abs(v-I)<=EPSILON*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(g-k)<=EPSILON*Math.max(1,Math.abs(g),Math.abs(k))&&Math.abs(p-t)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(t))&&Math.abs(y-i)<=EPSILON*Math.max(1,Math.abs(y),Math.abs(i))}function create$1(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function fromValues$1(t,i,e){var r=new ARRAY_TYPE(3);return r[0]=t,r[1]=i,r[2]=e,r}function copy(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t}function set(t,i,e,r){return t[0]=i,t[1]=e,t[2]=r,t}function subtract(t,i,e){return t[0]=i[0]-e[0],t[1]=i[1]-e[1],t[2]=i[2]-e[2],t}function cross(t,i,e){var r=i[0],n=i[1],a=i[2],o=e[0],i=e[1],e=e[2];return t[0]=n*e-a*i,t[1]=a*o-r*e,t[2]=r*i-n*o,t}Math.hypot||(Math.hypot=function(){for(var t=0,i=arguments.length;i--;)t+=arguments[i]*arguments[i];return Math.sqrt(t)});var sub=subtract,forEach=(Bi=create$1(),function(t,i,e,r,n,a){var o,s;for(i=i||3,e=e||0,s=r?Math.min(r*i+e,t.length):t.length,o=e;o<s;o+=i)Bi[0]=t[o],Bi[1]=t[o+1],Bi[2]=t[o+2],n(Bi,Bi,a),t[o]=Bi[0],t[o+1]=Bi[1],t[o+2]=Bi[2];return t}),Bi;function create$2(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function fromValues$2(t,i,e,r){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=i,n[2]=e,n[3]=r,n}function scale(t,i,e){return t[0]=i[0]*e,t[1]=i[1]*e,t[2]=i[2]*e,t[3]=i[3]*e,t}function transformMat4(t,i,e){var r=i[0],n=i[1],a=i[2],i=i[3];return t[0]=e[0]*r+e[4]*n+e[8]*a+e[12]*i,t[1]=e[1]*r+e[5]*n+e[9]*a+e[13]*i,t[2]=e[2]*r+e[6]*n+e[10]*a+e[14]*i,t[3]=e[3]*r+e[7]*n+e[11]*a+e[15]*i,t}var forEach$1=($i=create$2(),function(t,i,e,r,n,a){var o,s;for(i=i||4,e=e||0,s=r?Math.min(r*i+e,t.length):t.length,o=e;o<s;o+=i)$i[0]=t[o],$i[1]=t[o+1],$i[2]=t[o+2],$i[3]=t[o+3],n($i,$i,a),t[o]=$i[0],t[o+1]=$i[1],t[o+2]=$i[2],t[o+3]=$i[3];return t}),$i;function create$3(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function clone(t){var i=new ARRAY_TYPE(2);return i[0]=t[0],i[1]=t[1],i}function fromValues$3(t,i){var e=new ARRAY_TYPE(2);return e[0]=t,e[1]=i,e}function copy$1(t,i){return t[0]=i[0],t[1]=i[1],t}function set$1(t,i,e){return t[0]=i,t[1]=e,t}function add(t,i,e){return t[0]=i[0]+e[0],t[1]=i[1]+e[1],t}function subtract$1(t,i,e){return t[0]=i[0]-e[0],t[1]=i[1]-e[1],t}function multiply$1(t,i,e){return t[0]=i[0]*e[0],t[1]=i[1]*e[1],t}function scale$1(t,i,e){return t[0]=i[0]*e,t[1]=i[1]*e,t}function distance(t,i){var e=i[0]-t[0],t=i[1]-t[1];return Math.hypot(e,t)}function negate(t,i){return t[0]=-i[0],t[1]=-i[1],t}function normalize(t,i){var e=i[0],r=i[1];return 0<(r=e*e+r*r)&&(r=1/Math.sqrt(r)),t[0]=i[0]*r,t[1]=i[1]*r,t}function dot(t,i){return t[0]*i[0]+t[1]*i[1]}function cross$1(t,i,e){return e=i[0]*e[1]-i[1]*e[0],t[0]=t[1]=0,t[2]=e,t}function transformMat2(t,i,e){var r=i[0],i=i[1];return t[0]=e[0]*r+e[2]*i,t[1]=e[1]*r+e[3]*i,t}function rotate(t,i,e,r){var n=i[0]-e[0],a=i[1]-e[1],i=Math.sin(r),r=Math.cos(r);return t[0]=n*r-a*i+e[0],t[1]=n*i+a*r+e[1],t}function angle(t,i){var e=t[0],r=t[1],n=i[0],a=i[1];return 0<(t=e*e+r*r)&&(t=1/Math.sqrt(t)),0<(i=n*n+a*a)&&(i=1/Math.sqrt(i)),1<(i*=(e*n+r*a)*t)?0:i<-1?Math.PI:Math.acos(i)}function equals$1(t,i){var e=t[0],r=t[1],t=i[0],i=i[1];return Math.abs(e-t)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(t))&&Math.abs(r-i)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(i))}var sub$1=subtract$1,mul=multiply$1,dist=distance,forEach$2=(vk=create$3(),function(t,i,e,r,n,a){var o,s;for(i=i||2,e=e||0,s=r?Math.min(r*i+e,t.length):t.length,o=e;o<s;o+=i)vk[0]=t[o],vk[1]=t[o+1],n(vk,vk,a),t[o]=vk[0],t[o+1]=vk[1];return t}),vk;function isLngLat(t){return t&&"AMap.LngLat"===t.className}function isPixel(t){return t&&"AMap.Pixel"===t.className}function isSize(t){return t&&"AMap.Size"===t.className}function isLayer(t){return Boolean(t&&t.el&&"AMap.Layer"===t.el)}function isVectorLayer(t){return t&&"AMap.VectorLayer"===t.CLASS_NAME}function isOverlay(t){return t&&t.className&&Util.startsWith(t.className,"Overlay")}function isOverlayGroup(t){return t&&("Overlay.OverlayGroup"===t.className||"Overlay.GeoJSON"===t.className)}function isCircleMarker(t){return t&&t.className&&"Overlay.CircleMarker"===t.className}function isPolyline(t){return t&&t.className&&"Overlay.Polyline"===t.className}function isBezierCurve(t){return t&&t.className&&"Overlay.BezierCurve"===t.className}function isBounds(t){return t&&"AMap.Bounds"===t.className}function isNumber(t){return"number"==typeof+(t=+t)&&!isNaN(t)}function isNumberArray(t){return Array.isArray(t)&&isNumber(t[0])}function isNumberArrayArray(t){return Array.isArray(t)&&isNumberArray(t[0])}function isNumberArrayArrayArray(t){return Array.isArray(t)&&isNumberArrayArray(t[0])}function isNumberArrayArrayArrayArray(t){return Array.isArray(t)&&isNumberArrayArrayArray(t[0])}function isLnglatLike(t){return isLngLat(t)||isNumberArray(t)}function isLnglatLikeArray(t){return Array.isArray(t)&&isLnglatLike(t[0])}function isLnglatLikeArrayArray(t){return Array.isArray(t)&&isLnglatLikeArray(t[0])}function isLnglatLikeArrayArrayArray(t){return Array.isArray(t)&&isLnglatLikeArrayArray(t[0])}function isInnerLabelsLayer(t){return t&&"AMap.Inner.LabelsLayer"===t.CLASS_NAME}var Coordinate={lr:function(t,i){for(var e=1/0,r=0,n=1,a=i.length;n<a;r=n,n+=1)e=Math.min(e,this.ur(t,[i[r],i[n]]));return Math.sqrt(e)},ur:function(t,i){return this.cr(t,this.closestOnSegment(t,i))},cr:function(t,i){var e=t[0]-i[0];return e*e+(i=t[1]-i[1])*i},pr:function(t,i,e,r){if(r=r||1e-6,e[0]!==i[0])return n=Math.min(i[0],e[0]),a=Math.max(i[0],e[0]),i=(e[1]-i[1])/(e[0]-i[0])*(t[0]-i[0])+i[1],Math.abs(i-t[1])<r&&t[0]>=n&&t[0]<=a;var n=Math.min(i[1],e[1]),a=Math.max(i[1],e[1]);return Math.abs(t[0]-e[0])<r&&t[1]>=n&&t[1]<=a},closestOnSegment:function(t,i){var e,r=t[0],n=t[1],a=i[0],o=i[1],s=a[0],h=a[1],t=o[0],o=(i=o[1])-h,o=(n=0==(a=t-s)&&0==o?0:(a*(r-s)+o*(n-h))/(a*a+o*o||0))<=0?(e=s,h):1<=n?(e=t,i):(e=s+n*a,h+n*o);return[e,o]},isClockwise:function(t){for(var i,e,r=t.length,n=0,a=t[r-1],o=a[0],s=a[1],h=0;h<r;h+=1)n+=((i=(e=t[h])[0])-o)*((e=e[1])+s),o=i,s=e;return 0<n},ss:function(t,i,e){for(var r=t[0],n=t[1],a=!1,o=i.length,s=0,h=o-1;s<o;h=s,s+=1){var u=!1,l=i[s][0],c=i[s][1],f=i[h][0],d=i[h][1];if(l===r&&c===n||f===r&&d===n)return!!e;if(c<n==n<=d){if(r===(l=(f-l)*(n-c)/(d-c)+l))return!!e;u=r<l}u&&(a=!a)}return a},dr:function(t,i){for(var e,r,n=function(t,i,e){return(e[0]-i[0])*(t[1]-i[1])>(e[1]-i[1])*(t[0]-i[0])},a=function(t,i,e,r){var n=[t[0]-i[0],t[1]-i[1]],a=[e[0]-r[0],e[1]-r[1]],i=t[0]*i[1]-t[1]*i[0],e=e[0]*r[1]-e[1]*r[0];return[(i*a[0]-e*n[0])*(r=1/(n[0]*a[1]-n[1]*a[0])),(i*a[1]-e*n[1])*r]},o=t,s=i[i.length-2],h=0,u=i.length-1;h<u;h++){e=i[h];for(var l=o,o=[],c=l[l.length-1],f=0,d=l.length;f<d;f++)n(r=l[f],s,e)?(n(c,s,e)||o.push(a(s,e,c,r)),o.push(r)):n(c,s,e)&&o.push(a(s,e,c,r)),c=r;s=e}return o.length<3?[]:(o.push(o[0]),o)}},freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol=root.Symbol,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol?Symbol.toStringTag:void 0;function getRawTag(t){var i=hasOwnProperty.call(t,symToStringTag),e=t[symToStringTag];try{var r=!(t[symToStringTag]=void 0)}catch(t){}var n=nativeObjectToString.call(t);return r&&(i?t[symToStringTag]=e:delete t[symToStringTag]),n}var objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(t){return nativeObjectToString$1.call(t)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=Symbol?Symbol.toStringTag:void 0;function baseGetTag(t){return null==t?void 0===t?undefinedTag:nullTag:(symToStringTag$1&&symToStringTag$1 in Object(t)?getRawTag:objectToString)(t)}function isObjectLike(t){return null!=t&&"object"==typeof t}var symbolTag="[object Symbol]";function isSymbol(t){return"symbol"==typeof t||isObjectLike(t)&&baseGetTag(t)==symbolTag}function arrayMap(t,i){for(var e=-1,r=null==t?0:t.length,n=Array(r);++e<r;)n[e]=i(t[e],e,t);return n}var isArray=Array.isArray,INFINITY=1/0,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(t){if("string"==typeof t)return t;if(isArray(t))return arrayMap(t,baseToString)+"";if(isSymbol(t))return symbolToString?symbolToString.call(t):"";var i=t+"";return"0"==i&&1/t==-INFINITY?"-0":i}function isObject(t){var i=typeof t;return null!=t&&("object"==i||"function"==i)}var NAN=NaN,reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(t){if("number"==typeof t)return t;if(isSymbol(t))return NAN;if(isObject(t)&&(t=isObject(i="function"==typeof t.valueOf?t.valueOf():t)?i+"":i),"string"!=typeof t)return 0===t?t:+t;t=t.replace(reTrim,"");var i=reIsBinary.test(t);return i||reIsOctal.test(t)?freeParseInt(t.slice(2),i?2:8):reIsBadHex.test(t)?NAN:+t}var INFINITY$1=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(t){return t?(t=toNumber(t))!==INFINITY$1&&t!==-INFINITY$1?t==t?t:0:(t<0?-1:1)*MAX_INTEGER:0===t?t:0}function toInteger(t){var i=toFinite(t),t=i%1;return i==i?t?i-t:i:0}function identity$1(t){return t}var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(t){return!!isObject(t)&&((t=baseGetTag(t))==funcTag||t==genTag||t==asyncTag||t==proxyTag)}var coreJsData=root["__core-js_shared__"],maskSrcKey=(hn=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.Xb||""),hn?"Symbol(src)_1."+hn:""),hn;function isMasked(t){return maskSrcKey&&maskSrcKey in t}var funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(t){if(null!=t){try{return funcToString.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$2=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$1=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(t){return isObject(t)&&!isMasked(t)&&(isFunction(t)?reIsNative:reIsHostCtor).test(toSource(t))}function getValue(t,i){return null==t?void 0:t[i]}function getNative(t,i){return baseIsNative(i=getValue(t,i))?i:void 0}var WeakMap=getNative(root,"WeakMap"),objectCreate=Object.create,baseCreate=function(t){return isObject(t)?objectCreate?objectCreate(t):(un.prototype=t,t=new un,un.prototype=void 0,t):{}};function un(){}function apply(t,i,e){switch(e.length){case 0:return t.call(i);case 1:return t.call(i,e[0]);case 2:return t.call(i,e[0],e[1]);case 3:return t.call(i,e[0],e[1],e[2])}return t.apply(i,e)}function copyArray(t,i){var e=-1,r=t.length;for(i=i||Array(r);++e<r;)i[e]=t[e];return i}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(e){var r=0,n=0;return function(){var t=nativeNow(),i=HOT_SPAN-(t-n);if(n=t,0<i){if(++r>=HOT_COUNT)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}function constant(t){return function(){return t}}var defineProperty=function(){try{var t=getNative(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),baseSetToString=defineProperty?function(t,i){return defineProperty(t,"toString",{configurable:!0,enumerable:!1,value:constant(i),writable:!0})}:identity$1,setToString=shortOut(baseSetToString);function arrayEach(t,i){for(var e=-1,r=null==t?0:t.length;++e<r&&!1!==i(t[e],e,t););return t}function baseFindIndex(t,i,e,r){for(var n=t.length,a=e+(r?1:-1);r?a--:++a<n;)if(i(t[a],a,t))return a;return-1}var MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(t,i){var e=typeof t;return!!(i=null==i?MAX_SAFE_INTEGER:i)&&("number"==e||"symbol"!=e&&reIsUint.test(t))&&-1<t&&t%1==0&&t<i}function baseAssignValue(t,i,e){"__proto__"==i&&defineProperty?defineProperty(t,i,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[i]=e}function eq(t,i){return t===i||t!=t&&i!=i}var objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function assignValue(t,i,e){var r=t[i];hasOwnProperty$2.call(t,i)&&eq(r,e)&&(void 0!==e||i in t)||baseAssignValue(t,i,e)}function copyObject(t,i,e,r){var n=!e;e=e||{};for(var a=-1,o=i.length;++a<o;){var s=i[a],h=r?r(e[s],t[s],s,e,t):void 0;void 0===h&&(h=t[s]),(n?baseAssignValue:assignValue)(e,s,h)}return e}var nativeMax=Math.max;function overRest(a,o,s){return o=nativeMax(void 0===o?a.length-1:o,0),function(){for(var t=arguments,i=-1,e=nativeMax(t.length-o,0),r=Array(e);++i<e;)r[i]=t[o+i];i=-1;for(var n=Array(o+1);++i<o;)n[i]=t[i];return n[o]=s(r),apply(a,this,n)}}function baseRest(t,i){return setToString(overRest(t,i,identity$1),t+"")}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=MAX_SAFE_INTEGER$1}function isArrayLike(t){return null!=t&&isLength(t.length)&&!isFunction(t)}function isIterateeCall(t,i,e){if(isObject(e)){var r=typeof i;return("number"==r?isArrayLike(e)&&isIndex(i,e.length):"string"==r&&i in e)&&eq(e[i],t)}}function createAssigner(s){return baseRest(function(t,i){var e=-1,r=i.length,n=1<r?i[r-1]:void 0,a=2<r?i[2]:void 0,n=3<s.length&&"function"==typeof n?(r--,n):void 0;for(a&&isIterateeCall(i[0],i[1],a)&&(n=r<3?void 0:n,r=1),t=Object(t);++e<r;){var o=i[e];o&&s(t,o,e,n)}return t})}var objectProto$4=Object.prototype;function isPrototype(t){var i=t&&t.constructor;return t===("function"==typeof i&&i.prototype||objectProto$4)}function baseTimes(t,i){for(var e=-1,r=Array(t);++e<t;)r[e]=i(e);return r}var argsTag="[object Arguments]";function baseIsArguments(t){return isObjectLike(t)&&baseGetTag(t)==argsTag}var objectProto$5=Object.prototype,hasOwnProperty$3=objectProto$5.hasOwnProperty,propertyIsEnumerable=objectProto$5.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike(t)&&hasOwnProperty$3.call(t,"callee")&&!propertyIsEnumerable.call(t,"callee")};function stubFalse(){return!1}var freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root.Zb:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(t){return isObjectLike(t)&&isLength(t.length)&&!!typedArrayTags[baseGetTag(t)]}function baseUnary(i){return function(t){return i(t)}}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var freeExports$1="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var t=freeModule$1&&freeModule$1.Qb&&freeModule$1.Qb("util").types;return t||freeProcess&&freeProcess.tg&&freeProcess.tg("util")}catch(t){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.rg,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$6=Object.prototype,hasOwnProperty$4=objectProto$6.hasOwnProperty;function arrayLikeKeys(t,i){var e,r=isArray(t),n=!r&&isArguments(t),a=!r&&!n&&isBuffer(t),o=!r&&!n&&!a&&isTypedArray(t),s=r||n||a||o,h=s?baseTimes(t.length,String):[],u=h.length;for(e in t)!i&&!hasOwnProperty$4.call(t,e)||s&&("length"==e||a&&("offset"==e||"parent"==e)||o&&("buffer"==e||"byteLength"==e||"byteOffset"==e)||isIndex(e,u))||h.push(e);return h}function overArg(i,e){return function(t){return i(e(t))}}var nativeKeys=overArg(Object.keys,Object),objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function baseKeys(t){if(!isPrototype(t))return nativeKeys(t);var i,e=[];for(i in Object(t))hasOwnProperty$5.call(t,i)&&"constructor"!=i&&e.push(i);return e}function keys(t){return(isArrayLike(t)?arrayLikeKeys:baseKeys)(t)}var objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty,assign=createAssigner(function(t,i){if(isPrototype(i)||isArrayLike(i))copyObject(i,keys(i),t);else for(var e in i)hasOwnProperty$6.call(i,e)&&assignValue(t,e,i[e])});function nativeKeysIn(t){var i=[];if(null!=t)for(var e in Object(t))i.push(e);return i}var objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty;function baseKeysIn(t){if(!isObject(t))return nativeKeysIn(t);var i,e=isPrototype(t),r=[];for(i in t)("constructor"!=i||!e&&hasOwnProperty$7.call(t,i))&&r.push(i);return r}function keysIn$1(t){return isArrayLike(t)?arrayLikeKeys(t,!0):baseKeysIn(t)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(t,i){if(!isArray(t)){var e=typeof t;return"number"==e||"symbol"==e||"boolean"==e||null==t||isSymbol(t)||reIsPlainProp.test(t)||!reIsDeepProp.test(t)||null!=i&&t in Object(i)}}var nativeCreate=getNative(Object,"create");function hashClear(){this.ng=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(t){return t=this.has(t)&&delete this.ng[t],this.size-=t?1:0,t}var HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty;function hashGet(t){var i=this.ng;if(nativeCreate){var e=i[t];return e===HASH_UNDEFINED?void 0:e}return hasOwnProperty$8.call(i,t)?i[t]:void 0}var objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty;function hashHas(t){var i=this.ng;return nativeCreate?void 0!==i[t]:hasOwnProperty$9.call(i,t)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(t,i){var e=this.ng;return this.size+=this.has(t)?0:1,e[t]=nativeCreate&&void 0===i?HASH_UNDEFINED$1:i,this}function Hash(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var r=t[i];this.set(r[0],r[1])}}function listCacheClear(){this.ng=[],this.size=0}function assocIndexOf(t,i){for(var e=t.length;e--;)if(eq(t[e][0],i))return e;return-1}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet;var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(t){var i=this.ng;return!((t=assocIndexOf(i,t))<0||(t==i.length-1?i.pop():splice.call(i,t,1),--this.size,0))}function listCacheGet(t){var i=this.ng;return(t=assocIndexOf(i,t))<0?void 0:i[t][1]}function listCacheHas(t){return-1<assocIndexOf(this.ng,t)}function listCacheSet(t,i){var e=this.ng,r=assocIndexOf(e,t);return r<0?(++this.size,e.push([t,i])):e[r][1]=i,this}function ListCache(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var r=t[i];this.set(r[0],r[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.ng={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(t){var i=typeof t;return"string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t}function getMapData(t,i){return t=t.ng,isKeyable(i)?t["string"==typeof i?"string":"hash"]:t.map}function mapCacheDelete(t){return t=getMapData(this,t).delete(t),this.size-=t?1:0,t}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,i){var e=getMapData(this,t),r=e.size;return e.set(t,i),this.size+=e.size==r?0:1,this}function MapCache(t){var i=-1,e=null==t?0:t.length;for(this.clear();++i<e;){var r=t[i];this.set(r[0],r[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(r,n){if("function"!=typeof r||null!=n&&"function"!=typeof n)throw new TypeError(FUNC_ERROR_TEXT);var a=function(){var t=arguments,i=n?n.apply(this,t):t[0],e=a.cache;return e.has(i)?e.get(i):(t=r.apply(this,t),a.cache=e.set(i,t)||e,t)};return a.cache=new(memoize.Cache||MapCache),a}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(t){var i=(t=memoize(t,function(t){return i.size===MAX_MEMOIZE_SIZE&&i.clear(),t})).cache;return t}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(rePropName,function(t,i,e,r){n.push(e?r.replace(reEscapeChar,"$1"):i||t)}),n});function toString(t){return null==t?"":baseToString(t)}function castPath(t,i){return isArray(t)?t:isKey(t,i)?[t]:stringToPath(toString(t))}var INFINITY$2=1/0;function toKey(t){if("string"==typeof t||isSymbol(t))return t;var i=t+"";return"0"==i&&1/t==-INFINITY$2?"-0":i}function baseGet(t,i){for(var e=0,r=(i=castPath(i,t)).length;null!=t&&e<r;)t=t[toKey(i[e++])];return e&&e==r?t:void 0}function get(t,i,e){return void 0===(i=null==t?void 0:baseGet(t,i))?e:i}function arrayPush(t,i){for(var e=-1,r=i.length,n=t.length;++e<r;)t[n+e]=i[e];return t}var getPrototype=overArg(Object.getPrototypeOf,Object);function stackClear(){this.ng=new ListCache,this.size=0}function stackDelete(t){var i=this.ng,t=i.delete(t);return this.size=i.size,t}function stackGet(t){return this.ng.get(t)}function stackHas(t){return this.ng.has(t)}var LARGE_ARRAY_SIZE=200;function stackSet(t,i){var e=this.ng;if(e instanceof ListCache){var r=e.ng;if(!Map$1||r.length<LARGE_ARRAY_SIZE-1)return r.push([t,i]),this.size=++e.size,this;e=this.ng=new MapCache(r)}return e.set(t,i),this.size=e.size,this}function Stack(t){t=this.ng=new ListCache(t),this.size=t.size}function baseAssign(t,i){return t&&copyObject(i,keys(i),t)}function baseAssignIn(t,i){return t&&copyObject(i,keysIn$1(i),t)}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var freeExports$2="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$1=moduleExports$2?root.Zb:void 0,allocUnsafe=Buffer$1?Buffer$1.ig:void 0;function cloneBuffer(t,i){return i?t.slice():(i=t.length,i=allocUnsafe?allocUnsafe(i):new t.constructor(i),t.eg(i),i)}function arrayFilter(t,i){for(var e=-1,r=null==t?0:t.length,n=0,a=[];++e<r;){var o=t[e];i(o,e,t)&&(a[n++]=o)}return a}function stubArray(){return[]}var objectProto$c=Object.prototype,propertyIsEnumerable$1=objectProto$c.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(i){return null==i?[]:(i=Object(i),arrayFilter(nativeGetSymbols(i),function(t){return propertyIsEnumerable$1.call(i,t)}))}:stubArray;function copySymbols(t,i){return copyObject(t,getSymbols(t),i)}var nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols$1?function(t){for(var i=[];t;)arrayPush(i,getSymbols(t)),t=getPrototype(t);return i}:stubArray;function copySymbolsIn(t,i){return copyObject(t,getSymbolsIn(t),i)}function baseGetAllKeys(t,i,e){return i=i(t),isArray(t)?i:arrayPush(i,e(t))}function getAllKeys(t){return baseGetAllKeys(t,keys,getSymbols)}function getAllKeysIn(t){return baseGetAllKeys(t,keysIn$1,getSymbolsIn)}var DataView=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set=getNative(root,"Set"),mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag$1||Map$1&&getTag(new Map$1)!=mapTag$1||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$1||WeakMap&&getTag(new WeakMap)!=weakMapTag$1)&&(getTag=function(t){var i=baseGetTag(t);if(t=(t=i==objectTag$1?t.constructor:void 0)?toSource(t):"")switch(t){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag$1}return i});var getTag$1=getTag,objectProto$d=Object.prototype,hasOwnProperty$a=objectProto$d.hasOwnProperty;function initCloneArray(t){var i=t.length,e=new t.constructor(i);return i&&"string"==typeof t[0]&&hasOwnProperty$a.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(t){var i=new t.constructor(t.byteLength);return new Uint8Array$1(i).set(new Uint8Array$1(t)),i}function cloneDataView(t,i){return i=i?cloneArrayBuffer(t.buffer):t.buffer,new t.constructor(i,t.byteOffset,t.byteLength)}var reFlags=/\w*$/;function cloneRegExp(t){var i=new t.constructor(t.source,reFlags.exec(t));return i.lastIndex=t.lastIndex,i}var symbolProto$1=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(t){return symbolValueOf?Object(symbolValueOf.call(t)):{}}function cloneTypedArray(t,i){return i=i?cloneArrayBuffer(t.buffer):t.buffer,new t.constructor(i,t.byteOffset,t.length)}var boolTag$1="[object Boolean]",dateTag$1="[object Date]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(t,i,e){var r=t.constructor;switch(i){case arrayBufferTag$1:return cloneArrayBuffer(t);case boolTag$1:case dateTag$1:return new r(+t);case dataViewTag$2:return cloneDataView(t,e);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(t,e);case mapTag$2:return new r;case numberTag$1:case stringTag$1:return new r(t);case regexpTag$1:return cloneRegExp(t);case setTag$2:return new r;case symbolTag$1:return cloneSymbol(t)}}function initCloneObject(t){return"function"!=typeof t.constructor||isPrototype(t)?{}:baseCreate(getPrototype(t))}var mapTag$3="[object Map]";function baseIsMap(t){return isObjectLike(t)&&getTag$1(t)==mapTag$3}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$3="[object Set]";function baseIsSet(t){return isObjectLike(t)&&getTag$1(t)==setTag$3}var nodeIsSet=nodeUtil&&nodeUtil.og,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,argsTag$2="[object Arguments]",arrayTag$1="[object Array]",boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$1="[object Error]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",mapTag$4="[object Map]",numberTag$2="[object Number]",objectTag$2="[object Object]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",weakMapTag$2="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",cloneableTags={};function baseClone(e,r,n,t,i,a){var o,s=r&CLONE_DEEP_FLAG,h=r&CLONE_FLAT_FLAG,u=r&CLONE_SYMBOLS_FLAG;if(n&&(o=i?n(e,t,i,a):n(e)),void 0!==o)return o;if(!isObject(e))return e;var l=isArray(e);if(l){if(o=initCloneArray(e),!s)return copyArray(e,o)}else{var c=getTag$1(e),t=c==funcTag$2||c==genTag$1;if(isBuffer(e))return cloneBuffer(e,s);if(c==objectTag$2||c==argsTag$2||t&&!i){if(o=h||t?{}:initCloneObject(e),!s)return h?copySymbolsIn(e,baseAssignIn(o,e)):copySymbols(e,baseAssign(o,e))}else{if(!cloneableTags[c])return i?e:{};o=initCloneByTag(e,c,s)}}if(s=(a=a||new Stack).get(e))return s;a.set(e,o),isSet(e)?e.forEach(function(t){o.add(baseClone(t,r,n,t,e,a))}):isMap(e)&&e.forEach(function(t,i){o.set(i,baseClone(t,r,n,i,e,a))});var h=u?h?getAllKeysIn:getAllKeys:h?keysIn:keys,f=l?void 0:h(e);return arrayEach(f||e,function(t,i){f&&(t=e[i=t]),assignValue(o,i,baseClone(t,r,n,i,e,a))}),o}cloneableTags[argsTag$2]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$2]=cloneableTags[dataViewTag$3]=cloneableTags[boolTag$2]=cloneableTags[dateTag$2]=cloneableTags[float32Tag$2]=cloneableTags[float64Tag$2]=cloneableTags[int8Tag$2]=cloneableTags[int16Tag$2]=cloneableTags[int32Tag$2]=cloneableTags[mapTag$4]=cloneableTags[numberTag$2]=cloneableTags[objectTag$2]=cloneableTags[regexpTag$2]=cloneableTags[setTag$4]=cloneableTags[stringTag$2]=cloneableTags[symbolTag$2]=cloneableTags[uint8Tag$2]=cloneableTags[uint8ClampedTag$2]=cloneableTags[uint16Tag$2]=cloneableTags[uint32Tag$2]=!0,cloneableTags[errorTag$1]=cloneableTags[funcTag$2]=cloneableTags[weakMapTag$2]=!1;var CLONE_SYMBOLS_FLAG$1=4;function clone$1(t){return baseClone(t,CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG$1=1,CLONE_SYMBOLS_FLAG$2=4;function cloneDeep(t){return baseClone(t,CLONE_DEEP_FLAG$1|CLONE_SYMBOLS_FLAG$2)}var HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd(t){return this.ng.set(t,HASH_UNDEFINED$2),this}function setCacheHas(t){return this.ng.has(t)}function SetCache(t){var i=-1,e=null==t?0:t.length;for(this.ng=new MapCache;++i<e;)this.add(t[i])}function arraySome(t,i){for(var e=-1,r=null==t?0:t.length;++e<r;)if(i(t[e],e,t))return!0;return!1}function cacheHas(t,i){return t.has(i)}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas;var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(t,i,e,r,n,a){var o=e&COMPARE_PARTIAL_FLAG,s=t.length,h=i.length;if(s!=h&&!(o&&s<h))return!1;if((h=a.get(t))&&a.get(i))return h==i;var u=-1,l=!0,c=e&COMPARE_UNORDERED_FLAG?new SetCache:void 0;for(a.set(t,i),a.set(i,t);++u<s;){var f,d=t[u],v=i[u];if(r&&(f=o?r(v,d,u,i,t,a):r(d,v,u,t,i,a)),void 0!==f){if(f)continue;l=!1;break}if(c){if(!arraySome(i,function(t,i){if(!cacheHas(c,i)&&(d===t||n(d,t,e,r,a)))return c.push(i)})){l=!1;break}}else if(d!==v&&!n(d,v,e,r,a)){l=!1;break}}return a.delete(t),a.delete(i),l}function mapToArray(t){var e=-1,r=Array(t.size);return t.forEach(function(t,i){r[++e]=[i,t]}),r}function setToArray(t){var i=-1,e=Array(t.size);return t.forEach(function(t){e[++i]=t}),e}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2,boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",mapTag$5="[object Map]",numberTag$3="[object Number]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",symbolTag$3="[object Symbol]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",symbolProto$2=Symbol?Symbol.prototype:void 0,symbolValueOf$1=symbolProto$2?symbolProto$2.valueOf:void 0;function equalByTag(t,i,e,r,n,a,o){switch(e){case dataViewTag$4:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case arrayBufferTag$3:return!(t.byteLength!=i.byteLength||!a(new Uint8Array$1(t),new Uint8Array$1(i)));case boolTag$3:case dateTag$3:case numberTag$3:return eq(+t,+i);case errorTag$2:return t.name==i.name&&t.message==i.message;case regexpTag$3:case stringTag$3:return t==i+"";case mapTag$5:var s=mapToArray;case setTag$5:return(e=r&COMPARE_PARTIAL_FLAG$1,s=s||setToArray,t.size==i.size||e)?(e=o.get(t))?e==i:(r|=COMPARE_UNORDERED_FLAG$1,o.set(t,i),a=equalArrays(s(t),s(i),r,n,a,o),o.delete(t),a):!1;case symbolTag$3:if(symbolValueOf$1)return symbolValueOf$1.call(t)==symbolValueOf$1.call(i)}return!1}var COMPARE_PARTIAL_FLAG$2=1,objectProto$e=Object.prototype,hasOwnProperty$b=objectProto$e.hasOwnProperty;function equalObjects(t,i,e,r,n,a){var o=e&COMPARE_PARTIAL_FLAG$2,s=getAllKeys(t),h=s.length;if(h!=getAllKeys(i).length&&!o)return!1;for(var u=h;u--;){var l=s[u];if(!(o?l in i:hasOwnProperty$b.call(i,l)))return!1}var c=a.get(t);if(c&&a.get(i))return c==i;var f=!0;a.set(t,i),a.set(i,t);for(var d,v=o;++u<h;){var g,p=t[l=s[u]],y=i[l];if(r&&(g=o?r(y,p,l,i,t,a):r(p,y,l,t,i,a)),!(void 0===g?p===y||n(p,y,e,r,a):g)){f=!1;break}v=v||"constructor"==l}return!f||v||(d=t.constructor)!=(c=i.constructor)&&"constructor"in t&&"constructor"in i&&!("function"==typeof d&&d instanceof d&&"function"==typeof c&&c instanceof c)&&(f=!1),a.delete(t),a.delete(i),f}var COMPARE_PARTIAL_FLAG$3=1,argsTag$3="[object Arguments]",arrayTag$2="[object Array]",objectTag$3="[object Object]",objectProto$f=Object.prototype,hasOwnProperty$c=objectProto$f.hasOwnProperty;function baseIsEqualDeep(t,i,e,r,n,a){var o=isArray(t),s=isArray(i),h=o?arrayTag$2:getTag$1(t),u=s?arrayTag$2:getTag$1(i),l=(h=h==argsTag$3?objectTag$3:h)==objectTag$3,s=(u=u==argsTag$3?objectTag$3:u)==objectTag$3;if((u=h==u)&&isBuffer(t)){if(!isBuffer(i))return!1;l=!(o=!0)}return u&&!l?(a=a||new Stack,o||isTypedArray(t)?equalArrays(t,i,e,r,n,a):equalByTag(t,i,h,e,r,n,a)):e&COMPARE_PARTIAL_FLAG$3||(l=l&&hasOwnProperty$c.call(t,"__wrapped__"),s=s&&hasOwnProperty$c.call(i,"__wrapped__"),!l&&!s)?!!u&&equalObjects(t,i,e,r,n,a=a||new Stack):n(l?t.value():t,s?i.value():i,e,r,a=a||new Stack)}function baseIsEqual(t,i,e,r,n){return t===i||(null==t||null==i||!isObjectLike(t)&&!isObjectLike(i)?t!=t&&i!=i:baseIsEqualDeep(t,i,e,r,baseIsEqual,n))}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2;function baseIsMatch(t,i,e,r){var n=e.length,a=n,o=!r;if(null==t)return!a;for(t=Object(t);n--;){var s=e[n];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++n<a;){var h=(s=e[n])[0],u=t[h],l=s[1];if(o&&s[2]){if(void 0===u&&!(h in t))return!1}else{var c,f=new Stack;if(r&&(c=r(u,l,h,t,i,f)),!(void 0===c?baseIsEqual(l,u,COMPARE_PARTIAL_FLAG$4|COMPARE_UNORDERED_FLAG$2,r,f):c))return!1}}return!0}function isStrictComparable(t){return t==t&&!isObject(t)}function getMatchData(t){for(var i=keys(t),e=i.length;e--;){var r=i[e],n=t[r];i[e]=[r,n,isStrictComparable(n)]}return i}function matchesStrictComparable(i,e){return function(t){return null!=t&&t[i]===e&&(void 0!==e||i in Object(t))}}function baseMatches(i){var e=getMatchData(i);return 1==e.length&&e[0][2]?matchesStrictComparable(e[0][0],e[0][1]):function(t){return t===i||baseIsMatch(t,i,e)}}function baseHasIn(t,i){return null!=t&&i in Object(t)}function hasPath(t,i,e){for(var r=-1,n=(i=castPath(i,t)).length,a=!1;++r<n;){var o=toKey(i[r]);if(!(a=null!=t&&e(t,o)))break;t=t[o]}return a||++r!=n?a:!!(n=null==t?0:t.length)&&isLength(n)&&isIndex(o,n)&&(isArray(t)||isArguments(t))}function hasIn(t,i){return null!=t&&hasPath(t,i,baseHasIn)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(e,r){return isKey(e)&&isStrictComparable(r)?matchesStrictComparable(toKey(e),r):function(t){var i=get(t,e);return void 0===i&&i===r?hasIn(t,e):baseIsEqual(r,i,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}function baseProperty(i){return function(t){return null==t?void 0:t[i]}}function basePropertyDeep(i){return function(t){return baseGet(t,i)}}function property(t){return isKey(t)?baseProperty(toKey(t)):basePropertyDeep(t)}function baseIteratee(t){return"function"==typeof t?t:null==t?identity$1:"object"==typeof t?isArray(t)?baseMatchesProperty(t[0],t[1]):baseMatches(t):property(t)}function createBaseFor(h){return function(t,i,e){for(var r=-1,n=Object(t),a=e(t),o=a.length;o--;){var s=a[h?o:++r];if(!1===i(n[s],s,n))break}return t}}var baseFor=createBaseFor();function baseForOwn(t,i){return t&&baseFor(t,i,keys)}function createBaseEach(a,o){return function(t,i){if(null==t)return t;if(!isArrayLike(t))return a(t,i);for(var e=t.length,r=o?e:-1,n=Object(t);(o?r--:++r<e)&&!1!==i(n[r],r,n););return t}}var baseEach=createBaseEach(baseForOwn);function castFunction(t){return"function"==typeof t?t:identity$1}function forEach$3(t,i){return(isArray(t)?arrayEach:baseEach)(t,castFunction(i))}function arrayEvery(t,i){for(var e=-1,r=null==t?0:t.length;++e<r;)if(!i(t[e],e,t))return!1;return!0}function baseEvery(t,r){var n=!0;return baseEach(t,function(t,i,e){return n=!!r(t,i,e)}),n}function every(t,i,e){var r=isArray(t)?arrayEvery:baseEvery;return e&&isIterateeCall(t,i,e)&&(i=void 0),r(t,baseIteratee(i))}function baseFilter(t,r){var n=[];return baseEach(t,function(t,i,e){r(t,i,e)&&n.push(t)}),n}function filter(t,i){return(isArray(t)?arrayFilter:baseFilter)(t,baseIteratee(i))}function createFind(a){return function(t,i,e){var r,n=Object(t);return isArrayLike(t)||(r=baseIteratee(i),t=keys(t),i=function(t){return r(n[t],t,n)}),-1<(e=a(t,i,e))?n[r?t[e]:e]:void 0}}var nativeMax$1=Math.max;function findIndex(t,i,e){var r=null==t?0:t.length;return r?((e=null==e?0:toInteger(e))<0&&(e=nativeMax$1(r+e,0)),baseFindIndex(t,baseIteratee(i),e)):-1}var find=createFind(findIndex);function baseMap(t,r){var n=-1,a=isArrayLike(t)?Array(t.length):[];return baseEach(t,function(t,i,e){a[++n]=r(t,i,e)}),a}function map(t,i){return(isArray(t)?arrayMap:baseMap)(t,baseIteratee(i))}function forIn(t,i){return null==t?t:baseFor(t,castFunction(i),keysIn$1)}var mapTag$6="[object Map]",setTag$6="[object Set]",objectProto$g=Object.prototype,hasOwnProperty$d=objectProto$g.hasOwnProperty;function isEmpty(t){if(null==t)return!0;if(isArrayLike(t)&&(isArray(t)||"string"==typeof t||"function"==typeof t.splice||isBuffer(t)||isTypedArray(t)||isArguments(t)))return!t.length;var i,e=getTag$1(t);if(e==mapTag$6||e==setTag$6)return!t.size;if(isPrototype(t))return!baseKeys(t).length;for(i in t)if(hasOwnProperty$d.call(t,i))return!1;return!0}function isEqual(t,i){return baseIsEqual(t,i)}function isUndefined(t){return void 0===t}function baseSome(t,r){var n;return baseEach(t,function(t,i,e){return!(n=r(t,i,e))}),!!n}function some(t,i,e){var r=isArray(t)?arraySome:baseSome;return e&&isIterateeCall(t,i,e)&&(i=void 0),r(t,baseIteratee(i))}var Pixel=(_w.prototype.getX=function(){return this.x},_w.prototype.round=function(){return new _w(Math.round(this.x),Math.round(this.y))},_w.prototype.getY=function(){return this.y},_w.prototype.toString=function(){return this.x+","+this.y},_w.prototype.equals=function(t){return t instanceof _w&&Math.max(Math.abs(this.x-t.x),Math.abs(this.y-t.y))<=1e-9},_w.prototype.toArray=function(){return[this.x,this.y]},_w.prototype.subtract=function(t,i){return new _w(this.x-t.x,this.y-t.y,i)},_w.prototype.multiplyBy=function(t,i){return new _w(this.x*t,this.y*t,i)},_w.prototype.direction=function(){var t=this.x,i=this.y;if(0===t&&0===i)return null;if(0===t)return 0<i?90:270;var e=180*Math.atan(i/t)/Math.PI;return t<0&&0<i||t<0&&i<0?180+e:0<t&&i<0?360+e:e},_w.prototype.toJSON=function(){return[this.x,this.y]},_w);function _w(t,i,e){if(void 0===e&&(e=!1),this.className="AMap.Pixel",isNaN(t)||isNaN(i))throw new Error("Invalid Object: Pixel("+t+", "+i+")");this.x=e?Math.round(t):Number(t),this.y=e?Math.round(i):Number(i)}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function unwrapExports(t){return t&&t.gP&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function createCommonjsModule(t,i){return t(i={exports:{}},i.exports),i.exports}var dist$1=createCommonjsModule(function(t,i){!function(t){function r(t,i){return i<t?1:t<i?-1:0}var p=function(i,e){void 0===i&&(i=r),void 0===e&&(e=!1),this.bP=i,this.yP=null,this._size=0,this.mP=!!e},vt={size:{configurable:!0}};p.prototype.TP=function(i){var e=i.right;e&&(i.right=e.left,e.left&&(e.left.parent=i),e.parent=i.parent),i.parent?i===i.parent.left?i.parent.left=e:i.parent.right=e:this.yP=e,e&&(e.left=i),i.parent=e},p.prototype.wP=function(i){var e=i.left;e&&(i.left=e.right,e.right&&(e.right.parent=i),e.parent=i.parent),i.parent?i===i.parent.left?i.parent.left=e:i.parent.right=e:this.yP=e,e&&(e.right=i),i.parent=e},p.prototype.AP=function(i){for(;i.parent;){var e=i.parent;e.parent?e.left===i&&e.parent.left===e?(this.wP(e.parent),this.wP(e)):e.right===i&&e.parent.right===e?(this.TP(e.parent),this.TP(e)):e.left===i&&e.parent.right===e?(this.wP(e),this.TP(e)):(this.TP(e),this.wP(e)):e.left===i?this.wP(e):this.TP(e)}},p.prototype.xP=function(i){for(var e,r,a,o;i.parent;)(r=(e=i.parent).parent)&&r.parent?((o=r.parent).left===r?o.left=i:o.right=i,i.parent=o):(i.parent=null,this.yP=i),a=i.left,o=i.right,i===e.left?(r&&(r.left===e?(e.right?(r.left=e.right,r.left.parent=r):r.left=null,(e.right=r).parent=e):(a?(r.right=a).parent=r:r.right=null,(i.left=r).parent=i)),o?(e.left=o).parent=e:e.left=null,(i.right=e).parent=i):(r&&(r.right===e?(e.left?(r.right=e.left,r.right.parent=r):r.right=null,(e.left=r).parent=e):(o?(r.left=o).parent=r:r.left=null,(i.right=r).parent=i)),a?(e.right=a).parent=e:e.right=null,(i.left=e).parent=i)},p.prototype.replace=function(i,e){i.parent?i===i.parent.left?i.parent.left=e:i.parent.right=e:this.yP=e,e&&(e.parent=i.parent)},p.prototype.MP=function(i){if(void 0===i&&(i=this.yP),i)for(;i.left;)i=i.left;return i},p.prototype.SP=function(i){if(void 0===i&&(i=this.yP),i)for(;i.right;)i=i.right;return i},p.prototype.Xc=function(i,e){var r=this.yP,n=null,a=this.bP;if(this.mP)for(;r;){if(0===a((n=r).key,i))return;r=a(r.key,i)<0?r.right:r.left}else for(;r;)r=a((n=r).key,i)<0?r.right:r.left;return r={key:i,data:e,left:null,right:null,parent:n},n?a(n.key,r.key)<0?n.right=r:n.left=r:this.yP=r,this.xP(r),this._size++,r},p.prototype.find=function(i){for(var e=this.yP,r=this.bP;e;){var n=r(e.key,i);if(n<0)e=e.right;else{if(!(0<n))return e;e=e.left}}return null},p.prototype.contains=function(i){for(var e=this.yP,r=this.bP;e;){var n=r(i,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1},p.prototype.remove=function(r){var e=this.find(r);return!!e&&(this.xP(e),e.left?e.right?((r=this.MP(e.right)).parent!==e&&(this.replace(r,r.right),r.right=e.right,r.right.parent=r),this.replace(e,r),r.left=e.left,r.left.parent=r):this.replace(e,e.left):this.replace(e,e.right),this._size--,!0)},p.prototype.removeNode=function(i){return!!i&&(this.xP(i),i.left?i.right?((e=this.MP(i.right)).parent!==i&&(this.replace(e,e.right),e.right=i.right,e.right.parent=e),this.replace(i,e),e.left=i.left,e.left.parent=e):this.replace(i,i.left):this.replace(i,i.right),this._size--,!0);var e},p.prototype.$P=function(n){var r,a=this.find(n);a&&(this.xP(a),r=a.left,n=a.right,a=null,r&&(r.parent=null,a=this.SP(r),this.xP(a),this.yP=a),n&&(r?a.right=n:this.yP=n,n.parent=a),this._size--)},p.prototype.pop=function(){var i=this.yP,e=null;if(i){for(;i.left;)i=i.left;e={key:i.key,data:i.data},this.remove(i.key)}return e},p.prototype.next=function(i){var e=i;if(e)if(e.right)for(e=e.right;e&&e.left;)e=e.left;else for(e=i.parent;e&&e.right===i;)e=(i=e).parent;return e},p.prototype.NM=function(i){var e=i;if(e)if(e.left)for(e=e.left;e&&e.right;)e=e.right;else for(e=i.parent;e&&e.left===i;)e=(i=e).parent;return e},p.prototype.forEach=function(i){for(var e=this.yP,r=[],n=!1,a=0;!n;)e?(r.push(e),e=e.left):0<r.length?(i(e=r.pop(),a++),e=e.right):n=!0;return this},p.prototype.range=function(i,e,r,n){for(var a=[],o=this.bP,s=this.yP;0!==a.length||s;)if(s)a.push(s),s=s.left;else{if(0<o((s=a.pop()).key,e))break;if(0<=o(s.key,i)&&r.call(n,s))return this;s=s.right}return this},p.prototype.keys=function(){for(var i=this.yP,e=[],r=[],n=!1;!n;)i?(e.push(i),i=i.left):0<e.length?(i=e.pop(),r.push(i.key),i=i.right):n=!0;return r},p.prototype.values=function(){for(var i=this.yP,e=[],r=[],n=!1;!n;)i?(e.push(i),i=i.left):0<e.length?(i=e.pop(),r.push(i.data),i=i.right):n=!0;return r},p.prototype.at=function(i){for(var e=this.yP,r=[],n=!1,a=0;!n;)if(e)r.push(e),e=e.left;else if(0<r.length){if(e=r.pop(),a===i)return e;a++,e=e.right}else n=!0;return null},p.prototype.load=function(i,e,r){if(void 0===i&&(i=[]),void 0===e&&(e=[]),void 0===r&&(r=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var n=i.length;return r&&function u(t,i,e,r,n){if(!(r<=e)){for(var a=t[e+r>>1],o=e-1,s=r+1;;){for(;o++,n(t[o],a)<0;);for(;s--,0<n(t[s],a););if(s<=o)break;var h=t[o];t[o]=t[s],t[s]=h,h=i[o],i[o]=i[s],i[s]=h}u(t,i,e,s,n),u(t,i,s+1,r,n)}}(i,e,0,n-1,this.bP),this.yP=function l(u,i,e,r,n){var o=n-r;if(0<o)return o=r+Math.floor(o/2),(u={key:i[o],data:e[o],parent:u}).left=l(u,i,e,r,o),u.right=l(u,i,e,o+1,n),u;return null}(null,i,e,0,n),this._size=n,this},p.prototype.min=function(){var i=this.MP(this.yP);return i?i.key:null},p.prototype.max=function(){var i=this.SP(this.yP);return i?i.key:null},p.prototype.isEmpty=function(){return null===this.yP},vt.size.get=function(){return this._size},p.LP=function(i,e,r,n,a){return new p(r,a).load(i,e,n)},Object.defineProperties(p.prototype,vt);var o=0,h=1,c=2,f=3,y=0,s=1,b=2,d=3;function x(t,r,e){null===r?(t.PP=!1,t.OP=!0):(t._P===r._P?(t.PP=!r.PP,t.OP=r.OP):(t.PP=!r.OP,t.OP=r.NP()?!r.PP:r.PP),r&&(t.CP=!n(r,e)||r.NP()?r.CP:r));r=n(t,e);t.hN=r?function(t,i){var n,e=!t.PP,r=!t.OP;switch(i){case y:n=e&&r;break;case s:n=e||r;break;case d:n=e^r;break;case b:n=t._P?e&&!r:r&&!e}return n?1:-1}(t,e):0}function n(t,i){switch(t.type){case o:switch(i){case y:return!t.OP;case s:return t.OP;case b:return t._P&&t.OP||!t._P&&!t.OP;case d:return!0}break;case c:return i===y||i===s;case f:return i===b;case h:return!1}return!1}var v=function(i,e,r,n,a){this.left=e,this.kP=i,this.IP=r,this._P=n,this.type=a||o,this.PP=!1,this.OP=!1,this.CP=null,this.hN=0,this.lN=-1,this.dN=-1,this.DP=!0},vt={EP:{configurable:!0}};function g(t,i){return t[0]===i[0]&&t[1]===i[1]}v.prototype.FP=function(i){var e=this.kP,r=this.IP.kP;return this.left?0<(e[0]-i[0])*(r[1]-i[1])-(r[0]-i[0])*(e[1]-i[1]):0<(r[0]-i[0])*(e[1]-i[1])-(e[0]-i[0])*(r[1]-i[1])},v.prototype.RP=function(i){return!this.FP(i)},v.prototype.NP=function(){return this.kP[0]===this.IP.kP[0]},vt.EP.get=function(){return 0!==this.hN},v.prototype.clone=function(){var i=new v(this.kP,this.left,this.IP,this._P,this.type);return i.UP=this.UP,i.hN=this.hN,i.CP=this.CP,i.DP=this.DP,i.PP=this.PP,i.OP=this.OP,i},Object.defineProperties(v.prototype,vt);var vt=11102230246251565e-32,O=134217729,E=(3+8*vt)*vt;function _(t,i,e,r,n){var a,o,s,h,u=i[0],l=r[0],c=0,f=0;u<l==-u<l?(a=u,u=i[++c]):(a=l,l=r[++f]);var d=0;if(c<t&&f<e)for(u<l==-u<l?(s=a-((o=u+a)-u),u=i[++c]):(s=a-((o=l+a)-l),l=r[++f]),a=o,0!==s&&(n[d++]=s);c<t&&f<e;)u<l==-u<l?(s=a-((o=a+u)-(h=o-a))+(u-h),u=i[++c]):(s=a-((o=a+l)-(h=o-a))+(l-h),l=r[++f]),a=o,0!==s&&(n[d++]=s);for(;c<t;)s=a-((o=a+u)-(h=o-a))+(u-h),u=i[++c],a=o,0!==s&&(n[d++]=s);for(;f<e;)s=a-((o=a+l)-(h=o-a))+(l-h),l=r[++f],a=o,0!==s&&(n[d++]=s);return 0===a&&0!==d||(n[d++]=a),d}function w(t){return new(commonjsGlobal.Float64Array?Float64Array:Array)(t)}var R=(3+16*vt)*vt,F=(2+12*vt)*vt,U=(9+64*vt)*vt*vt,D=w(4),B=w(8),G=w(12),V=w(16),H=w(4);function A(t,i,e,r,n,a){var o=(i-a)*(e-n),u=(t-n)*(r-a),h=o-u;if(0==o||0==u||0<o!=0<u)return h;u=Math.abs(o+u);return Math.abs(h)>=R*u?h:-function(s,h,e,r,u,l,o){var g,p,y,b,x,w,R,T,A,M=s-u,N=e-u,P=h-l,C=r-l,m=M*C,f=O*M,d=f-(f-M),v=M-d,c=(w=v*(p=C-(g=(f=O*C)-(f-C)))-(m-d*g-v*g-d*p))-(y=w-(T=(v=P-(d=(f=O*P)-(f-P)))*(p=N-(g=(f=O*N)-(f-N)))-((R=P*N)-d*g-v*g-d*p)));D[0]=w-(y+c)+(c-T),c=(x=m-((b=m+y)-(c=b-m))+(y-c))-(y=x-R),D[1]=x-(y+c)+(c-R),c=(A=b+y)-b,D[2]=b-(A-c)+(y-c),D[3]=A;var $=function(t,i){for(var e=i[0],r=1;r<t;r++)e+=i[r];return e}(4,D),I=F*o;return I<=$||I<=-$?$:(s=s-(M+(c=s-M))+(c-u),u=e-(N+(c=e-N))+(c-u),h=h-(P+(c=h-P))+(c-l),l=r-(C+(c=r-C))+(c-l),0==s&&0==h&&0==u&&0==l||(I=U*o+E*Math.abs($))<=($+=M*l+C*s-(P*u+N*h))||I<=-$?$:(c=(w=(v=s-(d=(f=O*s)-(f-s)))*(p=C-(g=(f=O*C)-(f-C)))-((m=s*C)-d*g-v*g-d*p))-(y=w-(T=(v=h-(d=(f=O*h)-(f-h)))*(p=N-(g=(f=O*N)-(f-N)))-((R=h*N)-d*g-v*g-d*p))),H[0]=w-(y+c)+(c-T),c=(x=m-((b=m+y)-(c=b-m))+(y-c))-(y=x-R),H[1]=x-(y+c)+(c-R),c=(A=b+y)-b,H[2]=b-(A-c)+(y-c),H[3]=A,N=_(4,D,4,H,B),c=(w=(v=M-(d=(f=O*M)-(f-M)))*(p=l-(g=(f=O*l)-(f-l)))-((m=M*l)-d*g-v*g-d*p))-(y=w-(T=(v=P-(d=(f=O*P)-(f-P)))*(p=u-(g=(f=O*u)-(f-u)))-((R=P*u)-d*g-v*g-d*p))),H[0]=w-(y+c)+(c-T),c=(x=m-((b=m+y)-(c=b-m))+(y-c))-(y=x-R),H[1]=x-(y+c)+(c-R),c=(A=b+y)-b,H[2]=b-(A-c)+(y-c),H[3]=A,N=_(N,B,4,H,G),c=(w=(v=s-(d=(f=O*s)-(f-s)))*(p=l-(g=(f=O*l)-(f-l)))-((m=s*l)-d*g-v*g-d*p))-(y=w-(T=(v=h-(d=(f=O*h)-(f-h)))*(p=u-(g=(f=O*u)-(f-u)))-((R=h*u)-d*g-v*g-d*p))),H[0]=w-(y+c)+(c-T),c=(x=m-((b=m+y)-(c=b-m))+(y-c))-(y=x-R),H[1]=x-(y+c)+(c-R),c=(A=b+y)-b,H[2]=b-(A-c)+(y-c),H[3]=A,N=_(N,G,4,H,V),V[N-1]))}(t,i,e,r,n,a,u)}function M(t,i,r){r=A(t[0],t[1],i[0],i[1],r[0],r[1]);return 0<r?-1:r<0?1:0}function S(t,i){var e=t.kP,r=i.kP;return e[0]>r[0]?1:e[0]<r[0]?-1:e[1]!==r[1]?e[1]>r[1]?1:-1:function(t,i,e){return t.left!==i.left?t.left?1:-1:0!==M(e,t.IP.kP,i.IP.kP)?t.FP(i.IP.kP)?-1:1:!t._P&&i._P?1:-1}(t,i,e)}function C(t,n,e){var r=new v(n,!1,t,t._P),n=new v(n,!0,t.IP,t._P);return g(t.kP,t.IP.kP)&&console.warn("what is that, a collapsed segment?",t),r.UP=n.UP=t.UP,0<S(n,t.IP)&&(t.IP.left=!0,n.left=!1),t.IP.IP=n,t.IP=r,e.push(n),e.push(r),e}function $(t,i){return t[0]*i[1]-t[1]*i[0]}function I(t,i){return t[0]*i[0]+t[1]*i[1]}function L(t,i,e){var s=function(t,f,e,d,n){var a=[f[0]-t[0],f[1]-t[1]],y=[d[0]-e[0],d[1]-e[1]];function s(t,i,e){return[t[0]+i*e[0],t[1]+i*e[1]]}var v=[e[0]-t[0],e[1]-t[1]],u=$(a,y),l=u*u,p=I(a,a);if(0<l){f=$(v,y)/u;if(f<0||1<f)return null;d=$(v,a)/u;return d<0||1<d?null:0==f||1==f?n?null:[s(t,f,a)]:0==d||1==d?n?null:[s(e,d,y)]:[s(t,f,a)]}return 0<(u=$(v,a))*u?null:(v=I(a,v)/p,y=v+I(a,y)/p,p=Math.min(v,y),y=Math.max(v,y),p<=1&&0<=y?1===p?n?null:[s(t,0<p?p:0,a)]:0===y?n?null:[s(t,y<1?y:1,a)]:n&&0===p&&1===y?null:[s(t,0<p?p:0,a),s(t,y<1?y:1,a)]:null)}(t.kP,t.IP.kP,i.kP,i.IP.kP),o=s?s.length:0;if(0===o)return 0;if(1===o&&(g(t.kP,i.kP)||g(t.IP.kP,i.IP.kP)))return 0;if(2===o&&t._P===i._P)return 0;if(1===o)return g(t.kP,s[0])||g(t.IP.kP,s[0])||C(t,s[0],e),g(i.kP,s[0])||g(i.IP.kP,s[0])||C(i,s[0],e),1;var a=[],o=!1,s=!1;return g(t.kP,i.kP)?o=!0:1===S(t,i)?a.push(i,t):a.push(t,i),g(t.IP.kP,i.IP.kP)?s=!0:1===S(t.IP,i.IP)?a.push(i.IP,t.IP):a.push(t.IP,i.IP),o&&s||o?(i.type=h,t.type=i.PP===t.PP?c:f,o&&!s&&C(a[1].IP,a[0].kP,e),2):(s?C(a[0],a[1].kP,e):a[0]!==a[3].IP?(C(a[0],a[1].kP,e),C(a[1],a[2].kP,e)):(C(a[0],a[1].kP,e),C(a[3].IP,a[2].kP,e)),3)}function N(t,i){if(t===i)return 0;if(0!==M(t.kP,t.IP.kP,i.kP)||0!==M(t.kP,t.IP.kP,i.IP.kP))return g(t.kP,i.kP)?t.FP(i.IP.kP)?-1:1:t.kP[0]===i.kP[0]?t.kP[1]<i.kP[1]?-1:1:1===S(t,i)?i.RP(t.kP)?-1:1:t.FP(i.kP)?-1:1;if(t._P!==i._P)return t._P?-1:1;var e=t.kP,r=i.kP;return e[0]===r[0]&&e[1]===r[1]?(e=t.IP.kP,r=i.IP.kP,e[0]===r[0]&&e[1]===r[1]?0:t.UP>i.UP?1:-1):1===S(t,i)?1:-1}var W=function(){this.points=[],this.vN=[],this.gN=null,this.depth=null};function J(t){for(var s=function(t){for(var i,n,a=[],e=0,r=t.length;e<r;e++)((i=t[e]).left&&i.EP||!i.left&&i.IP.EP)&&a.push(i);for(var o=!1;!o;)for(o=!0,e=0,r=a.length;e<r;e++)e+1<r&&1===S(a[e],a[e+1])&&(n=a[e],a[e]=a[e+1],a[e+1]=n,o=!1);for(e=0,r=a.length;e<r;e++)(i=a[e]).lN=e;for(e=0,r=a.length;e<r;e++)(i=a[e]).left||(n=i.lN,i.lN=i.IP.lN,i.IP.lN=n);return a}(t),h={},u=[],e=function(){if(!h[o]){var i=u.length,t=function(a,i,e){var h,r=new W;return null!=a.CP?(a=(h=a.CP).dN,0<h.hN?null!=(h=i[a]).gN?(i[h=h.gN].vN.push(e),r.gN=h,r.depth=i[a].depth):(i[a].vN.push(e),r.gN=a,r.depth=i[a].depth+1):(r.gN=null,r.depth=i[a].depth)):(r.gN=null,r.depth=0),r}(s[o],u,i),e=function(t){h[t]=!0,s[t].dN=i},r=o,n=o,a=s[o].kP;for(t.points.push(a);e(r),e(r=s[r].lN),t.points.push(s[r].kP),(r=function(t,i,e,r){var o,n=t+1,a=i[t].kP,s=i.length;for(n<s&&(o=i[n].kP);n<s&&o[0]===a[0]&&o[1]===a[1];){if(!e[n])return n;o=i[++n].kP}for(n=t-1;e[n]&&r<n;)n--;return n}(r,s,h,n))!=n;);u.push(t)}},o=0,i=s.length;o<i;o++)e();return u}W.prototype.pN=function(){return null==this.gN};var Z=Q,vt=Q;function Q(t,i){if(!(this instanceof Q))return new Q(t,i);if(this.data=t||[],this.length=this.data.length,this.compare=i||tt,0<this.length)for(var e=(this.length>>1)-1;0<=e;e--)this.zP(e)}function tt(t,i){return t<i?-1:i<t?1:0}Q.prototype={push:function(t){this.data.push(t),this.length++,this.El(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this.zP(0)),this.data.pop(),t}},GP:function(){return this.data[0]},El:function(t){for(var i=this.data,e=this.compare,r=i[t];0<t;){var n=t-1>>1,a=i[n];if(0<=e(r,a))break;i[t]=a,t=n}i[t]=r},zP:function(t){for(var i=this.data,e=this.compare,r=this.length>>1,n=i[t];t<r;){var a=1+(t<<1),o=a+1,s=i[a];if(o<this.length&&e(i[o],s)<0&&(s=i[a=o]),0<=e(s,n))break;i[t]=s,t=a}i[t]=n}},Z.default=vt;var it=Math.max,et=Math.min,rt=0;function nt(t,i,e,r,n,a){for(var o=0,s=t.length-1;o<s;o++){var d=t[o],f=t[o+1],l=new v(d,!1,void 0,i),c=new v(f,!1,l,i);l.IP=c,d[0]===f[0]&&d[1]===f[1]||(l.UP=c.UP=e,a||(l.DP=!1,c.DP=!1),0<S(l,c)?c.left=!0:l.left=!0,f=d[0],d=d[1],n[0]=et(n[0],f),n[1]=et(n[1],d),n[2]=it(n[2],f),n[3]=it(n[3],d),r.push(l),r.push(c))}}var ot=[];function st(t,i,e){var r=null;return t.length*i.length==0&&(e===y?r=ot:e===b?r=t:e!==s&&e!==d||(r=0===t.length?i:t)),r}function ht(t,i,e,r,n){var a=null;return(e[0]>r[2]||r[0]>e[2]||e[1]>r[3]||r[1]>e[3])&&(n===y?a=ot:n===b?a=t:n!==s&&n!==d||(a=t.concat(i))),a}function ut(t,i,e){"number"==typeof t[0][0][0]&&(t=[t]),"number"==typeof i[0][0][0]&&(i=[i]);var r=st(t,i,e);if(r)return r===ot?null:r;var n=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],o=function(t,i,e,r,n){for(var o,s,l,c,a=new Z(null,S),h=0,u=t.length;h<u;h++)for(l=0,c=(o=t[h]).length;l<c;l++)(s=0===l)&&rt++,nt(o[l],!0,rt,a,e,s);for(h=0,u=i.length;h<u;h++)for(l=0,c=(o=i[h]).length;l<c;l++)(s=n===b?!1:0===l)&&rt++,nt(o[l],!1,rt,a,r,s);return a}(t,i,n,a,e);if(r=ht(t,i,n,a,e))return r===ot?null:r;for(var h=J(function(t,r,n,a){for(var u,l,c,o=new p(N),s=[],h=Math.min(r[2],n[2]);0!==t.length;){var d,g,f=t.pop();if(s.push(f),a===y&&f.kP[0]>h||a===b&&f.kP[0]>r[2])break;f.left?(l=u=o.Xc(f),u=u!==(c=o.MP())?o.NM(u):null,l=o.next(l),x(f,d=u?u.key:null,a),l&&2===L(f,l.key,t)&&(x(f,d,a),x(f,l.key,a)),u&&2===L(u.key,f,t)&&(x(d,(g=(g=u)!==c?o.NM(g):null)?g.key:null,a),x(f,d,a))):(f=f.IP,l=u=o.find(f),u&&l&&(u=u!==c?o.NM(u):null,l=o.next(l),o.remove(f),l&&u&&L(u.key,l.key,t)))}return s}(o,n,a,e)),u=[],l=0;l<h.length;l++){var c=h[l];if(c.pN()){for(var f=[c.points],d=0;d<c.vN.length;d++){var v=c.vN[d];f.push(h[v].points)}u.push(f)}}return u}vt={VP:s,BP:b,HP:y,WP:d};t.ZP=function(t,i){return ut(t,i,b)},t.qP=function(t,i){return ut(t,i,y)},t.YP=vt,t.union=function(t,i){return ut(t,i,s)},t.xor=function(t,i){return ut(t,i,d)},Object.defineProperty(t,"gP",{value:!0})}(i)}),martinez=unwrapExports(dist$1),Const={vr:Math.PI/180,mr:180/Math.PI,yr:6378137};function getSphericalCrs(t,i){var e=function(t){switch(t){case"EPSG3857":return ProjectionManager.getProjection("EPSG:3857");case"EPSG4326":return ProjectionManager.getProjection("EPSG:4326")}return ProjectionManager.getProjection("EPSG3857")}(t);return{project:function(t){return Util.isArray(t)&&(t=new LngLat$2(t[0],t[1])),e.project(t.lng,t.lat)},unproject:function(t){return Util.isArray(t)&&(t=new Pixel(t[0],t[1])),e.unproject(t.x,t.y)},normalizePoint:function(t){return Util.parseLngLatData(t)},distance:function(t,i){if(i=this.normalizePoint(i),Util.isArray(i))return this.distanceToLine(t,i);t=this.normalizePoint(t);var e=Const.vr,r=Math.cos,n=t.lat*e,a=t.lng*e,t=i.lat*e,i=i.lng*e,e=2*Const.yr,a=i-a,t=(1-r(t-n)+(1-r(a))*r(n)*r(t))/2;return e*Math.asin(Math.sqrt(t))},ringArea:function(t){t=this.normalizeLine(t);var i=Const.yr*Const.vr,e=0,r=t,n=r.length;if(n<3)return 0;for(var a=0;a<n-1;a+=1){var o=r[a],s=r[a+1],h=o.lng*i*Math.cos(o.lat*Const.vr),u=o.lat*i,o=s.lng*i*Math.cos(s.lat*Const.vr);e+=h*(s.lat*i)-o*u}var l=r[a],c=r[0],f=l.lng*i*Math.cos(l.lat*Const.vr),t=l.lat*i,l=c.lng*i*Math.cos(c.lat*Const.vr);return e+=f*(c.lat*i)-l*t,.5*Math.abs(e)},sphericalCalotteArea:function(t){var i=Const.yr,t=t/i,t=i-i*Math.cos(t);return 2*Math.PI*i*t}}}function getPlanarCrs(){return{normalizePoint:function(t){return t&&t.x&&t.y?[t.x,t.y]:t},distance:function(t,i){var e=t[0]-i[0],i=t[1]-i[1];return Math.sqrt(e*e+i*i)},project:function(t){return t},unproject:function(t){return t},ringArea:function(t){for(var i=[0,0],e=[0,0],r=0,n=t[0],a=t.length,o=2;o<a;o++){var s=t[o-1],h=t[o];i[0]=n[0]-h[0],i[1]=n[1]-h[1],e[0]=n[0]-s[0],e[1]=n[1]-s[1],r+=i[0]*e[1]-i[1]*e[0]}return r/2}}}function isClockwise(t){for(var i=0,e=t.length,r=0;r<e-1;r++){var n,a=t[r];i+=((n=t[r+1])[0]-a[0])*(n[1]+a[1])}return t[e-1][0]===t[0][0]&&t[e-1][1]===t[0][1]||(a=t[e-1],i+=((n=t[0])[0]-a[0])*(n[1]+a[1])),0<i}var GeometryUtilCls=(BH.prototype.clone=function(t){return new BH(assign({},this._opts,t))},BH.prototype.isPoint=function(t){return t&&(t instanceof LngLat$2||Util.isArray(t)&&!isNaN(t[0]))},BH.prototype.normalizePoint=function(t){return t},BH.prototype.normalizeLine=function(t){for(var i=[],e=0,r=t.length;e<r;e++)i.push(this.normalizePoint(t[e]));return i},BH.prototype.normalizeMultiLines=function(t){Util.isArray(t)&&this.isPoint(t[0])&&(t=[t]);for(var i=[],e=0,r=t.length;e<r;e++)i.push(this.normalizeLine(t[e]));return i},BH.prototype.setCrs=function(t){t=t&&t.project&&t.unproject?t:"plane"===t?getPlanarCrs():getSphericalCrs(t,this._opts.maxZoom),assign(this,t)},BH.prototype.distance=function(t,i){throw new Error("distance Not implemented!")},BH.prototype.xr=function(t,i){t=this.normalizeLine(t),this.isPoint(t[0])||(t=t[0]);for(var e=[],r=0,n=t.length;r<n;r++)e.push(this.project(t[r]));return!0===i?e=this.makesureClockwise(e):!1===i&&(e=this.makesureClockwise(e)).reverse(),e},BH.prototype.br=function(t){for(var i=[],e=0,r=t.length;e<r;e++)i.push(this.unproject(t[e]));return i},BH.prototype.closestOnSegment=function(t,i,e){return e=Coordinate.closestOnSegment(this.project(t),this.xr([i,e])),this.unproject(e)},BH.prototype.closestOnLine=function(t,i){for(var e,r=1/0,n=0,a=(i=this.normalizeLine(i)).length;n<a-1;n++){var o=this.closestOnSegment(t,i[n],i[n+1]),s=this.distance(t,o);s<r&&(r=s,e=o)}return e},BH.prototype.distanceToSegment=function(t,i,e){return this.distanceToLine(t,[i,e])},BH.prototype.distanceToLine=function(t,i){i=this.normalizeLine(i),this.isPoint(i[0])||(i=i[0]);for(var e=1/0,r=0,n=i.length;r<n-1;r++)var a=this.closestOnSegment(t,i[r],i[r+1]),e=Math.min(e,this.distance(t,a));return e},BH.prototype.distanceToPolygon=function(t,i){return this.isPointInRing(t,i)?0:this.distanceToLine(t,i)},BH.prototype.isPointOnSegment=function(t,i,e,r){return(!r&&0!==r||r<0)&&(r=this._opts.onSegmentTolerance),this.distanceToSegment(t,i,e)<=r},BH.prototype.isPointOnLine=function(t,i,e){for(var r=0,n=(i=this.normalizeLine(i)).length;r<n-1;r++)if(this.isPointOnSegment(t,i[r],i[r+1],e))return!0;return!1},BH.prototype.isPointOnRing=function(t,i,e){for(var r=0,n=(i=this.normalizeLine(i)).length;r<n;r++)if(this.isPointOnSegment(t,i[r],i[r===n-1?0:r+1],e))return!0;return!1},BH.prototype.isPointOnPolygon=function(t,i,e){for(var r=0,n=(i=this.normalizeMultiLines(i)).length;r<n;r++)if(this.isPointOnRing(t,i[r],e))return!0;return!1},BH.prototype.makesureClockwise=function(t){return isClockwise(t)||(t=[].concat(t)).reverse(),t},BH.prototype.makesureAntiClockwise=function(t){return isClockwise(t)&&(t=[].concat(t)).reverse(),t},BH.prototype.pointInRing=function(t,i,e){for(var r=!1,n=0;n<i.length&&!r;n++)if(s(t,i[n][0],e)){for(var a=!1,o=1;o<i[n].length&&!a;)s(t,i[n][o],!e)&&(a=!0),o++;a||(r=!0)}function s(t,i,e){var r=!1;i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]&&(i=i.slice(0,i.length-1));for(var n=0,a=i.length-1;n<i.length;a=n++){var o=i[n][0],s=i[n][1],h=i[a][0],u=i[a][1];if(t[1]*(o-h)+s*(h-t[0])+u*(t[0]-o)==0&&(o-t[0])*(h-t[0])<=0&&(s-t[1])*(u-t[1])<=0)return!e;s>t[1]!=u>t[1]&&t[0]<(h-o)*(t[1]-s)/(u-s)+o&&(r=!r)}return r}return r},BH.prototype.isPointInRing=function(t,i){return i=this.normalizeLine(i),i=this.xr(i,!0),Coordinate.ss(this.project(t),i,!1)},BH.prototype.isRingInRing=function(t,i){for(var e=0,r=t.length;e<r;e++)if(!this.isPointInRing(t[e],i))return!1;return!0},BH.prototype.isRingInRingByOutsea=function(t,i){for(var e=0,r=t.length;e<r;e++)if(this.isPointInRing(t[e],i))return!0;for(e=0,r=i.length;e<r;e++)if(this.isPointInRing(i[e],t))return!0;return!1},BH.prototype.isRingInRingByMapbox=function(t,i){for(var e=0,r=t.length;e<r;e++)if(!this.isPointInRing(t[e],i))return!1;return!0},BH.prototype.isRingInRingByMapboxB=function(t,i){for(var e=0,r=t.length;e<r;e++)if(this.isPointInRing(t[e],i))return!0;return!1},BH.prototype.isPixelRingInRing=function(t,i){for(var e=0,r=t.length;e<r;e++)if(Coordinate.ss(t[e],i,!1))return!0;return!1},BH.prototype.isPointInPolygon=function(t,i){for(var e,r=0,n=(i=this.normalizeMultiLines(i)).length;r<n&&(e=this.isPointInRing(t,i[r]),0<r&&(e=!e),e);r+=1);return Boolean(e)},BH.prototype.doesSegmentsIntersect=function(t,i,e,r){t=(n=this.xr([t,i,e,r]))[0],i=n[1],e=n[2];var a=!1,o=((r=n[3])[0]-e[0])*(t[1]-e[1])-(r[1]-e[1])*(t[0]-e[0]),n=(i[0]-t[0])*(t[1]-e[1])-(i[1]-t[1])*(t[0]-e[0]);return 0!=(t=(r[1]-e[1])*(i[0]-t[0])-(r[0]-e[0])*(i[1]-t[1]))&&(n/=t,0<=(t=o/t)&&t<=1&&0<=n&&n<=1&&(a=!0)),a},BH.prototype.doesSegmentLineIntersect=function(t,i,e){for(var r=0,n=(e=this.normalizeLine(e)).length;r<n-1;r++)if(this.doesSegmentsIntersect(t,i,e[r],e[r+1]))return!0;return!1},BH.prototype.doesSegmentRingIntersect=function(t,i,e){for(var r=0,n=(e=this.normalizeLine(e)).length;r<n;r++)if(this.doesSegmentsIntersect(t,i,e[r],e[r===n-1?0:r+1]))return!0;return!1},BH.prototype.doesSegmentPolygonIntersect=function(t,i,e){for(var r=0,n=(e=this.normalizeMultiLines(e)).length;r<n;r++)if(this.doesSegmentRingIntersect(t,i,e[r]))return!0;return!1},BH.prototype.doesLineLineIntersect=function(t,i){for(var e=0,r=(t=this.normalizeLine(t)).length;e<r-1;e++)if(this.doesSegmentLineIntersect(t[e],t[e+1],i))return!0;return!1},BH.prototype.doesLineRingIntersect=function(t,i){for(var e=0,r=(t=this.normalizeLine(t)).length;e<r-1;e++)if(this.doesSegmentRingIntersect(t[e],t[e+1],i))return!0;return!1},BH.prototype.doesPolygonPolygonIntersect=function(t,i){return!!(this.doesRingRingIntersect(i,t)||this.isRingInRing(t,i)||this.isRingInRing(i,t))},BH.prototype.doesRingRingIntersect=function(t,i){for(var e=0,r=(t=this.normalizeLine(t)).length;e<r;e++)if(this.doesSegmentRingIntersect(t[e],t[e===r-1?0:e+1],i))return!0;return!1},BH.prototype.along=function(t,i){for(var e=0,r=0;r<t.length-1;r+=1){var n=this.distance(t[r],t[r+1]);if(!(n+e<i)){var a=(i-e)/n;return[t[r][0]+a*(t[r+1][0]-t[r][0]),t[r][1]+a*(t[r+1][1]-t[r][1]),r]}e+=n}return null},BH.prototype.gr=function(t,i){for(var a,o,e=function(t){return(a[0]-s[0])*(t[1]-s[1])>(a[1]-s[1])*(t[0]-s[0])},r=function(){var t=[s[0]-a[0],s[1]-a[1]],i=[c[0]-o[0],c[1]-o[1]],e=s[0]*a[1]-s[1]*a[0],r=c[0]*o[1]-c[1]*o[0],n=1/(t[0]*i[1]-t[1]*i[0]);return[(e*i[0]-r*t[0])*n,(e*i[1]-r*t[1])*n]},n=t=this.makesureAntiClockwise(t),s=(i=this.makesureClockwise(i))[i.length-1],h=0,u=i.length;h<u;h++){a=i[h];for(var l=n,n=[],c=l[l.length-1],f=0,d=l.length;f<d;f++)e(o=l[f])?(e(c)||n.push(r()),n.push(o)):e(c)&&n.push(r()),c=o;s=a}return n},BH.prototype.ringRingClip=function(t,i){return t=this.xr(t),i=this.xr(i),isEqual(t[0],t[t.length-1])||t.push(t[0].slice()),isEqual(i[0],i[i.length-1])||i.push(i[0].slice()),(i=martinez.qP([t],[i]))[0]&&i[0][0]?this.br(i[0][0]):[]},BH.prototype.ringArea=function(t){throw new Error("distance Not implemented!")},BH.prototype.distanceOfLine=function(t){for(var i=0,e=0,r=(t=this.normalizeLine(t)).length;e<r-1;e++)i+=this.distance(t[e],t[e+1]);return i},BH.prototype.isClockwise=function(t){return isClockwise(t=this.xr(t))},BH.prototype.typePolygon=function(t){return isArray(t)&&isArray(t[0])?2===t[0][0].length||t[0][0]instanceof LngLat$2?"Polygon":2<t[0][0].length&&(2===t[0][0][0].length||t[0][0][0]instanceof LngLat$2)?"MultiPolygon":"never":"never"},BH);function BH(t){this.CLASS_NAME="AMap.GeometryUtil",this._opts=assign({onSegmentTolerance:5,crs:"EPSG3857",maxZoom:20},t),this.setCrs(this._opts.crs)}var GeometryUtilInstance=new GeometryUtilCls({}),PlaneGeometryUtilInstance=new GeometryUtilCls({});PlaneGeometryUtilInstance.setCrs("plane");var GeometryUtil={distance:GeometryUtilInstance.distance.bind(GeometryUtilInstance),ringArea:GeometryUtilInstance.ringArea.bind(GeometryUtilInstance),isClockwise:GeometryUtilInstance.isClockwise.bind(GeometryUtilInstance),typePolygon:GeometryUtilInstance.typePolygon.bind(GeometryUtilInstance),makesureClockwise:GeometryUtilInstance.makesureClockwise.bind(GeometryUtilInstance),makesureAntiClockwise:GeometryUtilInstance.makesureAntiClockwise.bind(GeometryUtilInstance),distanceOfLine:GeometryUtilInstance.distanceOfLine.bind(GeometryUtilInstance),ringRingClip:GeometryUtilInstance.ringRingClip.bind(GeometryUtilInstance),doesSegmentsIntersect:GeometryUtilInstance.doesSegmentsIntersect.bind(GeometryUtilInstance),doesSegmentLineIntersect:GeometryUtilInstance.doesSegmentLineIntersect.bind(GeometryUtilInstance),doesSegmentRingIntersect:GeometryUtilInstance.doesSegmentRingIntersect.bind(GeometryUtilInstance),doesSegmentPolygonIntersect:GeometryUtilInstance.doesSegmentPolygonIntersect.bind(GeometryUtilInstance),doesLineLineIntersect:GeometryUtilInstance.doesLineLineIntersect.bind(GeometryUtilInstance),doesLineRingIntersect:GeometryUtilInstance.doesLineRingIntersect.bind(GeometryUtilInstance),doesRingRingIntersect:GeometryUtilInstance.doesRingRingIntersect.bind(GeometryUtilInstance),pointInRing:GeometryUtilInstance.pointInRing.bind(GeometryUtilInstance),isPointInRing:GeometryUtilInstance.isPointInRing.bind(GeometryUtilInstance),isRingInRing:GeometryUtilInstance.isRingInRing.bind(GeometryUtilInstance),isPointInPolygon:GeometryUtilInstance.isPointInPolygon.bind(GeometryUtilInstance),isPointOnSegment:GeometryUtilInstance.isPointOnSegment.bind(GeometryUtilInstance),isPointOnLine:GeometryUtilInstance.isPointOnLine.bind(GeometryUtilInstance),isPointOnRing:GeometryUtilInstance.isPointOnRing.bind(GeometryUtilInstance),isPointOnPolygon:GeometryUtilInstance.isPointOnPolygon.bind(GeometryUtilInstance),closestOnSegment:GeometryUtilInstance.closestOnSegment.bind(GeometryUtilInstance),closestOnLine:GeometryUtilInstance.closestOnLine.bind(GeometryUtilInstance),distanceToSegment:GeometryUtilInstance.distanceToSegment.bind(GeometryUtilInstance),distanceToLine:GeometryUtilInstance.distanceToLine.bind(GeometryUtilInstance)};function calcTileMectorBounds(t,i,e){var r=ProjectionManager.getProjection("EPSG:3857"),n=Math.pow(2,t),a=(i=(a=360/n)*i-180)+a,t=(e=(t=180/n)*(n-e-1)-90)+t;return[e=(i=r.project(i,e))[0],i=i[1],(t=r.project(a,t))[0],t[1]]}function parseLngLatData(t){if(Array.isArray(t)){if(!Array.isArray(t[0])){var i=typeof t[0];return"string"==i||"number"==i?new LngLat$2(t[0],t[1]):t}for(var e=0;e<t.length;e+=1)t[e]=parseLngLatData(t[e])}return t}function jsonLngLatData(t){if(isLngLat(t))return[t.getLng(),t.getLat()];if(Array.isArray(t)){for(var i=t.slice(0),e=0;e<i.length;e+=1)i[e]=jsonLngLatData(i[e]);return i}return t}function multiPolygonJson(t){if(isNumberArrayArray(t=jsonLngLatData(t)))t=[[t]];else if(isNumberArrayArrayArray(t))t=[t];else if(!isNumberArrayArrayArrayArray(t))return;return t}function pointInRing(t,i,e){return Coordinate.ss(t,i,e)}function pointInPolygon(t,i){if(!pointInRing(t,i[0]))return!1;for(var e=1,r=i.length;e<r;e++)if(pointInRing(t,i[e],!0))return!1;return!0}function pointInMultiPolygon(t,i){for(var e=0,r=i.length;e<r;e++)if(pointInPolygon(t,i[e]))return!0;return!1}function pointInMultiPolygonIndex(t,i){for(var e=0,r=i.length;e<r;e++)if(pointInPolygon(t,i[e]))return e;return-1}function moveRingWithPos(t,i,e){for(var r=[],n=0,a=t;n<a.length;n++){var o=a[n];r.push(e.moveWithPos(o,i))}return r}function movePolygonWithPos(t,i,e){for(var r=[],n=0,a=t;n<a.length;n++){var o=moveRingWithPos(a[n],i,e);r.push(o)}return r}function moveMultiPolygonWithPos(t,i,e){for(var r=[],n=0,a=t;n<a.length;n++){var o=movePolygonWithPos(a[n],i,e);r.push(o)}return r}function moveRingWithPixel(t,i,e,r){for(var n=[],a=0,o=t;a<o.length;a++){var s=o[a];n.push(r.moveWithPixel(s,i,e))}return n}function movePolygonWithPixel(t,i,e,r){for(var n=[],a=0,o=t;a<o.length;a++){var s=moveRingWithPixel(o[a],i,e,r);n.push(s)}return n}function moveMultiPolygonWithPixel(t,i,e,r){for(var n=[],a=0,o=t;a<o.length;a++){var s=movePolygonWithPixel(o[a],i,e,r);n.push(s)}return n}function getRingArea(t){return GeometryUtil.ringArea(t)}function getPolygonArea(t){for(var i=getRingArea(t[0]),e=1;e<t.length;e++)i-=getRingArea(t[e]);return i}function getMultiPolygonArea(t){for(var i=0,e=0,r=t;e<r.length;e++)i+=getPolygonArea(r[e]);return i}function distanceBetweenPos(t,i){var e=Math.abs(t[0]-i[0]),i=Math.abs(t[1]-i[1]);return Math.sqrt(e*e+i*i)}function multiPolylineJson(t){return isNumberArrayArray(t=jsonLngLatData(t))&&(t=[t]),t}function distanceOfPolyline(t){return GeometryUtil.distanceOfLine(t)}function distanceOfMultiPolyline(t){for(var i=0,e=0,r=t;e<r.length;e++)i+=distanceOfPolyline(r[e]);return i}function generateGeodesicPath(t){if(t.length<2)return t;var i=[];i.push(t[0]);for(var e=1,r=t.length;e<r;e++){var n=t[e-1],a=t[e];Array.prototype.push.apply(i,getGeodesicPoints(LngLat$2.from(n),LngLat$2.from(a))),i.push(a)}return i}var d2r=Math.PI/180,r2d=180/Math.PI;function getGeodesicPoints(t,i){var e=Math.round(Math.abs(t.KL-i.KL));if(!e||Math.abs(t.KL-i.KL)<.001)return[];for(var r,n,a,o,s=[],h=Math.PI,u=Math.asin,l=Math.sqrt,c=Math.sin,f=Math.pow,d=Math.cos,v=Math.atan2,g=t.kT*d2r,p=t.KL*d2r,y=i.kT*d2r,b=i.KL*d2r,x=2*u(l(f(c((g-y)/2),2)+d(g)*d(y)*f(c((p-b)/2),2))),m=1;m<e;m+=1)r=c((1-(n=1/e*m))*x)/c(x),a=c(n*x)/c(x),o=r*d(g)*d(p)+a*d(y)*d(b),n=r*d(g)*c(p)+a*d(y)*c(b),a=v(r*c(g)+a*c(y),l(f(o,2)+f(n,2))),o=v(n,o),p<b?(o<p&&(o+=2*h),b<o&&(o-=2*h)):(p<o&&(o-=2*h),o<b&&(o+=2*h)),s.push([o*r2d,a*r2d]);return s}function generatePathFromCircle(t,i){var e=[],r=parseLngLatData(t),n=ProjectionManager.getProjection("EPSG:3857");if(r)for(var a=(t=n.project(r.KL,r.kT))[0],o=t[1],s=6*Math.PI/180,h=Math.cos(r.kT*Math.PI/180),u=0;u<=60;u++){var l=u*s,c=i*Math.cos(l)/h,l=i*Math.sin(l)/h,l=n.unproject(a+c,o+l);e.push(l)}return e}function generatePathFromEllipse(t,i,e){var r=[],n=parseLngLatData(t),a=ProjectionManager.getProjection("EPSG:3857");if(n)for(var o=(t=a.project(n.KL,n.kT))[0],s=t[1],t=e?89:359,h=(e?4:1)*Math.PI/180,u=i[0],l=i[1],c=Math.cos(n.kT*Math.PI/180),f=0,d=t;f<=d;f++){var v=f*h,g=u*Math.cos(v)/c,v=l*Math.sin(v)/c,v=a.unproject(o+g,s+v);r.push(v)}return r}function generatePathForRectangle(t){var i=t.getSouthWest(),t=t.getNorthEast();return[new LngLat$2(i.KL,i.kT,!0),new LngLat$2(t.KL,i.kT,!0),new LngLat$2(t.KL,t.kT,!0),new LngLat$2(i.KL,t.kT,!0)]}var LngLat$2=(FO.from=function(t){return isLngLat(t)?new FO(t.KL,t.kT):new FO(t[0],t[1])},FO.prototype.setLng=function(t){return this.KL=t,this.lng=Math.round(1e6*t)/1e6,this},FO.prototype.setLat=function(t){return this.kT=t,this.lat=Math.round(1e6*t)/1e6,this},FO.prototype.getLng=function(){return this.lng},FO.prototype.getLat=function(){return this.lat},FO.prototype.equals=function(t){return(t=parseLngLatData(t))instanceof FO&&Math.max(Math.abs(this.kT-t.kT),Math.abs(this.KL-t.KL))<=1e-9},FO.prototype.add=function(t,i){return new FO(this.KL+t.KL,this.kT+t.kT,i)},FO.prototype.subtract=function(t,i){return new FO(this.KL-t.KL,this.kT-t.kT,i)},FO.prototype.divideBy=function(t,i){return new FO(this.KL/t,this.kT/t,i)},FO.prototype.multiplyBy=function(t,i){return new FO(this.KL*t,this.kT*t,i)},FO.prototype.offset=function(t,i){if(isNaN(t)||isNaN(i))throw Error("valid offset args, require number");return t=2*Math.asin(Math.sin(Math.round(t)/12756274)/Math.cos(this.kT*Math.PI/180)),t=this.KL+180*t/Math.PI,i=2*Math.asin(Math.round(i)/12756274),new FO(t,this.kT+180*i/Math.PI)},FO.prototype.toString=function(){return this.lng+","+this.lat},FO.prototype.toArray=function(){return[this.lng,this.lat]},FO.prototype.toJSON=function(){return[this.lng,this.lat]},FO.prototype.distanceTo=function(t){return GeometryUtil.distance(this,t)},FO.prototype.distance=function(t){return GeometryUtil.distance(this,t)},FO);function FO(t,i,e){if(void 0===e&&(e=!1),this.className="AMap.LngLat",isNumberArray(t)?(t=parseFloat(t[0]),i=parseFloat(t[1])):(i=parseFloat(i),t=parseFloat(t)),isNaN(t)||isNaN(i))throw Error("Invalid Object: LngLat("+t+", "+i+")");!0!==e&&(i=Math.max(Math.min(i,90),-90),t=(t+180)%360+(t<-180||180===t?180:-180)),this.kT=i,this.KL=t,this.lng=Math.round(1e6*t)/1e6,this.lat=Math.round(1e6*i)/1e6,this.pos=ProjectionManager.getProjection("EPSG:3857").project(t,i)}var Size=(cP.prototype.getWidth=function(){return this.width},cP.prototype.getHeight=function(){return this.height},cP.prototype.toString=function(){return this.width+","+this.height},cP.prototype.toArray=function(){return[this.width,this.height]},cP);function cP(t,i,e){if(void 0===e&&(e=!1),this.className="AMap.Size",isNaN(t)||isNaN(i))throw new Error("Invalid Object: Pixel("+t+", "+i+")");this.width=e?Math.round(t):Number(t),this.height=e?Math.round(i):Number(i)}var easing=(gP={},hP=4,jP=1e-7,kP=10,nP="function"==typeof Float32Array,function(a,i,o,e){if(!(0<=a&&a<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");var t=arguments.toString();if(gP[t])return gP[t];if(a===i&&o===e)return vP;for(var s=new(nP?Float32Array:Array)(11),r=0;r<11;++r)s[r]=rP(.1*r,a,o);return gP[t]=function(t){return 0===t?0:1===t?1:rP(function(t){for(var i=0,e=1;10!==e&&s[e]<=t;++e)i+=.1;var r=i+(t-s[--e])/(s[e+1]-s[e])*.1,n=sP(r,a,o);return.001<=n?function(t,i,e,r){for(var n=0;n<hP;++n){var a=sP(i,e,r);if(0===a)return i;i-=(rP(i,e,r)-t)/a}return i}(t,r,a,o):0===n?r:function(t,i,e,r,n){for(var a,o,s=0;0<(a=rP(o=i+(e-i)/2,r,n)-t)?e=o:i=o,Math.abs(a)>jP&&++s<kP;);return o}(t,i,i+.1,a,o)}(t),i,e)}}),gP,hP,jP,kP,nP;function oP(t,i){return 1-3*i+3*t}function rP(t,i,e){return((oP(i,e)*t+(3*e-6*i))*t+3*i)*t}function sP(t,i,e){return 3*oP(i,e)*t*t+2*(3*e-6*i)*t+3*i}function vP(t){return t}function getQuadBezierValue(t,i,e,r){if(1<=t)return r;var n=1-t;return n*n*i+2*n*t*e+t*t*r}function cubic(t,i,e,r,n){if(1<=t)return n;var a=3*(e.pos[0]-i.pos[0]),o=3*(r.pos[0]-e.pos[0])-a,s=n.pos[0]-i.pos[0]-a-o,h=3*(e.pos[1]-i.pos[1]),e=3*(r.pos[1]-e.pos[1])-h,n=n.pos[1]-i.pos[1]-h-e,a=s*Math.pow(t,3)+o*Math.pow(t,2)+a*t+i.pos[0],i=n*Math.pow(t,3)+e*Math.pow(t,2)+h*t+i.pos[1];return ProjectionManager.getProjection("EPSG:3857").unproject(a,i)}function quad(t,i,e,r){return ProjectionManager.getProjection("EPSG:3857").unproject(getQuadBezierValue(t,i.pos[0],e.pos[0],r.pos[0]),getQuadBezierValue(t,i.pos[1],e.pos[1],r.pos[1]))}function p20CoordsToLngLat(t,i){return Array.isArray(i)&&(i=new Pixel(i[0],i[1])),t.containerTolnglat(i,20)}function getSplitNum(t,i){for(var r=[3,300],e=Math.max(2,4),n=0,a=0,o=0,s=t.length;o<s-1;o++){var h=t[o],u=t[o+1];n+=Math.abs(u.pos[0]-h.pos[0]),a+=Math.abs(u.pos[1]-h.pos[1])}return Math.min(r[1],Math.max(r[0],Math.round(Math.max(n,a)/i/e)))}function interpolateCoords(t,i){var e=null;switch(i.length){case 3:e=quad;break;case 4:e=cubic;break;default:return null}for(var r=[],n=[0].concat(i),a=1;a<t-2;a++)n[0]=a/t,r.push(e.apply(null,n));return r.push(i[i.length-1]),r}function getCoordsWithControlPoints(t,i,e,r){var n=null;return t&&e&&e.length&&((t=[t]).push.apply(t,e),t.push(i),t.length,n=interpolateCoords(getSplitNum(t,r),t)),n||[i]}var BezierUtil={ag:quad,ug:cubic,sg:easing,xb:function(t,i){for(var e=[],r=0,n=t.length;r<n;r+=1)e.push.apply(e,getCoordsWithControlPoints(t[r-1],t[r],t[r].controlPoints,i));return e},fg:function(t,i,e,r){for(var n=this.xb(t,i,e,r),a=[],o=0,s=n.length;o<s;o++)a.push(p20CoordsToLngLat(i,n[o]));return a}},LCS=(uR.prototype.setMap=function(t){this.map=t},uR.prototype.getSize=function(){return[this.lg,this.dg]},uR.prototype.getNum=function(){return[this.cg,this.vg]},uR.prototype.getLocalByLnglat=function(t){var i,t=(i=ProjectionManager.getProjection("EPSG:3857")).project.apply(i,t);return this.getLocalByCoord(t)},uR.prototype.getLocalByCoord=function(t){var i=Math.floor(t[0]/this.lg),e=Math.floor(t[1]/this.dg),r=this.getLocalCenterByXY(i,e);return{Sa:[t[0]-r.center[0],t[1]-r.center[1]],x:i,y:e,center:r.center,Ro:r.Ro}},uR.prototype.getLocalCenterByXY=function(t,i){var e={x:t,y:i,center:[0,0],Ro:[0,0,0,0]};return e.center=[(t+.5)*this.lg,(i+.5)*this.dg],e.Ro=[t*this.lg,i*this.dg,(t+1)*this.lg,(i+1)*this.dg],e},uR.prototype.getDeltaCoord=function(t){var i=this.getLocalByCoord(t);return[t[0]-i.center[0],t[1]-i.center[1]]},uR);function uR(){this.hg=[-20037508.342789244,-20037508.342789244,20037508.342789244,20037508.342789244],this.cg=128,this.vg=128,this.lg=(this.hg[2]-this.hg[0])/this.cg,this.dg=(this.hg[3]-this.hg[1])/this.vg}var lcs=new LCS,LocalZoom=13,LocalTileZoom=12,AMapStyleSource="",AdaptorMap=(Object.defineProperty(JR.prototype,"size",{get:function(){return keys(this.VL).length},enumerable:!1,configurable:!0}),JR.prototype.clear=function(){this.VL={}},JR.prototype.set=function(t,i){this.VL[t]=i},JR.prototype.get=function(t){return this.VL[t]},JR.prototype.delete=function(t){delete this.VL[t]},JR.prototype.has=function(t){return void 0!==this.VL[t]},JR);function JR(){this.VL={}}var NEWER="newer",OLDER="older",LRUMap=(PR.prototype.Uo=function(t){this.Bo=t},PR.prototype.keys=function(){return new KeyIterator(this.Wo)},PR.prototype.values=function(){return new ValueIterator(this.Wo)},PR.prototype.entries=function(){return this},PR.prototype.forEach=function(t,i){"object"!=typeof i&&(i=this);for(var e=this.Wo;e;)t.call(i,e.value,e.key,this),e=e[NEWER]},PR.prototype.toJSON=function(){for(var t=new Array(this.size),i=0,e=this.Wo;e;)t[i++]={key:e.key,value:e.value},e=e[NEWER];return t},PR.prototype.toString=function(){for(var t="",i=this.Wo;i;)t+=String(i.key)+":"+i.value,(i=i[NEWER])&&(t+=" < ");return t},PR.prototype.Go=function(t){t!==this.Zo&&(t[NEWER]&&(t===this.Wo&&(this.Wo=t[NEWER]),t[NEWER][OLDER]=t[OLDER]),t[OLDER]&&(t[OLDER][NEWER]=t[NEWER]),t[NEWER]=void 0,t[OLDER]=this.Zo,this.Zo&&(this.Zo[NEWER]=t),this.Zo=t)},PR.prototype.assign=function(t){var i,e=this.Bo||Number.MAX_VALUE;this.qo.clear();for(var r=t,n=r.next();!n.done;n=r.next()){var a=new Entry(n.value[0],n.value[1]);if(this.qo.set(a.key,a),i?(i[NEWER]=a)[OLDER]=i:this.Wo=a,i=a,0==e--)throw new Error("overflow")}this.Zo=i,this.size=this.qo.size},PR.prototype.get=function(t,i){if(t=this.qo.get(t))return i&&this.Go(t),t.value},PR.prototype.set=function(t,i){var e=this.qo.get(t);return e?(e.value=i,this.Go(e)):(this.qo.set(t,e=new Entry(t,i)),this.Zo?(this.Zo[NEWER]=e)[OLDER]=this.Zo:this.Wo=e,this.Zo=e,++this.size,this.size>this.Bo&&this.MN()),this},PR.prototype.shift=function(){var t=this.Wo;if(t)return this.Wo[NEWER]?(this.Wo=this.Wo[NEWER],this.Wo[OLDER]=void 0):(this.Wo=void 0,this.Zo=void 0),t[NEWER]=t[OLDER]=void 0,t.value.destroy(),this.qo.delete(t.key),--this.size,[t.key,t.value]},PR.prototype.find=function(t){return(t=this.qo.get(t))?t.value:void 0},PR.prototype.has=function(t){return this.qo.has(t)},PR.prototype.delete=function(t){if(t=this.qo.get(t))return this.qo.delete(t.key),t[NEWER]&&t[OLDER]?(t[OLDER][NEWER]=t[NEWER],t[NEWER][OLDER]=t[OLDER]):t[NEWER]?(t[NEWER][OLDER]=void 0,this.Wo=t[NEWER]):t[OLDER]?(t[OLDER][NEWER]=void 0,this.Zo=t[OLDER]):this.Wo=this.Zo=void 0,this.size--,t.value},PR.prototype.clear=function(){this.Wo=this.Zo=void 0,this.size=0,this.qo.clear()},PR.prototype.AN=function(t){return"loaded"!==t.value.status||(t=t.value.stamp)&&this.wN&&t===this.wN},PR.prototype.QF=function(t){this.wN=t},PR.prototype.MN=function(){for(var t=this.Wo,i=this.Zo.key;t&&i&&t.key!==i;){if(this.AN(t))this.Go(t);else if(this.shift(),this.size<=this.Bo)return;t=this.Wo}},PR);function PR(t,i){this.entries=i,"number"!=typeof(this.Bo=t)&&(i=t,t=0),this.size=0,this.Bo=t,this.Wo=this.Zo=void 0,this.qo=new("undefined"!=typeof Map?Map:AdaptorMap),i&&(this.assign(i),t<1&&(this.Bo=this.size))}var Entry=function(t,i){this.key=t,this.value=i,this[NEWER]=void 0,this[OLDER]=void 0},KeyIterator=(AS.prototype.next=function(){var t=this.Yo;return t?(this.Yo=t[NEWER],{done:!1,value:t.key}):{done:!0,value:void 0}},AS);function AS(t){this.Vo=t}var ValueIterator=(DS.prototype.next=function(){var t=this.Yo;return t?(this.Yo=t[NEWER],{done:!1,value:t.value}):{done:!0,value:void 0}},DS);function DS(t){this.Vo=t}var LRUMapWithEvent=(GS=LRUMap,__extends(HS,GS),HS.prototype.shift=function(){var t=this.Wo;if(t)return this.Wo[NEWER]?(this.Wo=this.Wo[NEWER],this.Wo[OLDER]=void 0):(this.Wo=void 0,this.Zo=void 0),t[NEWER]=t[OLDER]=void 0,this.qo.delete(t.key),this.emit("delete",{key:t.key}),--this.size,[t.key,t.value]},HS.prototype.on=function(t,i,e,r){void 0===e&&(e=this),void 0===r&&(r=!1);for(var n=0,a=Array.isArray(t)?t:[t];n<a.length;n++){var o=a[n];this._on(o,i,e,r)}return this},HS.prototype.off=function(t,i,e){void 0===e&&(e=this);var r=this.vI;if(t in r)for(var n=0;n<r[t].length;n+=1)if(r[t][n].fn===i&&r[t][n].context===e)return r[t].splice(n,1),this;return this},HS.prototype.hasEvents=function(t,i,e){void 0===e&&(e=this);var r=this.vI;if(t&&i&&t in r)for(var n=0;n<r[t].length;n+=1)if(r[t][n].fn===i&&r[t][n].context===e)return!0;return!1},HS.prototype.clearEvents=function(t){return t?this.vI[t]&&delete this.vI[t]:this.vI={},this},HS.prototype.emit=function(t,i){if(void 0===i&&(i={}),!(t in this.vI))return this;for(var e=exports.Ln(exports.Ln({},i),{type:t}),r=this.vI[t],n=0,a=r.length;n<a;n+=1){var o=r[n];o.fn&&(o.fn.call(o.context,e),o.once&&(this.vI[t].splice(n,1),--n,--a))}return this},HS.prototype._on=function(t,i,e,r){if(void 0===e&&(e=this),void 0===r&&(r=!1),this.hasEvents(t,i,e))return this;var n=this.vI;return n[t]=n[t]||[],n[t].push({fn:i,context:e||this,once:r}),this},HS),GS;function HS(){var t=null!==GS&&GS.apply(this,arguments)||this;return t.vI={},t}var Event=(nT.addListener=function(t,i,e){t.on(i,e)},nT.trigger=function(t,i,e){t.emit(i,e)},nT.clearListeners=function(t,i){t.clearEvents(i)},nT.addDomListener=function(t,i,e){t.addEventListener(i,e)},nT.extend=function(t,e,r){"string"==typeof t&&(t=[t]),forEach$3(t,function(i){e.on(i,function(t){r.emit(i,t)})})},nT.prototype.on=function(t,i,e,r){void 0===e&&(e=this),void 0===r&&(r=!1);for(var n=0,a=Array.isArray(t)?t:[t];n<a.length;n++){var o=a[n];this._on(o,i,e,r)}return this},nT.prototype.off=function(t,i,e){void 0===e&&(e=this);var r=this.vI;if(t in r)for(var n=0;n<r[t].length;n+=1)if(r[t][n].fn===i&&r[t][n].context===e)return r[t].splice(n,1),this;return this},nT.prototype.hasEvents=function(t,i,e){void 0===e&&(e=this);var r=this.vI;if(t&&i&&t in r)for(var n=0;n<r[t].length;n+=1)if(r[t][n].fn===i&&r[t][n].context===e)return!0;return!1},nT.prototype.clearEvents=function(t){return t?this.vI[t]&&delete this.vI[t]:this.vI={},this},nT.prototype.emit=function(t,i){if(void 0===i&&(i={}),!(t in this.vI))return this;for(var e=exports.Ln(exports.Ln({},i),{type:t}),r=this.vI[t],n=0,a=r.length;n<a;n+=1){var o=r[n];o.fn&&(o.fn.call(o.context,e),o.once&&(this.vI[t].splice(n,1),--n,--a))}return this},nT.prototype.getEvents=function(){return this.vI},nT.prototype._on=function(t,i,e,r){if(void 0===e&&(e=this),void 0===r&&(r=!1),this.hasEvents(t,i,e))return this;var n=this.vI;return n[t]=n[t]||[],n[t].push({fn:i,context:e||this,once:r}),this},nT);function nT(){this.vI={}}var TileCache=(hU=Event,__extends(iU,hU),iU.prototype.QF=function(t){this.Ho.QF(t)},iU.prototype.Xo=function(t){this.Ho.Uo(t)},iU.prototype.Jo=function(t){var i=this.ia(t.zo);this.keys[i]=1,this.Ho.set(i,t)},iU.prototype.Qo=function(t){var i=this.ia(t.zo);this.Ho.set(i,t)},iU.prototype.getTile=function(t,i){return void 0===i&&(i=!0),this.Ko(t)?this.Ho.get(this.ia(t),i):null},iU.prototype.xf=function(t,i){return void 0===i&&(i=!1),this.Ho.has(t)?this.Ho.get(t,i):null},iU.prototype.ea=function(t){var i=this.ia(t.zo);return!!this.Ko(t.zo)&&(this.Ho.delete(i),delete this.keys[i],!0)},iU.prototype.Ko=function(t){return t=this.ia(t),!!this.Ho.has(t)},iU.prototype.destroy=function(){this.Ho.clear()},iU.prototype.forEach=function(t){this.Ho.forEach(t)},iU.prototype.ia=function(t){if(t.key)return t.key;var i=t.z+","+t.x+","+t.y;return t.key=i},iU),hU,CU;function iU(t){void 0===t&&(t=500);var i=hU.call(this)||this;return i.keys={},i.na=t,i.Ho=new LRUMapWithEvent(i.na),i}CU=exports.zB||(exports.zB={}),CU.LITE="lite",CU.LEFT="left",CU.ALL="all",CU.NONE="";var NebulaTileCache=(DU=TileCache,__extends(EU,DU),EU.prototype.MD=function(t,i){void 0===i&&(i=exports.zB.ALL);var e="";return t?i!==t&&(e="all"===t?"":i===exports.zB.ALL?t?t===exports.zB.LITE?exports.zB.LEFT:exports.zB.LITE:exports.zB.ALL:i):e=exports.zB.ALL,e},EU.prototype.ea=function(t){return t.rN(),DU.prototype.ea.call(this,t)},EU),DU;function EU(t){return void 0===t&&(t=500),t=DU.call(this,t)||this,Event.extend("delete",t.Ho,t),t}var TagMap={2:"all",3:"all",4:"all",5:"all",6:"lite",7:"all",8:"lite",9:"all",10:"lite",11:"lite",12:"all",13:"all",14:"all",15:"lite",16:"lite",17:"all",18:"all",19:"all",20:"all"},colorNameDist={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",grey:"#808080",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Util=function(){var r,o,i,e,n,a,s,h,t={CLASS_NAME:"AMap.Util",WorldAxesCenter:{x:0,y:0},Single:{},stamp:(i=!0===Browser.DW,e=1e5,n="_amap_id",function(t){return t[n]=i?++e:--e,t[n]}),singlton:function(t){return c.Single[t]||new t},getOptimalZoom:function(t){return t<Math.floor(t)+.8?Math.floor(t):Math.ceil(t)},join:function(t,i){if(t.join)return t.join(i);var e,r=[];for(e in t)t.hasOwnProperty(e)&&r.push(e+"="+(t[e]||""));return r.join(i)},getGuid:function(t,i){return void 0===i&&(i=10),(t||"")+Math.round(Math.random()*Math.pow(10,i))+"_"+(new Date).getTime()},uuid:(o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),function(t,i){void 0===t&&(t=0),void 0===i&&(i=62);var e,a,r=o,n=[];if(i=i||r.length,t)for(e=0;e<t;e++)n[e]=r[0|Math.random()*i];else for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4",e=0;e<36;e++)n[e]||(a=0|16*Math.random(),n[e]=r[19===e?3&a|8:a]);return n.join("")}),endsWith:function(t,i){return t.endsWith?t.endsWith(i):!(t.length<i.length)&&t.substr(t.length-i.length)===i},mg:[],gg:268435456,wg:[215440491,106744817],Mg:{start:function(i){i.startTime=new Date,i.jg=[];var e=(new Date).getTime(),r=function(){var t=(new Date).getTime();i.jg.push(t-e),e=t,i.id=c.requestAnimFrame(r)};i.id=c.requestAnimFrame(r)},cancel:function(t){t.id&&c.cancelAnimFrame(t.id)},stop:function(t){t.Ag=Date.now()-t.startTime,this.cancel(t),t.Mg=Math.round(1e3/(t.Ag/(t.jg.length+1)))}},kg:function(t,i,e,r,n){if(void 0===r&&(r="linear"),void 0===n&&(n=!1),t===i)return i;switch(r){case"ease":e=BezierUtil.sg(.25,.1,.25,1)(e);break;case"ease-in":e=BezierUtil.sg(.42,0,1,1)(e);break;case"ease-out":e=BezierUtil.sg(0,0,.58,1)(e);break;case"ease-in-out":e=BezierUtil.sg(.42,0,.58,1)(e)}return e=t+(i-t)*e,n&&(e>>=0),e},createObjectURL:function(t,i){void 0===i&&(i="text/javascript; charset=utf-8");var e=null;try{e=(window.URL||window.webkitURL).createObjectURL(new Blob([t],{type:i}))}catch(t){e=null}return e},revokeObjectURL:function(t){try{(window.URL||window.webkitURL).revokeObjectURL(t)}catch(t){}},Og:function(t){for(var i={},e=0,r=t.length;e<r;e++)i[t[e]]=e;return i},xg:function(t){var i={};if(c.is(t,"object"))for(var e in t)t.hasOwnProperty(e)&&(i[t[e]]=e);return i},Ig:function(t,i){if(i.length<5e4)t.push.apply(t,i);else for(var e=0,r=i.length;e<r;e+=1)t.push(i[e])},clone:function(t){if("object"!=typeof t||null===t)return t;if(t.Tg||this.is(t,"Float32Array")||this.is(t,"Uint16Array"))return t;var i,e=this.isArray(t)?[]:{};for(i in t)t.hasOwnProperty(i)&&(e[i]=c.clone(t[i]));return e},isInteger:function(t){return(0|t)===t},vB:function(t){return!isNaN(t)},setPrototypeOf:"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:function(t,i){for(var e in i)t[e]=i[e]},isFunction:function(t){return"function"==typeof t},_g:function(t,i){if(void 0===i&&(i="webgl"),!t)return t;for(var e=[],r=0,n=t.length;r<n;r+=2){var a=parseInt(t.substr(r,2),16);("webgl"===i||"rgba"===i&&0===r)&&(a=this.format(a/255,3)),e.push(a)}return e.push(e.shift()),e},Sg:function(){},keys:"function"==typeof Object.keys?Object.keys:function(t){var i,e=[];for(i in t)t.hasOwnProperty(i)&&e.push(i);return e},map:function(r,n,a){void 0===a&&(a=null);var o=[];return r&&r.length?(c.Cg(r,function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e=t[1];o[e]=n.apply(a||r,t)}),o):r},forEach:function(t,i){if(t&&t.length){var e=t.length;if(0<e&&(i(t[0],0),1<e)){i(t[1],1);for(var r=2;r<e;r++)i(t[r],r)}}},Cg:function(t,i,e){if(void 0===e&&(e=null),t&&t.length)for(var r=0,n=t.length;r<n&&!1!==i.call(e,t[r],r,t);r++);},find:function(t,i,e){void 0===e&&(e=null);for(var r=0,n=t.length;r<n;r++)if("function"==typeof i){if(i.call(e,t[r],r,t))return t[r]}else if(t[r]===i)return t[r];return null},isDOM:function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},Eg:function(t,i){for(var e,r,n="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM",a="v5"<(i=i||"v5")?(e=n.length,512):(e=27,n=n.substr(0,27),333),o=[],s=NaN,h=0,u=t.length;h<u;h++)r=t[h],r=n.indexOf(r),s=isNaN(s)?r*e:(o.push(s+r-a),NaN);return o},Ng:function(t,i){for(var e=512<i.length?Math.round(Math.pow(i.length,.5)):i.length,r=Math.ceil(i.length/e),n=0;n<r;n+=1){var a=e*n,o=a+e;o>i.length&&(o=i.length);for(var s=a;s<o;s+=1)t(i[s])}},Lg:function(t){if(/^rgba\(/.test(t))return this.Dg(t);var i=this.colorNameToHex(t),t=i;return"#"===i[0]&&(3===(i=i.substring(1)).length&&(i=i.replace(/./g,function(t){return t+t})),t=this.argbHex2Rgba(8===i.length?i:"ff"+i)),this.Dg(t)},colorNameToHex:function(t){return void 0===t&&(t=""),"string"==typeof(t=t.toLowerCase())&&colorNameDist[t]||t},Rg:function(t,i,e){var r=Math.floor(e/2),n=e-r;return[e,t&(r=(1<<r)-1<<n)|i&(n=(1<<n)-1),i&r|t&n]},Pg:function(t){return t?encodeURIComponent(t):""},getStyle:function(t,i,e,r){var n=t[i].i[e];if(void 0===n)return null;if(t=t[i].s,"number"==typeof n)return t[n];for(;void 0===n[r.toString()]&&!(--r<3););return"number"==typeof(i=n[r.toString()])?t[i]:null},Dg:function(t){return(t=t.split(","))[0]=parseFloat(t[0].split("rgba(")[1])/255,t[1]=parseFloat(t[1])/255,t[2]=parseFloat(t[2])/255,t[3]=parseFloat(t[3]),t},Ug:function(t){return(t=t.split(","))[0]=parseFloat(t[0].split("rgb(")[1])/255,t[1]=parseFloat(t[1])/255,t[2]=parseFloat(t[2])/255,t},Bg:function(t){return"rgba("+255*t[0]+","+255*t[1]+","+255*t[2]+","+t[3]+")"},color2Rgba:function(t){return this.Bg(this.color2RgbaArray(t))},color2RgbaArray:function(t){if(t instanceof Array)return 3==t.length&&t.push(1),t;var i=this.colorNameToHex(t);if(0==i.indexOf("rgb("))return(e=this.Ug(i)).push(1),e;if(0==i.indexOf("rgba("))return this.Dg(i);if(0!=i.indexOf("#")){if(0!==i.indexOf("hsla"))return 0===i.indexOf("hsl")?(r=t.substr(4).split(","),n=parseInt(r[0],10)/360,a=parseInt(r[1],10)/100,o=parseInt(r[2],10)/100,this.GQ(n,a,o,1)):3!==i.length?6==i.length?this.zg(i):8==i.length?this.qg(i):void 0:(o=i.replace(/./g,function(t){return t+t}),this.zg(o));var r=t.substr(5).split(","),n=parseInt(r[0],10)/360,a=parseInt(r[1],10)/100,o=parseInt(r[2],10)/100,e=parseFloat(r[3]);return this.GQ(n,a,o,e)}if(4!==i.length)return 7==i.length?this.zg(i.substr(1)):9==i.length?(i=i.substr(1),this.qg(i)):void 0;o=i.substr(1).replace(/./g,function(t){return t+t});return this.zg(o)},GQ:function(t,i,e,r){var n,a,o;return 0===i?n=a=o=e:(i=2*e-(e=e<.5?e*(1+i):e+i-e*i),n=this.uQ(i,e,t+1/3),a=this.uQ(i,e,t),o=this.uQ(i,e,t-1/3)),[n,a,o,r]},uQ:function(t,i,e){return e<0&&(e+=1),1<e&&--e,e<1/6?t+6*(i-t)*e:e<.5?i:e<2/3?t+(i-t)*(2/3-e)*6:t},rgbHex2Rgba:function(t){return t.startsWith("#")&&(t=t.slice(1)),c.argbHex2Rgba("ff"+t)},argbHex2Rgba:function(t){t.startsWith("#")&&(t=t.slice(1));for(var i=[],e=0,r=t.length;e<r;e+=2)i.push(parseInt(t.substr(e,2),16));return i.push((i.shift()/255).toFixed(2)),"rgba("+i.join(",")+")"},Opacity2Rgba:function(t,i){var e=i;return i&&i[3]&&t&&(i[3]=Math.floor(255*t)),e},Hex2Rgba:function(t){if("string"!=typeof t)return!1;for(var i=[],e=0,r=t.length;e<r;e+=2)i.push(parseInt(t.substr(e,2),16));return i.push(parseInt(i.shift())),i},zg:function(t){return this.uE(t+"ff")},qg:function(t){for(var i=[],e=0,r=t.length;e<r;e+=2)i.push(parseInt(t.substr(e,2),16)/255);return i.push(i.shift()),i},uE:function(t){return[((t=parseInt(t,16))>>24&255)/255,(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},isEmpty:function(t){for(var i in t)if(t.hasOwnProperty(i))return!1;return!0},Wg:function(t,i){return 0<=i&&t.splice(i,1),t},startsWith:function(t,i){return t.startsWith?t.startsWith(i):t.substr(0,i.length)===i},deleteItemFromArray:function(t,i){return i=c.indexOf(t,i),c.Wg(t,i)},deleteItemFromArrayByIndex:function(t,i){return c.Wg(t,i)},filter:function(t,e,r){var n=[];return c.Cg(t,function(t,i){e.call(r,t,i)&&n.push(t)}),n},indexOf:function(t,i){if(!t||!t.length)return-1;if(t.indexOf)return t.indexOf(i);for(var e=0;e<t.length;e+=1)if(t[e]===i)return e;return-1},Gg:function(t,i){return t.endsWith?t.endsWith(i):!(t.length<i.length)&&t.substr(t.length-i.length)==i},bind:(r=!1,Boolean(Function.prototype.bind)&&(r=!0),function(t,i){var e=2<arguments.length?Array.prototype.slice.call(arguments,2):null;return r?e?(e.unshift(i),t.bind.apply(t,e)):t.bind(i):function(){return t.apply(i,e||arguments)}}),setOptions:function(t,i){return i=i||{},t.opts=assign({},t.opts,i),t.opts},yn:function(t,i,e){return"function"==typeof i?this.Hg(t,!0,this.Vg(i,e,1)):this.Hg(t,!0)},Hg:function(e,r,n,t,i,a,o){var s;if(n&&(s=i?n(e,t,i):n(e)),void 0!==s)return s;if(!this.$g(e))return e;var h=this.isArray(e);if(h){if(s=this.Yg(e),!r)return this.Kg(e,s)}else{var u=Object.prototype.toString.call(e),t="[object Function]"==u;if("[object Object]"!=u&&"[object Arguments]"!=u&&(!t||i))return i?e:{};if(s=this.Xg(t?{}:e),!r)return this.baseAssign(s,e)}o=o||[];for(var l=(a=a||[]).length;l--;)if(a[l]==e)return o[l];return a.push(e),o.push(s),(h?this.Zg:this.Qg)(e,function(t,i){s[i]=c.Hg(t,r,n,i,e,a,o)}),s},baseAssign:function(t,i){return null==i?t:this.tM(i,Object.keys(i),t)},$g:function(t){var i=typeof t;return!!t&&("object"==i||"function"==i)},rM:function(t){return!!t&&"object"==typeof t},nM:function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991},Yg:function(t){var i=t.length,e=new Array(i);return i&&"string"==typeof t[0]&&Object.hasOwnProperty.call(t,"index")&&(e.index=t.index,e.input=t.input),e},Kg:function(t,i){var e=-1,r=t.length;for(i=i||Array(r);++e<r;)i[e]=t[e];return i},Xg:function(t){return"function"==typeof(t=t.constructor)&&t instanceof t||(t=Object),new t},Vg:function(a,o,t){if("function"!=typeof a)return this.identity;if(void 0===o)return a;switch(t){case 1:return function(t){return a.call(o,t)};case 3:return function(t,i,e){return a.call(o,t,i,e)};case 4:return function(t,i,e,r){return a.call(o,t,i,e,r)};case 5:return function(t,i,e,r,n){return a.call(o,t,i,e,r,n)}}return function(){return a.apply(o,arguments)}},Zg:function(t,i){for(var e=-1,r=t.length;++e<r&&!1!==i(t[e],e,t););return t},identity:function(t){return t},iM:function(h){return function(t,i,e){for(var r=c.eM(t),n=e(t),a=n.length,o=h?a:-1;h?o--:++o<a;){var s=n[o];if(!1===i(r[s],s,r))break}return t}},Qg:function(t,i){return c.iM()(t,i,Object.keys)},eM:function(t){return c.$g(t)?t:Object(t)},tM:function(t,i,e){e=e||{};for(var r=-1,n=i.length;++r<n;){var a=i[r];e[a]=t[a]}return e},oM:function(){return!1},aM:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",uM:Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},sM:function(t,i,e,r){var n,a,o,s,h,u,l;return s=r?(n=0,o=this.uM,function(){if((a=o())-n<i)return!1;n=a,t.apply(e,arguments)}):(l=function(){h=!1,u&&(s.apply(e,u),u=!1)},function(){h?u=arguments:(h=!0,t.apply(e,arguments),setTimeout(l,i))})},format:function(t,i){return t===t<<0?t:+parseFloat(t+"").toFixed(i||0)},isArray:Array.isArray||function(t){return this.is(t,"array")},is:function(t,i){return Object.prototype.toString.call(t).split(" ")[1].slice(0,-1).toLowerCase()===i.toLowerCase()},includes:"function"==typeof Array.prototype.includes?function(t,i){return t.includes(i)}:function(t,i){return-1!==this.indexOf(t,i)},fM:function(t){var i=0;if(0===t.length)return i;for(var e=0,r=t.length;e<r;e+=1)i=(i<<5)-i+t.charCodeAt(e),i&=i;return i},hM:function(t,i){i=i?Math.ceil(parseInt(i.substr(6))/24):1;for(var e="",r=0,n=t.length;r<n;r++)e+=String.fromCharCode((t.charCodeAt(r)-256-i+65535)%65535);return e},cM:function(t,i){var e=(t+"").slice(-2),r=(i+"").slice(-2);t=t.slice(0,-2),i=i.slice(0,-2);var n=parseInt((r+e).slice(1)),a=Math.ceil(n/250)%2?1:-1,n=1<n/500?1:-1;return t-=parseInt("1"+e)/3e3*a,i-=parseInt("1"+r)/3e3*n,new LngLat$2(parseFloat(t).toFixed(5),parseFloat(i).toFixed(5))},vM:function(t){return"undefined"!=typeof JSON&&JSON.stringify?c.fM(JSON.stringify(t)):null},lM:function(t,i){var e="_amap_hash";return!i&&t.hasOwnProperty(e)||(i=c.vM(t))&&(t[e]=i),t[e]},parseLngLatData:function(t){if(c.isArray(t)){if(!c.isArray(t[0])){var i=typeof t[0];return"string"==i||"number"==i?new LngLat$2(t[0],t[1]):t}for(var e=0;e<t.length;e+=1)t[e]=c.parseLngLatData(t[e])}return t},dM:function(t){for(var i=[],e=0,r=t.length;e<r;e+=1)i[e]=[t[e].x,t[e].y];return i},bM:function(t){return c.isArray(t)?new Size(t[0],t[1]):t},hp:function(t,i){var e,r=[0,0],n=c.getOptimalZoom(i.$n.zoom);return t&&LocalZoom<=n?(e=lcs.getSize(),n=i.$n.centerCoord,i=lcs.getLocalByCoord([n[0],n[1]]),n=t.x-i.x,i=t.y-i.y,0!=n&&(n*=e[0],r[0]=n),0!=i&&(i*=e[1],r[1]=i)):t&&(r[0]+=t.center[0],r[1]+=t.center[1]),r},dS:function(t,i){return t>=i[0]&&t<=i[1]},kD:function(t,i,e){return void 0===t&&(t=""),void 0===e&&(e=!1),t=t.split(",")[0]||"",!e&&t&&i&&TagMap[i]||"all"},VF:function(t,i,e){return void 0===e&&(e=!1),!e&&t&&i&&TagMap[i]||"all"},LD:function(t,i){return!(!t||!i)&&(t=this.iN(t),this.iN(i)<=t)},SD:function(t){var i;switch(void 0===t&&(t="all"),t){case"lite":i=0;break;case"left":i=1;break;case"all":default:i=2}return i},pW:function(t){var i;switch(void 0===t&&(t=2),t){case 0:i=exports.zB.LITE;break;case 1:i=exports.zB.LEFT;break;case 2:default:i=exports.zB.ALL}return i},iN:function(t){var i=0;switch(t){case"lite":i=0;break;case"left":i=1;break;case"all":i=2}return i}};function u(t){for(var i,e=["webkit","moz","o","ms"],r=0;r<e.length&&!i;r+=1)i=window[e[r]+t];return i}Browser.DW||(a=0,s=window.requestAnimationFrame||u("RequestAnimationFrame")||function(t){var i=+new Date,e=Math.max(0,(Browser.android?50:20)-(i-a));return a=i+e,window.setTimeout(t,e)},h=window.cancelAnimationFrame||u("CancelAnimationFrame")||u("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)},t.requestAnimFrame=function(t,i,e,r){if(!e)return s(function(){i?c.bind(t,i).call(i,r):t()});i?c.bind(t,i).call(i,r):t()},t.cancelAnimFrame=function(t){t&&h.call(window,t)}),Browser.DW||(t.requestIdleCallback=window.requestIdleCallback?function(t,i){return window.requestIdleCallback(t,i)}:function(t,i){void 0===i&&(i={});var e=c.uM();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,70-(c.uM()-e))}})},i.timeout||0)},t.cancelIdleCallback=window.cancelIdleCallback?function(t){return window.cancelIdleCallback(t)}:function(t){clearTimeout(t)});var c=t;return c}(),globalInstance=self;function noop(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i]}var URLObject="undefined"!=typeof window?window.URL||window.webkitURL||{createObjectURL:function(){console.error("URL not exist, please use more popular browser")}}:URL||webkitURL||{createObjectURL:function(){console.error("URL not exist, please use more popular browser")}},AdaptorMap$1=globalInstance.Map||(b0.prototype.has=function(t){return Boolean(this.gV[t])},b0.prototype.set=function(t,i){return this.gV[t]=i},b0.prototype.get=function(t){return this.gV[t]},b0.prototype.pV=function(t){delete this.gV[t]},b0.prototype.clear=function(){this.gV={}},b0);function b0(){this.gV={}}var Color=(h0.Wb=function(t,i){return{rgba:t.rgba}},h0.Gb=function(t){return new h0(t.rgba)},h0.Hb=function(t,i){void 0===i&&(i=[]);for(var e=0,r=t.length;e<r;e+=2)i[e/2]=parseInt(t.substr(e,2),16);return i},h0.Yx=function(t){return t.startsWith("#")&&(t=t.substr(1)),colorNames[t]?h0.Hb(colorNames[t].substr(1)):1===t.length?h0.Hb(t+t+t+t+t+t):3===t.length?h0.Hb(t[0]+t[0]+t[1]+t[1]+t[2]+t[2]):6===t.length?h0.Hb(t):[0,0,0]},h0.normalize=function(t){for(var i=[],e=0,r=t.length;e<r;e++)i[e]=t[e]/255;return i},h0.create=function(t){return t?new h0(t):null},h0.prototype.normalize=function(){return[this.rgba[0]/255,this.rgba[1]/255,this.rgba[2]/255,this.rgba[3]/255]},h0.prototype.Vb=function(t){"string"==typeof t?colorNames[t]?this.Hb(colorNames[t].substr(1)):0!==t.length&&(t.startsWith("#")&&(t=t.substr(1)),1!==t.length?3!==t.length?6!==t.length?8!==t.length?t.startsWith("rgba(")?this.Yb(colorNames[t].substr(1)):t.startsWith("rgb(")&&this.Kb(colorNames[t].substr(1)):this.$b(t):this.Hb(t):this.Hb(t[0]+t[0]+t[1]+t[1]+t[2]+t[2]):this.Hb(t+t+t+t+t+t)):t instanceof Array&&(this.rgba[0]=t[0],this.rgba[1]=t[1],this.rgba[2]=t[2],this.rgba[3]=t[3]||255)},h0.prototype.Hb=function(t){this.$b(t+"FF")},h0.prototype.$b=function(t){for(var i=0,e=t.length;i<e;i+=2)this.rgba[i/2]=parseInt(t.substr(i,2),16)},h0.prototype.Kb=function(t){t=t.split(","),this.rgba[0]=parseInt(t[0].substr(4),10),this.rgba[1]=parseInt(t[1],10),this.rgba[2]=parseInt(t[2],10),this.rgba[3]=255},h0.prototype.Yb=function(t){t=t.split(","),this.rgba[0]=parseInt(t[0].substr(5),10),this.rgba[1]=parseInt(t[1],10),this.rgba[2]=parseInt(t[2],10),this.rgba[3]=255*parseFloat(t[3])<<0},h0);function h0(t){this.type="AMap.Color",this.rgba=[],this.Vb(t)}var colorNames={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},SmartArrayBuffer=(F0.prototype.update=function(t){var i,e,r;0!==t.length&&(i="ARRAY_BUFFER"===this.type,e=this.AM.gl,r=(i?this.AM.de:this.AM.me).current,(i?this.AM.de:this.AM.me).set(this.buffer),this.uf<t.byteLength?(e.bufferData(e[this.type],t,e.STATIC_DRAW),this.byteLength=t.byteLength,this.uf=t.byteLength):(e.bufferSubData(e[this.type],0,t),this.byteLength=t.byteLength),(i?this.AM.de:this.AM.me).set(r))},F0.prototype.destroy=function(){this.buffer&&this.AM.deleteBuffer(this.buffer)},F0);function F0(t,i,e,r){void 0===r&&(r="ARRAY_BUFFER"),this.AM=t,this.kM=e,this.type=r,this.buffer="ARRAY_BUFFER"===r?t.fe(i,e,"DYNAMIC_DRAW"):t.ve(i),this.uf=i.byteLength,this.byteLength=i.byteLength}var TextCombineTexture=(O0.prototype.Pm=function(t){this.Ek.push(t)},O0.prototype.update=function(t){var a=this;if(this.z_){var i=this.Ek,o=t.context;this.ov(o);for(var s=this.av,h=o.gl,u=t.Hn(),l=this,e=0,r=i;e<r.length;e++)!function(t){for(var n=t.data,i=0,e=t.Dm;i<e.length;i++)!function(r){l.z_.loadImage(r.lc,{cb:function(t){a.buffer.update(n);var i={Zi:!1};"alphaImage"===t.type&&(i.format=h.ALPHA),a.Nk.update(t.img,i),a.Nk.bind(h.CLAMP_TO_EDGE,h.LINEAR,h.LINEAR);var e=a.Nk.size,t=[a.maxWidth,a.maxHeight];s.Wi.set(a.texture.texture),o.bindFramebuffer.set(s.framebuffer),i=o.be.current,o.be.set([0,0,a.maxWidth,a.maxHeight]),u.Ce({u_sourceTexture:a.Nk,u_sourceTextureSize:e,u_targetTextureSize:t},{a_sourceTexturePos:{type:"vec2",buffer:a.buffer.buffer,Re:8,offset:0},a_targetTexturePos:{type:"vec2",buffer:a.buffer.buffer,Re:8,offset:4}},6*r.length,a.Pc,"TRIANGLES",void 0,void 0,void 0,void 0,6*r.start),u.Ni(),s.Wi.set(null),o.bindFramebuffer.set(null),o.bindTexture.set(null),o.be.set(i),a.clear(),URLObject.revokeObjectURL(r.lc)},type:"text"})}(e[i]);l.texture.bind(o.gl.CLAMP_TO_EDGE,o.gl.LINEAR,o.gl.LINEAR)}(r[e]);this.Ek=[],this.clear()}},O0.prototype.ov=function(t){var i,e=t.gl;this.buffer||(this.buffer=new SmartArrayBuffer(t,new Uint16Array(0),8)),this.texture||(this.texture=t.createTexture({height:this.maxHeight,width:this.maxWidth,data:null}),this.texture.bind(e.CLAMP_TO_EDGE,e.LINEAR,e.LINEAR)),this.Nk||(this.Nk=t.createTexture({height:this.maxHeight,width:this.maxWidth,data:null}),this.Nk.bind(e.CLAMP_TO_EDGE,e.LINEAR,e.LINEAR)),this.Es||(this.Es={}),this.Pc||(this.Pc=t.ve(this.Lk())),this.av||(i=t.createFramebuffer(4096,4096),(e=t.createTexture({width:4096,height:4096,data:null})).bind(t.gl.CLAMP_TO_EDGE,t.gl.LINEAR,t.gl.LINEAR),i.Wi.set(e.texture),this.av=i)},O0.prototype.Dk=function(t,i){var e=Object.keys(t),r={start:this.pv,length:e.length,lc:i},i=this.Rk(t),n=this.Pk;if(this.Uk+e.length>this.uf)return console.error("TEXTURE FULL"),i;for(var a=this.unit,o=0,s=e.length;o<s;o++){var u=(h=t[e[o]])[7]||a,l=h[8]||a,c=this.cv(u,l),f=void 0!==h[7],d=4*(this.pv+o)*4,v=f?0:h[5],h=f?0:h[6];n[d]=v,n[1+d]=h,n[2+d]=c[0],n[3+d]=c[1],n[4+d]=v,n[5+d]=h+l,n[6+d]=c[0],n[7+d]=c[1]+l,n[8+d]=v+u,n[9+d]=h+l,n[10+d]=c[0]+u,n[11+d]=c[1]+l,n[12+d]=v+u,n[13+d]=h,n[14+d]=c[0]+u,n[15+d]=c[1]}return this.pv+=e.length,this.zk.push(r),i},O0.prototype.qk=function(t){return t=Object.keys(t),this.Uk+t.length<this.uf},O0.prototype.Wk=function(){this.buffer.update(this.Gk())},O0.prototype.Gk=function(){var t=4*this.pv*4;return this.Pk.slice(0,t)},O0.prototype.getSize=function(){return[this.maxWidth,this.Uk/this.Hk*this.unit]},O0.prototype.clear=function(){this.pv=0,this.zk=[]},O0.prototype.destroy=function(){this.buffer&&(this.buffer.destroy(),delete this.buffer),this.texture&&(this.texture.destroy(),delete this.texture),this.Nk&&(this.Nk.destroy(),delete this.Nk),this.Pc&&(this.Pc.context.deleteBuffer(this.Pc),delete this.Pc),this.av&&(this.av.destroy(),delete this.av)},O0.prototype.Rk=function(t){var i=this.Vk,e=this.$k,r=this.tU(t),n=r.iU,t=r.eU;return(r=this.rU)-e<t&&(r=this.rU=e+t),i+n<=this.maxWidth?this.Vk+=n:(e=r,i=0,this.Vk=n,this.$k=e),this.nU=[i,e],{startX:i,startY:e}},O0.prototype.tU=function(t){var i,e,r,n=this.unit,a=0,o=0;for(i in t)t.hasOwnProperty(i)&&(e=(r=t[i])[7]||n,o<(r=r[8]||n)&&(o=r),a+=e);return{iU:a,eU:o}},O0.prototype.cv=function(t,i){var r=(e=this.nU)[0],e=e[1];return this.nU=[r+t,e],this.Uk+=1,[r,e]},O0.prototype.Lk=function(){for(var t=new Uint16Array(6*this.uf),i=0,e=this.uf;i<e;i++){var r=6*i,n=4*i;t[r]=n,t[1+r]=1+n,t[2+r]=2+n,t[3+r]=n,t[4+r]=2+n,t[5+r]=3+n}return t},O0);function O0(t){this.z_=t,this.Uk=0,this.unit=32,this.Hk=128,this.maxWidth=this.unit*this.Hk,this.maxHeight=this.unit*this.Hk,this.uf=this.maxWidth/this.unit*(this.maxHeight/this.unit),this.Pk=new Uint16Array(4*this.uf*4),this.Kk=0,this.pv=0,this.zk=[],this.Ek=[],this.Vk=0,this.$k=0,this.rU=0,this.nU=[0,0],this.Es={}}var MockTextureManager=(k2.prototype.Xk=function(){return this.Jk[this.currentIndex]},k2.prototype.Qk=function(t,i){if(i&&this.Xk().ov(i),this.Xk().qk(t))return{index:this.currentIndex,tO:this.Xk()}},k2.prototype.destroy=function(){for(var t=0,i=this.Jk;t<i.length;t++)i[t].destroy();this.Jk=[]},k2);function k2(){this.currentIndex=0,this.Jk=[new TextCombineTexture]}var chnP16=[["90.398619","47.62125"],["90.493569","47.512157"],["90.491338","47.430787"],["90.552986","47.391174"],["90.522859","47.318461"],["90.584915","47.224989"],["90.782025","47.019194"],["90.923517","46.97996"],["90.986624","46.807403"],["91.082926","46.722064"],["91.051812","46.596604"],["91.100242","46.564068"],["91.102624","46.537196"],["90.935125","46.300398"],["91.032801","46.126363"],["91.055181","46.011658"],["90.741148","45.713536"],["90.699563","45.544726"],["90.700228","45.504993"],["90.795887","45.449956"],["90.832257","45.31629"],["90.919719","45.26871"],["90.920899","45.225065"],["91.136978","45.244316"],["91.253943","45.164928"],["91.372068","45.142003"],["91.45689","45.18485"],["91.624753","45.098124"],["92.062061","45.11548"],["92.497694","45.030848"],["92.887666","45.075869"],["93.513157","44.997233"],["94.22699","44.694971"],["94.374082","44.542037"],["94.620202","44.47394"],["94.737532","44.366876"],["95.002041","44.282908"],["95.42701","44.324539"],["95.440292","44.292217"],["95.365491","44.054053"],["95.549126","44.026335"],["95.883651","43.431746"],["95.911953","43.287656"],["96.385653","42.919774"],["96.41151","42.75927"],["97.176454","42.824161"],["98.198333","42.682435"],["99.505985","42.597497"],["99.964106","42.676693"],["100.259793","42.666107"],["100.320604","42.718863"],["100.867753","42.700052"],["101.814637","42.530852"],["102.090733","42.250567"],["102.451458","42.173439"],["102.716911","42.181644"],["103.426452","41.910629"],["103.858223","41.830321"],["104.537873","41.903108"],["104.55755","41.881352"],["104.554117","41.69046"],["104.929798","41.682608"],["105.010371","41.620463"],["105.220141","41.778353"],["105.732529","41.977008"],["106.776853","42.319288"],["107.167833","42.354897"],["107.458928","42.487147"],["107.937949","42.433308"],["108.241189","42.489425"],["108.84269","42.425722"],["109.022141","42.487574"],["109.290662","42.465227"],["109.534657","42.500548"],["109.723763","42.60669"],["110.100045","42.671172"],["110.420666","42.80617"],["111.005001","43.354829"],["111.446257","43.521761"],["111.555004","43.519925"],["111.780481","43.697712"],["111.925235","43.719055"],["111.936243","43.796237"],["111.863286","43.902314"],["111.643689","44.039247"],["111.386948","44.360034"],["111.610923","44.793044"],["111.742544","44.988614"],["111.9942","45.118751"],["112.435906","45.103062"],["112.61512","44.956037"],["112.806373","44.882816"],["113.624854","44.775834"],["113.896701","44.9424"],["114.104283","44.984106"],["114.437113","45.233044"],["114.543629","45.41585"],["114.742713","45.46746"],["114.977202","45.40645"],["115.36123","45.421513"],["115.688202","45.487095"],["116.023886","45.712008"],["116.163919","45.717567"],["116.251037","45.785617"],["116.213851","45.874652"],["116.246574","45.98171"],["116.56904","46.316673"],["116.83033","46.413023"],["117.353361","46.390324"],["117.41533","46.528251"],["117.39222","46.582448"],["117.411768","46.610108"],["117.618878","46.628442"],["117.72387","46.549579"],["118.312433","46.768455"],["118.774374","46.71799"],["118.828619","46.795917"],["118.912926","46.804113"],["118.941979","46.764971"],["119.028625","46.769292"],["119.119864","46.669494"],["119.724391","46.623078"],["119.791059","46.707882"],["119.884572","46.701717"],["119.896224","46.880494"],["119.836485","46.899381"],["119.742007","47.13776"],["119.30249","47.404711"],["119.315214","47.461827"],["119.134262","47.517476"],["119.10804","47.64174"],["118.755577","47.747779"],["118.55396","47.96464"],["118.177657","48.02096"],["117.82558","47.987997"],["117.388809","47.612384"],["117.082887","47.796869"],["116.816533","47.867783"],["116.452289","47.808327"],["116.270714","47.845797"],["115.938377","47.653883"],["115.559971","47.900966"],["115.500727","48.161305"],["115.791907","48.279437"],["115.776629","48.537807"],["116.042275","48.826715"],["116.024444","48.890046"],["116.709459","49.880215"],["117.07866","49.723328"],["117.482128","49.648667"],["117.801998","49.554185"],["117.858689","49.620567"],["118.068073","49.643304"],["118.210831","49.759243"],["118.358674","49.80286"],["118.37378","49.853853"],["118.468623","49.857768"],["118.559926","49.957101"],["119.082034","50.01451"],["119.311051","50.169532"],["119.328389","50.327724"],["119.175332","50.320094"],["119.103534","50.373674"],["119.103642","50.409488"],["119.224019","50.469114"],["119.262214","50.625767"],["119.470096","50.763554"],["119.480245","50.910299"],["119.734497","51.106944"],["119.73542","51.228925"],["119.789064","51.243368"],["119.787948","51.298691"],["119.896417","51.365189"],["119.889615","51.410731"],["119.950318","51.426267"],["120.067241","51.699773"],["120.632029","51.963004"],["120.755196","52.16206"],["120.733974","52.23734"],["120.60276","52.318868"],["120.688398","52.529211"],["120.459208","52.615218"],["120.046556","52.554881"],["120.004778","52.785297"],["120.275145","52.889292"],["120.877526","53.323248"],["121.231921","53.310391"],["122.338707","53.534212"],["122.443142","53.474191"],["122.84101","53.486577"],["123.278553","53.592823"],["123.480492","53.533829"],["123.518364","53.587614"],["123.901491","53.509565"],["124.129157","53.379309"],["124.260864","53.404185"],["124.447374","53.252351"],["124.696798","53.233398"],["124.854212","53.143501"],["124.877429","53.19179"],["125.14374","53.233437"],["125.500989","53.129213"],["125.53472","53.084642"],["125.631731","53.108131"],["125.776978","53.000452"],["125.732839","52.906456"],["125.842016","52.927481"],["125.973551","52.795444"],["126.049747","52.829373"],["126.137295","52.788424"],["126.136093","52.7501"],["126.082878","52.727183"],["126.094744","52.66376"],["126.01078","52.632295"],["126.225078","52.557751"],["126.227546","52.502887"],["126.28664","52.498733"],["126.378071","52.405299"],["126.365626","52.334723"],["126.460233","52.313556"],["126.457937","52.278438"],["126.370797","52.21752"],["126.587327","52.146539"],["126.544647","52.022831"],["126.483493","52.004144"],["126.489866","51.963387"],["126.757379","51.72942"],["126.769931","51.638237"],["126.737959","51.604012"],["126.870396","51.541384"],["126.8313","51.449554"],["126.939726","51.411373"],["126.952021","51.35238"],["127.007918","51.339647"],["126.930671","51.194554"],["126.950047","51.077214"],["127.328668","50.761993"],["127.324612","50.674039"],["127.399564","50.585975"],["127.336199","50.480736"],["127.39435","50.441709"],["127.374866","50.346296"],["127.622938","50.242265"],["127.624762","50.159938"],["127.524126","50.053819"],["127.569466","49.832087"],["127.686474","49.798414"],["127.716987","49.69577"],["127.838395","49.617717"],["128.185065","49.56898"],["128.533065","49.633229"],["128.791094","49.618148"],["128.84167","49.562161"],["128.811865","49.506248"],["129.022107","49.485245"],["129.11165","49.389985"],["129.230032","49.429552"],["129.343135","49.392234"],["129.383497","49.461849"],["129.526126","49.451932"],["129.593332","49.316758"],["129.745059","49.313625"],["129.972146","49.057136"],["130.243692","48.89923"],["130.444579","48.939218"],["130.526934","48.889044"],["130.693552","48.907086"],["130.705612","48.869994"],["130.580449","48.630526"],["130.630317","48.609845"],["130.648105","48.52472"],["130.790884","48.525345"],["130.778868","48.413864"],["130.875106","48.300724"],["130.708423","48.108792"],["130.914073","47.945556"],["131.01546","47.736076"],["131.552374","47.750448"],["131.621768","47.692216"],["131.711934","47.740348"],["131.958075","47.703033"],["131.995368","47.741041"],["132.235458","47.739381"],["132.340472","47.796162"],["132.546873","47.750881"],["132.655685","47.89209"],["132.654505","47.979308"],["132.811511","47.967327"],["133.097413","48.158185"],["133.473394","48.128346"],["133.728504","48.281365"],["134.199908","48.411499"],["134.519091","48.448618"],["134.797053","48.402511"],["134.903462","48.476549"],["135.111473","48.465979"],["135.087461","48.366044"],["134.70854","48.235879"],["134.705815","48.142967"],["134.587133","47.991745"],["134.802439","47.732613"],["134.805079","47.701502"],["134.584837","47.454022"],["134.327302","47.405829"],["134.203448","47.309543"],["134.189801","47.25835"],["134.258273","47.190339"],["134.25029","47.096963"],["134.160018","47.066453"],["134.091868","46.968583"],["134.042215","46.633997"],["133.892806","46.477753"],["133.978872","46.404235"],["133.938468","46.35728"],["133.943124","46.251663"],["133.734856","46.143924"],["133.77584","46.068467"],["133.698828","45.924364"],["133.509421","45.823745"],["133.533154","45.779212"],["133.488886","45.719859"],["133.513906","45.69461"],["133.496869","45.599732"],["133.229721","45.489276"],["133.168674","45.414886"],["133.124621","45.258199"],["133.158975","45.105773"],["132.946351","44.989767"],["131.996377","45.226214"],["131.893723","45.301592"],["131.80903","45.186922"],["131.72307","45.208468"],["131.688416","45.166214"],["131.716461","45.107939"],["131.507506","44.942491"],["131.131804","44.90387"],["131.021662","44.839439"],["131.137726","44.723122"],["131.338398","44.056058"],["131.273661","43.974086"],["131.248341","43.566337"],["131.344342","43.514183"],["131.346252","43.391702"],["131.236002","43.22857"],["131.242955","43.131057"],["131.13749","43.018486"],["131.168904","42.923466"],["131.065779","42.901952"],["131.05005","42.834641"],["130.673962","42.819219"],["130.46123","42.731347"],["130.617421","42.685874"],["130.650616","42.595365"],["130.604267","42.509264"],["130.661752","42.412289"],["130.553477","42.421191"],["130.507536","42.571366"],["130.42958","42.523293"],["130.416105","42.590452"],["130.235238","42.692151"],["130.237405","42.873951"],["130.125611","42.876169"],["130.075765","42.911319"],["130.092008","42.956423"],["129.933178","42.975108"],["129.878311","42.92378"],["129.795163","42.719399"],["129.815032","42.601778"],["129.735103","42.411401"],["129.607751","42.418118"],["129.55415","42.330996"],["129.383025","42.403749"],["129.268527","42.323223"],["129.222093","42.257635"],["129.2434","42.19201"],["128.992774","42.075243"],["128.959644","41.997184"],["128.121765","41.974471"],["128.183949","41.746614"],["128.336234","41.608881"],["128.268621","41.434008"],["128.127944","41.337429"],["128.00482","41.417516"],["127.65285","41.377517"],["127.537794","41.447986"],["127.248116","41.454805"],["127.234962","41.492217"],["127.08566","41.544545"],["127.128081","41.592273"],["127.012339","41.679643"],["127.035706","41.702541"],["126.914964","41.778689"],["126.809177","41.669562"],["126.74607","41.691325"],["126.612003","41.629975"],["126.529799","41.412013"],["126.562243","41.368516"],["126.557908","41.33825"],["126.45328","41.325763"],["126.3043","41.139979"],["126.148946","41.070584"],["126.132917","40.990783"],["126.041744","40.924117"],["126.041787","40.876401"],["125.721896","40.840697"],["125.681319","40.80754"],["125.712733","40.774611"],["125.686641","40.761853"],["125.582743","40.75319"],["125.423162","40.624246"],["125.310595","40.636606"],["125.022783","40.521123"],["125.06057","40.46396"],["124.907556","40.445935"],["124.374311","40.078794"],["124.388452","39.905638"],["123.741782","39.10294"],["123.282201","38.058466"],["124.24299","31.368588"],["124.714351","29.508006"],["125.072136","25.859069"],["124.935837","25.676612"],["123.836839","25.5127"],["122.751321","24.515956"],["121.947788","22.070621"],["121.867355","21.383021"],["119.827087","18.177352"],["119.026527","16.873489"],["119.11665","15.951676"],["119.101406","14.063252"],["119.100623","12.209516"],["119.07742","11.23357"],["116.011301","7.678721"],["114.941852","6.182877"],["114.229887","5.47862"],["113.86269","4.692236"],["112.795642","3.695169"],["111.953841","3.231846"],["109.894631","3.714037"],["108.659956","4.748032"],["107.925439","5.91737"],["107.96348","6.895899"],["108.555028","9.28242"],["110.128544","11.338543"],["109.983314","12.44102"],["109.806102","13.535124"],["109.636428","14.636855"],["109.78629","15.402577"],["109.449813","15.723154"],["108.117871","17.258818"],["107.310076","18.842045"],["107.374728","19.467179"],["108.051095","20.114414"],["108.328478","21.187373"],["108.278139","21.403412"],["108.107378","21.47839"],["107.943356","21.509097"],["107.849844","21.619412"],["107.547355","21.55724"],["107.470751","21.571209"],["107.451932","21.615722"],["107.357798","21.570152"],["107.289755","21.702532"],["107.207551","21.682454"],["106.998789","21.79714"],["107.015655","21.907972"],["106.951239","21.893876"],["106.768184","21.978429"],["106.703854","21.935422"],["106.674027","21.941175"],["106.664565","22.266461"],["106.643493","22.30484"],["106.538715","22.328641"],["106.53142","22.460275"],["106.592939","22.622033"],["106.708553","22.615477"],["106.793547","22.794758"],["106.548972","22.899047"],["106.304634","22.830954"],["106.190543","22.951201"],["106.088791","22.966118"],["105.867991","22.889816"],["105.712488","23.033058"],["105.550311","23.045755"],["105.530806","23.163759"],["105.330691","23.346393"],["105.249667","23.237422"],["105.089657","23.231409"],["104.951169","23.149476"],["104.843495","23.101267"],["104.893084","22.94393"],["104.747257","22.79551"],["104.567764","22.813411"],["104.371855","22.65974"],["104.249053","22.720536"],["104.237015","22.806132"],["104.137495","22.783462"],["104.078336","22.740585"],["104.017096","22.520843"],["103.962035","22.492019"],["103.666692","22.741534"],["103.525093","22.580551"],["103.458703","22.648987"],["103.394201","22.751092"],["103.341286","22.767397"],["103.306804","22.661878"],["103.215652","22.621855"],["103.205309","22.536362"],["103.107505","22.486567"],["103.076606","22.416444"],["102.91784","22.456309"],["102.840786","22.583305"],["102.610223","22.696625"],["102.558017","22.673838"],["102.493515","22.738071"],["102.424293","22.676273"],["102.446694","22.621241"],["102.327948","22.511268"],["102.278531","22.386786"],["102.142661","22.36867"],["102.03475","22.427651"],["101.942096","22.415036"],["101.8765","22.355136"],["101.764791","22.472926"],["101.700847","22.453176"],["101.694624","22.349917"],["101.579332","22.223979"],["101.631925","21.988099"],["101.718335","21.962549"],["101.79863","21.848016"],["101.778824","21.73654"],["101.856952","21.62392"],["101.847124","21.595911"],["101.773932","21.558438"],["101.760328","21.349162"],["101.862724","21.239522"],["101.764727","21.115389"],["101.663511","21.164623"],["101.587808","21.146813"],["101.574161","21.209359"],["101.53264","21.221881"],["101.293538","21.149214"],["101.203866","21.206559"],["101.216612","21.289294"],["101.114173","21.403592"],["101.183052","21.497378"],["101.111941","21.560533"],["101.095719","21.734009"],["100.901892","21.659343"],["100.747526","21.494902"],["100.586185","21.423588"],["100.468576","21.433695"],["100.414267","21.504705"],["100.248806","21.434534"],["100.115855","21.481604"],["100.078626","21.591362"],["100.11579","21.654357"],["100.010068","21.666462"],["99.916813","21.811046"],["99.968591","21.972539"],["99.950867","22.023392"],["99.699748","22.008512"],["99.585378","22.083453"],["99.19384","22.094388"],["99.129961","22.147006"],["99.24403","22.347694"],["99.226069","22.407775"],["99.348979","22.505302"],["99.289627","22.751963"],["99.429595","22.858203"],["99.422858","22.95454"],["99.521735","22.955884"],["99.488432","23.051046"],["99.336512","23.101188"],["99.258964","23.048934"],["99.10449","23.057463"],["98.99924","23.151389"],["98.858693","23.167152"],["98.89811","23.292382"],["98.844295","23.323341"],["98.878284","23.4184"],["98.821571","23.466061"],["98.773527","23.530055"],["98.849638","23.617887"],["98.774085","23.751823"],["98.656368","23.775684"],["98.63961","23.801661"],["98.649909","23.978332"],["98.828974","24.077833"],["98.83893","24.109859"],["98.594849","24.051324"],["98.534853","24.098401"],["98.118939","24.06406"],["97.652578","23.812007"],["97.500916","23.916402"],["97.507889","23.946076"],["97.703905","24.12772"],["97.7321","24.242073"],["97.646012","24.307132"],["97.678134","24.384313"],["97.653759","24.420913"],["97.528617","24.403523"],["97.504349","24.421636"],["97.520614","24.750904"],["97.686181","24.867223"],["97.726886","24.872596"],["97.701159","24.901891"],["97.691374","25.085579"],["97.816257","25.289948"],["97.844152","25.297669"],["97.93803","25.249897"],["98.122308","25.413237"],["98.152177","25.643055"],["98.313818","25.589382"],["98.380058","25.615679"],["98.510756","25.863626"],["98.635018","25.83211"],["98.668857","25.860517"],["98.546226","26.121072"],["98.648708","26.171346"],["98.686366","26.138757"],["98.648","26.279486"],["98.751404","26.620222"],["98.701365","26.849746"],["98.733852","27.033154"],["98.685272","27.065508"],["98.663149","27.194049"],["98.708661","27.325701"],["98.657935","27.422786"],["98.67244","27.532116"],["98.574979","27.540164"],["98.537407","27.61841"],["98.464022","27.631357"],["98.417695","27.512725"],["98.29766","27.498051"],["98.144388","27.832814"],["98.155954","27.920407"],["98.109477","27.953809"],["98.111","28.123353"],["97.991245","28.182664"],["97.984571","28.253152"],["97.904449","28.328541"],["97.775702","28.306704"],["97.650433","28.498038"],["97.537651","28.471615"],["97.537544","28.300942"],["97.374809","28.215134"],["97.340262","28.085365"],["97.441328","28.020526"],["97.41045","27.866111"],["97.271254","27.865238"],["97.104206","27.710621"],["97.074959","27.716851"],["96.959302","27.833554"],["96.799979","27.862962"],["96.485238","28.041967"],["96.435456","28.122218"],["96.282742","28.11548"],["96.254032","28.195619"],["96.011753","28.160892"],["95.866721","28.266533"],["95.747824","28.246895"],["95.417182","28.118906"],["95.304315","27.916842"],["94.898787","27.716889"],["94.531603","27.567615"],["94.290032","27.552854"],["93.888688","27.17204"],["93.845987","27.008916"],["93.571308","26.909059"],["92.944937","26.862668"],["92.647405","26.922873"],["92.093539","26.830122"],["92.094247","26.952103"],["91.998589","27.089524"],["92.083004","27.299047"],["92.034273","27.387239"],["91.995907","27.444668"],["91.729424","27.433927"],["91.566002","27.518015"],["91.534996","27.644815"],["91.602566","27.75719"],["91.514804","27.82382"],["91.562676","27.867913"],["91.468799","27.914302"],["91.441784","27.98019"],["91.319818","28.026891"],["91.09123","27.815659"],["90.700164","28.042914"],["90.592875","27.992071"],["90.457885","28.016188"],["90.284765","28.126494"],["90.15898","28.149257"],["90.026414","28.108761"],["89.808083","28.209972"],["89.741178","28.14466"],["89.620585","28.133666"],["89.394701","27.853894"],["89.261577","27.776101"],["89.129934","27.494282"],["89.208705","27.359876"],["89.003119","27.183627"],["88.914757","27.261172"],["88.754318","27.459692"],["88.742559","27.575756"],["88.824484","27.683585"],["88.858366","27.84585"],["88.817167","27.989323"],["88.749833","28.04227"],["88.643789","28.079175"],["88.414536","27.948938"],["88.164768","27.927649"],["88.119621","27.836742"],["87.844298","27.914245"],["87.731731","27.773994"],["87.596998","27.78341"],["87.555606","27.832169"],["87.226918","27.783961"],["87.114007","27.809055"],["87.017899","27.921014"],["86.741974","28.007834"],["86.699681","28.06541"],["86.621253","28.036683"],["86.583402","28.057988"],["86.53626","27.935498"],["86.410089","27.875861"],["86.21079","27.953771"],["86.168518","28.117581"],["86.115561","28.075237"],["86.149271","27.905693"],["85.994046","27.879218"],["85.944521","27.932939"],["85.832512","28.151055"],["85.730202","28.210313"],["85.701256","28.320003"],["85.608344","28.222546"],["85.501399","28.296408"],["85.379283","28.245137"],["85.108273","28.308745"],["85.080035","28.467918"],["85.159664","28.55567"],["85.153999","28.618263"],["85.06716","28.641711"],["84.995663","28.560816"],["84.851232","28.539159"],["84.68178","28.609315"],["84.624424","28.696084"],["84.465938","28.711423"],["84.389849","28.828396"],["84.202845","28.880867"],["84.21602","29.009754"],["84.163899","29.035197"],["84.138279","29.170731"],["84.156046","29.210987"],["84.110534","29.218441"],["84.085858","29.266484"],["83.922973","29.294016"],["83.658078","29.134976"],["83.571818","29.151918"],["83.232014","29.552591"],["83.070545","29.578981"],["82.920063","29.684809"],["82.816744","29.661877"],["82.675381","29.739992"],["82.684436","29.800693"],["82.605515","29.811846"],["82.541184","29.930689"],["82.159367","30.045582"],["82.174859","30.141657"],["82.084479","30.216893"],["82.077913","30.310431"],["81.993091","30.291904"],["81.637645","30.413095"],["81.562006","30.34101"],["81.44238","30.380465"],["81.419613","30.185719"],["81.306617","30.138261"],["81.279452","29.994378"],["81.11603","30.010804"],["80.995588","30.23662"],["80.302677","30.539587"],["80.0878","30.543727"],["79.94236","30.672449"],["79.868267","30.834188"],["79.825373","30.839126"],["79.673774","30.945519"],["79.593372","30.894565"],["79.4033","31.036535"],["79.346716","31.001927"],["79.336288","30.933391"],["79.224193","30.920174"],["79.170227","30.981969"],["79.092743","30.963258"],["78.986249","31.027673"],["78.96668","31.157988"],["78.856924","31.281503"],["78.783796","31.274131"],["78.728542","31.344273"],["78.757918","31.433515"],["78.697536","31.51499"],["78.804524","31.611708"],["78.62458","31.82264"],["78.722126","31.927562"],["78.578596","31.999524"],["78.497701","32.11424"],["78.432641","32.118838"],["78.402622","32.220389"],["78.4762","32.31131"],["78.36638","32.528271"],["78.381336","32.554898"],["78.75176","32.731065"],["78.809223","32.496551"],["78.976872","32.364195"],["79.005883","32.376536"],["79.080126","32.394077"],["79.114029","32.491665"],["79.279168","32.61355"],["79.272795","32.713951"],["79.195912","32.779409"],["79.222884","32.93039"],["79.135616","33.001861"],["79.1289","33.16414"],["78.818901","33.407102"],["78.715496","33.540948"],["78.723736","33.604683"],["78.656015","33.65053"],["78.749506","33.746395"],["78.715582","33.972994"],["78.631468","34.014908"],["78.635867","34.100789"],["78.894839","34.171104"],["78.97243","34.341399"],["78.867137","34.336615"],["78.698266","34.491737"],["78.566988","34.478543"],["78.527312","34.539705"],["78.430667","34.514354"],["78.403587","34.570207"],["78.247139","34.615374"],["78.238835","34.685346"],["78.179204","34.722162"],["78.172767","34.964414"],["78.056982","35.102584"],["77.985699","35.231108"],["77.986279","35.376996"],["78.060694","35.455461"],["77.904546","35.435236"],["77.815948","35.484733"],["77.688854","35.41908"],["77.389219","35.439747"],["77.300084","35.509365"],["77.189727","35.490691"],["76.844516","35.637645"],["76.746969","35.630442"],["76.675837","35.721674"],["76.57151","35.752903"],["76.552477","35.878323"],["76.372211","35.795695"],["76.149781","35.797227"],["76.124933","35.947734"],["75.922673","36.058952"],["75.911558","36.150212"],["76.037836","36.25097"],["75.962627","36.325913"],["75.987883","36.449905"],["75.852334","36.642976"],["75.645268","36.740208"],["75.442793","36.696296"],["75.389578","36.92691"],["75.229053","36.936669"],["75.144038","36.993436"],["74.896481","36.905551"],["74.830134","37.022531"],["74.731107","36.999897"],["74.690745","37.052831"],["74.559724","37.004866"],["74.481919","37.046871"],["74.437845","37.120308"],["74.499922","37.266966"],["74.739861","37.314987"],["74.866312","37.253902"],["75.109062","37.372562"],["75.102367","37.44057"],["74.921629","37.536802"],["74.864573","37.654148"],["74.964759","37.773242"],["74.890065","37.834937"],["74.908884","37.982278"],["74.777327","38.153069"],["74.761705","38.335766"],["74.838288","38.415972"],["74.834661","38.466073"],["74.630191","38.571841"],["74.373536","38.625873"],["74.159667","38.646204"],["74.103234","38.581"],["74.111817","38.521998"],["74.000838","38.494528"],["73.77285","38.599147"],["73.670411","38.8621"],["73.725193","38.95749"],["73.802719","38.951449"],["73.807654","38.986017"],["73.72221","39.008697"],["73.473516","39.38863"],["73.616295","39.498494"],["73.852308","39.511093"],["73.918183","39.600828"],["73.897347","39.705585"],["73.808942","39.800228"],["73.93934","39.994893"],["73.923182","40.040084"],["74.206402","40.150079"],["74.349396","40.120697"],["74.57305","40.295485"],["74.65313","40.30568"],["74.68538","40.371234"],["74.834146","40.370645"],["74.764109","40.445837"],["74.82522","40.547706"],["74.991968","40.485604"],["75.234225","40.478276"],["75.595829","40.68866"],["75.623209","40.675235"],["75.670288","40.537172"],["75.761075","40.482617"],["75.702088","40.361506"],["75.718331","40.319244"],["75.831778","40.356634"],["75.909498","40.327457"],["75.962198","40.405801"],["76.169136","40.4108"],["76.276231","40.468254"],["76.350474","40.381058"],["76.518981","40.485522"],["76.629574","40.63177"],["76.618888","40.769281"],["76.705191","40.836687"],["76.738064","40.970777"],["76.866853","41.052415"],["77.002079","41.102703"],["77.174621","41.038594"],["77.761016","41.051719"],["77.819595","41.177071"],["78.104789","41.252161"],["78.153155","41.41058"],["78.633699","41.494773"],["78.691227","41.573398"],["79.204752","41.752489"],["79.314144","41.836204"],["79.760721","41.919283"],["79.886034","42.062214"],["80.133162","42.067184"],["80.141101","42.212865"],["80.253518","42.271926"],["80.176806","42.427971"],["80.233755","42.509043"],["80.134728","42.629333"],["80.233669","42.836907"],["80.527124","42.908804"],["80.358446","43.012006"],["80.363209","43.05597"],["80.77054","43.196057"],["80.751915","43.283969"],["80.657952","43.321619"],["80.722024","43.489763"],["80.498157","43.799783"],["80.367136","44.112086"],["80.382199","44.282371"],["80.320637","44.484489"],["80.375676","44.600628"],["80.200903","44.711915"],["80.153825","44.809898"],["79.982829","44.769908"],["79.863417","44.896027"],["79.863911","44.925979"],["80.099001","45.081976"],["80.380783","45.073778"],["80.472493","45.151008"],["80.593643","45.1361"],["80.723355","45.20611"],["80.897505","45.157969"],["81.777248","45.412611"],["81.933761","45.262246"],["82.295816","45.254845"],["82.544253","45.206065"],["82.569401","45.340669"],["82.52743","45.402307"],["82.265496","45.514783"],["82.238288","45.626914"],["82.311373","45.780155"],["82.319655","45.956177"],["82.440763","46.003982"],["82.822452","46.775333"],["83.012309","47.24291"],["83.148286","47.241861"],["83.371532","47.179737"],["83.583899","47.087891"],["83.927865","46.999324"],["84.753106","47.038661"],["84.955001","46.896507"],["85.227256","47.083274"],["85.529079","47.087102"],["85.670679","47.295094"],["85.656817","47.416255"],["85.581307","47.505664"],["85.500433","48.023314"],["85.564678","48.210504"],["85.778117","48.445159"],["86.21609","48.461326"],["86.297393","48.520485"],["86.571493","48.56921"],["86.745751","48.738276"],["86.72689","48.79468"],["86.785169","48.850936"],["86.706676","48.980358"],["86.708565","49.011387"],["86.889625","49.162344"],["87.145572","49.183316"],["87.435358","49.10582"],["87.476878","49.120484"],["87.490826","49.169134"],["87.836187","49.198616"],["87.895432","49.115877"],["87.87024","49.056222"],["87.9406","48.974696"],["87.803872","48.87904"],["88.125672","48.72326"],["88.023491","48.591881"],["88.35763","48.495848"],["88.450756","48.423234"],["88.527102","48.435337"],["88.631537","48.352171"],["88.608513","48.280466"],["88.657844","48.207172"],["88.828926","48.136652"],["88.942652","48.146274"],["89.088199","48.017358"],["89.571383","48.066881"],["89.777999","47.863838"],["90.077548","47.910676"],["90.155997","47.747389"],["90.399628","47.669347"],["90.413575","47.647046"],["90.398619","47.62125"]],JPN=[["145.824681","43.408601"],["145.802708","43.198731"],["145.188847","43.068449"],["144.992667","42.907867"],["143.970938","42.890345"],["143.384543","42.351736"],["143.299399","41.875506"],["142.95333","42.100071"],["142.391844","42.272669"],["141.369501","42.535185"],["140.832544","42.147648"],["141.028863","41.945699"],["141.296655","41.765675"],["141.564447","41.265171"],["141.675004","40.481173"],["141.829516","40.300647"],["141.982619","40.122464"],["142.142627","39.594221"],["142.025897","39.368452"],["142.021777","39.317473"],["141.850783","38.901626"],["140.939308","35.65669"],["139.436268","34.193845"],["137.347075","34.1603"],["135.63835","33.29272"],["133.488103","32.70897"],["131.614016","31.325292"],["130.633951","28.842845"],["127.785048","25.789008"],["126.597333","26.344784"],["128.404011","28.563857"],["128.940636","30.856318"],["128.544464","32.79621"],["129.194642","34.475467"],["129.324698","34.765641"],["129.502255","34.700627"],["129.480282","33.855809"],["130.439605","33.915587"],["130.801388","34.159716"],["130.791882","34.445506"],["131.121471","34.437578"],["131.298124","34.567727"],["132.535148","35.287335"],["132.978675","36.154847"],["133.268559","36.366209"],["134.710796","35.708808"],["135.303308","35.794165"],["136.404389","36.456814"],["136.612743","37.37546"],["137.409252","37.580348"],["137.291471","36.906421"],["137.982237","37.126821"],["138.504087","37.383552"],["138.758146","37.83898"],["139.207212","38.04151"],["139.310081","38.315743"],["139.737028","38.85997"],["139.403318","39.234917"],["139.952634","39.328459"],["140.002073","39.745742"],["139.695586","39.824208"],["139.679107","40.025361"],["139.935912","40.077921"],["140.001079","40.309807"],["139.922802","40.434311"],["139.828954","40.646676"],["139.95008","40.766604"],["139.957833","41.432491"],["140.001779","42.027933"],["139.389291","42.038134"],["139.346719","42.242877"],["139.63099","42.291658"],["139.72712","42.641155"],["139.942098","42.710048"],["140.194783","42.842098"],["140.30396","42.856193"],["140.309453","43.306551"],["140.393224","43.399418"],["140.61976","43.355264"],["140.788732","43.238558"],["140.923314","43.24556"],["141.029058","43.24356"],["141.083989","43.216544"],["141.141667","43.185513"],["141.336675","43.240561"],["141.328435","43.731771"],["141.350408","43.792272"],["141.594854","43.937818"],["141.565334","44.291761"],["141.70541","44.45177"],["141.708157","44.742196"],["141.683437","45.002047"],["141.226594","45.076599"],["141.053559","45.165748"],["140.987641","45.335905"],["140.943696","45.481498"],["141.201589","45.501064"],["141.972005","45.52416"],["142.341996","45.204477"],["142.567215","45.014513"],["142.747966","44.801094"],["143.487122","44.343678"],["144.463587","44.078617"],["144.874201","44.098345"],["145.125513","44.222478"],["145.300832","44.391445"],["145.487445","44.320885"],["145.111163","43.848378"],["145.420933","43.545126"],["145.451146","43.393635"]],IND=[["73.757316","29.95798"],["73.045185","28.989136"],["72.434431","28.60931"],["72.060098","28.097836"],["71.631749","27.60702"],["70.67236","27.593264"],["69.82743","27.041579"],["70.337045","26.566045"],["70.070655","26.098932"],["70.070655","25.85946"],["70.290717","25.713457"],["70.626599","25.671708"],["70.68451","25.201036"],["70.974064","24.791642"],["70.811914","24.612763"],["70.139151","24.465923"],["69.268014","24.435423"],["68.313114","24.267539"],["67.911051","23.808548"],["68.547651","23.00912"],["69.11724","22.684917"],["68.748682","22.406416"],["69.301519","21.536417"],["70.153052","20.55461"],["71.170222","20.332219"],["72.234349","21.204506"],["72.501752","21.087142"],["72.627589","19.003767"],["72.973641","16.878922"],["74.267757","13.888898"],["75.369075","10.48118"],["76.976429","7.781262"],["78.374805","8.242836"],["79.427902","9.641233"],["80.513091","10.734685"],["80.254133","11.953377"],["80.702994","13.082541"],["80.402232","15.312175"],["82.991824","16.887862"],["85.259974","19.051683"],["87.784208","21.10679"],["89.263244","21.658877"],["89.121009","23.437218"],["88.869364","23.717994"],["88.93501","24.317619"],["88.267603","24.596482"],["88.727129","25.073086"],["89.186656","25.132532"],["88.891246","25.626788"],["88.650542","25.666241"],["88.201956","25.892841"],["88.420778","26.12883"],["88.54113","26.285892"],["89.241361","26.020727"],["89.613359","25.863309"],["89.657124","25.330477"],["90.190932","25.070998"],["91.175632","25.051175"],["91.811935","25.05221"],["92.234344","24.983507"],["92.104658","24.649259"],["91.844714","24.363456"],["91.46563","24.215373"],["90.999897","23.839459"],["91.216517","23.054471"],["91.389672","22.300847"],["92.125338","20.623521"],["93.946113","18.753448"],["92.823675","16.135717"],["91.224276","9.998681"],["93.522355","5.752403"],["96.409859","0.991383"],["100.048825","-3.72227"],["104.60328","-7.736835"],["114.01025","-9.967468"],["123.433702","-11.032285"],["123.717523","-10.536628"],["124.427075","-10.257467"],["125.004217","-9.79418"],["125.026253","-9.527403"],["125.12788","-9.406056"],["125.031601","-9.358561"],["124.946021","-9.216037"],["125.026253","-9.168516"],["125.192065","-9.13155"],["125.181368","-8.982538"],["124.999509","-8.987821"],["124.919277","-8.924418"],["125.095787","-8.596662"],["125.555784","-8.088612"],["125.721597","-8.120384"],["127.292232","-8.326419"],["132.424841","-8.447132"],["139.646777","-8.512957"],["141.039618","-9.209048"],["141.025347","-6.894209"],["140.978655","-6.887392"],["140.92235","-6.851943"],["140.912737","-6.791946"],["140.905871","-6.737397"],["140.850939","-6.695117"],["140.903124","-6.59554"],["140.945696","-6.509588"],["141.000442","-6.341825"],["140.971754","-2.322171"],["131.63417","2.671779"],["125.182746","17.665698"],["120.512231","19.243264"],["119.486602","16.550429"],["119.820154","12.379244"],["115.293339","5.77989"],["114.675587","4.850295"],["114.550618","4.735342"],["113.923024","4.60805"],["113.581092","3.881824"],["113.423754","3.763395"],["113.138025","3.427757"],["112.798973","3.119213"],["111.886744","2.960093"],["109.608393","3.016867"],["108.771364","3.935896"],["107.181008","7.101455"],["110.509765","12.398562"],["108.171244","18.449712"],["108.482399","21.923911"],["106.042422","23.36869"],["103.861684","23.500971"],["101.853026","22.51803"],["101.964992","22.453371"],["102.079606","22.467488"],["102.100842","22.366033"],["102.192713","22.264854"],["102.457234","22.052786"],["102.482552","21.991854"],["102.505944","21.933096"],["102.598494","21.858522"],["102.635027","21.768076"],["102.625285","21.706993"],["102.652076","21.663993"],["102.749497","21.641356"],["102.798208","21.673047"],["102.841349","21.836472"],["102.857688","21.688772"],["102.936435","21.684707"],["102.971433","21.587108"],["102.897061","21.530145"],["102.831439","21.416153"],["102.853313","21.363197"],["102.770191","21.249074"],["102.905811","20.975636"],["103.219101","20.747931"],["103.517772","20.714677"],["103.809332","20.581588"],["103.928404","20.796397"],["104.17602","20.868718"],["104.456453","20.674762"],["104.597217","20.649539"],["104.494205","20.561152"],["104.33078","20.448774"],["104.574769","20.381484"],["104.658948","20.213054"],["104.76838","20.149846"],["104.838529","20.181454"],["104.938282","20.043215"],["104.745932","19.888842"],["104.790827","19.817585"],["104.656142","19.725166"],["104.580381","19.643265"],["104.41625","19.738372"],["104.315236","19.711959"],["104.004834","19.776374"],["103.978829","19.601517"],["104.057089","19.487272"],["103.795479","19.292317"],["104.05618","19.205901"],["104.303857","19.041792"],["104.509718","18.953592"],["104.638381","18.819682"],["104.82816","18.734411"],["105.081179","18.714495"],["105.090265","18.561021"],["105.010482","18.494337"],["105.215532","18.232365"],["105.507333","18.022503"],["105.673181","17.706155"],["105.959258","17.411042"],["106.393016","16.974064"],["106.530565","16.907086"],["106.511314","16.705452"],["106.610307","16.485756"],["106.704089","16.360817"],["106.855183","16.430793"],["106.917705","16.245803"],["107.074009","16.275813"],["107.178212","16.130721"],["107.386617","15.975505"],["107.256364","15.895346"],["107.157745","15.729918"],["107.270294","15.538977"],["107.541111","15.371176"],["107.598724","15.119441"],["107.495192","15.087312"],["107.421241","14.973038"],["107.491494","14.719275"],["107.439728","14.558285"],["107.365777","14.619117"],["107.28443","14.576179"],["107.125343","14.454386"],["107.058787","14.468707"],["106.862816","14.336197"],["106.714913","14.443644"],["106.640961","14.525985"],["106.467176","14.622607"],["106.385829","14.475868"],["106.219438","14.500928"],["106.189858","14.42932"],["106.104814","14.407834"],["105.956911","14.346944"],["105.993887","14.192854"],["106.138092","14.056594"],["106.067838","13.984846"],["105.938423","13.948964"],["105.860774","14.067355"],["105.570516","14.196239"],["105.40579","14.123984"],["105.307739","14.207645"],["105.23322","14.257067"],["105.284207","14.321679"],["105.397946","14.336879"],["105.499919","14.435654"],["105.550906","14.617894"],["105.535217","14.773437"],["105.660723","14.90613"],["105.629347","15.019802"],["105.511685","15.118269"],["105.543062","15.182626"],["105.660723","15.2848"],["105.543062","15.368016"],["105.641113","15.40205"],["105.652879","15.526792"],["105.672489","15.723201"],["105.433244","15.866611"],["105.419865","16.077323"],["105.134284","16.158015"],["105.05029","16.303179"],["104.798307","16.56635"],["104.815106","16.791639"],["104.807079","17.064937"],["104.834545","17.357467"],["104.746654","17.518618"],["104.392993","17.569592"],["104.221867","17.790865"],["104.071113","18.043041"],["103.989584","18.196169"],["103.880878","18.236734"],["103.692584","18.269917"],["103.616878","18.310466"],["103.546996","18.349162"],["103.428584","18.336313"],["103.370348","18.277339"],["103.302336","18.221647"],["103.237773","18.102183"],["103.207191","18.040806"],["103.105249","17.937384"],["102.938746","17.875949"],["102.914959","17.827432"],["102.813018","17.765959"],["102.687291","17.753015"],["102.568359","17.830667"],["102.510593","17.840371"],["102.422244","17.921219"],["102.310109","17.960013"],["102.204769","17.995566"],["102.143605","18.066652"],["101.987295","17.966477"],["101.868364","17.927685"],["101.647491","17.811257"],["101.148809","17.535022"],["101.023374","17.599797"],["101.039054","17.808912"],["101.175591","17.993048"],["101.212078","18.10208"],["101.219896","18.173904"],["101.206865","18.240749"],["101.212078","18.344679"],["101.107829","18.394147"],["101.092192","18.45349"],["101.206865","18.578877"],["101.31372","18.655442"],["101.272021","18.741845"],["101.272021","18.830671"],["101.311114","18.939171"],["101.370997","19.079681"],["101.298023","19.148632"],["101.279779","19.212632"],["101.22818","19.375675"],["101.230424","19.441269"],["101.295484","19.487804"],["101.29997","19.591402"],["101.239397","19.633668"],["101.145173","19.587175"],["101.093574","19.629442"],["100.94102","19.650571"],["100.893907","19.65691"],["100.864742","19.616763"],["100.835578","19.570265"],["100.770518","19.534326"],["100.611233","19.574493"],["100.584312","19.52164"],["100.525983","19.540669"],["100.46541","19.637894"],["100.436245","19.777288"],["100.541687","19.91867"],["100.597773","20.190526"],["100.502946","20.195053"],["100.428788","20.262059"],["100.379218","20.36601"],["100.329779","20.413638"],["100.244635","20.387895"],["100.173224","20.317079"],["100.160865","20.244943"],["100.114789","20.260301"],["100.107922","20.315689"],["100.155988","20.507461"],["100.211891","20.650056"],["100.290818","20.736459"],["100.399973","20.811825"],["100.562866","20.788277"],["100.673701","20.899705"],["100.59616","20.954029"],["100.751867","21.254036"],["100.998402","21.338663"],["101.211622","21.580378"],["101.209043","21.846211"],["100.909901","21.894492"],["100.207565","21.580378"],["100.051491","22.159742"],["99.466212","22.436515"],["99.71333","23.024318"],["99.352488","23.281431"],["99.03983","24.3247"],["98.101855","24.95993"],["98.855913","25.608485"],["98.911088","26.812993"],["98.892697","27.483968"],["98.340947","27.826069"],["98.120247","28.377665"],["97.586888","28.733061"],["97.108705","28.329109"],["96.658506","27.787659"],["96.296725","28.010502"],["95.847241","28.136253"],["95.288126","27.787659"],["94.685158","27.233428"],["93.281889","26.647032"],["92.037851","26.720259"],["90.141229","26.820605"],["88.984724","26.833974"],["88.731159","27.080308"],["88.794435","27.331629"],["88.741186","27.914582"],["88.223484","27.953015"],["88.169108","27.50057"],["87.774017","27.262697"],["88.215457","26.870398"],["87.783036","26.535989"],["87.047344","26.702224"],["84.777332","27.310285"],["83.539214","27.665305"],["82.385985","27.880248"],["81.010299","28.662263"],["80.547568","29.001896"],["81.345045","30.304903"],["80.749935","31.185747"],["80.056967","31.015739"],["79.215234","31.178494"],["78.991224","31.346766"],["79.254658","31.656243"],["78.835019","31.979804"],["78.65109","32.12011"],["78.595912","32.240756"],["78.591313","32.400075"],["78.669483","32.54361"],["78.739513","32.426665"],["78.84424","32.288005"],["79.067657","32.24668"],["79.277111","32.470789"],["79.395802","32.676713"],["79.235221","33.233259"],["79.011803","33.47819"],["78.84424","33.681772"],["79.182009","34.336185"],["78.821102","34.565916"],["78.428537","34.758609"],["78.294895","34.940474"],["78.23791","35.530039"],["77.722544","35.628785"],["77.294994","35.609184"],["76.821489","35.701892"],["76.684572","35.988603"],["76.399329","35.919333"],["76.159724","35.933192"],["76.165429","36.20986"],["76.074151","36.366207"],["75.999987","36.641347"],["75.714744","36.787688"],["75.562518","36.805399"],["75.481245","36.811057"],["75.45651","36.950968"],["75.253968","37.023882"],["75.084541","37.066268"],["74.894884","37.084426"],["74.735572","37.122745"],["74.643309","37.074934"],["74.566145","37.033976"],["74.549925","36.938948"],["74.491692","37.015218"],["74.377803","36.998366"],["74.261908","36.915016"],["74.132106","36.91687"],["74.057933","36.840851"],["73.967535","36.853836"],["73.925813","36.892775"],["73.808039","36.908632"],["73.728388","36.920709"],["73.639124","36.911926"],["73.699986","36.820121"],["73.765904","36.814624"],["73.833196","36.776135"],["73.853795","36.743128"],["73.834569","36.711208"],["73.735692","36.736525"],["73.657414","36.707906"],["73.599736","36.711208"],["73.57227","36.735425"],["73.517339","36.729922"],["73.397862","36.757433"],["73.319585","36.738726"],["73.241307","36.720664"],["73.175389","36.732772"],["73.112218","36.71516"],["73.032567","36.686532"],["73.039433","36.651284"],["73.060033","36.609405"],["73.036687","36.564195"],["73.002355","36.529994"],["72.958409","36.507921"],["72.944676","36.475904"],["72.886998","36.474799"],["72.855412","36.448292"],["72.848546","36.400777"],["72.832334","36.374217"],["72.796629","36.362053"],["72.685258","36.303681"],["72.663286","36.274901"],["72.574022","36.267151"],["72.461412","36.175196"],["73.530389","35.809316"],["74.170542","35.420826"],["74.340245","35.055408"],["73.9237","34.612198"],["73.676858","34.332391"],["73.880481","33.422673"],["74.651862","32.906095"],["75.747223","32.542685"],["75.623802","32.256112"],["74.975842","31.968632"],["74.759855","31.732749"],["74.759855","30.955369"],["74.327882","30.584206"],["74.18929","30.224947"],["74.035013","29.864372"]],outseaData={boundsP16:[[chnP16],[JPN],[IND]],nebulaOutSea:[[JPN],[IND]]},NebulaTileCoord=(q2=[-180,-90],r2=[180,90],s2=r2[0]-q2[0],t2=r2[1]-q2[1],{ga:function(t,i,e,r){void 0===r&&(r="lnglat");var n=Math.pow(2,e),a=s2/n,e=t2/n,n=ProjectionManager.getProjection("EPSG:3857");return"lnglat"===r?[t*a+q2[0],r2[1]-i*e,(t+1)*a+q2[0],r2[1]-(i+1)*e]:"EPSG:3857"!==r?[0,0,0,0]:(r=n.project(t*a+q2[0],r2[1]-i*e),e=n.project((t+1)*a+q2[0],r2[1]-(i+1)*e),[r[0],r[1],e[0],e[1]])}}),q2,r2,s2,t2,geoUtil=new GeometryUtilCls({}),Source=(F2=Event,__extends(G2,F2),G2.prototype.lo=function(){return this.Oo},G2.prototype.destroy=function(){},G2.prototype.Fo=function(t){t&&t!==this.Oo&&!this.pS&&(this.pS=!0,this.emit("complete")),this.Oo=t},G2.prototype.VE=function(t,i,e){for(var r=[],n=0;n<t.length;n++){var a=t[n],a=ProjectionManager.getProjection("EPSG:3857").unproject(a[0],a[1]);r.push(a)}var o=outseaData.boundsP16;i&&"china"===i?o=[o[0]]:i&&"oversea"===i&&(o=outseaData.nebulaOutSea);for(var s=0;s<o.length;s++){var h=o[s];if(geoUtil.isRingInRingByOutsea(r,h[0]))return!0}return!1},G2.prototype.rG=function(t,i){for(var e=[],r=0;r<t.length;r++){var n=t[r],n=ProjectionManager.getProjection("EPSG:3857").unproject(n[0],n[1]);e.push(n)}for(var a=outseaData.boundsP16,o=0;o<a.length;o++){var s=a[o];if(geoUtil.isRingInRingByMapbox(e,s[0]))return!0}return!1},G2.prototype.aU=function(t,i){for(var e=[],r=0;r<t.length;r++){var n=t[r],n=ProjectionManager.getProjection("EPSG:3857").unproject(n[0],n[1]);e.push(n)}for(var a=outseaData.boundsP16,o=0;o<a.length;o++){var s=a[o];if(geoUtil.isRingInRingByMapboxB(e,s[0]))return!0}return!1},G2.prototype.oU=function(t,i){for(var e=t.length,r=outseaData.boundsP16,n=[],a=0;a<e;a++){var o=t[a].split(",")[0],s=t[a].split(",")[1],h=t[a].split(",")[2],s=Math.floor(s*Math.pow(2,16-o)),o=Math.floor(h*Math.pow(2,16-o)),s=NebulaTileCoord.ga(s,o,16,"EPSG:3857"),o=i.projectionId,s=[transform[o].transform(s[0],s[3],16),transform[o].transform(s[0],s[1],16),transform[o].transform(s[2],s[3],16),transform[o].transform(s[3],s[2],16)];geoUtil.isPixelRingInRing(s,r)&&n.push(t[a])}return n},G2.prototype.sU=function(t){for(var i=outseaData.boundsP16,e=i.length,r=t.projectionId,n=[],a=0;a<e;a++){var o=i[a],o=transform[r].Xs(o[0],o[1],16);n.push(o[0]),n.push(o[1])}return n},G2.prototype.UH=function(t){},G2.prototype.Eo=function(){this.map.setNeedUpdate(!0)},G2),F2;function G2(t,i,e,r){var n=F2.call(this)||this;return n.map=e,n.To=r,n.Oo=!1,n.pS=!1,n.No=t.id,n.Wt=t.type,n.Be=t.tileUrl,t.url&&(n.$o=t.url),n}var isSupportFloat64Array="undefined"!=typeof Float64Array,isSupportFloat32Array$1="undefined"!=typeof Float32Array;isSupportFloat64Array?setMatrixArrayType(Float64Array):isSupportFloat32Array$1?setMatrixArrayType(Float32Array):(window.Float32Array=void 0,setMatrixArrayType(Array));var RESIZE_MULTIPLIER=5,DEFAULT_CAPACITY=128,StructArray=(T3.Wb=function(t,i){return t.trim(),i&&(t.pM=!0,i.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},T3.Gb=function(t){var i=Object.create(this.prototype);return i.arrayBuffer=t.arrayBuffer,i.length=t.length,i.yM=t.arrayBuffer.byteLength/this.Rb,i.mM(),i},T3.prototype.trim=function(){this.length!==this.yM&&(this.yM=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.constructor.Rb),this.mM())},T3.prototype.resize=function(t){this.gM(t),this.length=t},T3.prototype.gM=function(t){t>this.yM&&(this.yM=Math.max(t,Math.floor(this.yM*RESIZE_MULTIPLIER),DEFAULT_CAPACITY),t=this.wM,this.arrayBuffer=new ArrayBuffer(this.yM*this.constructor.Rb),this.mM(),t&&this.wM.set(t))},T3);function T3(){this.pM=!1,this.yM=-1,this.length=0}var FillArray=(_3=StructArray,__extends(a4,_3),a4.prototype.kb=function(t,i){var e=this.length;this.resize(this.length+1),this.MM(e,t,i)},a4.prototype.MM=function(t,i,e){t*=2,this.Mb[t]=i,this.Mb[1+t]=e},a4.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.Mb=new Float32Array(this.arrayBuffer)},a4.Rb=8,a4),_3;function a4(){var t=_3.call(this)||this;return t.pM=!1,t.resize(0),t}var FillExtrusionArray=(j4=StructArray,__extends(k4,j4),k4.prototype.kb=function(t,i,e,r,n,a){var o=this.length;this.resize(o+1),this.MM(o,t,i,e,r,n,a)},k4.prototype.MM=function(t,i,e,r,n,a,o){var s=8*t;this.Mb[s]=i,this.Mb[1+s]=e,this.Mb[2+s]=r,this.Mb[3+s]=n,this.Mb[4+s]=a[0],this.Mb[5+s]=a[1],this.Mb[6+s]=a[2],t*=16,this.jM[14+t]=o[0],this.jM[15+t]=o[1]},k4.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.Mb=new Float32Array(this.arrayBuffer),this.jM=new Uint16Array(this.arrayBuffer)},k4.Rb=32,k4),j4;function k4(){var t=j4.call(this)||this;return t.pM=!1,t.resize(0),t}var LinesIndexArray=(C4=StructArray,__extends(D4,C4),D4.prototype.kb=function(t,i){var e=this.length;this.resize(this.length+1),this.MM(e,t,i)},D4.prototype.MM=function(t,i,e){t*=2,this.jM[t]=i,this.jM[1+t]=e},D4.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.jM=new Uint16Array(this.arrayBuffer)},D4.Rb=4,D4),C4;function D4(){var t=C4.call(this)||this;return t.length=0,t.resize(0),t}var LinesIndexArrayUint=(M4=StructArray,__extends(N4,M4),N4.prototype.kb=function(t,i){var e=this.length;this.resize(this.length+1),this.MM(e,t,i)},N4.prototype.MM=function(t,i,e){t*=2,this.UI[t]=i,this.UI[1+t]=e},N4.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.UI=new Uint32Array(this.arrayBuffer)},N4.Rb=8,N4),M4;function N4(){var t=M4.call(this)||this;return t.length=0,t.resize(0),t}var LineArrayBuffer=(W4=StructArray,__extends(X4,W4),X4.prototype.kb=function(t,i,e,r){var n=this.length;this.resize(n+1),this.MM(n,t,i,e,r)},X4.prototype.MM=function(t,i,e,r,n){t*=this.constructor.Rb/4,this.Mb[t]=i[0],this.Mb[1+t]=i[1],this.Mb[2+t]=e[0],this.Mb[3+t]=e[1],this.Mb[4+t]=r,this.Mb[5+t]=n[0],this.Mb[6+t]=n[1]},X4.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.Mb=new Float32Array(this.arrayBuffer)},X4.Rb=28,X4),W4;function X4(){var t=W4.call(this)||this;return t.resize(0),t}var TriangleIndexArray=(k5=StructArray,__extends(l5,k5),l5.prototype.kb=function(t,i,e){var r=this.length;this.resize(r+1),this.MM(r,t,i,e)},l5.prototype.MM=function(t,i,e,r){t*=3,this.jM[t]=i,this.jM[1+t]=e,this.jM[2+t]=r},l5.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.jM=new Uint16Array(this.arrayBuffer)},l5.Rb=6,l5),k5;function l5(){var t=k5.call(this)||this;return t.resize(0),t}var TriangleIndexArrayUint=(w5=StructArray,__extends(x5,w5),x5.prototype.kb=function(t,i,e){var r=this.length;this.resize(r+1),this.MM(r,t,i,e)},x5.prototype.MM=function(t,i,e,r){t*=3,this.UI[t]=i,this.UI[1+t]=e,this.UI[2+t]=r},x5.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.UI=new Uint32Array(this.arrayBuffer)},x5.Rb=12,x5),w5;function x5(){var t=w5.call(this)||this;return t.resize(0),t}var SymbolArray=(I5=StructArray,__extends(J5,I5),J5.prototype.kb=function(t,i){var e=this.length;this.resize(this.length+1),this.MM(e,t,i)},J5.prototype.MM=function(t,i,e){t*=2,this.Mb[t]=i,this.Mb[1+t]=e},J5.prototype.mM=function(){this.wM=new Uint8Array(this.arrayBuffer),this.Mb=new Float32Array(this.arrayBuffer)},J5.Rb=4,J5),I5;function J5(){var t=I5.call(this)||this;return t.pM=!1,t.resize(0),t}var COS_HALF_SHARP_CORNER=Math.cos(Math.PI/180*75),prepMatClockwise=fromValues(0,-1,1,0),perpMatCounterClockwise=fromValues(0,1,-1,0);function perpCounterClockwise(t,i){transformMat2(t,i,perpMatCounterClockwise)}function perpClockwise(t,i){transformMat2(t,i,prepMatClockwise)}var minRoundAngle=Math.PI/9,emptyVec2=create$3(),emptyVec3=create$1(),prevPos=create$3(),currentPos=create$3(),tmpPos=create$3(),currentNormal=create$3(),nextNormal=create$3(),distance$1=0,nextDir=create$3(),currentDir=create$3(),negateCurrentNormal=create$3(),lineJoin,lineCap,currentNormal_addLineVertex=create$3(),leftNormal=create$3(),rightNormal=create$3(),offsetLeft=create$3(),offsetRight=create$3(),joinNormal_addMiter=create$3(),tmp_addTiangleVertex=create$1(),currentNormal_addTiangleVertex=create$3(),nextNormal_addTiangleVertex=create$3(),normal_addTiangleVertex=create$3(),tmp_addRoundVertex=create$1(),currentNormal_addRoundVertex=create$3(),nextNormal_addRoundVertex=create$3(),tmpNormal_addRoundVertex=create$3(),roundCenter_addRoundVertex=create$3(),CoreLineBucket=(W5.OM=function(t,i,e){sub$1(t,i,e),normalize(t,t),perpCounterClockwise(t,t)},W5.xM=function(t,i,e){add(t,i,e),0===t[0]&&0===t[1]||normalize(t,t)},W5.prototype.hb=function(t,i){if(void 0===i&&(i={X_:1,lineJoin:"miter",lineCap:"butt"}),t.length<2)return{Iw:0,distance:0};distance$1=0,"auto"===i.lineJoin&&(i.lineJoin="miter"),lineJoin=i.lineJoin,lineCap=i.lineCap||"butt";for(var e,r,n=this.Qx.length,a=0,o=t.length;a<o;a++)0===a?(currentPos=t[a],e=t[a+1],W5.OM(nextNormal,e,currentPos),copy$1(currentNormal,nextNormal),sub$1(nextDir,e,currentPos),normalize(nextDir,nextDir),"square"===lineCap?this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,i.X_,"bevel"):("round"===lineCap&&(copy$1(negateCurrentNormal,currentNormal),negate(negateCurrentNormal,currentNormal),this.DI(currentPos,negateCurrentNormal,currentNormal,distance$1)),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,"bevel")),copy$1(currentDir,nextDir),prevPos=currentPos):a===o-1?(currentPos=t[a],r=dist(currentPos,prevPos),distance$1+=r,"square"===lineCap?this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!1,-1*i.X_,"miter"):"round"===lineCap?(this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!1,0,"miter"),copy$1(negateCurrentNormal,nextNormal),negate(negateCurrentNormal,nextNormal),this.DI(currentPos,nextNormal,negateCurrentNormal,distance$1)):this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,"miter")):(currentPos=t[a],e=t[a+1],W5.OM(nextNormal,e,currentPos),0===nextNormal[0]&&0===nextNormal[1]||(r=dist(currentPos,prevPos),distance$1+=r,sub$1(nextDir,e,currentPos),normalize(nextDir,nextDir),this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,i.lineJoin),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,i.lineJoin),prevPos=currentPos,copy$1(currentNormal,nextNormal),copy$1(currentDir,nextDir)));return{Iw:3*(this.Qx.length-n),distance:distance$1}},W5.prototype.eD=function(t,i,e){if(void 0===i&&(i={X_:1,lineJoin:"miter",lineCap:"butt"}),void 0===e&&(e=3e3),t.length<2)return{Iw:0,distance:0};distance$1=0,"auto"===i.lineJoin&&(i.lineJoin="miter"),lineJoin=i.lineJoin,lineCap=i.lineCap||"butt";for(var r=this.Qx.length,n=0,a=t.length;n<a;n++)if(0===n){currentPos=t[n];var o=t[n+1];W5.OM(nextNormal,o,currentPos),copy$1(currentNormal,nextNormal),sub$1(nextDir,o,currentPos),normalize(nextDir,nextDir),"square"===lineCap?this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,i.X_,"bevel"):("round"===lineCap&&(copy$1(negateCurrentNormal,currentNormal),negate(negateCurrentNormal,currentNormal),this.DI(currentPos,negateCurrentNormal,currentNormal,distance$1)),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,"bevel")),copy$1(currentDir,nextDir),prevPos=currentPos}else if(n===a-1){copy$1(tmpPos,t[n]);var s=dist(tmpPos,prevPos);copy$1(tmpPos,prevPos);for(var h=0;e<s-h;)tmpPos[0]=tmpPos[0]+currentDir[0]*e,tmpPos[1]=tmpPos[1]+currentDir[1]*e,h+=e,this.IM(tmpPos,currentNormal,nextNormal,distance$1+h,currentDir,!1,0,"miter"),this.IM(tmpPos,currentNormal,nextNormal,distance$1+h,currentDir,!0,0,"miter");copy$1(currentPos,t[n]),distance$1+=s,"square"===lineCap?this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!1,-1*i.X_,"miter"):"round"===lineCap?(this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!1,0,"miter"),copy$1(negateCurrentNormal,nextNormal),negate(negateCurrentNormal,nextNormal),this.DI(currentPos,nextNormal,negateCurrentNormal,distance$1)):this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,"miter")}else if(currentPos=t[n],o=t[n+1],W5.OM(nextNormal,o,currentPos),0!==nextNormal[0]||0!==nextNormal[1]){var u=dist(currentPos,prevPos);for(copy$1(tmpPos,prevPos),h=0;e<u-h;)tmpPos[0]=tmpPos[0]+currentDir[0]*e,tmpPos[1]=tmpPos[1]+currentDir[1]*e,h+=e,this.IM(tmpPos,currentNormal,currentNormal,distance$1+h,currentDir,!1,0,"miter"),this.IM(tmpPos,currentNormal,currentNormal,distance$1+h,currentDir,!0,0,"miter");copy$1(currentPos,t[n]),distance$1+=u,sub$1(nextDir,o,currentPos),normalize(nextDir,nextDir),this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,i.lineJoin),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,i.lineJoin),prevPos=currentPos,copy$1(currentNormal,nextNormal),copy$1(currentDir,nextDir)}return{Iw:3*(this.Qx.length-r),distance:distance$1}},W5.prototype.Nx=function(t,i){if(void 0===i&&(i={lineJoin:"miter"}),t.length<2)return{Iw:0,distance:0};for(var e,r,n=this.Qx.length,a=0,o=t.length;a<o;a++)0===a?(currentPos=t[a],r=t[a+1],e=t[o-2],W5.OM(nextNormal,r,currentPos),W5.OM(currentNormal,currentPos,e),sub$1(nextDir,r,currentPos),normalize(nextDir,nextDir),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,i.lineJoin),copy$1(currentDir,nextDir),copy$1(currentNormal,nextNormal),prevPos=currentPos):a===o-1?(currentPos=t[a],r=t[1],distance$1+=dist(currentPos,prevPos),W5.OM(nextNormal,r,currentPos),this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,i.lineJoin)):(currentPos=t[a],r=t[a+1],distance$1+=dist(currentPos,prevPos),W5.OM(nextNormal,r,currentPos),sub$1(nextDir,r,currentPos),normalize(nextDir,nextDir),this.IM(currentPos,currentNormal,nextNormal,distance$1,currentDir,!1,0,i.lineJoin),this.IM(currentPos,currentNormal,nextNormal,distance$1,nextDir,!0,0,i.lineJoin),prevPos=currentPos,copy$1(currentNormal,nextNormal),copy$1(currentDir,nextDir));return{Iw:3*(this.Qx.length-n),distance:distance$1}},W5.prototype.destroy=function(){this.uploaded=!1,this.zs&&(this.zs.destroy(),delete this.zs),this.Pc&&(this.Pc.destroy(),delete this.Pc)},W5.prototype.IM=function(t,i,e,r,n,a,o,s){copy$1(joinNormal_addMiter,emptyVec2),W5.xM(joinNormal_addMiter,i,e);var h=dot(joinNormal_addMiter,i);scale$1(joinNormal_addMiter,joinNormal_addMiter,1/h);var u=0,l=0;o&&(l=u=o),"bevel"===s||"miter"===s&&h<COS_HALF_SHARP_CORNER?a?this.SM(t,e,r,u,l,n):(this.SM(t,i,r,u,l,n),this._M=this._b.length-2,this.FM=this._M-1,this.TM=this.FM-1,this.Qx.kb(this.TM,this.FM,this._M),this.TM=this.FM,this.FM=this._M,this._M=this._M+1,this.Qx.kb(this.TM,this.FM,this._M),this.CM(t,i,e,r)):"round"===s?a?this.SM(t,e,r,u,l,n):(this.SM(t,i,r,u,l,n),this._M=this._b.length-2,this.FM=this._M-1,this.TM=this.FM-1,this.Qx.kb(this.TM,this.FM,this._M),this.TM=this.FM,this.FM=this._M,this._M=this._M+1,this.Qx.kb(this.TM,this.FM,this._M),this.DI(t,i,e,r)):(this.SM(t,joinNormal_addMiter,r,u,l,n),a||(this._M=this._b.length-2,this.FM=this._M-1,this.TM=this.FM-1,this.Qx.kb(this.TM,this.FM,this._M),this.TM=this.FM,this.FM=this._M,this._M=this._M+1,this.Qx.kb(this.TM,this.FM,this._M)))},W5.prototype.SM=function(t,i,e,r,n,a){copy$1(currentNormal_addLineVertex,i),copy$1(leftNormal,currentNormal_addLineVertex),copy$1(rightNormal,currentNormal_addLineVertex),copy$1(offsetLeft,emptyVec2),copy$1(offsetRight,emptyVec2),scale$1(rightNormal,currentNormal_addLineVertex,-1),r&&(perpCounterClockwise(offsetLeft,leftNormal),scale$1(offsetLeft,offsetLeft,r),add(leftNormal,offsetLeft,leftNormal)),n&&(perpClockwise(offsetRight,rightNormal),scale$1(offsetRight,offsetRight,n),add(rightNormal,offsetRight,rightNormal)),this._b.kb(t,leftNormal,e,a),this._b.kb(t,rightNormal,e,a)},W5.prototype.CM=function(t,i,e,r){void 0===r&&(r=0),copy(tmp_addTiangleVertex,emptyVec3),copy$1(currentNormal_addTiangleVertex,i),copy$1(nextNormal_addTiangleVertex,e),copy$1(normal_addTiangleVertex,emptyVec2),cross$1(tmp_addTiangleVertex,currentNormal_addTiangleVertex,nextNormal_addTiangleVertex),e=0<tmp_addTiangleVertex[2],this._b.kb(t,normal_addTiangleVertex,r,normal_addTiangleVertex),e&&(negate(currentNormal_addTiangleVertex,currentNormal_addTiangleVertex),negate(nextNormal_addTiangleVertex,nextNormal_addTiangleVertex)),this._b.kb(t,currentNormal_addTiangleVertex,r,normal_addTiangleVertex),this._b.kb(t,nextNormal_addTiangleVertex,r,normal_addTiangleVertex),this._M=this._b.length-1,this.FM=this._M-1,this.TM=this.FM-1,this.Qx.kb(this.TM,this.FM,this._M)},W5.prototype.DI=function(t,i,e,r){void 0===r&&(r=0),copy(tmp_addRoundVertex,emptyVec3),copy$1(currentNormal_addRoundVertex,i),copy$1(nextNormal_addRoundVertex,e);var n=angle(currentNormal_addRoundVertex,nextNormal_addRoundVertex);cross$1(tmp_addRoundVertex,currentNormal_addRoundVertex,nextNormal_addRoundVertex);var a=0<tmp_addRoundVertex[2],o=[];o.push(currentNormal_addRoundVertex);for(var s=minRoundAngle;s<n;s+=minRoundAngle){var h=create$3();rotate(h,currentNormal_addRoundVertex,fromValues$3(0,0),a?s:-1*s),o.push(h)}o.push(nextNormal_addRoundVertex),a&&forEach$3(o,function(t){negate(t,t)}),copy$1(roundCenter_addRoundVertex,emptyVec2),this._b.kb(t,roundCenter_addRoundVertex,r,roundCenter_addRoundVertex);var u=this._b.length-1;this._b.kb(t,o[0],r,roundCenter_addRoundVertex),this._M=this._b.length-1,this.FM=this._M-1;for(var l=1,c=o.length;l<c;l++)this._b.kb(t,o[l],r,roundCenter_addRoundVertex),this._M=this._b.length-1,this.FM=this._M-1,this.Qx.kb(u,this.FM,this._M)},W5);function W5(){this._b=new LineArrayBuffer,this.TM=this.FM=this._M=-1,this.uploaded=!1}var PolylineBucket=(i7=CoreLineBucket,__extends(j7,i7),j7.prototype.upload=function(t,i){void 0===i&&(i=!1),this.uploaded||(this.uploaded=!0,this.zs?this.zs.update(this._b.Mb):this.zs=new SmartArrayBuffer(t,this._b.Mb,LineArrayBuffer.Rb),this.Pc?this.Pc.update(this.Qx.UI):this.Pc=new SmartArrayBuffer(t,this.Qx.UI,32,"ELEMENT_ARRAY_BUFFER"),i&&(delete this.Qx,delete this._b))},j7.prototype.reset=function(){this.uploaded=!1,this._b=new LineArrayBuffer,this.Qx=new TriangleIndexArrayUint,this.TM=this.FM=this._M=-1,this.uploaded=!1},j7),i7;function j7(){var t=i7.call(this)||this;return t.Qx=new TriangleIndexArrayUint,t}var earcut_1=earcut,default_1=earcut;function earcut(t,i,e){e=e||2;var r,n,a,o,s,h,u,l=i&&i.length,c=l?i[0]*e:t.length,f=linkedList(t,0,c,e,!0),d=[];if(!f||f.next===f.NM)return d;if(l&&(f=eliminateHoles(t,i,f,e)),t.length>80*e){r=a=t[0],n=o=t[1];for(var v=e;v<c;v+=e)(s=t[v])<r&&(r=s),(h=t[v+1])<n&&(n=h),a<s&&(a=s),o<h&&(o=h);u=0!==(u=Math.max(a-r,o-n))?1/u:0}return earcutLinked(f,d,e,r,n,u),d}function linkedList(t,i,e,r,n){var a,o;if(n===0<signedArea(t,i,e,r))for(a=i;a<e;a+=r)o=insertNode(a,t[a],t[a+1],o);else for(a=e-r;i<=a;a-=r)o=insertNode(a,t[a],t[a+1],o);return o&&equals$2(o,o.next)&&(removeNode(o),o=o.next),o}function filterPoints(t,i){if(!t)return t;i=i||t;var e,r=t;do{if(e=!1,r.LM||!equals$2(r,r.next)&&0!==area(r.NM,r,r.next))r=r.next;else{if(removeNode(r),(r=i=r.NM)===r.next)break;e=!0}}while(e||r!==i);return i}function earcutLinked(t,i,e,r,n,a,o){if(t){!o&&a&&indexCurve(t,r,n,a);for(var s,h,u=t;t.NM!==t.next;)if(s=t.NM,h=t.next,a?isEarHashed(t,r,n,a):isEar(t))i.push(s.i/e),i.push(t.i/e),i.push(h.i/e),removeNode(t),t=h.next,u=h.next;else if((t=h)===u){o?1===o?earcutLinked(t=cureLocalIntersections(filterPoints(t),i,e),i,e,r,n,a,2):2===o&&splitEarcut(t,i,e,r,n,a):earcutLinked(filterPoints(t),i,e,r,n,a,1);break}}}function isEar(t){var i=t.NM,e=t,r=t.next;if(!(0<=area(i,e,r))){for(var n=t.next.next;n!==t.NM;){if(pointInTriangle(i.x,i.y,e.x,e.y,r.x,r.y,n.x,n.y)&&0<=area(n.NM,n,n.next))return;n=n.next}return 1}}function isEarHashed(t,i,e,r){var n=t.NM,a=t,o=t.next;if(!(0<=area(n,a,o))){for(var s=(n.x<a.x?n.x<o.x?n:o:a.x<o.x?a:o).x,h=(n.y<a.y?n.y<o.y?n:o:a.y<o.y?a:o).y,u=(n.x>a.x?n.x>o.x?n:o:a.x>o.x?a:o).x,l=(n.y>a.y?n.y>o.y?n:o:a.y>o.y?a:o).y,c=zOrder(s,h,i,e,r),f=zOrder(u,l,i,e,r),d=t.DM,v=t.RM;d&&d.z>=c&&v&&v.z<=f;){if(d!==t.NM&&d!==t.next&&pointInTriangle(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&0<=area(d.NM,d,d.next))return;if(d=d.DM,v!==t.NM&&v!==t.next&&pointInTriangle(n.x,n.y,a.x,a.y,o.x,o.y,v.x,v.y)&&0<=area(v.NM,v,v.next))return;v=v.RM}for(;d&&d.z>=c;){if(d!==t.NM&&d!==t.next&&pointInTriangle(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&0<=area(d.NM,d,d.next))return;d=d.DM}for(;v&&v.z<=f;){if(v!==t.NM&&v!==t.next&&pointInTriangle(n.x,n.y,a.x,a.y,o.x,o.y,v.x,v.y)&&0<=area(v.NM,v,v.next))return;v=v.RM}return 1}}function cureLocalIntersections(t,i,e){var r=t;do{var n=r.NM,a=r.next.next}while(!equals$2(n,a)&&intersects(n,r,r.next,a)&&locallyInside(n,a)&&locallyInside(a,n)&&(i.push(n.i/e),i.push(r.i/e),i.push(a.i/e),removeNode(r),removeNode(r.next),r=t=a),(r=r.next)!==t);return filterPoints(r)}function splitEarcut(t,i,e,r,n,a){var o=t;do{for(var s=o.next.next;s!==o.NM;){if(o.i!==s.i&&isValidDiagonal(o,s)){var h=splitPolygon(o,s),o=filterPoints(o,o.next),h=filterPoints(h,h.next);return earcutLinked(o,i,e,r,n,a),earcutLinked(h,i,e,r,n,a),0}s=s.next}}while((o=o.next)!==t)}function eliminateHoles(t,i,e,r){for(var n,a=[],o=0,s=i.length;o<s;o++)(n=linkedList(t,i[o]*r,o<s-1?i[o+1]*r:t.length,r,!1))===n.next&&(n.LM=!0),a.push(getLeftmost(n));for(a.sort(compareX),o=0;o<a.length;o++)eliminateHole(a[o],e),e=filterPoints(e,e.next);return e}function compareX(t,i){return t.x-i.x}function eliminateHole(t,i){(i=findHoleBridge(t,i))&&(t=splitPolygon(i,t),filterPoints(i,i.next),filterPoints(t,t.next))}function findHoleBridge(t,i){var e,r=i,n=t.x,a=t.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&o<s){if((o=s)===n){if(a===r.y)return r;if(a===r.next.y)return r.next}e=r.x<r.next.x?r:r.next}}}while((r=r.next)!==i);if(!e)return null;if(n===o)return e;for(var h,u=e,l=e.x,c=e.y,f=1/0,r=e;n>=r.x&&r.x>=l&&n!==r.x&&pointInTriangle(a<c?n:o,a,l,c,a<c?o:n,a,r.x,r.y)&&(h=Math.abs(a-r.y)/(n-r.x),locallyInside(r,t)&&(h<f||h===f&&(r.x>e.x||r.x===e.x&&sectorContainsSector(e,r)))&&(e=r,f=h)),(r=r.next)!==u;);return e}function sectorContainsSector(t,i){return area(t.NM,t,i.NM)<0&&area(i.next,t,t.next)<0}function indexCurve(t,i,e,r){for(var n=t;null===n.z&&(n.z=zOrder(n.x,n.y,i,e,r)),n.DM=n.NM,n.RM=n.next,(n=n.next)!==t;);n.DM.RM=null,n.DM=null,sortLinked(n)}function sortLinked(t){var i,e,r,n,a,o,s,h,u=1;do{for(e=t,a=t=null,o=0;e;){for(o++,r=e,i=s=0;i<u&&(s++,r=r.RM);i++);for(h=u;0<s||0<h&&r;)0!==s&&(0===h||!r||e.z<=r.z)?(e=(n=e).RM,s--):(r=(n=r).RM,h--),a?a.RM=n:t=n,n.DM=a,a=n;e=r}}while(a.RM=null,u*=2,1<o);return t}function zOrder(t,i,e,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-e)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-r)*n)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function getLeftmost(t){for(var i=t,e=t;(i.x<e.x||i.x===e.x&&i.y<e.y)&&(e=i),(i=i.next)!==t;);return e}function pointInTriangle(t,i,e,r,n,a,o,s){return 0<=(n-o)*(i-s)-(t-o)*(a-s)&&0<=(t-o)*(r-s)-(e-o)*(i-s)&&0<=(e-o)*(a-s)-(n-o)*(r-s)}function isValidDiagonal(t,i){return t.next.i!==i.i&&t.NM.i!==i.i&&!intersectsPolygon(t,i)&&(locallyInside(t,i)&&locallyInside(i,t)&&middleInside(t,i)&&(area(t.NM,t,i.NM)||area(t,i.NM,i))||equals$2(t,i)&&0<area(t.NM,t,t.next)&&0<area(i.NM,i,i.next))}function area(t,i,e){return(i.y-t.y)*(e.x-i.x)-(i.x-t.x)*(e.y-i.y)}function equals$2(t,i){return t.x===i.x&&t.y===i.y}function intersects(t,i,e,r){var n=sign(area(t,i,e)),a=sign(area(t,i,r)),o=sign(area(e,r,t)),s=sign(area(e,r,i));return n!==a&&o!==s||0===n&&onSegment(t,e,i)||0===a&&onSegment(t,r,i)||0===o&&onSegment(e,t,r)||0===s&&onSegment(e,i,r)}function onSegment(t,i,e){return i.x<=Math.max(t.x,e.x)&&i.x>=Math.min(t.x,e.x)&&i.y<=Math.max(t.y,e.y)&&i.y>=Math.min(t.y,e.y)}function sign(t){return 0<t?1:t<0?-1:0}function intersectsPolygon(t,i){var e=t;do{if(e.i!==t.i&&e.next.i!==t.i&&e.i!==i.i&&e.next.i!==i.i&&intersects(e,e.next,t,i))return 1}while((e=e.next)!==t)}function locallyInside(t,i){return area(t.NM,t,t.next)<0?0<=area(t,i,t.next)&&0<=area(t,t.NM,i):area(t,i,t.NM)<0||area(t,t.next,i)<0}function middleInside(t,i){for(var e=t,r=!1,n=(t.x+i.x)/2,a=(t.y+i.y)/2;e.y>a!=e.next.y>a&&e.next.y!==e.y&&n<(e.next.x-e.x)*(a-e.y)/(e.next.y-e.y)+e.x&&(r=!r),(e=e.next)!==t;);return r}function splitPolygon(t,i){var e=new Node(t.i,t.x,t.y),r=new Node(i.i,i.x,i.y),n=t.next,a=i.NM;return(t.next=i).NM=t,(e.next=n).NM=e,(r.next=e).NM=r,(a.next=r).NM=a,r}function insertNode(t,i,e,r){return e=new Node(t,i,e),r?(e.next=r.next,(e.NM=r).next.NM=e,r.next=e):(e.NM=e).next=e,e}function removeNode(t){t.next.NM=t.NM,t.NM.next=t.next,t.DM&&(t.DM.RM=t.RM),t.RM&&(t.RM.DM=t.DM)}function Node(t,i,e){this.i=t,this.x=i,this.y=e,this.NM=null,this.next=null,this.z=null,this.DM=null,this.RM=null,this.LM=!1}function signedArea(t,i,e,r){for(var n=0,a=i,o=e-r;a<e;a+=r)n+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return n}earcut.PM=function(t,i,e,r){var n=i&&i.length,a=n?i[0]*e:t.length,o=Math.abs(signedArea(t,0,a,e));if(n)for(var s=0,h=i.length;s<h;s++){var u=i[s]*e,l=s<h-1?i[s+1]*e:t.length;o-=Math.abs(signedArea(t,u,l,e))}for(var c=0,s=0;s<r.length;s+=3){var f=r[s]*e,d=r[s+1]*e,v=r[s+2]*e;c+=Math.abs((t[f]-t[v])*(t[1+d]-t[1+f])-(t[f]-t[d])*(t[1+v]-t[1+f]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},earcut.UM=function(t){for(var i=t[0][0].length,e={rp:[],BM:[],dimensions:i},r=0,n=0;n<t.length;n++){for(var a=0;a<t[n].length;a++)for(var o=0;o<i;o++)e.rp.push(t[n][a][o]);0<n&&(r+=t[n-1].length,e.BM.push(r))}return e},earcut_1.default=default_1;var CoreFillBucket=(dba.prototype.Nx=function(t,i){if(t.length<6)return 0;for(var e=this.Qx.length,r=this._b.length,n=(this.zM.length,earcut_1(t,i)),a=0,o=n.length;a<o;a+=3)this.Qx.kb(r+n[a],r+n[a+1],r+n[a+2]);for(a=0,o=t.length;a<o;a+=2)this._b.kb(t[a],t[a+1]);return 0<(e=3*(this.Qx.length-e))&&(this.uploaded=!1),e},dba.prototype.Ew=function(t){if(t.length<2)return 0;for(var i=this.qM.length,e=this.zM.length,r=0,n=t.length;r<n;r+=2)this.zM.kb(t[r][0],t[r][1]),this.zM.kb(t[r+1][0],t[r+1][1]),this.qM.kb(e+r,e+r+1);return 0<(i=2*(this.qM.length-i))&&(this.uploaded=!1),i},dba.prototype.destroy=function(){this.uploaded=!1,this.zs&&(this.zs.context.deleteBuffer(this.zs),delete this.zs),this.Pc&&(this.Pc.context.deleteBuffer(this.Pc),delete this.Pc),this.Ec&&(this.Ec.context.deleteBuffer(this.Ec),delete this.Ec),this.Nc&&(this.Nc.context.deleteBuffer(this.Nc),delete this.Nc)},dba);function dba(){this._b=new FillArray,this.zM=new FillArray,this.uploaded=!1}var PolygonBucket=(tba=CoreFillBucket,__extends(uba,tba),uba.prototype.upload=function(t,i){void 0===i&&(i=!1),this.uploaded||(this.destroy(),this.uploaded=!0,this.zs=t.fe(this._b.Mb,FillArray.Rb),this.Pc=t.ve(this.Qx.UI),this.Ec=t.fe(this.zM.Mb,LinesIndexArray.Rb),this.Nc=t.ve(this.qM.UI),i&&(delete this.Qx,delete this._b,delete this.zM,delete this.qM))},uba.prototype.reset=function(){this._b=new FillArray,this.zM=new FillArray,this.Qx=new TriangleIndexArrayUint,this.qM=new LinesIndexArrayUint,this.uploaded=!1},uba),tba;function uba(){var t=tba.call(this)||this;return t.Qx=new TriangleIndexArrayUint,t.qM=new LinesIndexArrayUint,t}var FaceTextureCoord={empty:fromValues$3(-1,-1),Gm:fromValues$3(1,1),qm:fromValues$3(0,1),Nm:fromValues$3(1,0),Um:fromValues$3(0,0)},MaxInfo={Gm:create$3(),qm:create$3(),Nm:create$3(),Um:create$3()},floorHeight=6,FillExtrusionBucket=(yba.prototype.tz=function(t,i,e){void 0===i&&(i=100);for(var r=[],n=[],a=t.length,o=0;o<a;o+=2)n[s=o/2*3]=t[o],n[s+1]=t[o+1],n[s+2]=0;for(var s,o=0;o<a;o+=2)r[s=o/2*3]=t[o],r[s+1]=t[o+1],r[s+2]=i;return this.Nx(r,i,e)+this.RI(n,r,e)},yba.prototype.RI=function(t,i,e){var r=i.length,n=i[2],a=this._b.length;t=t.concat(t.slice(0,3)),i=i.concat(i.slice(0,3));for(var o=0;o<r-3;o+=3){var s=Math.abs(t[o]-t[o+3]),h=Math.abs(t[o+1]-t[o+4]),u=Math.round(n),h=Math.round(Math.sqrt(Math.pow(s,2)+Math.pow(h,2)));0<(u=fromValues$3(Math.ceil(h/floorHeight),Math.round(u/floorHeight)))[1]?(mul(MaxInfo.qm,FaceTextureCoord.qm,u),mul(MaxInfo.Gm,FaceTextureCoord.Gm,u),mul(MaxInfo.Um,FaceTextureCoord.Um,u),mul(MaxInfo.Nm,FaceTextureCoord.Nm,u)):(set$1(MaxInfo.qm,-1,-1),set$1(MaxInfo.Gm,-1,-1),set$1(MaxInfo.Um,-1,-1),set$1(MaxInfo.Nm,-1,-1)),u=this.zI(t.slice(o,o+3),t.slice(o+3,o+6),i.slice(o+3,o+6)),this._b.kb(t[o],t[o+1],t[o+2],n,u,MaxInfo.qm),this._b.kb(i[o+3],i[o+4],i[o+5],n,u,MaxInfo.Nm),this._b.kb(t[o+3],t[o+4],t[o+5],n,u,MaxInfo.Gm),this._b.kb(t[o],t[o+1],t[o+2],n,u,MaxInfo.qm),this._b.kb(i[o],i[o+1],i[o+2],n,u,MaxInfo.Um),this._b.kb(i[o+3],i[o+4],i[o+5],n,u,MaxInfo.Nm)}return 0<(a=this._b.length-a)&&(this.uploaded=!1),a},yba.prototype.Nx=function(t,i,e){if(t.length<9)return 0;for(var r=this._b.length,n=earcut_1(t,e,3),a=n.length-1;0<=a;a--){var o=3*n[a];this._b.kb(t[o],t[1+o],t[2+o],i,fromValues$1(0,0,1),FaceTextureCoord.empty)}return 0<(r=this._b.length-r)&&(this.uploaded=!1),r},yba.prototype.zI=function(t,i,e){var r=fromValues$1(t[0],t[1],t[2]),n=fromValues$1(i[0],i[1],i[2]),a=fromValues$1(e[0],e[1],e[2]),t=create$1(),i=create$1(),e=create$1();return sub(i,r,n),sub(e,a,n),cross(t,i,e),t},yba.prototype.upload=function(t,i){void 0===i&&(i=!1),this.uploaded||(this.destroy(),this.uploaded=!0,this.zs=t.fe(this._b.Mb,FillExtrusionArray.Rb),i&&delete this._b)},yba.prototype.destroy=function(){this.uploaded=!1,this.zs&&(this.zs.context.deleteBuffer(this.zs),delete this.zs),this.Pc&&(this.Pc.context.deleteBuffer(this.Pc),delete this.Pc)},yba.prototype.reset=function(){this._b=new FillExtrusionArray,this.uploaded=!1},yba);function yba(){this._b=new FillExtrusionArray,this.uploaded=!1}var CONSTS={ID:"__id__",Rp:22,Mp:2,jp:.8,Pp:.2,YM:5,KM:{dom:"div",id:"_amap_custom_labellayer_div_",className:"amap-layer",style:{cssText:"position:absolute;top:0;left:0;",zIndex:"",width:"",height:"",visible:""}},Dp:{Op:180,Ad:70,Td:260,Bd:Math.PI/10},XM:{top:3,right:3,bottom:3,left:3},JM:{ZM:"top",QM:"right",tj:"bottom",LEFT:"left",nj:"middle",ij:"center",ej:"alphabetic"},oj:{CLICK:"click",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",aj:"touchstart",uj:"touchend"},sj:{rank:1,angle:0,opacity:1,offset:[0,0],zooms:[3,20],icon:{type:"image",image:"://visuallocal.amap.com/public/poi-marker.png",clipOrigin:[0,0],clipSize:[36,36],size:[36,36],anchor:"bottom-center",angel:0,retina:!0,zooms:[3,20]},text:{type:"billboard",direction:"top",offset:[0,0],zooms:[3,20],style:{fj:6,fontFamily:"sans-serif",fontSize:12,fontWeight:"normal",fillColor:[0,0,0,1],strokeWidth:0,strokeColor:[.988,.988,.988,1],borderColor:"transparent",padding:[3,3,3,3],backgroundColor:""}}},hj:{cj:{opacity:.2},vj:"fadeIn",lj:"fadeOut",dj:{bj:"start",RUNNING:"running",pj:"complete"},yj:{mj:"opacity",gj:"size"}},_d:3,wj:"_AMap_sdf_com_words",Mj:128,pc:["://sdf.amap.com","://sdf01.amap.com","://sdf02.amap.com","://sdf03.amap.com","://sdf04.amap.com"],Qu:1,sp:4,ec:24,Cd:.78125,Ld:205/256,Aj:{kj:"纹理加载失败，请重试",Oj:"资源加载失败，请重试"},xj:"bufferChanged",Ij:"frameBufferChanged",Tj:"combineFrameBufferChanged",Fj:3,_j:2,IB:3,Sj:8,ic:1,ud:12,Cj:12,Ej:"__icon_combination",Nj:"__text_combination",Lj:{file:{0:"https://vdata.amap.com/style_icon/2.0/icon-normal-big.png",1:"https://vdata.amap.com/style_icon/2.0/icon-biz-big.png"},size:[40,40],Rj:10},Kp:{buffer:3,family:"ios9",size:24},_n:{Uj:[0,0,0,1],Gp:[0,0,0,0]},yN:{version:"2.1",range:["32-40863"],urlPrefix:"://glyph.amap.com/static/"},gH:"sdf",RB:"sdfJson",FN:"version"},nca,nca=exports.uc||(exports.uc={});nca.BLOB="blob",nca.TOLOAD="toload",nca.LOADING="loading",nca.LOADED="loaded",nca.UNLOADED="unloaded",nca.ERROR="error",nca.RELOADING="reloading",nca.UNCOMBINED="uncombined",nca.COMBINING="combining",nca.COMBINED="combined";var tmp1=4294901760,tmp2=65535;function getUploadName(t,i){return((t=tmp1-(t<<16))+(i=tmp2-i)).toString(16)}function staticSDFTileKeyToKey(t){var i=map(t.split(","),function(t){return parseInt(t,10)}),e=i[1],t=i[2];return i[0]<10?"lesszoom10":(10===i[0]||(12===i[0]?(e=Math.floor(e/4),t=Math.floor(t/4)):14===i[0]?(e=Math.floor(e/16),t=Math.floor(t/16)):15===i[0]&&(e=Math.floor(e/32),t=Math.floor(t/32))),getUploadName(e,t))}var labelsUtil={Bj:function(t){void 0===t&&(t={});var i,e={};for(i in t)t.hasOwnProperty(i)&&(e[i]=1);return e},zj:function(t,i){t.gs=i,t.qj=i.options||{},t.Wj=i.Wj||{},t.Fs=i.Fs||{},t.Gj=i.Gj||{},t.Hj=i.Hj||{},t.Vj=i.Vj||{},t.$j=i.$j||0},Yj:function(t,i){void 0===t&&(t=[NaN,NaN,NaN,NaN]),void 0===i&&(i=[0,0,0,1]);for(var e=0;e<t.length;e++){var r=t[e];isNaN(r)&&(t[e]=i[e])}return t},Kj:function(t){return[((16711680&t)>>16)/255,((65280&t)>>8)/255,(255&t)/255,1]},Xj:function(t,i){void 0===i&&(i={});for(var e=[],r=i.qw,n=i.Aw,a=i.complete,o=0,s=t;o<s.length;o++){var h=s[o],h=new Promise(h);e.push(h)}var u=0;Promise.all(e).then(function(){r&&r.apply(void 0,arguments),a&&!u&&(u=1,a.apply(void 0,arguments))}).catch(function(){n&&n.apply(void 0,arguments),a&&!u&&(u=1,a.apply(void 0,arguments))})},Jj:function(t,i){var r=void 0===(e=t[0])?0:e,a=void 0===(n=t[1])?0:n,n=void 0===(e=i[0])?0:e,e=void 0===(e=i[1])?0:e;return t=r<=n?n<=a?e<a?[n,e]:[n,a]:null:labelsUtil.Jj(i,t)},measureText:function(t,i,e,r){if(void 0===i&&(i=""),void 0===r&&(r="3D"),"3D"===r)return t.measureText(i,e)},lnglatToContainer:function(t,i){return(void 0===(i=i.zoom)?20:i)<LocalZoom?t:(i=lcs.getLocalByCoord(t),vector.Ip(t,i.center))},Sd:function(t,i){var r=void 0===(e=t[0])?0:e,t=void 0===(e=t[1])?0:e,e=void 0===(e=i[0])?0:e,i=void 0===(i=i[1])?0:i,r=Math.abs(e-r),t=Math.abs(i-t);return Math.sqrt(Math.pow(r,2)+Math.pow(t,2))},getAngle:function(t,i){var r=void 0===(e=t[0])?0:e,t=void 0===(e=t[1])?0:e,e=void 0===(e=i[0])?0:e,t=(void 0===(i=i[1])?0:i)-t;return 0==(r=e-r)?t<0?3*Math.PI/2:Math.PI/2:0===(t=Math.atan(t/r))||0<t?0<=r?t:t+Math.PI:0<r?2*Math.PI+t:Math.PI+t},Fd:function(t,i,e){for(var r=t[0],n=void 0===r?0:r,a=void 0===(t=t[1])?0:t,o=(t=void 0===(t=i[0])?0:t)-n,s=(void 0===(i=i[1])?0:i)-a,h=[],u=0;u<e;){var l=[n+o/(e+1)*(u+1),a+s/(e+1)*(u+1)];h.push(l),u++}return h},OG:function(t,i,e){return 0===e?t:[t[0]+(i[0]-t[0])*e,t[1]+(i[1]-t[1])*e]},Ed:function(t,i){if(void 0===t&&(t=[]),void 0===i&&(i="ch"),!(e=t.length))return!1;var r=t[0],n=t[4<=e?Math.floor(e/4*3):e-1],a=r[0],t=r[1],e=n[0],n=((r=n[1])-t)/(e-a),t=[e-a,r-t];return(t="ch"===i&&1<Math.abs(n)?vector.Zj(t,[0,1]):vector.Zj(t,[1,0]))<0},Nd:function(t,i,e){var r,n=t[0],a=t[1],o=i[0],i=((t=i[1])-a)/(o-n),a=[o-n,t-a];return 1<Math.abs(i)&&"x"!==e?(r=0<vector.Zj(a,[0,-1])?vector.Qj(a,[0,-1]):vector.Qj(a,[0,1]),0<i&&(r=-r)):(r=0<vector.Zj(a,[1,0])?vector.Qj(a,[1,0]):vector.Qj(a,[-1,0]),i<0&&(r=-r)),r},Od:function(t,i,e){var r=e*Math.sin(i),i=e*Math.cos(i);return[t[0]+i,t[1]+r]},jd:function(t,i,e,r){var n=vector.Ip(t,i),a=vector.length(n),t=vector.Ip(e,i),e=vector.length(t),n=vector.Zj(n,t),n=Math.acos(n/(a*e)),e=Math.PI-n,n=a*Math.sin(e),e=a*Math.cos(e),r=Math.sqrt(Math.pow(r,2)-Math.pow(n,2))-e,n=0===t[0]?0<t[1]?Math.PI/2:-Math.PI/2:Math.atan(t[1]/t[0]),e=Math.abs(r*Math.sin(n)),n=r*Math.cos(n),e=[0<=vector.Zj(t,[1,0])?n:-n,0<=vector.Zj(t,[0,1])?e:-e];return vector.add(i,e)},rank:function(t){for(var i=[],e=0;e<t.length;e++){var r=parseInt(t[e],10);r<0&&(t.splice(e--,1),i.push(r+""))}return i.concat(t)},$p:function(t){var i=CONSTS.Mp,e=CONSTS.Rp;return 20<=t[1]&&(t[1]=e),t[0]<=3&&(t[0]=i),t},toString:function(t,i){void 0===i&&(i=4);var e="";if(!t)return e;for(var r=0,n=t;r<n.length;r++){var a=n[r];e+=(a+"").length<i?a:a.toFixed(i)}return e},xf:function(t,i){var e,r,n,a=[],o=i.ja,s=i.Fa,h=i.Oa,u=i.Ea;for(e in t)t.hasOwnProperty(e)&&e!==CONSTS.gH&&e!==CONSTS.FN&&e!==CONSTS.RB&&("shields"!==e&&o?(n=e.split("-"),r=parseInt(n[1],10),n=parseInt(n[2],10),o<=r&&r<=h&&s<=n&&n<=u&&a.push(t[e])):a.push(t[e]));return a.length||(a=t),a},EQ:function(t,i){for(var e=[],r=i.length,n=0;n<r-1;n++){var a=t.substring(i[n],i[n+1]);e.push(a)}return r||(e=t.split("")),e},aQ:function(t){for(var i=[],e=0;e<t.length;e++){for(var r=t[e],n=[],a=0;a<r.length;a++){var o=r.charCodeAt(a);n.push(o)}var s=n.join("|");i.push(s)}return i},tQ:function(t,i,e){var r="",n=[],a="";if(t.name)if(t.JQ&&0<t.JQ.length)r=getSpiltLineWithSpiltIndex(t.name,t.JQ),a="ch";else if(e){var o=e.lineBreak(t.name,{from:"labelsLayer",CO:[]}),s=0,h="";if(2<=o.oQ.length){for(var u=1,l=o.oQ.length-1;u<l;u++)h+=t.name.slice(s,o.oQ[u])+" ",s=o.oQ[u];h+=t.name.slice(s)}else h=t.name;r=h,a="ch"}else r=t.name,a="ch";else{switch(i){case"en":r=t.name_en,n=t.iQ,a="en";break;case"local":r=t.QQ,n=t.$G,a=t.CQ;break;case"zh_cn":r=t.BQ,a="ch";break;default:r=t.BQ,a="ch"}r||(t.name_en?(r=t.name_en,n=t.iQ,a="en"):t.QQ&&(r=t.QQ,n=t.$G,a=t.QQ))}return{name:r,$G:n,type:a}}},vector={add:function(t,i){for(var e=[],r=0;r<t.length;r++)e[r]=t[r]+i[r];return e},Ip:function(t,i){for(var e=[],r=0;r<t.length;r++)e.push(t[r]-i[r]);return e},multiply:function(t,i){for(var e=[],r=0,n=t;r<n.length;r++){var a=n[r];e.push(a*i)}return e},Up:function(t,i){for(var e=[],r=0;r<t.length;r++)e[r]=t[r]/i;return e},tA:function(t){return this.multiply(t,-1)},Zj:function(t,i){var e=t[0],r=void 0===e?0:e,t=void 0===(e=t[1])?0:e;return r*(e=void 0===(e=i[0])?0:e)+t*(void 0===(i=i[1])?0:i)},Qj:function(t,i){var e=vector.Zj(t,i),t=vector.length(t),i=vector.length(i);return Math.acos(e/(t*i))},length:function(t){var i=t[0],t=t[1];return Math.sqrt(Math.pow(i,2)+Math.pow(t,2))}},noop$1=function(t){};function getSpiltLineWithSpiltIndex(t,i){if(i.shift(),0===i.length)return t;for(var e="",r=0,n=0,a=i.length;n<a;n++)e+=t.substr(r,i[n]-r)+" ",r=i[n];return e+t.substr(i[i.length-1])}var XHR={send:function(t,i){void 0===i&&(i={});var e=new XMLHttpRequest,n=void 0===(r=i.qw)?noop$1:r,o=void 0===(a=i.Aw)?noop$1:a,r=i.Me,a=i.method,i=i.content;return e.responseType=r||"json",e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){var t=e.response;try{n(t)}catch(t){o(t)}}else 404===e.status&&(e.abort(),o(Error("404")))},e.onerror=function(t){e.abort(),o(t)},e.open(a||"GET",t),e.send(i||void 0),e}},LabelPlacement=(rha.prototype.nO=function(t,i){void 0===i&&(i={}),this.iO=i.from||"inner",labelsUtil.zj(this,t),this.eO(i)},rha.prototype.oO=function(){return this.gs.aO()},rha.prototype.uO=function(){return this.oO().viewMode,!0},rha.prototype.eO=function(t){void 0===t&&(t={});var i,e,r,n,a,o=t.center,s=this.Gj||{},h=this.Vj||{},u=this.Hj||{},l=this.iO,c=0;for(i in s)s.hasOwnProperty(i)&&i&&(a=s[i]||{},u[i]=this.sO(i,a),h[i]=this.fO(i,a,u[i],{from:l,center:o}),e=a.data.txt,r=(n=a.opts).icon,n=n.text||{},a=a.CO,e&&a&&(c+=a.length+1,n.style&&n.style.borderWidth&&(c+=4)),r&&r.length&&r[0].image&&(c+=r.length));this.$j=c,this.Vj=h,this.Hj=u},rha.prototype.hO=function(t,i){void 0===t&&(t=[]),void 0===i&&(i=[]);var e=CONSTS.Mp,r=CONSTS.Rp,n=t[0]||e,t=t[1]||r;return[(e=i[0]||e)<n?n:e,t<(r=i[1]||r)?t:r]},rha.prototype.cO=function(t,i){void 0===t&&(t={});var e={};return e.type=t.type||i.type,e.image=t.image||"",e.clipOrigin=t.clipOrigin||i.clipOrigin,e.clipSize=t.clipSize,e.size=t.size,e.anchor=t.anchor||i.anchor,e.angel=t.angel||i.angel,e.retina=t.retina||i.retina,e.zooms=t.zooms||i.zooms,e},rha.prototype.vO=function(t,i){void 0===t&&(t={});var e={};e.type=t.type||i.type,e.direction=t.direction||i.direction,e.offset=t.offset||i.offset,e.zooms=t.zooms||i.zooms;var r=i.style,n=t.style||{};return e.style={},e.style.fontFamily=n.fontFamily||r.fontFamily,e.style.fontSize=n.fontSize||r.fontSize,e.style.fontWeight=n.fontWeight||r.fontWeight,e.style.fillColor=n.fillColor||r.fillColor,i=n.strokeColor,isUndefined(t=n.strokeWidth)&&isUndefined(i)?e.style.strokeWidth=r.strokeWidth:isUndefined(t)&&!isUndefined(i)?e.style.strokeWidth=1:e.style.strokeWidth=n.strokeWidth,e.style.borderColor=n.borderColor,e.style.borderWidth=n.borderWidth,e.style.strokeColor=n.strokeColor||r.strokeColor,e.style.borderColor=n.borderColor||r.borderColor,e.style.backgroundColor=n.backgroundColor,e.style.padding=n.padding||r.padding,e.style.fold=void 0!==n.fold&&n.fold,e},rha.prototype.lO=function(t){return[(t=(this.ac.Fs||{})[t]||{}).width||36,t.height||36]},rha.prototype.dO=function(t,i){var e=CONSTS.sj;return(e=this.cO(t,e.icon)).zooms=t.zooms||i.bO,i=this.hO(i.zooms,e.zooms),e.zooms=i,e.size&&e.clipSize||(t=(i=this.lO(t.image||""))[0]||0,i=i[1]||0,e.size||(e.size=[t,i]),e.clipSize||(e.clipSize=[t,i])),e},rha.prototype.pO=function(t,i){void 0===t&&(t={});var e=CONSTS.sj,r=this.vO(t,e.text);return r.zooms=t.zooms||i.bO,e=r.direction,t=i.yO,t=(e=this.mO(e||"",t)).textAlign,e=e.verticalAlign,r.style&&(r.style.textAlign=t,r.style.verticalAlign=e),i=this.hO(i.zooms,r.zooms),r.zooms=i,r},rha.prototype.sO=function(t,i){var r=(e=i.data)&&e.txt,a=(n=i.opts||{}).angle||0,o=isUndefined(n.opacity)?1:n.opacity,s=n.icon,e=n.text,i=n.zooms,n=n.visible,h={angle:a,opacity:o,zooms:this.options.zooms,bO:i},u=[];if(s)for(var l=0,c=s;l<c.length;l++){var f=c[l];u.push(this.dO(f,h))}return h.yO=!!s,(e=r?this.pO(e,h):null)&&(e.txt=r),n={icon:u,text:e,visible:n},"labelsLayer"===this.iO&&(n.tn=1),n},rha.prototype.gO=function(t){if(this.oO().zoom<LocalZoom)return t;var i=lcs.getLocalByCoord(t);return vector.Ip(t,i.center)},rha.prototype.wO=function(t,i){if(!i||!i.image)return{size:[0,0],origin:t,anchorOffset:[0,0],coords:t};var e=CONSTS.sj.icon,r=i.size||this.lO(i.image),e=i.anchor||e.anchor;return{size:r,origin:t,anchorOffset:e=this._getAnchorOffset(r,e),coords:vector.add(t,e)}},rha.prototype.MO=function(t,h,e){if(void 0===t&&(t="icon"),"text"!==t)return n=void 0===(n=h.size)?[]:n,h.coords,{x:(a=h.c)[0],y:a[1],width:n[0]||0,height:n[1]||0};var r=h.origin,n=(h.start,e.padding),a=e.c,o=void 0,h=n.offsetX,t=n.offsetY,e=n.w,n=n.h,s=this.uO()?(o=a[0],a[1]):(o=r[0],r[1]);return{x:o+h,y:s+t,width:e,height:n}},rha.prototype._getAnchorOffset=function(t,i){var e=CONSTS.JM,r=t[0]||0,n=t[1]||0;if("[object Array]"===Object.prototype.toString.apply(i)){var a=i[0],o=i[1];if("number"==typeof a&&"number"==typeof o)return vector.tA(i)}else if("string"==typeof i){switch(a=(t=i.split("-"))[0],o=t[1],t=i=0,a!==e.ij||o||(a=e.nj,o=e.ij),o){case e.LEFT:i=0;break;case e.ij:i=-r/2;break;case e.QM:i=-r;break;default:i=0}switch(a){case e.ZM:t=0;break;case e.nj:t=-n/2;break;case e.tj:t=-n;break;default:t=0}return[i,t]}return[0,0]},rha.prototype.jO=function(t){return this._getAnchorOffset(t.size||[0,0],"middle-center")},rha.prototype.AO=function(t,i,e,r){void 0===r&&(r={});var a,o=CONSTS.JM,h=void 0===(s=r.kO)?0:s,l=void 0!==(u=r.yO)&&u,c=r.padding,f=r.lines,v=(d=this.jO(t))[0]||0,g=d[1]||0,y=(p=t.anchorOffset||[])[0]||0,b=p[1]||0,u=(s=t.size||[])[0]||0,r=s[1]||0,d=y-v,p=b-g,t=c[0],s=c[1],v=c[2],g=c[3],c=.8*h;switch(e){case o.ZM:n=l?(a=d,b-v-.2*h-(x=c*f+3*(f-1))):(a=y+g,b+t);break;case o.QM:var x=c/2*f+1.5*(f-1),n=l?(a=y+u+g,p-x):(a=y-s,b-x-v);break;case o.tj:n=l?(a=d,b+r+t):(a=y+g,b-v-(x=c*f+3*(f-1)));break;case o.LEFT:x=c/2*f+1.5*(f-1);n=l?(a=y-s,p-x):(a=y+g,b-x-v);break;case o.nj:case o.ij:n=l?(a=y+u/2,p-(x=c/2*f+1.5*(f-1))):(a=y,b-(x=c/2*f+1.5*(f-1))-v);break;default:a=y,n=b-(x=c/2*f+1.5*(f-1))-v}return[a,n]},rha.prototype.OO=function(t,i){void 0===i&&(i={});var e,r,n=CONSTS.JM,a=i.xO,o=(i.kO,i.yO),s=i.direction,h=i.lines,u=i.size,i=(i.IO,t[0]||0),t=t[1]||0;switch(this.mO(s,o).textAlign){case n.LEFT:e=i,r=t;break;case n.QM:e=i-a,r=t;break;case n.ij:e=i-a/2,r=t}return{x:e,y:r,w:a,h:this.TO(u,h),FO:i,_O:t}},rha.prototype.mO=function(t,i){var e,r,n=CONSTS.JM;if(i)switch(t){case n.LEFT:e=n.QM;break;case n.QM:e=n.LEFT;break;case n.ZM:case n.tj:default:e=n.ij,r=n.tj}else switch(t){case n.LEFT:case n.ij:case n.QM:e=t,r=n.tj;break;case n.ZM:case n.tj:case n.nj:default:e=n.LEFT,r=t}return{textAlign:e,verticalAlign:r}},rha.prototype.TO=function(t,i){return void 0===t&&(t=12),void 0===i&&(i=1),(t*=5/4)*i+3*(i-1)},rha.prototype.CT=function(t,i){return this.Mf?this.Mf.measureText(t,i):this.NT?(this.NT.font=(i||12)+"px",this.NT.measureText(t.join("")).width):0},rha.prototype.SO=function(t,i,e){if(!i||!e.txt)return{origin:t.origin,offset:[0,0],coords:t.coords,start:{}};var n=(r=CONSTS.sj.text).direction,a=r.offset,o=r.style,s=e.yO,h=e.CO,u=i.direction||n,l=i.offset||a,n=(r=i.style||o).fontSize||12,a=r.padding||o.padding,i=!1===r.fold?100:o.fj,r=e.txt.length,h=(o=this.Mf.lineBreak(e.txt,{fontSize:n,CO:h,type:e.BG||"ch",fj:i,YQ:this.NT,from:e.from})).lines.length,e=this.TO(n,1),r={xO:o.maxWidth,kO:e,yO:s,direction:u,padding:a,fj:i,lines:h,size:n,IO:r},u=this.AO(t,t.size,u,r),u=vector.add(u,l),l=vector.add(t.origin,u),r=this.OO(l,r);return{origin:t.origin,offset:u,coords:l,start:r}},rha.prototype.EO=function(t,i,e){if(!i||!e.txt)return{offsetX:0,offsetY:0,w:0,h:0};var r,n,a=CONSTS.JM,o=CONSTS.sj,s=(t.coords,t.start),l=(u=void 0===(h=t.offset)?[]:h)[0],c=u[1],f=s.w,t=s.h,h=e.yO,s=(u=o.text).direction,e=u.style,o=i.direction||s,s=(u=(i.style||e).padding||e.padding)[0],i=u[1],e=u[2],u=u[3];if(h)switch(o){case a.ZM:r=l-f/2-u,n=c-s;break;case a.QM:r=l-u,n=c-s;break;case a.tj:r=l-f/2-u,n=c-s;break;case a.LEFT:r=l-f-u,n=c-s;break;case a.nj:case a.ij:r=l-f/2-u,n=c-s;break;default:r=l-f/2-u,n=c+e}else switch(o){case a.ZM:r=l-u,n=c+e;break;case a.QM:r=l-f-u,n=c+e;break;case a.tj:case a.LEFT:r=l-u,n=c+e;break;case a.nj:case a.ij:r=l-f/2-u,n=c-s;break;default:r=l-f/2-u,n=c+e}return{offsetX:r,offsetY:n,w:f+u+i,h:t+s+e}},rha.prototype.fO=function(t,i,e,r){void 0===r&&(r={});var n=r.from,a=r.center,o=i.data,s=i.opts||{},h=o.position,u=o.txt,l=s.icon,s=e.text,e=i.CO,i=this.oO().zoom,i="inner"!==n||"relative"!==o.positionType&&LocalZoom<=i?vector.Ip(h,a):h,a=vector.add(i,[0,0]),h=!!l,l=this.wO(a,l&&l[0]),r=this.SO(l,s,{CO:e,txt:u,yO:h,BG:o.BG,from:r.from}),h={txt:u,yO:h};return{origin:i,icon:l,text:r,padding:this.EO(r,s,h)}},rha);function rha(t){this.options={},this.Gj={},this.Hj={},this.Vj={},this.Wj={},this.$j=0,this.render=null,this.NO={},this.ac=t.z_,this.Mf=t.R_,this.io=t.canvas,this.NT=t.Nz}var LabelGroup=(ima.prototype.nT=function(t){if(!t)return"";var i=t.fontSize,r=void 0===(e=t.fillColor)?CONSTS.COLOR.Uj:e,a=void 0===(n=t.strokeColor)?CONSTS.COLOR.Uj:n,e=t.strokeWidth,n=t.backgroundColor,t=t.borderColor,e=labelsUtil.toString(r)+labelsUtil.toString(a)+(n?labelsUtil.toString(n):""+(t?labelsUtil.toString(t):""))+i+e;return this.AS(e),this.oT[e]},ima.prototype.AS=function(t){this.oT[t]||(this.oT[t]=this.index++)},ima);function ima(){this.oT={},this.index=1}var labelGroup=new LabelGroup,angle$1=0,LabelBucket=(vma.prototype.rQ=function(t,i){var r=void 0===(e=i.from)?"inner":e,n=CONSTS.ud;labelsUtil.zj(this,t),this.iO=r;var e=this.Mf&&"SDFManagerBase"!==this.Mf.CLASS_NAME,a=this.DO;e&&(a.rp=new Float32Array(this.$j*n*6));var o=this.Gj,s=this.Hj,h=this.Vj;if(!s||!h)return null;var t=assign(this.options,i),r=this.RO(o),u=isUndefined(t.opacity)?1:t.opacity;if(e){for(var l,c=0,f=0,d=0,v=r;d<v.length;d++){var g=v[d],y={vd:[]};(p=s[g[0]])&&p.text&&p.text.style&&(b=s[g[0]].text.style||{},y.vd=this.pO(b)),l=f,y.start=l;var b=isUndefined(b=(p=o[g[0]].opts||{}).opacity)?1:b,p=p.icon&&p.icon[0]&&p.icon[0].image;y.opacity=b,y.opacity*=u,a.pp.push(y),y.dp=[];for(var x=0,m=g;x<m.length;x++){var w=m[x],R=o[w].CO||[],T={height:o[w]&&o[w].opts.height||0,from:i.from},A=this.PO(w,h[w],s[w],a,T),M=this.UO(w,h[w],s[w],a,T),T=6*((R=this.BO(w,h[w],s[w],o[w],a,R,T))+A+M);y.dp.push({id:w,Rd:R,icon:A,bg:M,kd:T}),f+=T*n}y.end=f,y.pd=p,c+=p=f-l,a.bd.push(p)}a.up=c}return a.Fz=r,this.DO=a},vma.prototype.ym=function(){return this.gs.aO()},vma.prototype.zO=function(t){if(!t)return[];var i=this.qO;return i[t]||(i=labelsUtil.Kj(parseInt(t,10)),this.qO[t]=i,this.qO[t])},vma.prototype.RO=function(t){var i,e,r,n,a,o={},s=this.Gj,h=this.iO;for(c in t)t.hasOwnProperty(c)&&(a=(e=s[c]).data||{},n=(r=e.opts||{}).zIndex,g=a.rank,g=r.forceShow?g-1e5:g,i=isUndefined(r.opacity)?1:r.opacity,e=("labelsLayer"===h?n||g:n)||1,n=void 0===(r=(a=this.Hj[c]||{}).text)?{}:r,r=a.icon,o[e]=o[e]||{},a=void 0,a=(n=n&&n.style||"")?labelGroup.nT(n)+i:"-1-"+i,"labelsLayer"===h&&(a+=r&&r[0]&&r[0].image?r[0].image:""),o[e][a]||(o[e][a]=[]),o[e][a].push(c));for(var u=Object.keys(o),l=[],c=0;c<u.length;c++)(g=parseInt(u[c],10))<0&&(u.splice(c--,1),l.push(g+""));for(var f=[],d=0,v=u=l.concat(u);d<v.length;d++)for(var g,p=o[g=v[d]],y=0,b=Object.keys(p).sort();y<b.length;y++){var x=b[y];f.push(p[x])}return f},vma.prototype.WO=function(t,i){var e=Util.WorldAxesCenter;return[t-e.x,i-e.y]},vma.prototype.GO=function(t){return t},vma.prototype.HO=function(t,i,e,r,n){var a=n.VO,s=void 0===(o=n.type)?0:o,h=n.zooms,u=n.height,c=void 0===(l=i.icon)?[]:l,f=CONSTS.ud,d=this.$O,v=0,g=0;(p=this.ac.getImage(e.image))&&(v=p.startX||0,g=p.startY||0);var y=a[0],b=a[1],x=CONSTS._j,m=h[0],o=h[1],n=x,i=c.anchorOffset,l=e.size,p=e.clipSize,a=e.clipOrigin,h=l[0],x=l[1],c=p[0],e=p[1],l=a[0],p=a[1],i=(a=this.GO(i))[0]||0,a=a[1]||0,l=v+l,p=g+p;r.set([i,a,l,p,y,b,n,s,m,o,u,angle$1,i+h,a,l+c,p,y,b,n,s,m,o,u,angle$1,i,x+a,l,p+e,y,b,n,s,m,o,u,angle$1,i+h,a,l+c,p,y,b,n,s,m,o,u,angle$1,i+h,x+a,l+c,p+e,y,b,n,s,m,o,u,angle$1,i,x+a,l,p+e,y,b,n,s,m,o,u,angle$1],d),this.$O+=6*f},vma.prototype.PO=function(t,i,e,r,n){if(!i||!e)return 0;var a=i.icon,o=void 0===a?{}:a;if(!(a=void 0===(s=e.icon)?[]:s).length||!a[0].image)return 0;for(var s=(e=o.origin)[0],o=e[1],h=(e[2],this.WO(s,o)),u=n.height,l=0,c=a;l<c.length;l++){var f=c[l];this.HO(t,i,f,r.rp,{VO:h,zooms:f.zooms,height:u})}return a.length},vma.prototype.YO=function(t,i,e,r,n){var a=n.VO,s=void 0===(o=n.type)?6:o,h=n.zooms,u=n.height,l=CONSTS.ud,c=this.$O,f=i.padding,d=a[0],v=a[1],o=h[0],n=h[1],i=f.w,a=f.h,h=f.offsetX,f=f.offsetY;if(r.set([h,f,0,0,d,v,0,s,o,n,u,angle$1,h+i,f,0,0,d,v,0,s,o,n,u,angle$1,h,a+f,0,0,d,v,0,s,o,n,u,angle$1,h+i,f,0,0,d,v,0,s,o,n,u,angle$1,h+i,a+f,0,0,d,v,0,s,o,n,u,angle$1,h,a+f,0,0,d,v,0,s,o,n,u,angle$1],c),this.$O+=6*l,c=this.$O,e=e.text.style.borderWidth){for(var g=[h,f,i,a,d,v,e,o,n,u,angle$1],p=0;p<4;p++)g[11]=p,this.sT(g,r,c),c+=6*l;this.$O=c}},vma.prototype.sT=function(t,i,e){void 0===t&&(t={});var r=t[0],n=t[1],a=t[2],o=t[3],s=t[4],h=t[5],u=t[6],l=t[7],c=t[8],f=t[9],d=t[10],v=0,g=0,p=0,y=0,b=0,x=0,m=0,w=0;switch(t[11]){case 0:y=g=n-u,b=v=r+0,m=p=r+a,w=x=n+0;break;case 1:p=(v=r+a)+u,y=g=n-u,m=(b=r+a)+u,w=x=n+o+u;break;case 2:b=v=r+0,m=p=r+a,w=x=(y=g=n+o)+u;break;case 3:v=r-u,y=g=n-u,b=(p=r)-u,m=r,w=x=n+o+u}i.set([v,g,0,0,s,h,0,8,l,c,f,d,p,y,0,0,s,h,0,8,l,c,f,d,b,x,0,0,s,h,0,8,l,c,f,d,p,y,0,0,s,h,0,8,l,c,f,d,b,x,0,0,s,h,0,8,l,c,f,d,m,w,0,0,s,h,0,8,l,c,f,d],e)},vma.prototype.UO=function(t,i,e,r,n){if(!i||!e)return 0;var a=CONSTS.Mp,o=CONSTS.Rp,s=i.text,h=(e.text||{}).zooms,a=void 0===h?[a,o]:h;return e.text&&s.origin?(h=(o=s.origin)[0],s=o[1],o[2],s=[h,s],n=n.height,this.YO(t,i,e,r.rp,{VO:s,zooms:a,height:n}),n=1,e.text.style.borderWidth&&(n+=4),n):0},vma.prototype.pO=function(t){var i=CONSTS.ec,e=this.ym().KO,r=void 0===e?1:e,a=void 0===(n=t.fontSize)?12:n,s=void 0===(o=t.fillColor)?[0,0,0,1]:o,h=t.strokeColor,l=void 0===(u=t.strokeWidth)?0:u,n=void 0===(e=t.backgroundColor)?0:e,o=t.borderColor,s=labelsUtil.Yj(Util.color2RgbaArray(s)),n=n?labelsUtil.Yj(Util.color2RgbaArray(n)):[0,0,0,0],h=labelsUtil.Yj(Util.color2RgbaArray(h),[.988,.988,.988,1]),o=labelsUtil.Yj(Util.color2RgbaArray(o),[.988,.988,.988,1]),u=(a=a||12)<10?.78125:205/256,t=0;return l&&(t=u*(1-(l=10<l*r?10:l)/10.1)),e=1.4142*(i<a||1<r?1.7:1.5)/a,u+=1.5/256*(r-1),(r=new Float32Array(19)).set(s,0),r.set(h,4),r[8]=e,r[9]=t,r[10]=u,r.set(n,11),r.set(o,15),r},vma.prototype.CT=function(t,i){return this.Mf?this.Mf.measureText(t,i):this.NT?(this.NT.font=(i||12)+"px",this.NT.measureText(t.join("")).width):0},vma.prototype.XO=function(t,i){void 0===t&&(t=[]),void 0===i&&(i={});var e=CONSTS.JM,r=CONSTS.ec,a=void 0===(n=i.direction)?e.LEFT:n,n=void 0===(n=i.size)?r:n,i=i.yO,i=this.CT(t,n),t=0,n=0;switch(a){case e.LEFT:t=-i,n=0;break;case e.QM:n=t=0;break;case e.ZM:case e.tj:t=-i/2,n=0;break;case e.ij:case e.nj:t=-i/2,n=0;break;default:n=t=0}return[t,n]},vma.prototype.JO=function(t,i,e,r){var n=CONSTS.Qu,a=CONSTS.ud,o=this.$O,s=r.size,h=r.VO,l=void 0===(u=r.type)?2:u,c=(r.id,r.zooms),f=r.height,d=CONSTS.Kp,g=(v=this.Mf.mz(i)||{index:CONSTS.IB,char:this.PN[i],pos:{startX:0,startY:0}}).index,p=v.pos,y=v.char,b=h[0],x=h[1],m=c[0],w=c[1];y||(console.log("!metric",i,String.fromCharCode(i)),y=this.Mf.mz(32).char);var R=s/d.size,T=y[0],A=y[1],u=y[2],r=y[3],v=y[4],h=y[5],c=y[6],i=d.buffer;0<T&&0<A&&(T+=2*i,A+=2*i,y=+((s=e.x)+(u-i)*R),d=+(s+(u-i+T)*R),u=(s=e.y)-r*R,i=+(s+(A-r)*R),r=s=0,n<=g&&(s+=p.startX,r+=p.startY),h=s+h,c=r+c,t.set([y,u,h,c,b,x,g,l,m,w,f,angle$1,d,u,h+T,c,b,x,g,l,m,w,f,angle$1,y,i,h,c+A,b,x,g,l,m,w,f,angle$1,y,i,h,c+A,b,x,g,l,m,w,f,angle$1,d,u,h+T,c,b,x,g,l,m,w,f,angle$1,d,i,h+T,c+A,b,x,g,l,m,w,f,angle$1],o),this.$O+=6*a),e.x=e.x+(v+CONSTS.ic)*R},vma.prototype.BO=function(t,i,e,r,n,a,o){if(void 0===r&&(r={}),!i||!e)return 0;var s=CONSTS.Mp,h=CONSTS.Rp,u=e,c=(l=i.text).origin,f=l.offset,l=void 0===(i=(e=u.text||{}).style)?{}:i,i=void 0===(i=(e.type,e.direction))?"left":i,d=void 0===(e=e.zooms)?[s,h]:e,v=a,e=c[0],a=c[1];if(c[2],!u.text||!u.text.style)return 0;for(var g=v.length,p=g,c=!1===l.fold?100:6,y=((c=this.Mf.lineBreak(u.text.txt,{fontSize:l.fontSize,CO:r.CO,type:r.data&&r.data.BG||"ch",fj:c,from:o.from})).lines.length,c.oQ),b=l.fontSize,x={direction:i,size:b,yO:u.icon.length&&u.icon[0].image},m=[e,a],w={x:0,y:0},R=o.height,T=-1,A=0,M=0;M<g;M++){var S=v[M],P=this.eQ(y,A);A+=S.split("|").length;var C=this.nQ(v,y[P],y[P+1]),C=v.slice.apply(v,C),C=this.XO(C,x),C=vector.add(f,C);if(0===P&&0===M&&(w.x=C[0],w.y=C[1]),P&&(w.y=C[1]+(b+3)*P,T!==P)){if("32"===S){p--;continue}w.x=C[0]}T=P,this.JO(n.rp,S,w,{size:b,VO:m,id:t,zooms:d,height:R})}return p},vma.prototype.nQ=function(t,i,e){for(var r=0,n=0,a=0,o=t.length,s=0;s<o;s++){for(var h=t[s].split("|").length,u=0;u<h;u++){var l=a+u;l===i&&(r=s),l===e&&(n=s)}a+=h}return a<=e&&(n=o),[r,n]},vma.prototype.eQ=function(t,i){void 0===t&&(t=[]);for(var e=t.length,r=0;r<e-1;r++)if(i>=t[r]&&i<t[r+1])return r;return 0},vma);function vma(t){this.DO={rp:[],pp:[],bd:[],up:0},this.ZO=[],this.options={},this.Gj={},this.Hj={},this.Vj={},this.QO={},this.tI={},this.Fs={},this.$j=0,this.qO={},this.$O=0,this.rI={},this.iO="inner",this.No=Util.stamp(this),this.Mf=t.R_,this.ac=t.z_,this.PN=t.info||{},this.io=t.canvas,this.NT=t.Nz}var DefaultLabelsLayerOpts={opacity:1,collision:!0,animation:!0},Labels=(Msa.prototype.Ns=function(t,i,e){void 0===e&&(e={});var r=e.zoom,n=e.center,a=e.from;this.nI=t,this.iI=!0,this.iO=a,this.eI.zoom=r||20,this.oI(),this.hu=n,this.uI(e,i)},Msa.prototype.aO=function(){return this.eI},Msa.prototype.zL=function(t){return this.Wj[t]},Msa.prototype.uI=function(t,i){void 0===t&&(t={});var e=this.iO,e={center:this.hu,from:e};if(assign(e,t),this.sI.nO(this,e),this.$j=this.sI.$j,t=this.fI.rQ(this,e)){var r={},n={},e=t.Fz||{};delete t.Fz;var a,o,s,h,u,l,c=this.Gj;if("inner"===this.iO){for(var f in c)c.hasOwnProperty(f)&&(a=c[f],o=this.Vj[f],s=(l=a.data).extData,h=l.position,u=l.name,l=l.rank,r[f]={data:{position:h,name:u,rank:l,extData:{type:s.type,id:s.id,Lp:s.Lp,Ap:s.Ap,bz:s.bz}}},n[f]={origin:o.origin,icon:{anchorOffset:o.icon.anchorOffset,size:o.icon.size},padding:o.padding},a.opts&&(r[f].opts={zooms:a.opts.zooms}));i&&i({Nf:r,style:this.Hj,coords:n,rp:t,zp:this.zp,Fz:e})}else i&&i({Nf:c,style:this.Hj,coords:this.Vj,rp:t,zp:this.zp,Fz:e})}},Msa.prototype.oI=function(){for(var t=this.nI,i=this.Gj||{},e=this.Wj,r=this.zp,n=CONSTS.Mp,a=CONSTS.Rp,o=CONSTS.Pp,s=CONSTS.jp,h=0,u=t;h<u.length;h++){var l=u[h],c=l.data.id,f=l.opts&&l.opts.zooms||[],d=void 0===(d=f[0])?n:d,v=void 0===(f=f[1])?a:f,g=isUndefined(e[c])?Util.stamp(this):e[c];c&&(e[c]=g);for(var p=Math.ceil(d-o);p<=v+s;)r[p]||(r[p]=[]),r[p].push(g),p++;i[g]=l,i[g].CO=this.Ws(l),this.hI(l)}if("undefined"!=typeof Uint32Array)for(var y in r)r.hasOwnProperty(y)&&(r[y]=new Uint32Array(r[y]));this.Gj=i},Msa.prototype.hI=function(t){var i=this.Fs;(t=(t=t.opts.icon)&&t.image||"")&&(i[t]=1)},Msa.prototype.Ws=function(t){this.Es;var i=t.data.txt||"",t=(t.opts&&t.opts.text||{}).$G||[],t=labelsUtil.EQ(i,t);return labelsUtil.aQ(t)},Msa);function Msa(t){if(this.CLASS_NAME="AMap.LabelsLayer",this.Gj={},this.Hj={},this.Vj={},this.Fs={},this.Es={},this.Wj={},this.$j=0,this.zp={},this.render=null,this.eI={},this.nI=[],this.cI=!1,this.iI=!1,this.iO="",this.cI=!1,this._opts=assign({},DefaultLabelsLayerOpts,{opacity:t.opacity}),this.Mf=t.R_,this.ac=t.z_,this.PN=t.info||{},!this.Mf||"SDFManagerBase"===this.Mf.CLASS_NAME)try{var i=this.io=document.createElement("canvas"),e=void 0;i&&(e=this.NT=i.getContext("2d")),t.canvas=i,t.Nz=e}catch(t){console.log("canvas 初始化失败")}this.sI=new LabelPlacement(t),this.fI=new LabelBucket(t)}var InnerLabelsSourceUtil={hU:function(e,t){var i,r=t.R_,n=t.z_,a={};for(i in e)!function(i){var t;e.hasOwnProperty(i)&&(t=e[i],new Labels({R_:r,z_:n}).Ns(t.data,function(t){a[i]=new DynamicVertice(i,t)},{zoom:t.zoom,from:"inner",center:t.center}))}(i);return a}},SourceType={nebula:"tile",mapbox:"tile",indoor:"other"},InnerLabelsSource=(gua=Source,__extends(hua,gua),hua.prototype.oa=function(t,i,e,a,r){var n,o=this,s=this.Yh;for(n in Object.keys(s).length,s)!function(n){s.hasOwnProperty(n)&&s[n].YE(function(t,i){var e=void 0===(e=i.GW)?"main":e,r=i.cb;"worker"===e?(o.Ye[n]=r,a.gn.innerLabelsLoadData(n,function(t){Object.keys(t).length&&r(t)})):(e={R_:o.Mf,z_:o.ac},e=InnerLabelsSourceUtil.hU(t,e),r&&r(e))})}(n)},hua.prototype.getData=function(t){var i,e,r,n,a=this.Yh,o={tile:[],other:[]},s=!0;for(i in a)a.hasOwnProperty(i)&&(n=a[i],e=SourceType[i]||"other",n&&(r=n.getData(t),n=n.lo(),o[e].push(r),s=s&&n));return this.Fo(s),o},hua.prototype.getSources=function(){return this.Yh},hua.prototype.qh=function(t,i){this.Yh[t]=i},hua.prototype.Xh=function(t){delete this.Yh[t]},hua.prototype.uU=function(t){var i=t.id,e=this.Ye;e[i]&&e[i](t)},hua.prototype.destroy=function(){var t,i,e=this.Yh;for(t in e)!e.hasOwnProperty(t)||(i=e[t])&&i.destroy()},hua.prototype.Ia=function(){this.map.gn.on("dynamicTextVerticeLoadedByTile",this.uU.bind(this))},hua),gua;function hua(t,i,e,r){return(r=gua.call(this,t,i,e,r)||this).Yh={},r.Ye={},r.Mf=e.R_,r.ac=e.z_,r.Ia(),r}var DynamicVertice=(Zua.prototype.upload=function(t){this.buffer||(this.buffer=t.fe(this.rp.rp,CONSTS.sp))},Zua.prototype.destroy=function(){this.buffer&&(this.buffer.context.deleteBuffer(this.buffer),delete this.buffer)},Zua);function Zua(t,i){this.zo=t,this.Nf=i.Nf,this.style=i.style,this.coords=i.coords,this.rp=i.rp,this.zp=i.zp}var NebulaSegements=(bva.prototype.add=function(t,i,e,r,n,a,o,s){this.WM.eT(t,i,n,r)&&a===this.WM.bz&&o+""==this.WM.roofColor+""&&s+""==this.WM.wallColor+""||(this.GM=t,this.HM=i,this.VM+=this.WM?this.WM.length:0,this.WM=new LineSegement(t,i,this.VM,r,n,a,o,s),this.jc.push(this.WM)),this.WM.add(e)},bva);function bva(){this.jc=[],this.GM=-1,this.HM=-1,this.VM=0,this.WM=new LineSegement(-1,-1,-1,-1,-1)}var LineSegement=(kva.prototype.add=function(t){this.length+=t},kva.prototype.eT=function(t,i,e,r){return this.mainkey===t&&this.subkey===i&&this.maxzoom===e&&this.minzoom===r},kva);function kva(t,i,e,r,n,a,o,s){this.mainkey=t,this.subkey=i,this.offset=e,this.minzoom=r,this.maxzoom=n,this.bz=a,this.roofColor=o,this.wallColor=s,this.length=0}var PolygonSegements=(yva.prototype.add=function(t){this.jc.push({length:t,offset:this.VM}),this.VM+=t},yva.prototype.reset=function(){this.jc=[],this.VM=0},yva);function yva(){this.jc=[],this.VM=0}var VectorTileFeature=function(t,i,e,r,n){this.properties={},this.extent=e,this.type=0,this.fA=t,this.hA=-1,this.cA=r,this.vA=n,t.nw(readFeature,this,i)};function readFeature(t,i,e){1===t?i.id=e.ow():2===t?readTag(e,i):3===t?i.type=e.ow():4===t&&(i.hA=e.pos)}function readTag(t,i){for(var e=t.ow()+t.pos;t.pos<e;){var r=i.cA[t.ow()],n=i.vA[t.ow()];i.properties[r]=n}}function classifyRings(t){var i=t.length;if(i<=1)return[t];for(var e,r=[],n=[],a=0;a<i;a++){var o=signedArea$1(t[a]);0!==o&&(void 0===e&&(e=o<0),e===o<0?(n&&r.push(n),n=[t[a]]):n.push(t[a]))}return n&&r.push(n),r}function signedArea$1(t){for(var i,e,r=0,n=0,a=t.length,o=a-1;n<a;o=n++)i=t[n],r+=((e=t[o]).x-i.x)*(i.y+e.y);return r}VectorTileFeature.types=["Unknown","Point","LineString","Polygon"],VectorTileFeature.prototype.Dw=function(){var t=this.fA;t.pos=this.hA;for(var i,e=t.ow()+t.pos,r=1,n=0,a=0,o=0,s=[],h=[];t.pos<e;)if(n<=0&&(r=7&(i=t.ow()),n=i>>3),n--,1===r||2===r)a+=t.lA(),o+=t.lA(),1===r&&(h&&0<h.length&&s.push(h),h=[]),h.push([a,o]);else{if(7!==r)throw new Error("unknown command "+r);h&&h.push([h[0][0],h[0][1]])}return h&&0<h.length&&s.push(h),this.lines=s},VectorTileFeature.prototype.Ro=function(){var t=this.fA;t.pos=this.hA;for(var i,e=t.ow()+t.pos,r=1,n=0,a=0,o=0,s=1/0,h=-1/0,u=1/0,l=-1/0;t.pos<e;)if(n<=0&&(r=7&(i=t.ow()),n=i>>3),n--,1===r||2===r)(a+=t.lA())<s&&(s=a),h<a&&(h=a),(o+=t.lA())<u&&(u=o),l<o&&(l=o);else if(7!==r)throw new Error("unknown command "+r);return[s,u,h,l]},VectorTileFeature.prototype.dA=function(t,i,e){var r,n=this.extent*Math.pow(2,e),a=this.extent*t,o=this.extent*i,s=this.Dw(),i=VectorTileFeature.types[this.type];function h(t){for(var i=0;i<t.length;i++){var e=t[i],r=180-360*(e.y+o)/n;t[i]=[360*(e.x+a)/n-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:for(var u=[],l=0;l<s.length;l++)u[l]=s[l][0];h(s=u);break;case 2:for(l=0;l<s.length;l++)h(s[l]);break;case 3:for(s=classifyRings(s),l=0;l<s.length;l++)for(r=0;r<s[l].length;r++)h(s[l][r])}return 1===s.length?s=s[0]:i="Multi"+i,i={type:"Feature",geometry:{type:i,coordinates:s},properties:this.properties},"id"in this&&(i.id=this.id),i};var VectorTileLayer=function(t,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this.fA=t,this.cA=[],this.vA=[],this.Cw=[],t.nw(readLayer,this,i),this.length=this.Cw.length};function readLayer(t,i,e){15===t?i.version=e.ow():1===t?i.name=e.aw():5===t?i.extent=e.ow():2===t?i.Cw.push(e.pos):3===t?i.cA.push(e.aw()):4===t&&i.vA.push(readValueMessage(e))}function readValueMessage(t){for(var i=null,e=t.ow()+t.pos;t.pos<e;)var r=t.ow()>>3,i=1==r?t.aw():2==r?t.pA():3==r?t.yA():4==r?t.mA():5==r?t.ow():6==r?t.lA():7==r?t.vw():null;return i}VectorTileLayer.prototype.Gw=function(t){if(t<0||t>=this.Cw.length)throw new Error("feature index out of bounds");return this.fA.pos=this.Cw[t],t=this.fA.ow()+this.fA.pos,new VectorTileFeature(this.fA,t,this.extent,this.cA,this.vA)};var VectorTile=function(t,i){this.type="vector",this.layers=t.nw(readTile,{},i)};function readTile(t,i,e){3!==t||(e=new VectorTileLayer(e,e.ow()+e.pos)).length&&(i[e.name]=e)}VectorTile.Wb=function(t){return t},VectorTile.Gb=function(t){return t},VectorTile.prototype.nG=function(t){this.type=t};var SHIFT_LEFT_32=4294967296,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,Pbf=(cxa.prototype.destroy=function(){this.gA=new Uint8Array(0)},cxa.prototype.nw=function(t,i,e){for(e=e||this.length;this.pos<e;){var r=this.ow(),n=r>>3,a=this.pos;this.type=7&r,t(n,i,this),this.pos===a&&this.wA(r)}return i},cxa.prototype.MA=function(t,i){return this.nw(t,i,this.ow()+this.pos)},cxa.prototype.jA=function(){var t=readUInt32(this.gA,this.pos);return this.pos+=4,t},cxa.prototype.AA=function(){var t=readInt32(this.gA,this.pos);return this.pos+=4,t},cxa.prototype.kA=function(){var t=readUInt32(this.gA,this.pos)+readUInt32(this.gA,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,t},cxa.prototype.OA=function(){var t=readUInt32(this.gA,this.pos)+readInt32(this.gA,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,t},cxa.prototype.pA=function(){var t=this.xA(this.gA,this.pos,!0,23,4);return this.pos+=4,t},cxa.prototype.yA=function(){var t=this.xA(this.gA,this.pos,!0,52,8);return this.pos+=8,t},cxa.prototype.ow=function(t){var i=this.gA,e=i[this.pos++],r=127&e;return e<128?r:(r|=(127&(e=i[this.pos++]))<<7,e<128?r:(r|=(127&(e=i[this.pos++]))<<14,e<128?r:(r|=(127&(e=i[this.pos++]))<<21,e<128?r:readVarintRemainder(r|=(15&i[this.pos])<<28,t,this))))},cxa.prototype.mA=function(){return this.ow(!0)},cxa.prototype.lA=function(){var t=this.ow();return t%2==1?(t+1)/-2:t/2},cxa.prototype.vw=function(){return Boolean(this.ow())},cxa.prototype.aw=function(){var t=this.ow()+this.pos,i=readUtf8(this.gA,this.pos,t);return this.pos=t,i},cxa.prototype.mw=function(){var t=this.ow()+this.pos,i=this.gA.subarray(this.pos,t);return this.pos=t,i},cxa.prototype.tw=function(t,i){var e=readPackedEnd(this);for(t=t||[];this.pos<e;)t.push(this.ow(i));return t},cxa.prototype.IA=function(t){var i=readPackedEnd(this);for(t=t||[];this.pos<i;)t.push(this.lA());return t},cxa.prototype.TA=function(t){var i=readPackedEnd(this);for(t=t||[];this.pos<i;)t.push(this.vw());return t},cxa.prototype.FA=function(t){var i=readPackedEnd(this);for(t=t||[];this.pos<i;)t.push(this.pA());return t},cxa.prototype._A=function(t){var i=readPackedEnd(this);for(t=t||[];this.pos<i;)t.push(this.yA());return t},cxa.prototype.SA=function(t){var i=readPackedEnd(this);for(t=t||[];this.pos<i;)t.push(this.jA());return t},cxa.prototype.CA=function(t){var i=readPackedEnd(this);for(t=t||[];this.pos<i;)t.push(this.AA());return t},cxa.prototype.EA=function(t){var i=readPackedEnd(this);for(t=t||[];this.pos<i;)t.push(this.kA());return t},cxa.prototype.NA=function(t){var i=readPackedEnd(this);for(t=t||[];this.pos<i;)t.push(this.OA());return t},cxa.prototype.wA=function(t){(t&=7)===cxa.LA||(t===cxa.DA?this.pos=this.ow()+this.pos:t===cxa.RA?this.pos+=4:t===cxa.PA?this.pos+=8:console.log("Unimplemented type: "+t))},cxa.prototype.UA=function(t,i){this.BA(t<<3|i)},cxa.prototype.zA=function(t){for(var i,e=this.length||16;e<this.pos+t;)e*=2;e!==this.length&&((i=new Uint8Array(e)).set(this.gA),this.gA=i,this.length=e)},cxa.prototype.finish=function(){return this.length=this.pos,this.pos=0,this.gA.subarray(0,this.length)},cxa.prototype.qA=function(t){this.zA(4),writeInt32(this.gA,t,this.pos),this.pos+=4},cxa.prototype.WA=function(t){this.zA(4),writeInt32(this.gA,t,this.pos),this.pos+=4},cxa.prototype.GA=function(t){this.zA(8),writeInt32(this.gA,-1&t,this.pos),writeInt32(this.gA,Math.floor(t*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},cxa.prototype.HA=function(t){this.zA(8),writeInt32(this.gA,-1&t,this.pos),writeInt32(this.gA,Math.floor(t*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},cxa.prototype.BA=function(t){268435455<(t=+t||0)||t<0?writeBigVarint(t,this):(this.zA(4),this.gA[this.pos++]=127&t|(127<t?128:0),t<=127||(this.gA[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.gA[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.gA[this.pos++]=t>>>7&127))))},cxa.prototype.VA=function(t){this.BA(t<0?2*-t-1:2*t)},cxa.prototype.$A=function(t){this.BA(Boolean(t))},cxa.prototype.YA=function(t){t=String(t),this.zA(4*t.length),this.pos++;var i=this.pos;this.pos=writeUtf8(this.gA,t,this.pos),128<=(t=this.pos-i)&&makeRoomForExtraLength(i,t,this),this.pos=i-1,this.BA(t),this.pos+=t},cxa.prototype.KA=function(t){this.zA(4),this.XA(this.gA,t,this.pos,!0,23,4),this.pos+=4},cxa.prototype.JA=function(t){this.zA(8),this.XA(this.gA,t,this.pos,!0,52,8),this.pos+=8},cxa.prototype.ZA=function(t){var i=t.length;this.BA(i),this.zA(i);for(var e=0;e<i;e++)this.gA[this.pos++]=t[e]},cxa.prototype.QA=function(t,i){this.pos++;var e=this.pos;t(i,this),128<=(i=this.pos-e)&&makeRoomForExtraLength(e,i,this),this.pos=e-1,this.BA(i),this.pos+=i},cxa.prototype.fw=function(t,i,e){this.UA(t,cxa.DA),this.QA(i,e)},cxa.prototype.tk=function(t,i){this.fw(t,writePackedVarint,i)},cxa.prototype.rk=function(t,i){this.fw(t,writePackedSVarint,i)},cxa.prototype.nk=function(t,i){this.fw(t,writePackedBoolean,i)},cxa.prototype.ik=function(t,i){this.fw(t,writePackedFloat,i)},cxa.prototype.ek=function(t,i){this.fw(t,writePackedDouble,i)},cxa.prototype.ak=function(t,i){this.fw(t,writePackedFixed32,i)},cxa.prototype.uk=function(t,i){this.fw(t,writePackedSFixed32,i)},cxa.prototype.sk=function(t,i){this.fw(t,writePackedFixed64,i)},cxa.prototype.fk=function(t,i){this.fw(t,writePackedSFixed64,i)},cxa.prototype.ww=function(t,i){this.UA(t,cxa.DA),this.ZA(i)},cxa.prototype.hk=function(t,i){this.UA(t,cxa.RA),this.qA(i)},cxa.prototype.ck=function(t,i){this.UA(t,cxa.RA),this.WA(i)},cxa.prototype.vk=function(t,i){this.UA(t,cxa.PA),this.GA(i)},cxa.prototype.lk=function(t,i){this.UA(t,cxa.PA),this.HA(i)},cxa.prototype.rw=function(t,i){this.UA(t,cxa.LA),this.BA(i)},cxa.prototype.dk=function(t,i){this.UA(t,cxa.LA),this.VA(i)},cxa.prototype.uw=function(t,i){this.UA(t,cxa.DA),this.YA(i)},cxa.prototype.bk=function(t,i){this.UA(t,cxa.RA),this.KA(i)},cxa.prototype.pk=function(t,i){this.UA(t,cxa.PA),this.JA(i)},cxa.prototype.hw=function(t,i){this.rw(t,Boolean(i))},cxa.prototype.xA=function(t,i,e,r,n){var a,o,s=8*n-r-1,h=(1<<s)-1,u=h>>1,l=-7,c=e?n-1:0,f=e?-1:1,e=t[i+c];for(c+=f,a=e&(1<<-l)-1,e>>=-l,l+=s;0<l;a=256*a+t[i+c],c+=f,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;0<l;o=256*o+t[i+c],c+=f,l-=8);if(0===a)a=1-u;else{if(a===h)return o?NaN:1/0*(e?-1:1);o+=Math.pow(2,r),a-=u}return(e?-1:1)*o*Math.pow(2,a-r)},cxa.prototype.XA=function(t,i,e,r,n,a){var o,s,h=8*a-n-1,u=(1<<h)-1,l=u>>1,c=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:a-1,d=r?1:-1,a=i<0||0===i&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(s=isNaN(i)?1:0,o=u):(o=Math.floor(Math.log(i)/Math.LN2),i*(r=Math.pow(2,-o))<1&&(o--,r*=2),2<=(i+=1<=o+l?c/r:c*Math.pow(2,1-l))*r&&(o++,r/=2),u<=o+l?(s=0,o=u):1<=o+l?(s=(i*r-1)*Math.pow(2,n),o+=l):(s=i*Math.pow(2,l-1)*Math.pow(2,n),o=0));8<=n;t[e+f]=255&s,f+=d,s/=256,n-=8);for(o=o<<n|s,h+=n;0<h;t[e+f]=255&o,f+=d,o/=256,h-=8);t[e+f-d]|=128*a},cxa.LA=0,cxa.PA=1,cxa.DA=2,cxa.RA=5,cxa);function cxa(t){this.gA=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.gA.length}function readVarintRemainder(t,i,e){var r=e.gA,n=r[e.pos++],a=(112&n)>>4;if(n<128)return toNum(t,a,i);if(a|=(127&(n=r[e.pos++]))<<3,n<128)return toNum(t,a,i);if(a|=(127&(n=r[e.pos++]))<<10,n<128)return toNum(t,a,i);if(a|=(127&(n=r[e.pos++]))<<17,n<128)return toNum(t,a,i);if(a|=(127&(n=r[e.pos++]))<<24,n<128)return toNum(t,a,i);if(a|=(1&(n=r[e.pos++]))<<31,n<128)return toNum(t,a,i);throw new Error("Expected varint not more than 10 bytes")}function readPackedEnd(t){return t.type===Pbf.DA?t.ow()+t.pos:t.pos+1}function toNum(t,i,e){return e?4294967296*i+(t>>>0):4294967296*(i>>>0)+(t>>>0)}function writeBigVarint(t,i){var e,r;if(0<=t?(e=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(e=~(-t%4294967296))?e=e+1|0:r=r+1|(e=0)),0x10000000000000000<=t||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");i.zA(10),writeBigVarintLow(e,r,i),writeBigVarintHigh(r,i)}function writeBigVarintLow(t,i,e){e.gA[e.pos++]=127&t|128,t>>>=7,e.gA[e.pos++]=127&t|128,t>>>=7,e.gA[e.pos++]=127&t|128,t>>>=7,e.gA[e.pos++]=127&t|128,t>>>=7,e.gA[e.pos]=127&t}function writeBigVarintHigh(t,i){var e=(7&t)<<4;i.gA[i.pos++]|=e|((t>>>=3)?128:0),t&&(i.gA[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.gA[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.gA[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.gA[i.pos++]=127&t|((t>>>=7)?128:0),t&&(i.gA[i.pos++]=127&t)))))}function makeRoomForExtraLength(t,i,e){var r=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.ceil(Math.log(i)/(7*Math.LN2));e.zA(r);for(var n=e.pos-1;t<=n;n--)e.gA[n+r]=e.gA[n]}function writePackedVarint(t,i){for(var e=0;e<t.length;e++)i.BA(t[e])}function writePackedSVarint(t,i){for(var e=0;e<t.length;e++)i.VA(t[e])}function writePackedFloat(t,i){for(var e=0;e<t.length;e++)i.KA(t[e])}function writePackedDouble(t,i){for(var e=0;e<t.length;e++)i.JA(t[e])}function writePackedBoolean(t,i){for(var e=0;e<t.length;e++)i.$A(t[e])}function writePackedFixed32(t,i){for(var e=0;e<t.length;e++)i.qA(t[e])}function writePackedSFixed32(t,i){for(var e=0;e<t.length;e++)i.WA(t[e])}function writePackedFixed64(t,i){for(var e=0;e<t.length;e++)i.GA(t[e])}function writePackedSFixed64(t,i){for(var e=0;e<t.length;e++)i.HA(t[e])}function readUInt32(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+16777216*t[i+3]}function writeInt32(t,i,e){t[e]=i,t[e+1]=i>>>8,t[e+2]=i>>>16,t[e+3]=i>>>24}function readInt32(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16)+(t[i+3]<<24)}function readUtf8(t,i,e){for(var r="",n=i;n<e;){var a=t[n],o=null,s=239<a?4:223<a?3:191<a?2:1;if(e<n+s)break;var h,u=void 0,l=void 0;1===s?a<128&&(o=a):2===s?128==(192&(u=t[n+1]))&&(o=(31&a)<<6|63&u)<=127&&(o=null):3===s?(u=t[n+1],l=t[n+2],128==(192&u)&&128==(192&l)&&((o=(15&a)<<12|(63&u)<<6|63&l)<=2047||55296<=o&&o<=57343)&&(o=null)):4===s&&(u=t[n+1],l=t[n+2],h=t[n+3],128==(192&u)&&128==(192&l)&&128==(192&h)&&((o=(15&a)<<18|(63&u)<<12|(63&l)<<6|63&h)<=65535||1114112<=o)&&(o=null)),null===o?(o=65533,s=1):65535<o&&(o-=65536,r+=String.fromCharCode(o>>>10&1023|55296),o=56320|1023&o),r+=String.fromCharCode(o),n+=s}return r}function writeUtf8(t,i,e){for(var r=0,n=void 0,a=void 0;r<i.length;r++){if(55295<(n=i.charCodeAt(r))&&n<57344){if(!a){56319<n||r+1===i.length?(t[e++]=239,t[e++]=191,t[e++]=189):a=n;continue}if(n<56320){t[e++]=239,t[e++]=191,t[e++]=189,a=n;continue}n=a-55296<<10|n-56320|65536,a=null}else a&&(t[e++]=239,t[e++]=191,t[e++]=189,a=null);n<128?t[e++]=n:(n<2048?t[e++]=n>>6|192:(n<65536?t[e++]=n>>12|224:(t[e++]=n>>18|240,t[e++]=n>>12&63|128),t[e++]=n>>6&63|128),t[e++]=63&n|128)}return e}var Layer=(fBa=Event,__extends(gBa,fBa),gBa.prototype.onAdd=function(){},gBa.prototype.v$=function(){},gBa.prototype.Hh=function(t){this.uo=t},gBa.prototype.Do=function(t){return this.Jh=t,this.Jh},gBa.prototype.setMap=function(t){var i,e=this;null===t&&this.map?this.map.removeLayer(this):(this.map=t)&&(i=t.getLayers(),find(i,function(t){return t.eo().id===e.eo().id})||t.addLayer(this))},gBa.prototype.Kh=function(t){var i=this;(this.source=t)&&this.source.on("complete",function(){i.emit("complete")})},gBa.prototype.setzIndex=function(t){this.Qh=t,this.map&&this.map.setNeedUpdate(!0)},gBa.prototype.setOpacity=function(t){this.tl=t,this.map&&this.map.setNeedUpdate(!0)},gBa.prototype.getOpacity=function(){return this.tl},gBa.prototype.getSource=function(){if(this.uo)return this.uo.getSource(this.co())},gBa.prototype.getzIndex=function(){return this.eo().zIndex},gBa.prototype.getMap=function(){return this.map},gBa.prototype.getRender=function(){return this.Jh},gBa.prototype.eo=function(){return{id:this.No,zooms:this.xt,zIndex:this.Qh,opacity:this.tl,visible:this._visible,createTile:void 0,rejectMapMask:this.lz}},gBa.prototype.getOptions=function(){var t=this.eo(),i=this._opts||{};return assign({},i,t)},gBa.prototype.getZooms=function(){return this.xt},gBa.prototype.setZooms=function(t){this.xt=t,this.map&&this.map.setNeedUpdate(!0)},gBa.prototype.getVisible=function(){return this._visible},gBa.prototype.beforeRender=function(){},gBa.prototype.afterRender=function(){},gBa.prototype.get=function(t){return this.getOptions()[t]},gBa.prototype.vi=function(t){return null},gBa.prototype.lo=function(){return this.source.lo()},gBa.prototype.T$=function(){return this.No},gBa.prototype.show=function(){this._visible=!0,this.map&&this.map.setNeedUpdate(!0)},gBa.prototype.hide=function(){this._visible=!1,this.map&&this.map.setNeedUpdate(!0)},gBa.prototype.destroy=function(){},gBa.prototype.onCreated=function(){this.map&&this.map.addLayer(this)},gBa),fBa;function gBa(t){void 0===t&&(t={});var i=fBa.call(this)||this;return i.el="AMap.Layer",i.CLASS_NAME="AMap.Layer",i.hS=Util.stamp(i),i._visible=!0,i.tl=1,i.xt=[2,22],i.No="layer",i.nl=!0,i.No="layer_"+Util.uuid(),i.xt=t.zooms||[2,22],i.tl=void 0===t.opacity?1:t.opacity,i.Qh=t.zIndex||1,i.lz=void 0!==t.rejectMapMask&&t.rejectMapMask,i._visible=void 0===t.visible||t.visible,i.AF=void 0!==t.depthTest&&Boolean(t.depthTest),i.IF=void 0!==t.ce&&Boolean(t.ce),i.wl=void 0!==t.cacheSize&&t.cacheSize,i.map=t&&t.map||null,i._opts=t,i}var BuildingLayer=(zBa=Layer,__extends(ABa,zBa),ABa.prototype.getState=function(){return{zooms:this.xt,heightFactor:this.Q_,visible:this._visible,zIndex:this.Qh,opacity:this.tl,wallColor:[],roofColor:[],To:this,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},ABa.prototype.eo=function(){return zBa.prototype.eo.call(this)},ABa.prototype.Lo=function(){return{id:this.No,type:"building",tileUrl:AMap.getConfig().protocol+(Browser.wasm?"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v3":"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v2"),tileSize:0,zooms:[2,22]}},ABa.prototype.co=function(){return this.No},ABa.prototype.destroy=function(){this.Jh&&this.Jh.destroy&&(this.Jh.destroy(),delete this.Jh)},ABa),zBa;function ABa(){var t=zBa.call(this)||this;return t.CLASS_NAME="AMap.Buildings",t.Q_=1,t.No="building",t}var StyleOptionsBuilding=function(){this.hideWithoutStyle=!1,this.areas=[]},VectorTileSegements=(DBa.prototype.add=function(t,i,e,r,n){VTLineSegement.getKey(t,i,n,r)!==(this.WM?this.WM.getKey():"-1")&&(this.GM=t,this.HM=i,this.VM+=this.WM?this.WM.length:0,this.WM=new VTLineSegement(t,i,this.VM,r,n),this.jc.push(this.WM)),this.WM.add(e)},DBa);function DBa(){this.jc=[],this.GM=-1,this.HM=-1,this.VM=0}var VTLineSegement=(LBa.getKey=function(t,i,e,r){return t+":"+i+":"+e+":"+r},LBa.prototype.add=function(t){this.length+=t},LBa.prototype.getKey=function(){return this.mainkey+":"+this.subkey+":"+this.maxzoom+":"+this.minzoom},LBa);function LBa(t,i,e,r,n){this.mainkey=t,this.subkey=i,this.offset=e,this.minzoom=r,this.maxzoom=n,this.length=0}var MapboxSegements=(WBa.prototype.add=function(t,i){MBLineSegement.getKey(t),this.WM&&this.WM.getKey(),this.GM=t,this.VM+=this.WM?this.WM.length:0,this.WM=new MBLineSegement(t,this.VM),this.jc.push(this.WM),this.WM.add(i)},WBa);function WBa(){this.jc=[],this.GM=-1,this.HM=-1,this.VM=0}var MBLineSegement=(_Ba.getKey=function(t){return""+t},_Ba.prototype.add=function(t){this.length+=t},_Ba.prototype.getKey=function(){return""+this.style},_Ba);function _Ba(t,i){this.style=t,this.offset=i,this.length=0}var DistrictLayerStyle=function(){this["stroke-width"]="",this["coastline-stroke"]="",this["nation-stroke"]="",this["province-stroke"]="",this["city-stroke"]="",this["county-stroke"]="",this.fill=""},registry={},BCa;function register(t,i,e){void 0===e&&(e={}),Object.defineProperty(i,"yk",{value:t,writable:!1}),registry[t]={mk:i,gk:e.gk||[],wk:e.wk||[]}}function serialize(t,i){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return i&&i.push(t),t;if(ArrayBuffer.isView(t)){var e=t;return i&&i.push(e.buffer),e}if(t instanceof ImageData)return i&&i.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],n=0,a=t;n<a.length;n++){var o=a[n];r.push(serialize(o,i))}return r}if("object"!=typeof t)throw new Error("can't serialize object of type "+typeof t);var s=(e=t.constructor).yk;if(!s)throw new Error("can't serialize object of unregistered class");var h,u=void 0;if(e.Wb)u=e.Wb(t,i);else{for(var l in u={},t)t.hasOwnProperty(l)&&(0<=registry[s].gk.indexOf(l)||(h=t[l],u[l]=0<=registry[s].wk.indexOf(l)?h:serialize(h,i)));t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}function deserialize(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof ImageData)return t;if(Array.isArray(t))return map(t,deserialize);if("object"!=typeof t)throw new Error("can't deserialize object of type "+typeof t);var i=t.$name||"Object",e=registry[i].mk;if(!e)throw new Error("can't deserialize unregistered class "+i);if(e.Gb)return e.Gb(t);for(var r=Object.create(e.prototype),n=0,a=Object.keys(t);n<a.length;n++){var o,s=a[n];"$name"!==s&&(o=t[s],r[s]=0<=registry[i].wk.indexOf(s)?o:deserialize(o))}return r}register("Object",Object),register("LineArrayBuffer",LineArrayBuffer),register("TriangleIndexArray",TriangleIndexArray),register("TriangleIndexArrayUint",TriangleIndexArrayUint),register("PolylineBucket",PolylineBucket),register("LinesIndexArray",LinesIndexArray),register("LinesIndexArrayUint",LinesIndexArrayUint),register("FillArray",FillArray),register("PolygonBucket",PolygonBucket),register("FillExtrusionBucket",FillExtrusionBucket),register("FillExtrusionArray",FillExtrusionArray),register("Color",Color),register("Segements",NebulaSegements),register("VectorTileSegements",VectorTileSegements),register("VTLineSegement",VTLineSegement),register("LineSegement",LineSegement),register("PolygonSegements",PolygonSegements),register("DynamicVertice",DynamicVertice,{wk:["originData","style","coords","zoomsMap"]}),register("VectorTile",VectorTile),register("VectorTileLayer",VectorTileLayer),register("VectorTileFeature",VectorTileFeature),register("Pbf",Pbf),register("StyleOptionsBuilding",StyleOptionsBuilding),register("DistrictStyleOptions",DistrictLayerStyle),register("MapboxSegements",MapboxSegements),register("MBLineSegement",MBLineSegement),BCa=exports.Mo||(exports.Mo={}),BCa.TOLOAD="toload",BCa.LOADING="loading",BCa.LOADED="loaded",BCa.UNLOADED="unloaded",BCa.ERROR="error",BCa.RELOADING="reloading";var TileCoord=function(t,i,e){this.x=i,this.y=e,this.z=t,this.key=t+","+i+","+e};register("TileCoord",TileCoord);var Tile=(GCa.YH=function(t){return t.status===exports.Mo.LOADED||t.status===exports.Mo.RELOADING},GCa.prototype.destroy=function(){},GCa.prototype.nG=function(t){this.type=t},GCa);function GCa(t){this.type="tile",this.Ro=[0,0,0,0],this.stamp=0,this.zo=t,this.status=exports.Mo.TOLOAD,this._v=null,this.data={}}var NebulaTile=(KCa=Tile,__extends(LCa,KCa),Object.defineProperty(LCa.prototype,"tag",{get:function(){return this.nN},set:function(t){this.aN=this.tag,this.nN=t},enumerable:!1,configurable:!0}),Object.defineProperty(LCa.prototype,"gB",{get:function(){return this.VN},set:function(t){this.BN=this.gB,this.VN=t},enumerable:!1,configurable:!0}),Object.defineProperty(LCa.prototype,"data",{get:function(){var t=[];return this.qc&&this.qc.Dc?t.push(this.qc):(this.sN&&t.push(this.sN),this.uN&&t.push(this.uN)),this.lU&&this.lU.Dc?t.push(this.lU):(this.fU&&t.push(this.fU),this.cU&&t.push(this.cU)),this.zN&&this.zN.labels?t.push(this.zN):(this.HN&&t.push(this.HN),this.WN&&t.push(this.WN)),this.dU&&this.dU.labels?t.push(this.dU):(this.vU&&t.push(this.vU),this.gU&&t.push(this.gU)),t},set:function(t){},enumerable:!1,configurable:!0}),LCa.prototype.xa=function(t,i){if(void 0===i&&(i=exports.zB.ALL),Object.keys(t))switch(i){case exports.zB.LITE:this.uN=exports.Ln(exports.Ln({},this.uN),t);break;case exports.zB.LEFT:this.sN=exports.Ln(exports.Ln({},this.sN),t);break;case exports.zB.ALL:default:this.qc=exports.Ln(exports.Ln({},this.qc),t)}},LCa.prototype.JE=function(t,i){if(void 0===i&&(i=exports.zB.ALL),Object.keys(t))switch(i){case exports.zB.LITE:this.cU=exports.Ln(exports.Ln({},this.cU),t);break;case exports.zB.LEFT:this.fU=exports.Ln(exports.Ln({},this.fU),t);break;case exports.zB.ALL:default:this.lU=exports.Ln(exports.Ln({},this.lU),t)}},LCa.prototype.rO=function(t,i){if(void 0===i&&(i=exports.zB.ALL),Object.keys(t))switch(i){case exports.zB.LITE:this.WN=exports.Ln(exports.Ln({},this.WN),t);break;case exports.zB.LEFT:this.HN=exports.Ln(exports.Ln({},this.HN),t);break;case exports.zB.ALL:default:this.zN=exports.Ln(exports.Ln({},this.zN),t)}},LCa.prototype.qE=function(t,i){if(void 0===i&&(i=exports.zB.ALL),Object.keys(t))switch(i){case exports.zB.LITE:this.gU=exports.Ln(exports.Ln({},this.gU),t);break;case exports.zB.LEFT:this.vU=exports.Ln(exports.Ln({},this.vU),t);break;case exports.zB.ALL:default:this.dU=exports.Ln(exports.Ln({},this.dU),t)}},LCa.prototype.ID=function(t){t&&(t.uN&&(this.uN=t.uN),t.sN&&(this.sN=t.sN),t.qc&&(this.qc=t.qc),t.WN&&(this.WN=t.WN),t.HN&&(this.HN=t.HN),t.zN&&(this.zN=t.zN))},LCa.prototype.rN=function(){this.aN?this.nN=this.aN:this.nN=exports.zB.NONE,this.BN&&(this.VN=this.BN,this.nN=exports.zB.NONE)},LCa.prototype.AB=function(){var t=[];return this.qc&&this.qc.road&&this.zN&&this.zN.labels?t.push(this.qc):(this.sN&&this.sN.road&&this.HN&&this.HN.labels&&t.push(this.sN),this.uN&&this.uN.road&&this.WN&&this.WN.labels&&t.push(this.uN)),t},LCa.prototype.destroy=function(){var t=this.data;if(t)for(var i=0,e=t;i<e.length;i++){var r=e[i];if(r.Dc&&(r.Dc.destroy(),delete r.Dc),r.$c&&(r.$c.destroy(),delete r.$c),r.labels){for(var n=0,a=r.labels;n<a.length;n++)a[n].destroy();delete r.labels}r.Ta=!1,delete r.gf}},LCa.prototype.KE=function(){for(var t,i=this.data,e=[],r=0,n=i;r<n.length;r++)(a=n[r]).road&&e.push(a.road);for(var a,o=0,s=i;o<s.length;o++)(a=s[o]).XE&&(t=a.XE,this.pU(e,t))},LCa.prototype.pU=function(t,i){for(var e=0,r=i;e<r.length;e++){var n=r[e],a=n.id;if(n.path)break;for(var o=0,s=t;o<s.length;o++){var h=s[o];n.path=this.yU(h,a)}}},LCa.prototype.yU=function(t,i){for(var e=0,r=t;e<r.length;e++){var n=r[e];if(n.id===i)return n.path}},LCa.prototype.oN=function(){var t=this.qc;return!!(t=Object.keys(t||{})).length&&(1!==t.length||"sdfLoaded"!==t[0])},LCa),KCa;function LCa(){var t=null!==KCa&&KCa.apply(this,arguments)||this;return t.type="nebula",t.region="world",t.aN=exports.zB.NONE,t.BN=exports.zB.NONE,t}var RasterTile=(FDa=Tile,__extends(GDa,FDa),GDa.prototype.destroy=function(){var t=this.data;t&&(t.texture&&(t.texture.destroy(),delete t.texture),t.zs&&(t.zs.context.deleteBuffer(t.zs),delete t.zs),t.Js&&(t.Js.destroy(),delete t.Js))},GDa),FDa;function GDa(){var t=null!==FDa&&FDa.apply(this,arguments)||this;return t.type="raster",t}var VectorTile$1=(JDa=Tile,__extends(KDa,JDa),KDa.prototype.destroy=function(){var t=this.data;t&&(t.$c&&(t.$c.destroy(),delete t.$c),t.Uc&&delete t.Uc)},KDa),JDa;function KDa(){var t=null!==JDa&&JDa.apply(this,arguments)||this;return t.type="vector",t}register("Tile",Tile);var Task=(NDa.prototype._H=function(t){this.children.push(t)},NDa);function NDa(t){var e=this;this.xN=t,this.cancel=function(){e.xN&&e.xN.cancel();for(var t=0,i=e.children;t<i.length;t++)i[t].cancel.apply(e)},this.children=[]}var QueueBuilder=(UDa.prototype._B=function(t,i,e){for(var r=e||"china",n=0;n<t.length;n+=this.Bo){var a=t.slice(n,n+5),o=this.qN++,a={wD:this.target(a,o,i,r),ZN:a,id:o};this.KN.push(a),this.YN[o]=a}},UDa.prototype.qH=function(t){for(var i=[],e=[],r=0,n=this.KN;r<n.length;r++)for(var a=n[r],o=0;o<a.ZN.length;o++){var s=a.ZN[o];if(this.QN(t,s)){Array.prototype.push.apply(i,a.ZN);break}o===a.ZN.length-1&&e.push(a)}for(var h=0,u=e;h<u.length;h++){(a=u[h]).wD&&a.wD.cancel();var l=this.KN.indexOf(a);this.KN.splice(l,1),delete this.YN[a.id],this.JN(a.ZN)}return{yB:i,SB:e}},UDa.prototype.QN=function(t,i){return-1<t.indexOf(i.slice(0,-2))},UDa.prototype.CB=function(t){var i=this.YN[t];delete this.YN[t],i&&(i=this.KN.indexOf(i),this.KN.splice(i,1))},UDa);function UDa(t,i){this.target=t,this.JN=i,this.qN=0,this.Bo=5,this.KN=[],this.YN={}}var StyleParser=(uEa.Wb=function(t){return{style:JSON.stringify(t.styles)}},uEa.Gb=function(t){return new uEa(JSON.parse(t.style))},uEa.prototype.clearStyleCache=function(){this.EI=-1,this.CI.clear()},uEa.prototype.setStyle=function(t){this.Ve=t,this.clearStyleCache()},uEa.prototype.kF=function(t){this.bN=t},uEa.prototype.dn=function(t,i,e){if(this.SI(t,i,e))return this.CI.get((t<<16)+i);if(this.jk(t,i,e)){var r=this.Ak(t,i,e,this.Ve)||null;return this.CI.set((t<<16)+i,r),r}return r=this.kk(t,i,e)||null,this.CI.set((t<<16)+i,r),r},uEa.prototype.MF=function(t,i){var e=this.bN;if(!e||!e[t])return null;if(e[t].styles&&e[t].styles.color){var r,n,a=Util.getOptimalZoom(i),o={};for(r in e[t].styles.color.nodes)e[t].styles.color.nodes.hasOwnProperty(r)&&(o[(n=e[t].styles.color.nodes[r]).zoom]=n.value);return o[a=this._k(o,a)]?Util.Hex2Rgba(o[a]):null}return e[t].color?(a=e[t].color,Util.Hex2Rgba(a)):void 0},uEa.prototype.Ok=function(t,i,e){return void 0!==this.styles[t]&&(i=this.styles[t][i])&&void 0!==(e=i.levelStyleMapping[e])?i.browserStyle[e]:null},uEa.prototype.xk=function(t,i,e){if(void 0===this.styles[t])return null;if(void 0===this.styles[t][i])return null;if(void 0===this.styles[t][i].levelStyleMapping)return null;if(void 0===this.styles[t][i].browserStyle)return null;var r=this.styles[t][i].levelStyleMapping,n=this.styles[t][i].browserStyle,a=Math.floor(e),o=Math.ceil(e),t=e-a<.8?a:o,i=n[r[a]],r=n[r[o]];if((i||r)&&(i||t!==a)&&(!i||r||t!==o)&&(i||!r||a!==t)){if(!i&&r){var s=g=cloneDeep(r);g instanceof Array&&(s=g[0]);for(var h,u,l=Object.keys(s),c=0;c<l.length;c++)-1<(d=l[c]).indexOf("Color")&&s[d]&&s[d].rgba?(u=(e-a-.8)/.2,h=Math.floor(s[d].rgba[3]*u),s[d].rgba[3]=h):-1<d.indexOf("Width")&&(u=(e-a-.8)/.2,s[d]=s[d]*u);return g}if(i&&r){var f=g=cloneDeep(i),s=r;g instanceof Array&&(f=g[0]),g instanceof Array&&(s=r[0]);for(var d,v,l=Object.keys(f),c=0;c<l.length;c++)-1<(d=l[c]).indexOf("Width")&&(v=(e-a)*(s[d]-f[d])+f[d],f[d]=v);return g}if(!i||r)return null;var g,f=g=cloneDeep(i);return g instanceof Array&&(f=g[0]),g}},uEa.prototype.Ik=function(t,i,e){var r=[];return r[0]=t[0]+(i[0]-t[0])*e,r[1]=t[1]+(i[1]-t[1])*e,r[2]=t[2]+(i[2]-t[2])*e,r[3]=t[3]+(i[3]-t[3])*e,r},uEa.prototype.kk=function(t,i,e){var r=t.toString()[0];return"1"!==r&&"4"!==r?this.xk(t,i,e):(e=Util.getOptimalZoom(e),this.Ok(t,i,e))},uEa.prototype.Ak=function(t,i,e,r){var n=e,a=r[t][i],o=null;if(a.styles){var s=Util.getOptimalZoom(e);if(a.styles.visible&&(r=this._k(a.styles.visible.nodes,s))){var h=a.styles.visible.nodes[r];if(void 0!==h&&!1===h)return null}for(var u=(h=cloneDeep(this.styles[t][i])).levelStyleMapping,l=h.browserStyle,c=Object.keys(a.styles),f=0;f<c.length;f++){var d=c[f],v=a.styles[d],g=null;if(v.transitional&&"linear"===v.transitional){var p,y=this.Tk(v.nodes,e);if(!y||!y[0])continue;if(!(n=y[0]))continue;if(void 0===(p=u[s]))continue;o=l[p],1===y.length?g=v.nodes[n]:"color"===d&&(g=this.Fk(y,v.nodes,e))}else{if(!(n=this._k(v.nodes,s)))continue;if(void 0===(p=u[s]))continue;o=l[p],g=v.nodes[n]}if(!o)return null;var b=t.toString()[0],x=this.uP(a,s);if("1"===b){if(!x)return null;this.NI(d,g,o)}else"2"===b?(this.Sk(d,g,o),!x&&o&&o[1]&&(o[1]=null)):"4"===b?this.LI(d,g,o):this.Ck(d,g,o)}}else{if(void 0!==a.visible&&!1===a.visible)return null;if(void 0===(p=(u=this.styles[t][i].levelStyleMapping)[n=Util.getOptimalZoom(n)]))return null;if(!this.styles[t][i].browserStyle[p])return null;for(o=(l=(h=cloneDeep(this.styles[t][i])).browserStyle)[p],c=Object.keys(a),x=this.uP(a,n),f=0;f<c.length;f++){if(d=c[f],!o)return null;if("1"===(b=t.toString()[0])){if(!x)return null;this.NI(d,a[d],o)}else"2"===b?(this.Sk(d,a[d],o),!x&&o&&o[1]&&(o[1]=null)):"4"===b?this.LI(d,a[d],o):this.Ck(d,a[d],o)}}return o},uEa.prototype.mn=function(t,i){return void 0===this.styles[t]?null:(i=this.styles[t][i])?(i=i.levelStyleMapping||{},i=Object.keys(i),[parseInt(i[0],10),parseInt(i[i.length-1],10)]):[]},uEa.prototype.Lw=function(t,i){return void 0!==this.styles[t]&&(i=this.styles[t][i])?i.z:null},uEa.prototype.mW=function(t,i,e){var r=["butt","butt"];return 2!==Math.floor(t/1e4)||(e=this.xk(t,i,e))&&e[0]&&(-1<(e=e[0]).hn.indexOf("roundcap")?r[0]="round":-1<e.hn.indexOf("squarecap")&&(r[0]="square"),-1<e.borderStyle.indexOf("roundcap")?r[1]="round":-1<e.borderStyle.indexOf("squarecap")&&(r[1]="square")),r},uEa.prototype.uP=function(t,i){var e=!0;return t.styles&&t.styles.showLabel?(i=this._k(t.styles.showLabel.nodes,i),void 0!==(i=t.styles.showLabel.nodes[i])&&!1===i&&(e=!1)):void 0!==t.showLabel&&!1===t.showLabel&&(e=!1),e},uEa.prototype.SI=function(t,i,e){return e=Math.floor(e*(16.8<=e?100:10)),this.EI!==e&&(this.EI=e,this.CI.clear()),this.CI.has((t<<16)+i)},uEa.prototype.jk=function(t,i,e){return!!(this.Ve&&this.Ve[t]&&this.Ve[t][i]&&this.styles&&this.styles[t]&&this.styles[t][i])},uEa.prototype.Fk=function(t,i,e){var r=Util.Hex2Rgba(i[t[0]]),i=Util.Hex2Rgba(i[t[1]]),t=(e-t[0])/(t[1]-t[0]);return[Math.floor(r[0]+t*(i[0]-r[0])),Math.floor(r[1]+t*(i[1]-r[1])),Math.floor(r[2]+t*(i[2]-r[2])),Math.floor(r[3]+t*(i[3]-r[3]))]},uEa.prototype.Tk=function(t,i){var e=[];if(t[i])return e.push(i),e;for(var r=!0,n=Math.floor(i);r&&0<n;){if(t[n]){e.push(n),r=!1;break}n--}for(n=Math.ceil(i),r=!0;r&&n<25;){if(t[n]){e.push(n),r=!1;break}n++}return e},uEa.prototype._k=function(t,i){if(!t)return null;if(t[i])return i;for(var e=!0,r=i;e&&0<r;)if(t[--r]||!1===t[r]||""===t[r]){e=!1;break}if(!e)return r;for(r=i;e&&r<25;)if(t[++r]||!1===t[r]||""===t[r]){e=!1;break}return e?null:r},uEa.prototype.Ck=function(t,i,e){var r=null;switch(t){case"color":case"fillColor":r=i,Array.isArray(i)||(r=Util.Hex2Rgba(i)),e.faceColor||(e.faceColor={}),e.faceColor.rgba=r;break;case"fontSize":e.fontSize=i;break;case"texture":e.texture=i?AMap.getConfig().protocol+"://"+i:"";break;case"backgroundColor":r=Util.Hex2Rgba(i),e.Ke||(e.Ke={}),e.Ke.rgba=r;break;case"strokeColor":r=Util.Hex2Rgba(i),e.borderColor||(e.borderColor={}),e.borderColor.rgba=r;break;case"showIcon":!1===i&&e.He&&(e.He="0")}},uEa.prototype.LI=function(t,i,e){var r=null;switch(t){case"textFillColor":r=i,Array.isArray(i)||(r=Util.Hex2Rgba(i)),e.faceColor||(e.faceColor={}),e.faceColor.rgba=r;break;case"fontSize":e.fontSize=i;break;case"backgroundColor":r=Util.Hex2Rgba(i),e.Ke||(e.Ke={}),e.Ke.rgba=r;break;case"textStrokeColor":r=Util.Hex2Rgba(i),e.borderColor||(e.borderColor={}),e.borderColor.rgba=r;break;case"showIcon":!1===i&&e.He&&(e.He="0")}},uEa.prototype.NI=function(t,i,e){var r=null;switch(t){case"showIcon":!1===i&&e.He&&(e.He="0");break;case"textFillColor":r=i,Array.isArray(i)||(r=Util.Hex2Rgba(i)),e.faceColor||(e.faceColor={}),e.faceColor.rgba=r;break;case"fontSize":e.fontSize=i;break;case"backgroundColor":r=Util.Hex2Rgba(i),e.Ke||(e.Ke={}),e.Ke.rgba=r;break;case"textStrokeColor":r=Util.Hex2Rgba(i),e.borderColor||(e.borderColor={}),e.borderColor.rgba=r}},uEa.prototype.Sk=function(t,i,e){var r=null;switch(t){case"color":case"fillColor":r=Util.Hex2Rgba(i),e[0]&&(e[0].roadColor||(e[0].roadColor={}),e[0].roadColor.rgba=r);break;case"fillOpacity":e[0]&&e[0].roadColor&&e[0].roadColor.rgba&&(t=e[0].roadColor.rgba,r=Util.Opacity2Rgba(i,t),e[0].roadColor.rgba=r);break;case"fillWidth":e[0]&&(e[0].roadWidth=i);break;case"strokeColor":r=Util.Hex2Rgba(i),e[0]&&(e[0].borderColor||(e[0].borderColor={}),e[0].borderColor.rgba=r);break;case"strokeWidth":e[0]&&(e[0].borderWidth=i);break;case"textFillColor":e[1]&&(r=Util.Hex2Rgba(i),e[1].faceColor||(e[1].faceColor={}),e[1].faceColor.rgba=r);break;case"textStrokeColor":e[1]&&(r=Util.Hex2Rgba(i),e[1].borderColor||(e[1].borderColor={}),e[1].borderColor.rgba=r)}},uEa);function uEa(t){this.CI=new AdaptorMap$1,this.Ve=null,this.bN=null,this.styles=t}register("StyleParser",StyleParser);var SmartTypedArray=(dHa.prototype.set=function(t){this.check(t)&&(t.length<this.uf?this.value.set(t):(this.cf(t.length),this.value.set(t),this.length=t.length))},dHa.prototype.check=function(t){if(Array.isArray(t))return!0;var i=!1;switch(this.type){case"uint8":i=t instanceof Uint8Array;break;case"int8":i=t instanceof Int8Array;break;case"uint16":i=t instanceof Uint16Array;break;case"int16":i=t instanceof Int16Array;break;case"uint32":i=t instanceof Uint32Array;break;case"int32":i=t instanceof Int32Array;break;case"float32":i=t instanceof Float32Array;break;case"float64":i=t instanceof Float64Array;break;default:i=!1}return i},dHa.prototype.subarray=function(t,i){return this.value.subarray(t,i)},dHa.prototype.ff=function(t){this.uf<t&&this.cf(t),this.length=t},dHa.prototype.cf=function(t){var i=this.pf(),e=this.value;return this.value=new i(t),e&&this.value.set(e),this.uf=t,this.value},dHa.prototype.pf=function(){var t=Float32Array;switch(this.type){case"uint8":t=Uint8Array;break;case"int8":t=Int8Array;break;case"uint16":t=Uint16Array;break;case"int16":t=Int16Array;break;case"uint32":t=Uint32Array;break;case"int32":t=Int32Array;break;case"float32":t=Float32Array;break;case"float64":t=Float64Array;break;default:t=Float32Array}return t},dHa);function dHa(t,i){void 0===i&&(i=1024),this.type=t,this.length=0,this.uf=0,this.value=this.cf(i)}var INF=1e20,ControlChars=[[0,31],[127,159]],ZeroWidthChars=[[8203,8207]],f=new SmartTypedArray("float64",1e4),d=new SmartTypedArray("float64",1e4),z=new SmartTypedArray("float64",1e4),v=new SmartTypedArray("float64",1e4),ua=navigator.userAgent,TinySDF=(qHa.prototype.bU=function(t){this.size=t||[],this.xU(),this.mU()},qHa.prototype.Ce=function(t){var i=this.size,e=i[0],r=i[1],n=e*r,a=this.Nz;if(a){a.clearRect(0,0,e,r),a.fillText(t,this.buffer,this.wU);var o=a.getImageData(0,0,e,r),s=new Uint8ClampedArray(n),h=new Array(9).fill(0);if(h[0]=1,h[1]=1,i=t.charCodeAt(0),this.RU(i))return{xG:s,info:h};for(var u,l,c=INF,f=INF,d=0,v=0,g=0;g<n;g++){l=g-(u=Math.floor(g/e))*e;var p=o.data[4*g+3]/255;0<p&&(u<c&&(c=u),l<f&&(f=l),d<u&&(d=u),v<l&&(v=l)),this.TU.value[g]=1==p?0:0==p?INF:Math.pow(Math.max(0,.5-p),2),this.AU.value[g]=1==p?INF:0==p?0:Math.pow(Math.max(0,p-.5),2)}for(a=this.buffer,h=this.getWidth(t,v-f),t=void 0,t=32===i?[6,6,0,-21,9,0,0,e,r]:[h,d-c,f-a,-c+a,h,f-3,c-3,e,r],edt(this.TU.value,e,r),edt(this.AU.value,e,r),g=0;g<n;g++){var y=this.TU.value[g]-this.AU.value[g],y=Math.max(0,Math.min(255,Math.round(255-255*(y/this.radius+this.MU))));s[g]=y}return{xG:s,info:t}}return{}},qHa.prototype.getWidth=function(t,i){var e;switch(t){case"y":case"A":case"T":case"V":case"W":case"Y":e=i;break;default:e=i+2}return e},qHa.prototype.xU=function(){var t=this.size;this.canvas||(this.canvas=document.createElement("canvas")),this.canvas.width=t[0],this.canvas.height=t[1],this.Nz=this.canvas.getContext("2d"),this.Nz&&(this.Nz.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.Nz.textBaseline="middle",this.Nz.fillStyle="black")},qHa.prototype.mU=function(){var t=this.size,i=t[0];(i=i*(t=t[1]))>this.AU.uf&&(this.AU.ff(i),this.TU.ff(i)),i=0<=ua.indexOf("Gecko/")||0<=ua.indexOf("Windows"),this.wU=Math.round(t/2*(i?1.2:1))},qHa.prototype.RU=function(t){var i=this.SU(t,ControlChars),t=this.SU(t,ZeroWidthChars);return i||t},qHa.prototype.SU=function(t,i){for(var e=0,r=i;e<r.length;e++){var n=r[e];if(t>=n[0]&&t<=n[1])return!0}},qHa);function qHa(t,i,e,r,n,a,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.MU=n||.25,this.fontFamily=a||"sans-serif",this.fontWeight=o||"lighter",this.radius=r||8,this.size=i,this.xU(),r=i[0]*i[1],this.TU=new SmartTypedArray("float64",r),this.AU=new SmartTypedArray("float64",r),r=0<=ua.indexOf("Gecko/")||0<=ua.indexOf("Windows"),this.wU=Math.round(i[1]/2*(r?1.2:1))}function expandTypeArray(t){f.ff(t),d.ff(t),z.ff(t),v.ff(t)}function edt(t,i,e){f.uf<e&&expandTypeArray(e);for(var r=0;r<i;r++){for(var n=0;n<e;n++)f.value[n]=t[n*i+r];for(edt1d(f.value,d.value,v.value,z.value,e),n=0;n<e;n++)t[n*i+r]=d.value[n]}for(f.uf<i&&expandTypeArray(e),n=0;n<e;n++){for(r=0;r<i;r++)f.value[r]=t[n*i+r];for(edt1d(f.value,d.value,v.value,z.value,i),r=0;r<i;r++)t[n*i+r]=Math.sqrt(d.value[r])}}function edt1d(t,i,e,r,n){r[e[0]=0]=-INF,r[1]=+INF;for(var a=1,o=0;a<n;a++){for(var s=(t[a]+a*a-(t[e[o]]+e[o]*e[o]))/(2*a-2*e[o]);s<=r[o];)o--,s=(t[a]+a*a-(t[e[o]]+e[o]*e[o]))/(2*a-2*e[o]);e[++o]=a,r[o]=s,r[o+1]=+INF}for(o=a=0;a<n;a++){for(;r[o+1]<a;)o++;i[a]=(a-e[o])*(a-e[o])+t[e[o]]}}var LangConf={ch:{type:"ch",size:[32,32],fontSize:24,name:"中文简体"},en:{type:"en",size:[32,32],fontSize:24,name:"英文"},th:{type:"th",size:[32,32],fontSize:24,name:"泰语"},my:{type:"my",size:[56,56],fontSize:24,name:"缅甸语"},ja:{type:"ja",size:[32,32],fontSize:24,name:"日文"},km:{type:"km",size:[40,40],fontSize:24,name:"高棉语"},PU:{type:"lao",size:[40,40],fontSize:24,name:"老挝语"},$U:{type:"arabic",size:[40,40],fontSize:24,name:"阿拉伯语"},default:{type:"ch",size:[32,32],fontSize:24}},Lang=(HIa.prototype.Ce=function(t){return(this.type===LangConf.my.type||this.type===LangConf.PU.type||this.type===LangConf.th.type||this.type===LangConf.$U.type||this.type===LangConf.km.type)&&1<t.length&&(this.width=Math.floor(this.CU.size[0]*t.length*.5),this.NU.bU([this.width,this.height])),this.NU.Ce(t)},HIa);function HIa(t){var e=(i=this.CU=t).type,t=i.size,i=i.fontSize;this.type=e,e=this.width=t[0],t=this.height=t[1],this.NU=new TinySDF(i,[e,t],(e-i)/2,8,.25,"PingFang SC","normal")}var LangManager=(QIa.gG=function(t){return t=t.split("|"),t=parseInt(t[0],10),this.IU(t)},QIa.kU=function(t){for(var i=[],e=0;e<t.length;e++)i.push(t.charCodeAt(e));return QIa.gG(i.join("|"))},QIa.LU=function(t){return t=QIa.kU(t),-1!==QIa.EU.indexOf(t)},QIa.IU=function(t){return 32<t&&t<591?"en":4096<=t&&t<=4255?"my":3584<=t&&t<=3711?"th":6016<=t&&t<=6143?"km":3712<=t&&t<=3839?"lao":1536<=t&&t<=1791?"arabic":"ch"},QIa.prototype.D$=function(t){void 0===t&&(t="ch");var i,e=this.OU[t];return e||(i=LangConf[t]||LangConf.default,e=new Lang(i),this.OU[t]=e),e},QIa.EU=[LangConf.my.type,LangConf.km.type,LangConf.PU.type],QIa);function QIa(){this.OU={}}var CONSTS$1={_U:["th","my"]},SDFManagerBase=(cJa=Event,__extends(dJa,cJa),dJa.jU=function(t){return t=LangManager.gG(t+""),-1!==CONSTS$1._U.indexOf(t)},dJa.prototype.FU=function(t){for(var i=[],e=0,r=t;e<r.length;e++){var n=r[e];LangManager.gG(n+""),i.push(n)}return{UU:i,DU:[]}},dJa.prototype.measureText=function(t,i,e){if(e){e.font=(i||12)+"px";for(var r="",n=0,a=t;n<a.length;n++){var o=a[n];r+=String.fromCharCode(o)}return e.measureText(r).width}return 0},dJa.prototype.lineBreak=function(t,i){void 0===t&&(t=""),void 0===i&&(i={});var r=void 0===(e=i.fontSize)?12:e,n=i.maxWidth,a=i.CO,o=i.fj,e=void 0===o?6:o,s=void 0===(o=i.type)?"en":o,h=i.YQ,u=t.split(" "),l=[],n=n||90,c=0,f=[],d=[],v=[0];if("labelsLayer"===i.from){for(var g=t.length,p=Math.ceil(g/e),y=Math.ceil(g/p),b=void 0,x=0,m=0;m<p;m++){f[m]||(f[m]=[x]),0===m?(x=g%y||y,b=a.slice(0,x)):(b=a.slice(x,x+y),x+=y);var w=this.measureText(b,r,h);d.push(w),f[m].push(x)}for(m=0;m<f.length;m++){var R=f[m];v.push(R[R.length-1])}}else if("ch"===s)for(m=x=0;m<u.length;m++){for(var R=u[m],b=[],T=0;T<R.length;T++)b.push(R.charCodeAt(T));w=this.measureText(b,r,h),d.push(w),f.push([x,x+R.length+1]),x+=R.length+1,v.push(x)}else{for(m=0;m<u.length;m++){var A=u[m],b=[];if("en"===s)for(var M=0;M<A.length;M++)b.push(A.charCodeAt(M));else{var S=-1===(S=a.indexOf("32",c))?a.length:S;b=a.slice(c,S),c=S+1}w=this.measureText(b,r,h),l.push(w)}for(n=n<(e=Math.max.apply(Math,l))?e:n,f=(n=this.GU(l,n)).lines,d=n.BU,m=0;m<f.length;m++){var R=f[m],P=u.slice(R[0],R[R.length-1]+1).join(" "),C=t.indexOf(P),P=P.length-1;v.push(C+P+1)}}return{lines:f,oQ:v,width:d,maxWidth:Math.max.apply(Math,d)}},dJa.prototype.GU=function(t,i){for(var e=[],r=0,n=0,a=[],o=0,s=t.length,h=0;h<s;h++){var u=t[h];n+=u,e[r]||(e[r]=[]),i<n&&(e[++r]=[],a.push(o),o=n=0),e[r].push(h),o+=u,h===s-1&&a.push(o)}return{lines:e,BU:a}},dJa.prototype.destroy=function(){},dJa),cJa,LoadFlag,oKa,pKa;function dJa(){var t=cJa.call(this)||this;return t.CLASS_NAME="SDFManagerBase",t}function b64toBlob(t,i,e){void 0===i&&(i=""),void 0===e&&(e=512);for(var r=atob(t),n=[],a=0;a<r.length;a+=e){for(var o=r.slice(a,a+e),s=new Array(o.length),h=0;h<o.length;h++)s[h]=o.charCodeAt(h);var u=new Uint8Array(s);n.push(u)}return new Blob(n,{type:i})}oKa=LoadFlag=LoadFlag||{},oKa.TEXTUREFINISH="TEXTUREFINISH",oKa.UNLOAD="unload",oKa.LOADING="loading",oKa.LOADED="loaded",oKa.FAIL="fail",pKa=exports.qu||(exports.qu={}),pKa.AllLoaded="AllLoaded",pKa.AllUnLoaded="AllUnLoaded",pKa.SomeLoading="SomeLoading",pKa.AllLoading="AllLoading";var SDFManagerWorker=(BKa=SDFManagerBase,__extends(CKa,BKa),CKa.prototype.commonWordImageLoaded=function(){this.kc=LoadFlag.TEXTUREFINISH,this.emit("commonWordImageLoaded",{})},CKa.prototype.pH=function(){return this.kc===LoadFlag.TEXTUREFINISH||this.kc===LoadFlag.LOADED},CKa.prototype.vW=function(t,i){var r=void 0===(e=i.tiles)?[]:e,n=i.cb,a=i.optimalZoom,e=void 0===(e=i.tags)?[]:e,o=i.stamp;this.cN=a,this.fN[o]||(this.fN[o]=e);for(var s=0;s<r.length;s++){var h=r[s],u=this.Zu(t);i.result=u,this.oa(t,{tile:h,result:u,cb:n,optimalZoom:a,stamp:o,i:s})}},CKa.prototype.oa=function(t,i){var e=this,r=i.cb,n=i.tile,a=i.result,o=i.optimalZoom,s=i.stamp,i=i.i;switch((a=a||this.Zu(t)).status){case exports.qu.AllLoaded:t=this.wI(),n&&(t.zo=n.zo),t.optimalZoom=o,o=this.fN[s]&&this.fN[s][i],t.tag=o,this.emit("dynamicTextTextureInfoLoaded",t),r([]);break;case exports.qu.AllUnLoaded:var h=this.Yu(r,{tile:n,stamp:s,index:i});this.MI(a.Vu,function(t){void 0===t&&(t={}),e.Xu[h]=t,e.Hu()});break;case exports.qu.SomeLoading:var u=this.Yu(r,{tile:n,stamp:s,index:i});this.MI(a.Vu,function(t){void 0===t&&(t={}),e.Xu[u]=t,e.Hu()});break;case exports.qu.AllLoading:i=this.Yu(r,{tile:n,stamp:s,index:i}),this.Xu[i]=[],this.Hu()}},CKa.prototype.mz=function(t){var i=this.Ku,e=this.info||{},r=this.SF;if(this.kc===LoadFlag.TEXTUREFINISH||this.kc===LoadFlag.LOADED)for(var n=0,a=this.Ku;n<a.length;n++){var o=a[n];if(r.hasOwnProperty(o)){var s=r[o];if(s.info[t])return{key:o,index:i.indexOf(o),char:s.info[t],pos:s.pos}}}for(o in e)if(e.hasOwnProperty(o)&&i.indexOf(o)<0&&(s=e[o]).pos&&s.info[t])return{key:o,index:CONSTS.Qu,char:s.info[t],pos:s.pos};return null},CKa.prototype.measureText=function(t,i){for(var e=CONSTS.ic,r=CONSTS.ec,n=0,a=this.info,o=this.SF,s=i/this._size,h=this.nc,u=0,l=t;u<l.length;u++){var c,f=l[u],d=void 0,v=f;if(!(d=13312<=v&&v<=40959?r:h[v]))for(var g in o)if(o.hasOwnProperty(g)&&(c=o[g].info[v])){this.nc[f]=d=c[4];break}if(!d)for(var g in a)if(a.hasOwnProperty(g)&&(c=a[g].info[v])){this.nc[f]=d=c[4];break}n+=(d+e)*s}return n},CKa.prototype.Ju=function(t){for(var i={},e=0,r=t;e<r.length;e++){var n=r[e],a=n.range,o=n.info;(n=this.info)[a],n[a]={info:o.info,pos:{startX:0,startY:0}},this.range.push(a),i[a]=1}return i},CKa.prototype.loadCommonWords=function(t,i){var e,r=this;this.kc!==LoadFlag.LOADING&&this.kc!==LoadFlag.LOADED&&this.kc!==LoadFlag.TEXTUREFINISH?(this.kc=LoadFlag.LOADING,e=CONSTS.yN,this.jI(t,e,function(t){t?(r.kc=LoadFlag.LOADED,r.emit("commonWordImageLoaded",{}),i(t)):(r.kc=LoadFlag.FAIL,console.error("commonword load errro"),i(null))})):i()},CKa.prototype.AI=function(t,i){this.info[t]&&(this.info[t].pos=i)},CKa.prototype.wI=function(t){var i;if(t){for(var e=0,r=t;e<r.length;e++){var n=r[e],a=this.kI.Qk(n.info.info);a&&(a=a.tO.Dk(n.info.info,n.info.url),n.pos=a,this.AI(n.range,a))}0<(t=this.kI.Xk()).Uk&&(i={Dm:t.zk,data:t.Gk(),OI:this.kI.currentIndex}),t.clear()}else i={Dm:[],data:null,OI:0};return i},CKa.prototype.MI=function(i,e){var r=this;void 0===i&&(i=[]),i.length;for(var t=CONSTS.Mj,n=0,a=i;n<a.length;n++){var o=a[n];this._c[o]=!0}for(var s=[],h=0,u=this.FU(i),l=u.UU,c=u.DU,f=c.length,d=Math.ceil(f/CONSTS.Mj);h<d;){var v=t*h,g=f<v+t?f:v+t,g=c.slice(v,g),g=this.xI(g);s.push(g),h++}s.push(this.pG(l)),Promise.all(s).then(function(t){r.II(i),t=r.zU(t),r.Ju(t),e(t)})},CKa.prototype.pG=function(e){var r=this;return new Promise(function(i,t){r._parent.loadWordsByFront({Es:e,cb:function(t){i(t)}})})},CKa.prototype.xI=function(t){var a=this,i=this.fc()+("/getsdfdata?chars="+t.join(",").split(",").join("|"));return new Promise(function(r,n){XHR.send(i,{Me:"json",method:"get",qw:function(t){var i,e;t&&t.info?(i=a.vc(t.info),e=b64toBlob(t.url.substring(22),"image/png"),e=URLObject.createObjectURL(e),t.url=e,r({range:i,info:t})):n(null)},error:function(){n(null)}})})},CKa.prototype.fc=function(){var t=CONSTS.pc,i=this.protocol+t[this.dc];return this.dc=(this.dc+1)%t.length,i},CKa.prototype.vc=function(t){void 0===t&&(t={});var i=map(Object.keys(t),function(t){return parseInt(t,10)});return i.sort(function(t,i){return t-i}),i=2<=(t=i.length)?i[0]+"-"+i[t-1]:1===t?""+i[0]:""},CKa.prototype.mc=function(){},CKa.prototype.gc=function(t){var i=this.range||[],e=this.info||{},r=this.SF;if(-1!==i.indexOf(t))return!0;var n=parseInt(t,10);if(this.kc===LoadFlag.TEXTUREFINISH||this.kc===LoadFlag.LOADED)for(var a=0,o=this.Ku;a<o.length;a++){var s=o[a];if(r.hasOwnProperty(s)){var h=s.split("-"),u=parseInt(h[0]||"",10),l=parseInt(h[1]||"",10);if(u<=n&&n<=l&&(r[s]&&r[s].info||{})[t])return!0}}for(var c=0,f=i;c<f.length;c++)if((s=f[c]).indexOf("-")<0){if(n===+s&&(e[s]&&e[s].info||{})[t])return!0}else if(h=s.split("-"),u=parseInt(h[0]||"",10),l=parseInt(h[1]||"",10),u<=n&&n<=l&&(e[s]&&e[s].info||{})[t])return!0;return!1},CKa.prototype.wc=function(t){return this._c[t]},CKa.prototype.Zu=function(t){for(var i=[],e=(this.range,0),r=0,n=0,a=t;n<a.length;n++){var o=a[n];this.gc(o)||(this.wc(o)?r+=1:(e+=1,i.push(o)))}return 0===r&&0===e?{status:exports.qu.AllLoaded,Vu:i}:0<e&&0===r?{status:exports.qu.AllUnLoaded,Vu:i}:0===e&&0<r?{status:exports.qu.AllLoading,Vu:i}:{status:exports.qu.SomeLoading,Vu:i}},CKa.prototype.TI=function(t,i,e){try{var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onerror=function(){e({code:0})},r.onload=function(){var t;200===r.status?((t=new FileReader).onload=function(){e(t.result,i)},t.readAsDataURL(r.response)):e({code:0})},r.send()}catch(t){e({code:0})}},CKa.prototype.FI=function(n){var a=this;void 0===n&&(n=[]);var o=n.length,s=0,h=0,u=[];return new Promise(function(r,t){for(var i=0,e=n;i<e.length;i++)!function(t){var i=h;h+=1;var e=t.url,t=t.range;a.Ku.push(t),e=a.protocol+e,a.ac.loadImage(e,{name:t,type:"common",cb:function(t){s++,u[i]=t,s===o&&r(u)}})}(e[i])})},CKa.prototype._I=function(e){var r=this;return new Promise(function(i,t){XHR.send(r.protocol+e,{Me:"json",qw:function(t){i(t)},error:function(){t()}})})},CKa.prototype.jI=function(t,i,v){for(var g=this,p=i.range||[],e=i.urlPrefix||"",r=i.version||"1",n=[],a=e+"commonWordsInfo.v"+r+".json",o=0,s=p;o<s.length;o++){var h=s[o],u=e+h+".v"+r+(t?".webp":".png");n.push({range:h,url:u})}i=this._I(a),a=this.FI(n),Promise.all([i,a]).then(function(t){for(var i=g.Ku,e=[],r=[],n=t[0],a=t[1],o=0,s=n.length;o<s;o++){var h=n[o],u=a[o];h&&u.status===exports.uc.LOADED||v(null)}for(o=0,s=n.length;o<s;o++){var h=n[o],u=a[o],l=p[o];h&&u.status===exports.uc.LOADED&&(g.SF[l]||(g.SF[l]={info:h,pos:{startX:0,startY:0}}))}for(var c=0,f=i;c<f.length;c++){var d=f[c];e.push(g.ac.getImage(d)),r.push({range:d,info:{info:g.SF[d].info},pos:g.SF[d].pos})}v({Ku:i,hc:e,jm:r})}).catch(function(t){console.error(t),v(null)})},CKa.prototype.Yu=function(t,i){void 0===i&&(i={});var e=this.yc+=1;return this.xc.push(e),this.bc[e]=t,this.bc[e]={cb:t,params:i},e},CKa.prototype.Hu=function(){var t,i,e,r,n,a=this.xc[0];!a||(t=this.Xu[a])&&(this.xc.shift(),(i=this.bc[a])?(e=this.wI(t),r=void 0,(n=i.params||{}).tile&&(e.zo=r=i.params.tile.zo),e.optimalZoom=this.cN,r&&(n=this.fN[n.stamp]&&this.fN[n.stamp][n.index],e.tag=n),this.emit("dynamicTextTextureInfoLoaded",e),this.emit("dynamicTextSDFInfoLoaded",{data:t}),i.cb(t)):console.error("sdf task error"),delete this.Xu[a],delete this.bc[a],this.Hu())},CKa.prototype.II=function(t){for(var i=0,e=t;i<e.length;i++){var r=e[i];delete this._c[r]}},CKa.prototype.zU=function(t){void 0===t&&(t=[]);for(var i=[],e=0,r=t;e<r.length;e++){var n=r[e];if(Array.isArray(n))for(var a=0,o=n;a<o.length;a++){var s=o[a];i.push(s)}else i.push(n)}return i},CKa),BKa;function CKa(t){var i=BKa.call(this)||this;return i.CLASS_NAME="SDFManagerWorker",i.protocol="https",i.range=[],i.Ku=[],i.info={},i.SF={},i.dc=0,i.kc=LoadFlag.UNLOAD,i._c={},i._size=24,i.nc={},i.xc=[],i.bc={},i.Xu={},i.yc=1,i.fN={},i.kI=new MockTextureManager,i.ac=t.z_,i._parent=t.parent,i}var mbStyle={Hr:void 0,_r:{},kr:{"pedestrian-polygon":{width:128,height:128,x:0,y:0,pixelRatio:2,visible:!0},"turning-circle-outline":{width:92,height:92,x:128,y:0,pixelRatio:2,visible:!0},"turning-circle":{width:84,height:84,x:0,y:128,pixelRatio:2,visible:!0},"us-interstate-truck-2":{width:40,height:80,x:84,y:128,pixelRatio:2,visible:!0},"us-interstate-truck-3":{width:52,height:80,x:124,y:128,pixelRatio:2,visible:!0},"us-highway-business-2":{width:40,height:76,x:176,y:128,pixelRatio:2,visible:!0},"us-highway-business-3":{width:52,height:76,x:216,y:128,pixelRatio:2,visible:!0},"us-highway-bypass-2":{width:40,height:76,x:268,y:128,pixelRatio:2,visible:!0},"us-highway-bypass-3":{width:52,height:76,x:308,y:128,pixelRatio:2,visible:!0},"us-highway-truck-2":{width:40,height:76,x:360,y:128,pixelRatio:2,visible:!0},"us-highway-truck-3":{width:52,height:76,x:400,y:128,pixelRatio:2,visible:!0},"ae-f-route-3":{width:48,height:54,x:452,y:128,pixelRatio:2,visible:!0},"ae-s-route-4":{width:76,height:52,x:220,y:0,pixelRatio:2,visible:!0},"pe-national-2":{width:36,height:52,x:296,y:0,pixelRatio:2,visible:!0},"pe-national-3":{width:44,height:52,x:332,y:0,pixelRatio:2,visible:!0},"ae-national-3":{width:52,height:50,x:376,y:0,pixelRatio:2,visible:!0},"ae-national-4":{width:64,height:50,x:428,y:0,pixelRatio:2,visible:!0},"ae-d-route-3":{width:48,height:48,x:0,y:212,pixelRatio:2,visible:!0},"ae-d-route-4":{width:60,height:48,x:48,y:212,pixelRatio:2,visible:!0},"tw-provincial-2":{width:44,height:48,x:108,y:212,pixelRatio:2,visible:!0},"tw-provincial-3":{width:56,height:48,x:152,y:212,pixelRatio:2,visible:!0},"tw-provincial-expy-2":{width:44,height:48,x:208,y:212,pixelRatio:2,visible:!0},"tw-provincial-expy-3":{width:56,height:48,x:252,y:212,pixelRatio:2,visible:!0},"za-provincial-2":{width:48,height:48,x:308,y:212,pixelRatio:2,visible:!0},"cn-nths-expy-2":{width:40,height:46,x:356,y:212,pixelRatio:2,visible:!0},"cn-nths-expy-3":{width:52,height:46,x:396,y:212,pixelRatio:2,visible:!0},"cn-nths-expy-4":{width:64,height:46,x:448,y:212,pixelRatio:2,visible:!0},"cn-nths-expy-5":{width:76,height:46,x:0,y:260,pixelRatio:2,visible:!0},"cn-provincial-expy-2":{width:40,height:46,x:76,y:260,pixelRatio:2,visible:!0},"cn-provincial-expy-3":{width:52,height:46,x:116,y:260,pixelRatio:2,visible:!0},"cn-provincial-expy-4":{width:64,height:46,x:168,y:260,pixelRatio:2,visible:!0},"cn-provincial-expy-5":{width:76,height:46,x:232,y:260,pixelRatio:2,visible:!0},"br-federal-3":{width:52,height:44,x:308,y:260,pixelRatio:2,visible:!0},"hk-strategic-route-2":{width:36,height:44,x:360,y:260,pixelRatio:2,visible:!0},"in-national-2":{width:32,height:44,x:396,y:260,pixelRatio:2,visible:!0},"in-national-3":{width:40,height:44,x:428,y:260,pixelRatio:2,visible:!0},"in-national-4":{width:48,height:44,x:0,y:306,pixelRatio:2,visible:!0},"in-state-2":{width:32,height:44,x:48,y:306,pixelRatio:2,visible:!0},"in-state-3":{width:40,height:44,x:80,y:306,pixelRatio:2,visible:!0},"kr-natl-expy-2":{width:40,height:44,x:120,y:306,pixelRatio:2,visible:!0},"kr-natl-expy-3":{width:52,height:44,x:160,y:306,pixelRatio:2,visible:!0},"mx-federal-2":{width:36,height:44,x:212,y:306,pixelRatio:2,visible:!0},"mx-federal-3":{width:46,height:44,x:248,y:306,pixelRatio:2,visible:!0},"mx-federal-4":{width:56,height:44,x:294,y:306,pixelRatio:2,visible:!0},"mx-state-2":{width:36,height:44,x:350,y:306,pixelRatio:2,visible:!0},"mx-state-3":{width:46,height:44,x:386,y:306,pixelRatio:2,visible:!0},"mx-state-4":{width:56,height:44,x:432,y:306,pixelRatio:2,visible:!0},"pe-regional-3":{width:46,height:44,x:0,y:350,pixelRatio:2,visible:!0},"pe-regional-4":{width:56,height:44,x:46,y:350,pixelRatio:2,visible:!0},"tw-national-2":{width:42,height:44,x:102,y:350,pixelRatio:2,visible:!0},"us-interstate-2":{width:40,height:44,x:144,y:350,pixelRatio:2,visible:!0},"us-interstate-3":{width:52,height:44,x:184,y:350,pixelRatio:2,visible:!0},"us-interstate-4":{width:64,height:44,x:236,y:350,pixelRatio:2,visible:!0},"us-interstate-business-2":{width:40,height:44,x:300,y:350,pixelRatio:2,visible:!0},"us-interstate-business-3":{width:52,height:44,x:340,y:350,pixelRatio:2,visible:!0},"us-interstate-duplex-4":{width:64,height:44,x:392,y:350,pixelRatio:2,visible:!0},"us-interstate-duplex-5":{width:76,height:44,x:0,y:394,pixelRatio:2,visible:!0},"airfield-15":{width:42,height:42,x:456,y:350,pixelRatio:2,visible:!0},"airport-15":{width:42,height:42,x:76,y:394,pixelRatio:2,visible:!0},"alcohol-shop-15":{width:42,height:42,x:118,y:394,pixelRatio:2,visible:!0},"american-football-15":{width:42,height:42,x:160,y:394,pixelRatio:2,visible:!0},"amusement-park-15":{width:42,height:42,x:202,y:394,pixelRatio:2,visible:!0},"aquarium-15":{width:42,height:42,x:244,y:394,pixelRatio:2,visible:!0},"art-gallery-15":{width:42,height:42,x:286,y:394,pixelRatio:2,visible:!0},"attraction-15":{width:42,height:42,x:328,y:394,pixelRatio:2,visible:!0},"au-tourist-2":{width:40,height:42,x:370,y:394,pixelRatio:2,visible:!0},"au-tourist-3":{width:56,height:42,x:410,y:394,pixelRatio:2,visible:!0},"bakery-15":{width:42,height:42,x:466,y:394,pixelRatio:2,visible:!0},"bank-15":{width:42,height:42,x:468,y:260,pixelRatio:2,visible:!0},"bar-15":{width:42,height:42,x:0,y:438,pixelRatio:2,visible:!0},"basketball-15":{width:42,height:42,x:42,y:438,pixelRatio:2,visible:!0},"beach-15":{width:42,height:42,x:84,y:438,pixelRatio:2,visible:!0},"beer-15":{width:42,height:42,x:126,y:438,pixelRatio:2,visible:!0},"bicycle-15":{width:42,height:42,x:168,y:438,pixelRatio:2,visible:!0},"bowling-alley-15":{width:42,height:42,x:210,y:438,pixelRatio:2,visible:!0},"bridge-15":{width:42,height:42,x:252,y:438,pixelRatio:2,visible:!0},"cafe-15":{width:42,height:42,x:294,y:438,pixelRatio:2,visible:!0},"campsite-15":{width:42,height:42,x:336,y:438,pixelRatio:2,visible:!0},"car-15":{width:42,height:42,x:378,y:438,pixelRatio:2,visible:!0},"car-rental-15":{width:42,height:42,x:420,y:438,pixelRatio:2,visible:!0},"car-repair-15":{width:42,height:42,x:462,y:438,pixelRatio:2,visible:!0},"casino-15":{width:42,height:42,x:504,y:438,pixelRatio:2,visible:!0},"castle-15":{width:42,height:42,x:546,y:438,pixelRatio:2,visible:!0},"cemetery-15":{width:42,height:42,x:588,y:438,pixelRatio:2,visible:!0},"charging-station-15":{width:42,height:42,x:630,y:438,pixelRatio:2,visible:!0},"cinema-15":{width:42,height:42,x:672,y:438,pixelRatio:2,visible:!0},"clothing-store-15":{width:42,height:42,x:714,y:438,pixelRatio:2,visible:!0},"college-15":{width:42,height:42,x:756,y:438,pixelRatio:2,visible:!0},"communications-tower-15":{width:42,height:42,x:798,y:438,pixelRatio:2,visible:!0},"confectionery-15":{width:42,height:42,x:840,y:438,pixelRatio:2,visible:!0},"convenience-15":{width:42,height:42,x:882,y:438,pixelRatio:2,visible:!0},"dentist-15":{width:42,height:42,x:924,y:438,pixelRatio:2,visible:!0},"doctor-15":{width:42,height:42,x:966,y:438,pixelRatio:2,visible:!0},"dog-park-15":{width:42,height:42,x:488,y:306,pixelRatio:2,visible:!0},"drinking-water-15":{width:42,height:42,x:530,y:306,pixelRatio:2,visible:!0},"embassy-15":{width:42,height:42,x:572,y:306,pixelRatio:2,visible:!0},"farm-15":{width:42,height:42,x:614,y:306,pixelRatio:2,visible:!0},"fast-food-15":{width:42,height:42,x:656,y:306,pixelRatio:2,visible:!0},"fire-station-15":{width:42,height:42,x:698,y:306,pixelRatio:2,visible:!0},"fitness-centre-15":{width:42,height:42,x:740,y:306,pixelRatio:2,visible:!0},"fuel-15":{width:42,height:42,x:782,y:306,pixelRatio:2,visible:!0},"furniture-15":{width:42,height:42,x:824,y:306,pixelRatio:2,visible:!0},"garden-15":{width:42,height:42,x:866,y:306,pixelRatio:2,visible:!0},"globe-15":{width:42,height:42,x:908,y:306,pixelRatio:2,visible:!0},"golf-15":{width:42,height:42,x:950,y:306,pixelRatio:2,visible:!0},"grocery-15":{width:42,height:42,x:498,y:350,pixelRatio:2,visible:!0},"harbor-15":{width:42,height:42,x:540,y:350,pixelRatio:2,visible:!0},"hardware-15":{width:42,height:42,x:582,y:350,pixelRatio:2,visible:!0},"heliport-15":{width:42,height:42,x:624,y:350,pixelRatio:2,visible:!0},"horse-riding-15":{width:42,height:42,x:666,y:350,pixelRatio:2,visible:!0},"hospital-15":{width:42,height:42,x:708,y:350,pixelRatio:2,visible:!0},"ice-cream-15":{width:42,height:42,x:750,y:350,pixelRatio:2,visible:!0},"information-15":{width:42,height:42,x:792,y:350,pixelRatio:2,visible:!0},"jewelry-store-15":{width:42,height:42,x:834,y:350,pixelRatio:2,visible:!0},"laundry-15":{width:42,height:42,x:876,y:350,pixelRatio:2,visible:!0},"library-15":{width:42,height:42,x:918,y:350,pixelRatio:2,visible:!0},"lodging-15":{width:42,height:42,x:960,y:350,pixelRatio:2,visible:!0},"mobile-phone-15":{width:42,height:42,x:508,y:394,pixelRatio:2,visible:!0},"monument-15":{width:42,height:42,x:550,y:394,pixelRatio:2,visible:!0},"mountain-15":{width:42,height:42,x:592,y:394,pixelRatio:2,visible:!0},"museum-15":{width:42,height:42,x:634,y:394,pixelRatio:2,visible:!0},"music-15":{width:42,height:42,x:676,y:394,pixelRatio:2,visible:!0},"optician-15":{width:42,height:42,x:718,y:394,pixelRatio:2,visible:!0},"park-15":{width:42,height:42,x:760,y:394,pixelRatio:2,visible:!0},"parking-15":{width:42,height:42,x:802,y:394,pixelRatio:2,visible:!0},"parking-garage-15":{width:42,height:42,x:844,y:394,pixelRatio:2,visible:!0},"pharmacy-15":{width:42,height:42,x:886,y:394,pixelRatio:2,visible:!0},"picnic-site-15":{width:42,height:42,x:928,y:394,pixelRatio:2,visible:!0},"pitch-15":{width:42,height:42,x:970,y:394,pixelRatio:2,visible:!0},"place-of-worship-15":{width:42,height:42,x:510,y:260,pixelRatio:2,visible:!0},"playground-15":{width:42,height:42,x:552,y:260,pixelRatio:2,visible:!0},"police-15":{width:42,height:42,x:594,y:260,pixelRatio:2,visible:!0},"post-15":{width:42,height:42,x:636,y:260,pixelRatio:2,visible:!0},"prison-15":{width:42,height:42,x:678,y:260,pixelRatio:2,visible:!0},"ranger-station-15":{width:42,height:42,x:720,y:260,pixelRatio:2,visible:!0},"religious-buddhist-15":{width:42,height:42,x:762,y:260,pixelRatio:2,visible:!0},"religious-christian-15":{width:42,height:42,x:804,y:260,pixelRatio:2,visible:!0},"religious-jewish-15":{width:42,height:42,x:846,y:260,pixelRatio:2,visible:!0},"religious-muslim-15":{width:42,height:42,x:888,y:260,pixelRatio:2,visible:!0},"restaurant-15":{width:42,height:42,x:930,y:260,pixelRatio:2,visible:!0},"restaurant-noodle-15":{width:42,height:42,x:972,y:260,pixelRatio:2,visible:!0},"restaurant-pizza-15":{width:42,height:42,x:512,y:212,pixelRatio:2,visible:!0},"restaurant-seafood-15":{width:42,height:42,x:554,y:212,pixelRatio:2,visible:!0},"rocket-15":{width:42,height:42,x:596,y:212,pixelRatio:2,visible:!0},"school-15":{width:42,height:42,x:638,y:212,pixelRatio:2,visible:!0},"shoe-15":{width:42,height:42,x:680,y:212,pixelRatio:2,visible:!0},"shop-15":{width:42,height:42,x:722,y:212,pixelRatio:2,visible:!0},"skateboard-15":{width:42,height:42,x:764,y:212,pixelRatio:2,visible:!0},"slipway-15":{width:42,height:42,x:806,y:212,pixelRatio:2,visible:!0},"stadium-15":{width:42,height:42,x:848,y:212,pixelRatio:2,visible:!0},"suitcase-15":{width:42,height:42,x:890,y:212,pixelRatio:2,visible:!0},"swimming-15":{width:42,height:42,x:932,y:212,pixelRatio:2,visible:!0},"table-tennis-15":{width:42,height:42,x:974,y:212,pixelRatio:2,visible:!0},"tennis-15":{width:42,height:42,x:500,y:128,pixelRatio:2,visible:!0},"theatre-15":{width:42,height:42,x:542,y:128,pixelRatio:2,visible:!0},"toilet-15":{width:42,height:42,x:584,y:128,pixelRatio:2,visible:!0},"town-hall-15":{width:42,height:42,x:626,y:128,pixelRatio:2,visible:!0},"veterinary-15":{width:42,height:42,x:668,y:128,pixelRatio:2,visible:!0},"viewpoint-15":{width:42,height:42,x:710,y:128,pixelRatio:2,visible:!0},"volcano-15":{width:42,height:42,x:752,y:128,pixelRatio:2,visible:!0},"volleyball-15":{width:42,height:42,x:794,y:128,pixelRatio:2,visible:!0},"watch-15":{width:42,height:42,x:836,y:128,pixelRatio:2,visible:!0},"waterfall-15":{width:42,height:42,x:878,y:128,pixelRatio:2,visible:!0},"watermill-15":{width:42,height:42,x:920,y:128,pixelRatio:2,visible:!0},"windmill-15":{width:42,height:42,x:962,y:128,pixelRatio:2,visible:!0},"zoo-15":{width:42,height:42,x:492,y:0,pixelRatio:2,visible:!0},"au-national-highway-2":{width:40,height:40,x:534,y:0,pixelRatio:2,visible:!0},"au-national-highway-3":{width:52,height:40,x:574,y:0,pixelRatio:2,visible:!0},"au-national-route-2":{width:40,height:40,x:626,y:0,pixelRatio:2,visible:!0},"au-national-route-3":{width:52,height:40,x:666,y:0,pixelRatio:2,visible:!0},"au-national-route-4":{width:64,height:40,x:718,y:0,pixelRatio:2,visible:!0},"au-national-route-5":{width:76,height:40,x:782,y:0,pixelRatio:2,visible:!0},"au-national-route-6":{width:86,height:40,x:858,y:0,pixelRatio:2,visible:!0},"au-state-2":{width:36,height:40,x:944,y:0,pixelRatio:2,visible:!0},"au-state-3":{width:46,height:40,x:0,y:480,pixelRatio:2,visible:!0},"au-state-4":{width:58,height:40,x:46,y:480,pixelRatio:2,visible:!0},"au-state-5":{width:68,height:40,x:104,y:480,pixelRatio:2,visible:!0},"au-state-6":{width:78,height:40,x:172,y:480,pixelRatio:2,visible:!0},"br-state-2":{width:40,height:40,x:250,y:480,pixelRatio:2,visible:!0},"br-state-3":{width:56,height:40,x:290,y:480,pixelRatio:2,visible:!0},"circle-white-2":{width:40,height:40,x:346,y:480,pixelRatio:2,visible:!0},"circle-white-3":{width:52,height:40,x:386,y:480,pixelRatio:2,visible:!0},"circle-white-4":{width:64,height:40,x:438,y:480,pixelRatio:2,visible:!0},"hu-main-2":{width:40,height:40,x:502,y:480,pixelRatio:2,visible:!0},"hu-main-3":{width:52,height:40,x:542,y:480,pixelRatio:2,visible:!0},"hu-main-4":{width:64,height:40,x:594,y:480,pixelRatio:2,visible:!0},"hu-main-5":{width:76,height:40,x:658,y:480,pixelRatio:2,visible:!0},"hu-motorway-2":{width:40,height:40,x:734,y:480,pixelRatio:2,visible:!0},"hu-motorway-3":{width:52,height:40,x:774,y:480,pixelRatio:2,visible:!0},"marker-15":{width:24,height:40,x:826,y:480,pixelRatio:2,visible:!0},"nz-state-2":{width:36,height:40,x:850,y:480,pixelRatio:2,visible:!0},"nz-state-3":{width:46,height:40,x:886,y:480,pixelRatio:2,visible:!0},"ro-communal-2":{width:40,height:40,x:932,y:480,pixelRatio:2,visible:!0},"ro-communal-3":{width:52,height:40,x:972,y:480,pixelRatio:2,visible:!0},"ro-communal-4":{width:64,height:40,x:0,y:520,pixelRatio:2,visible:!0},"ro-county-3":{width:52,height:40,x:64,y:520,pixelRatio:2,visible:!0},"ro-county-4":{width:64,height:40,x:116,y:520,pixelRatio:2,visible:!0},"ro-national-2":{width:40,height:40,x:180,y:520,pixelRatio:2,visible:!0},"ro-national-3":{width:52,height:40,x:220,y:520,pixelRatio:2,visible:!0},"tw-county-township-2":{width:40,height:40,x:272,y:520,pixelRatio:2,visible:!0},"tw-county-township-3":{width:52,height:40,x:312,y:520,pixelRatio:2,visible:!0},"tw-county-township-4":{width:64,height:40,x:364,y:520,pixelRatio:2,visible:!0},"tw-county-township-5":{width:76,height:40,x:428,y:520,pixelRatio:2,visible:!0},"tw-county-township-6":{width:88,height:40,x:504,y:520,pixelRatio:2,visible:!0},"us-bia-2":{width:40,height:40,x:592,y:520,pixelRatio:2,visible:!0},"us-bia-3":{width:52,height:40,x:632,y:520,pixelRatio:2,visible:!0},"us-bia-4":{width:60,height:40,x:684,y:520,pixelRatio:2,visible:!0},"us-highway-2":{width:40,height:40,x:744,y:520,pixelRatio:2,visible:!0},"us-highway-3":{width:52,height:40,x:784,y:520,pixelRatio:2,visible:!0},"us-highway-4":{width:64,height:40,x:836,y:520,pixelRatio:2,visible:!0},"us-highway-alternate-2":{width:40,height:40,x:900,y:520,pixelRatio:2,visible:!0},"us-highway-alternate-3":{width:52,height:40,x:940,y:520,pixelRatio:2,visible:!0},"us-highway-duplex-3":{width:52,height:40,x:0,y:560,pixelRatio:2,visible:!0},"us-highway-duplex-4":{width:64,height:40,x:52,y:560,pixelRatio:2,visible:!0},"us-highway-duplex-5":{width:76,height:40,x:116,y:560,pixelRatio:2,visible:!0},"za-national-2":{width:40,height:40,x:192,y:560,pixelRatio:2,visible:!0},"za-national-3":{width:56,height:40,x:232,y:560,pixelRatio:2,visible:!0},"barcelona-metro":{width:38,height:38,x:288,y:560,pixelRatio:2,visible:!0},"boston-t":{width:38,height:38,x:326,y:560,pixelRatio:2,visible:!0},"de-s-bahn":{width:38,height:38,x:364,y:560,pixelRatio:2,visible:!0},"de-s-bahn.de-u-bahn":{width:70,height:38,x:402,y:560,pixelRatio:2,visible:!0},"delhi-metro":{width:38,height:38,x:472,y:560,pixelRatio:2,visible:!0},"kiev-metro":{width:38,height:38,x:510,y:560,pixelRatio:2,visible:!0},"kr-metro-expy-2":{width:40,height:38,x:548,y:560,pixelRatio:2,visible:!0},"kr-metro-expy-3":{width:52,height:38,x:588,y:560,pixelRatio:2,visible:!0},"kr-metro-expy-4":{width:64,height:38,x:640,y:560,pixelRatio:2,visible:!0},"madrid-metro":{width:38,height:38,x:704,y:560,pixelRatio:2,visible:!0},"new-york-subway":{width:38,height:38,x:742,y:560,pixelRatio:2,visible:!0},"oslo-metro":{width:38,height:38,x:780,y:560,pixelRatio:2,visible:!0},"paris-metro":{width:38,height:38,x:818,y:560,pixelRatio:2,visible:!0},"paris-metro.paris-rer":{width:74,height:38,x:856,y:560,pixelRatio:2,visible:!0},"paris-rer":{width:38,height:38,x:930,y:560,pixelRatio:2,visible:!0},"paris-rer.paris-transilien":{width:70,height:38,x:0,y:600,pixelRatio:2,visible:!0},"road-closure":{width:38,height:38,x:70,y:600,pixelRatio:2,visible:!0},"stockholm-metro":{width:38,height:38,x:108,y:600,pixelRatio:2,visible:!0},"taipei-metro":{width:38,height:38,x:146,y:600,pixelRatio:2,visible:!0},"vienna-u-bahn":{width:38,height:38,x:184,y:600,pixelRatio:2,visible:!0},"kr-natl-hwy-2":{width:44,height:36,x:222,y:600,pixelRatio:2,visible:!0},"airfield-11":{width:34,height:34,x:266,y:600,pixelRatio:2,visible:!0},"airport-11":{width:34,height:34,x:300,y:600,pixelRatio:2,visible:!0},"alcohol-shop-11":{width:34,height:34,x:334,y:600,pixelRatio:2,visible:!0},"american-football-11":{width:34,height:34,x:368,y:600,pixelRatio:2,visible:!0},"amusement-park-11":{width:34,height:34,x:402,y:600,pixelRatio:2,visible:!0},"aquarium-11":{width:34,height:34,x:436,y:600,pixelRatio:2,visible:!0},"art-gallery-11":{width:34,height:34,x:470,y:600,pixelRatio:2,visible:!0},"attraction-11":{width:34,height:34,x:504,y:600,pixelRatio:2,visible:!0},"bakery-11":{width:34,height:34,x:538,y:600,pixelRatio:2,visible:!0},"bank-11":{width:34,height:34,x:572,y:600,pixelRatio:2,visible:!0},"bar-11":{width:34,height:34,x:606,y:600,pixelRatio:2,visible:!0},"basketball-11":{width:34,height:34,x:640,y:600,pixelRatio:2,visible:!0},"beach-11":{width:34,height:34,x:674,y:600,pixelRatio:2,visible:!0},"beer-11":{width:34,height:34,x:708,y:600,pixelRatio:2,visible:!0},"bicycle-11":{width:34,height:34,x:742,y:600,pixelRatio:2,visible:!0},"bicycle-share":{width:34,height:34,x:776,y:600,pixelRatio:2,visible:!0},"bowling-alley-11":{width:34,height:34,x:810,y:600,pixelRatio:2,visible:!0},"bridge-11":{width:34,height:34,x:844,y:600,pixelRatio:2,visible:!0},bus:{width:34,height:34,x:878,y:600,pixelRatio:2,visible:!0},"cafe-11":{width:34,height:34,x:912,y:600,pixelRatio:2,visible:!0},"campsite-11":{width:34,height:34,x:946,y:600,pixelRatio:2,visible:!0},"car-11":{width:34,height:34,x:980,y:600,pixelRatio:2,visible:!0},"car-rental-11":{width:34,height:34,x:968,y:560,pixelRatio:2,visible:!0},"car-repair-11":{width:34,height:34,x:980,y:0,pixelRatio:2,visible:!0},"casino-11":{width:34,height:34,x:0,y:638,pixelRatio:2,visible:!0},"castle-11":{width:34,height:34,x:34,y:638,pixelRatio:2,visible:!0},"cemetery-11":{width:34,height:34,x:68,y:638,pixelRatio:2,visible:!0},"charging-station-11":{width:34,height:34,x:102,y:638,pixelRatio:2,visible:!0},"chongqing-rail-transit":{width:50,height:34,x:136,y:638,pixelRatio:2,visible:!0},"cinema-11":{width:34,height:34,x:186,y:638,pixelRatio:2,visible:!0},"clothing-store-11":{width:34,height:34,x:220,y:638,pixelRatio:2,visible:!0},"college-11":{width:34,height:34,x:254,y:638,pixelRatio:2,visible:!0},"communications-tower-11":{width:34,height:34,x:288,y:638,pixelRatio:2,visible:!0},"confectionery-11":{width:34,height:34,x:322,y:638,pixelRatio:2,visible:!0},"convenience-11":{width:34,height:34,x:356,y:638,pixelRatio:2,visible:!0},"de-u-bahn":{width:34,height:34,x:390,y:638,pixelRatio:2,visible:!0},"dentist-11":{width:34,height:34,x:424,y:638,pixelRatio:2,visible:!0},"doctor-11":{width:34,height:34,x:458,y:638,pixelRatio:2,visible:!0},"dog-park-11":{width:34,height:34,x:492,y:638,pixelRatio:2,visible:!0},"drinking-water-11":{width:34,height:34,x:526,y:638,pixelRatio:2,visible:!0},"embassy-11":{width:34,height:34,x:560,y:638,pixelRatio:2,visible:!0},entrance:{width:34,height:34,x:594,y:638,pixelRatio:2,visible:!0},"farm-11":{width:34,height:34,x:628,y:638,pixelRatio:2,visible:!0},"fast-food-11":{width:34,height:34,x:662,y:638,pixelRatio:2,visible:!0},ferry:{width:34,height:34,x:696,y:638,pixelRatio:2,visible:!0},"fire-station-11":{width:34,height:34,x:730,y:638,pixelRatio:2,visible:!0},"fitness-centre-11":{width:34,height:34,x:764,y:638,pixelRatio:2,visible:!0},"fuel-11":{width:34,height:34,x:798,y:638,pixelRatio:2,visible:!0},"furniture-11":{width:34,height:34,x:832,y:638,pixelRatio:2,visible:!0},"garden-11":{width:34,height:34,x:866,y:638,pixelRatio:2,visible:!0},"globe-11":{width:34,height:34,x:900,y:638,pixelRatio:2,visible:!0},"golf-11":{width:34,height:34,x:934,y:638,pixelRatio:2,visible:!0},"grocery-11":{width:34,height:34,x:968,y:638,pixelRatio:2,visible:!0},"harbor-11":{width:34,height:34,x:0,y:672,pixelRatio:2,visible:!0},"hardware-11":{width:34,height:34,x:34,y:672,pixelRatio:2,visible:!0},"heliport-11":{width:34,height:34,x:68,y:672,pixelRatio:2,visible:!0},"hong-kong-mtr":{width:38,height:34,x:102,y:672,pixelRatio:2,visible:!0},"horse-riding-11":{width:34,height:34,x:140,y:672,pixelRatio:2,visible:!0},"hospital-11":{width:34,height:34,x:174,y:672,pixelRatio:2,visible:!0},"ice-cream-11":{width:34,height:34,x:208,y:672,pixelRatio:2,visible:!0},"information-11":{width:34,height:34,x:242,y:672,pixelRatio:2,visible:!0},"jewelry-store-11":{width:34,height:34,x:276,y:672,pixelRatio:2,visible:!0},"laundry-11":{width:34,height:34,x:310,y:672,pixelRatio:2,visible:!0},"library-11":{width:34,height:34,x:344,y:672,pixelRatio:2,visible:!0},"lodging-11":{width:34,height:34,x:378,y:672,pixelRatio:2,visible:!0},"marker-11":{width:24,height:34,x:412,y:672,pixelRatio:2,visible:!0},"mexico-city-metro":{width:34,height:34,x:436,y:672,pixelRatio:2,visible:!0},"milan-metro":{width:34,height:34,x:470,y:672,pixelRatio:2,visible:!0},"mobile-phone-11":{width:34,height:34,x:504,y:672,pixelRatio:2,visible:!0},"monument-11":{width:34,height:34,x:538,y:672,pixelRatio:2,visible:!0},"moscow-metro":{width:34,height:34,x:572,y:672,pixelRatio:2,visible:!0},"mountain-11":{width:34,height:34,x:606,y:672,pixelRatio:2,visible:!0},"museum-11":{width:34,height:34,x:640,y:672,pixelRatio:2,visible:!0},"music-11":{width:34,height:34,x:674,y:672,pixelRatio:2,visible:!0},"optician-11":{width:34,height:34,x:708,y:672,pixelRatio:2,visible:!0},"osaka-subway":{width:40,height:34,x:742,y:672,pixelRatio:2,visible:!0},"paris-transilien":{width:34,height:34,x:782,y:672,pixelRatio:2,visible:!0},"park-11":{width:34,height:34,x:816,y:672,pixelRatio:2,visible:!0},"parking-11":{width:34,height:34,x:850,y:672,pixelRatio:2,visible:!0},"parking-garage-11":{width:34,height:34,x:884,y:672,pixelRatio:2,visible:!0},"pharmacy-11":{width:34,height:34,x:918,y:672,pixelRatio:2,visible:!0},"philadelphia-septa":{width:38,height:34,x:952,y:672,pixelRatio:2,visible:!0},"picnic-site-11":{width:34,height:34,x:990,y:672,pixelRatio:2,visible:!0},"pitch-11":{width:34,height:34,x:0,y:706,pixelRatio:2,visible:!0},"place-of-worship-11":{width:34,height:34,x:34,y:706,pixelRatio:2,visible:!0},"playground-11":{width:34,height:34,x:68,y:706,pixelRatio:2,visible:!0},"police-11":{width:34,height:34,x:102,y:706,pixelRatio:2,visible:!0},"post-11":{width:34,height:34,x:136,y:706,pixelRatio:2,visible:!0},"prison-11":{width:34,height:34,x:170,y:706,pixelRatio:2,visible:!0},rail:{width:34,height:34,x:204,y:706,pixelRatio:2,visible:!0},"rail-light":{width:34,height:34,x:238,y:706,pixelRatio:2,visible:!0},"rail-metro":{width:34,height:34,x:272,y:706,pixelRatio:2,visible:!0},"ranger-station-11":{width:34,height:34,x:306,y:706,pixelRatio:2,visible:!0},"religious-buddhist-11":{width:34,height:34,x:340,y:706,pixelRatio:2,visible:!0},"religious-christian-11":{width:34,height:34,x:374,y:706,pixelRatio:2,visible:!0},"religious-jewish-11":{width:34,height:34,x:408,y:706,pixelRatio:2,visible:!0},"religious-muslim-11":{width:34,height:34,x:442,y:706,pixelRatio:2,visible:!0},"restaurant-11":{width:34,height:34,x:476,y:706,pixelRatio:2,visible:!0},"restaurant-noodle-11":{width:34,height:34,x:510,y:706,pixelRatio:2,visible:!0},"restaurant-pizza-11":{width:34,height:34,x:544,y:706,pixelRatio:2,visible:!0},"restaurant-seafood-11":{width:34,height:34,x:578,y:706,pixelRatio:2,visible:!0},"rocket-11":{width:34,height:34,x:612,y:706,pixelRatio:2,visible:!0},"san-francisco-bart":{width:34,height:34,x:646,y:706,pixelRatio:2,visible:!0},"school-11":{width:34,height:34,x:680,y:706,pixelRatio:2,visible:!0},"shoe-11":{width:34,height:34,x:714,y:706,pixelRatio:2,visible:!0},"shop-11":{width:34,height:34,x:748,y:706,pixelRatio:2,visible:!0},"singapore-mrt":{width:34,height:34,x:782,y:706,pixelRatio:2,visible:!0},"skateboard-11":{width:34,height:34,x:816,y:706,pixelRatio:2,visible:!0},"slipway-11":{width:34,height:34,x:850,y:706,pixelRatio:2,visible:!0},"stadium-11":{width:34,height:34,x:884,y:706,pixelRatio:2,visible:!0},"suitcase-11":{width:34,height:34,x:918,y:706,pixelRatio:2,visible:!0},"swimming-11":{width:34,height:34,x:952,y:706,pixelRatio:2,visible:!0},"table-tennis-11":{width:34,height:34,x:986,y:706,pixelRatio:2,visible:!0},"tennis-11":{width:34,height:34,x:0,y:740,pixelRatio:2,visible:!0},"theatre-11":{width:34,height:34,x:34,y:740,pixelRatio:2,visible:!0},"toilet-11":{width:34,height:34,x:68,y:740,pixelRatio:2,visible:!0},"tokyo-metro":{width:34,height:34,x:102,y:740,pixelRatio:2,visible:!0},"town-hall-11":{width:34,height:34,x:136,y:740,pixelRatio:2,visible:!0},"traffic-signal":{width:16,height:34,x:1002,y:638,pixelRatio:2,visible:!0},"veterinary-11":{width:34,height:34,x:170,y:740,pixelRatio:2,visible:!0},"viewpoint-11":{width:34,height:34,x:204,y:740,pixelRatio:2,visible:!0},"volcano-11":{width:34,height:34,x:238,y:740,pixelRatio:2,visible:!0},"volleyball-11":{width:34,height:34,x:272,y:740,pixelRatio:2,visible:!0},"washington-metro":{width:34,height:34,x:306,y:740,pixelRatio:2,visible:!0},"watch-11":{width:34,height:34,x:340,y:740,pixelRatio:2,visible:!0},"waterfall-11":{width:34,height:34,x:374,y:740,pixelRatio:2,visible:!0},"watermill-11":{width:34,height:34,x:408,y:740,pixelRatio:2,visible:!0},"windmill-11":{width:34,height:34,x:442,y:740,pixelRatio:2,visible:!0},"zoo-11":{width:34,height:34,x:476,y:740,pixelRatio:2,visible:!0},"ch-motorway-2":{width:44,height:32,x:510,y:740,pixelRatio:2,visible:!0},"ch-motorway-3":{width:56,height:32,x:554,y:740,pixelRatio:2,visible:!0},"de-motorway-2":{width:44,height:32,x:610,y:740,pixelRatio:2,visible:!0},"de-motorway-3":{width:56,height:32,x:654,y:740,pixelRatio:2,visible:!0},"gb-national-rail.london-dlr":{width:72,height:32,x:710,y:740,pixelRatio:2,visible:!0},"gb-national-rail.london-dlr.london-overground.london-tfl-rail.london-underground":{width:186,height:32,x:782,y:740,pixelRatio:2,visible:!0},"gb-national-rail.london-dlr.london-overground.london-underground":{width:148,height:32,x:0,y:774,pixelRatio:2,visible:!0},"gb-national-rail.london-dlr.london-underground":{width:110,height:32,x:148,y:774,pixelRatio:2,visible:!0},"gb-national-rail.london-overground":{width:72,height:32,x:258,y:774,pixelRatio:2,visible:!0},"gb-national-rail.london-overground.london-tfl-rail.london-underground":{width:148,height:32,x:330,y:774,pixelRatio:2,visible:!0},"gb-national-rail.london-overground.london-underground":{width:110,height:32,x:478,y:774,pixelRatio:2,visible:!0},"gb-national-rail.london-tfl-rail":{width:72,height:32,x:588,y:774,pixelRatio:2,visible:!0},"gb-national-rail.london-tfl-rail.london-overground":{width:110,height:32,x:660,y:774,pixelRatio:2,visible:!0},"gb-national-rail.london-tfl-rail.london-underground":{width:110,height:32,x:770,y:774,pixelRatio:2,visible:!0},"gb-national-rail.london-underground":{width:72,height:32,x:880,y:774,pixelRatio:2,visible:!0},"gr-motorway-2":{width:44,height:32,x:952,y:774,pixelRatio:2,visible:!0},"gr-motorway-3":{width:56,height:32,x:968,y:740,pixelRatio:2,visible:!0},"gr-motorway-4":{width:68,height:32,x:0,y:806,pixelRatio:2,visible:!0},"hr-motorway-3":{width:56,height:32,x:68,y:806,pixelRatio:2,visible:!0},"hr-motorway-4":{width:68,height:32,x:124,y:806,pixelRatio:2,visible:!0},"kr-metropolitan-2":{width:40,height:32,x:192,y:806,pixelRatio:2,visible:!0},"kr-metropolitan-3":{width:52,height:32,x:232,y:806,pixelRatio:2,visible:!0},"kr-metropolitan-4":{width:64,height:32,x:284,y:806,pixelRatio:2,visible:!0},"kr-metropolitan-5":{width:76,height:32,x:348,y:806,pixelRatio:2,visible:!0},"kr-metropolitan-6":{width:88,height:32,x:424,y:806,pixelRatio:2,visible:!0},"london-dlr":{width:40,height:32,x:512,y:806,pixelRatio:2,visible:!0},"london-dlr.london-tfl-rail":{width:78,height:32,x:552,y:806,pixelRatio:2,visible:!0},"london-dlr.london-tfl-rail.london-underground":{width:116,height:32,x:630,y:806,pixelRatio:2,visible:!0},"london-dlr.london-underground":{width:78,height:32,x:746,y:806,pixelRatio:2,visible:!0},"london-overground":{width:40,height:32,x:824,y:806,pixelRatio:2,visible:!0},"london-overground.london-tfl-rail":{width:78,height:32,x:864,y:806,pixelRatio:2,visible:!0},"london-overground.london-tfl-rail.london-underground":{width:116,height:32,x:0,y:838,pixelRatio:2,visible:!0},"london-overground.london-underground":{width:78,height:32,x:942,y:806,pixelRatio:2,visible:!0},"london-tfl-rail":{width:40,height:32,x:116,y:838,pixelRatio:2,visible:!0},"london-tfl-rail.london-underground":{width:78,height:32,x:156,y:838,pixelRatio:2,visible:!0},"london-underground":{width:40,height:32,x:234,y:838,pixelRatio:2,visible:!0},"si-motorway-2":{width:44,height:32,x:274,y:838,pixelRatio:2,visible:!0},wetland:{width:32,height:32,x:318,y:838,pixelRatio:2,visible:!0},"level-crossing":{width:30,height:30,x:350,y:838,pixelRatio:2,visible:!0},"default-2":{width:40,height:28,x:380,y:838,pixelRatio:2,visible:!0},"default-3":{width:52,height:28,x:420,y:838,pixelRatio:2,visible:!0},"default-4":{width:64,height:28,x:472,y:838,pixelRatio:2,visible:!0},"default-5":{width:76,height:28,x:536,y:838,pixelRatio:2,visible:!0},"default-6":{width:88,height:28,x:612,y:838,pixelRatio:2,visible:!0},"gb-national-rail":{width:34,height:28,x:700,y:838,pixelRatio:2,visible:!0},"motorway-exit-1":{width:40,height:28,x:734,y:838,pixelRatio:2,visible:!0},"motorway-exit-2":{width:40,height:28,x:774,y:838,pixelRatio:2,visible:!0},"motorway-exit-3":{width:52,height:28,x:814,y:838,pixelRatio:2,visible:!0},"motorway-exit-4":{width:64,height:28,x:866,y:838,pixelRatio:2,visible:!0},"motorway-exit-5":{width:76,height:28,x:930,y:838,pixelRatio:2,visible:!0},"motorway-exit-6":{width:88,height:28,x:0,y:870,pixelRatio:2,visible:!0},"motorway-exit-7":{width:100,height:28,x:88,y:870,pixelRatio:2,visible:!0},"motorway-exit-8":{width:112,height:28,x:188,y:870,pixelRatio:2,visible:!0},"motorway-exit-9":{width:124,height:28,x:300,y:870,pixelRatio:2,visible:!0},"rectangle-blue-2":{width:40,height:28,x:424,y:870,pixelRatio:2,visible:!0},"rectangle-blue-3":{width:52,height:28,x:464,y:870,pixelRatio:2,visible:!0},"rectangle-blue-4":{width:64,height:28,x:516,y:870,pixelRatio:2,visible:!0},"rectangle-green-2":{width:40,height:28,x:580,y:870,pixelRatio:2,visible:!0},"rectangle-green-3":{width:52,height:28,x:620,y:870,pixelRatio:2,visible:!0},"rectangle-green-4":{width:64,height:28,x:672,y:870,pixelRatio:2,visible:!0},"rectangle-green-5":{width:76,height:28,x:736,y:870,pixelRatio:2,visible:!0},"rectangle-green-6":{width:88,height:28,x:812,y:870,pixelRatio:2,visible:!0},"rectangle-red-2":{width:40,height:28,x:900,y:870,pixelRatio:2,visible:!0},"rectangle-red-3":{width:52,height:28,x:940,y:870,pixelRatio:2,visible:!0},"rectangle-red-4":{width:64,height:28,x:0,y:898,pixelRatio:2,visible:!0},"rectangle-white-2":{width:40,height:28,x:64,y:898,pixelRatio:2,visible:!0},"rectangle-white-3":{width:52,height:28,x:104,y:898,pixelRatio:2,visible:!0},"rectangle-white-4":{width:64,height:28,x:156,y:898,pixelRatio:2,visible:!0},"rectangle-white-5":{width:76,height:28,x:220,y:898,pixelRatio:2,visible:!0},"rectangle-white-6":{width:88,height:28,x:296,y:898,pixelRatio:2,visible:!0},"rectangle-yellow-2":{width:40,height:28,x:384,y:898,pixelRatio:2,visible:!0},"rectangle-yellow-3":{width:52,height:28,x:424,y:898,pixelRatio:2,visible:!0},"rectangle-yellow-4":{width:64,height:28,x:476,y:898,pixelRatio:2,visible:!0},"rectangle-yellow-5":{width:76,height:28,x:540,y:898,pixelRatio:2,visible:!0},"rectangle-yellow-6":{width:88,height:28,x:616,y:898,pixelRatio:2,visible:!0},"border-dot-13":{width:26,height:26,x:992,y:870,pixelRatio:2,visible:!0},"dot-10":{width:22,height:22,x:704,y:898,pixelRatio:2,visible:!0},"dot-11":{width:22,height:22,x:726,y:898,pixelRatio:2,visible:!0},"dot-9":{width:22,height:22,x:748,y:898,pixelRatio:2,visible:!0},cliff:{width:16,height:14,x:770,y:898,pixelRatio:2,visible:!0},"oneway-large":{width:28,height:12,x:786,y:898,pixelRatio:2,visible:!0},"oneway-white-large":{width:28,height:12,x:814,y:898,pixelRatio:2,visible:!0},"oneway-small":{width:22,height:10,x:842,y:898,pixelRatio:2,visible:!0},"oneway-white-small":{width:22,height:10,x:864,y:898,pixelRatio:2,visible:!0}},VU:{"Latin-1 Supplement":function(t){return 128<=t&&t<=255},Arabic:function(t){return 1536<=t&&t<=1791},"Arabic Supplement":function(t){return 1872<=t&&t<=1919},"Arabic Extended-A":function(t){return 2208<=t&&t<=2303},"Hangul Jamo":function(t){return 4352<=t&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return 5120<=t&&t<=5759},Khmer:function(t){return 6016<=t&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return 6320<=t&&t<=6399},"General Punctuation":function(t){return 8192<=t&&t<=8303},"Letterlike Symbols":function(t){return 8448<=t&&t<=8527},"Number Forms":function(t){return 8528<=t&&t<=8591},"Miscellaneous Technical":function(t){return 8960<=t&&t<=9215},"Control Pictures":function(t){return 9216<=t&&t<=9279},"Optical Character Recognition":function(t){return 9280<=t&&t<=9311},"Enclosed Alphanumerics":function(t){return 9312<=t&&t<=9471},"Geometric Shapes":function(t){return 9632<=t&&t<=9727},"Miscellaneous Symbols":function(t){return 9728<=t&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return 11008<=t&&t<=11263},"CJK Radicals Supplement":function(t){return 11904<=t&&t<=12031},"Kangxi Radicals":function(t){return 12032<=t&&t<=12255},"Ideographic Description Characters":function(t){return 12272<=t&&t<=12287},"CJK Symbols and Punctuation":function(t){return 12288<=t&&t<=12351},Hiragana:function(t){return 12352<=t&&t<=12447},Katakana:function(t){return 12448<=t&&t<=12543},Bopomofo:function(t){return 12544<=t&&t<=12591},"Hangul Compatibility Jamo":function(t){return 12592<=t&&t<=12687},Kanbun:function(t){return 12688<=t&&t<=12703},"Bopomofo Extended":function(t){return 12704<=t&&t<=12735},"CJK Strokes":function(t){return 12736<=t&&t<=12783},"Katakana Phonetic Extensions":function(t){return 12784<=t&&t<=12799},"Enclosed CJK Letters and Months":function(t){return 12800<=t&&t<=13055},"CJK Compatibility":function(t){return 13056<=t&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return 13312<=t&&t<=19903},"Yijing Hexagram Symbols":function(t){return 19904<=t&&t<=19967},"CJK Unified Ideographs":function(t){return 19968<=t&&t<=40959},"Yi Syllables":function(t){return 40960<=t&&t<=42127},"Yi Radicals":function(t){return 42128<=t&&t<=42191},"Hangul Jamo Extended-A":function(t){return 43360<=t&&t<=43391},"Hangul Syllables":function(t){return 44032<=t&&t<=55215},"Hangul Jamo Extended-B":function(t){return 55216<=t&&t<=55295},"Private Use Area":function(t){return 57344<=t&&t<=63743},"CJK Compatibility Ideographs":function(t){return 63744<=t&&t<=64255},"Arabic Presentation Forms-A":function(t){return 64336<=t&&t<=65023},"Vertical Forms":function(t){return 65040<=t&&t<=65055},"CJK Compatibility Forms":function(t){return 65072<=t&&t<=65103},"Small Form Variants":function(t){return 65104<=t&&t<=65135},"Arabic Presentation Forms-B":function(t){return 65136<=t&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return 65280<=t&&t<=65519}},layers:[],styles:{},Mr:!0,Rr:function(t,i){var h,s=this;if(!t)return!1;h=t,this.styles.zr=[];for(var u=this,e=0,r=h.length;e<r;e+=1)!function(t){var n,a,e=h[t];e.zIndex=t,"line"===e.type&&(e.paint["line-width"]=void 0===e.paint["line-width"]?1:e.paint["line-width"]),e.paint["line-width"]&&(i=e.paint["line-width"],o=0,e.paint["line-gap-width"]&&(o=e.paint["line-gap-width"]),n=i,a=o,i=function(e,i){var r=0;return a&&(r=s.HU(i,a,e)),e=s.HU(i,n,e),r?2*e+r:e},u.styles.zr.push(i),e.paint["line-width"]=i,e.paint["line-width"].Cr=u.styles.zr.length-1,delete e.paint["line-gap-width"]);var i,r,o=e["source-layer"];o?(u.styles[o]||(u.styles[o]=[]),(i=e.filter)&&(e.filters=[],(r=function(t){if("all"!==t[0])"in"===t[0]||"!in"===t[0]?e.filters.push([t[0],t[1],t.slice(2)]):e.filters.push(t);else for(var i=1;i<t.length;i+=1)r(t[i])})(i)),u.styles[o].push(e)):u.styles[e.id]=e}(e);this.backgroundColor=this.HU({},this.styles.land.paint["background-color"],12)},Ar:function(t,i,e,r){return r-=e,e=t-e,0==r?0:1===i?e/r:(Math.pow(i,e)-1)/(Math.pow(i,r)-1)},Sr:function(t,i,e){var r=i.base||1,n=i.stops;if(e<=n[0][0])return this.HU(t,n[0][1],e);if(e>=n[n.length-1][0])return this.HU(t,n[n.length-1][1],e);for(var a=1,o=n.length;a<o;a+=1)if(e>n[a-1][0]&&e<=n[a][0]){var s=this.HU(t,n[a-1][1],e),h=this.HU(t,n[a][1],e);if(s instanceof Array){for(var u=new Array(s.length),l=0;l<s.length;l+=1){var c=h[l]-s[l];u[l]=s[l]+this.Ar(e,r,n[a-1][0])*c}return u}return"number"!=typeof s?s:(c=h-s,s+this.Ar(e,r,n[a-1][0],n[a][0])*c)}},Lr:function(t,i){if(t){var e=void 0;if("string"==typeof t)e=t;else if(t.stops)for(var r=0,n=t.stops.length;r<n;r+=1){if(t.stops[r][0]>i){e=t.stops[r][1];break}e=t.stops[n-1][1]}else if("interpolate"===t[0]){for(var a=t.slice(3),o=[],s=0;s<a.length;s+=2)o.push([a[s],a[s+1]]);for(r=0,n=o.length;r<n;r+=1){if(o[r][0]>i){e=o[r][1];break}e=o[n-1][1]}}return e}},Tr:function(t,i){if(t){var e=void 0;if(t.stops)for(var r=0,n=t.stops.length;r<n;r+=1){if(t.stops[r][0]>i){e=t.stops[r][1];break}e=t.stops[n-1][1]}else e=t;return e}},Ir:function(t,i){var e;if(void 0===t)return 0;if("function"==typeof t)return t(i);if("number"!=typeof t){if(t.stops)e=this.Sr(t.base||1,t.stops,i);else if("interpolate"===t[0]){for(var r=t.slice(3),n=[],a=0;a<r.length;a+=2)n.push([r[a],r[a+1]]);e=this.Sr(1,n,i)}}else e=t;return e},Dr:function(t,i,e,r){var n;if(void 0===i)return i;i instanceof Array?n=i:i.stops&&(n=this.Sr(t,i,e));var a=new Array(n.length);return n.forEach(function(t,i){a[i]=t*r}),a},Pr:function(t,i,e){for(var r,n,a,o,s,h,u,l,c,f,d,v,g,p="butt",y="butt",b="solid",x="solid",m=0,w=0,R=0;R<t.length;R+=1)"line"===t[R].type&&(void 0!==(h=t[R]).minzoom&&h.minzoom>i||void 0!==h.maxzoom&&h.maxzoom<i||(o=h.paint,s=h.layout,void 0===(h=o["line-opacity"])&&(h=1),(h=this.HU(e,h,i))&&(this.WU(t[R].id,"-low")?(n=h,t[R].id,g=o["line-color"],u=this.HU(e,g,i),p=this.HU(e,s["line-cap"]||p,i),l=this.HU(e,o["line-width"],i),c=o["line-width"].Cr,this.Dr(e,o["line-dasharray"],i,l)&&(b="dashed"),w=Math.max(w,t[R].zIndex)):this.WU(t[R].id,"-case")||this.WU(t[R].id,"-tracks")?(r=!0,t[R].id,a=h,g=o["line-color"],f=this.HU(e,g,i),d=this.HU(e,o["line-width"],i),v=o["line-width"].Cr,y=this.HU(e,s["line-cap"]||y,i),this.Dr(e,o["line-dasharray"],i,d)&&(x="dashed"),m=Math.max(m,t[R].zIndex)):this.WU(t[R].id,"-bg")?(r=!0,t[R].id,a=h,g=o["line-color"],f=this.HU(e,g,i),y=this.HU(e,s["line-cap"]||y,i),d=this.HU(e,o["line-width"],i),v=o["line-width"].Cr,this.Dr(e,o["line-dasharray"],i,d)&&(x="dashed"),m=Math.max(m,t[R].zIndex)):(n=h,t[R].id,g=o["line-color"],u=this.HU(e,g,i),p=this.HU(e,s["line-cap"]||p,i),l=this.HU(e,o["line-width"],i),c=o["line-width"].Cr,this.Dr(e,o["line-dasharray"],i,l)&&(b="dashed"),w=Math.max(w,t[R].zIndex)))));if(l)return{jr:w,Or:m,Fr:b,Er:n,Nr:void 0,$r:l,faceColor:u,Ur:p,Br:y,isOutline:r,Wr:a,Gr:x,Zr:void 0,borderColor:f,borderWidth:d,qr:c,Yr:v}},QU:function(t){return t instanceof Array&&-1<this.KU(["geometry-type","to-number","case","step","is-supported-script","concat","get","literal","match","interpolate","to-string","string","coalesce","has","+","==","!=",">","<",">=","<=","in","!in"],t[0])||"object"==typeof t&&t.stops},KU:function(t,i){if(!t||!t.length)return-1;if(t.indexOf)return t.indexOf(i);for(var e=0;e<t.length;e+=1)if(t[e]===i)return e;return-1},WU:function(t,i){return t.endsWith?t.endsWith(i):!(t.length<i.length)&&t.substr(t.length-i.length)===i},Vr:function(t,i,e){for(var r=0,n=0;n<t.length;n+=1){var a,o,s,h,u,l,c=t[n];"line"===t[n].type?c.minzoom&&c.minzoom>i||(r=Math.max(r,c.zIndex),s=(u=c.paint)["line-color"],a=this.HU(e,s,i),o=this.HU(e,u["line-width"],i),s=void 0===u["line-opacity"]?1:u["line-opacity"],h=this.HU(e,s,i)):"fill"===t[n].type&&(c.minzoom&&c.minzoom>i||(r=Math.max(r,c.zIndex),c=(u=c.paint)["fill-color"],l=this.HU(e,c,i)))}return{zIndex:r,fillColor:l,fillOpacity:1,strokeWeight:o,strokeColor:a,strokeOpacity:h}},Xr:function(t,i,e){var r=t[0],n=r.paint,a=r.layout;if("symbol"===r.type){var o=this.HU(e,n["text-color"],i),s=this.HU(e,n["text-halo-color"],i),h=this.HU(e,n["text-halo-width"],i),u=void 0===n["icon-opacity"]?1:n["icon-opacity"],l=this.HU(e,u,i),c=void 0===n["text-opacity"]?1:n["text-opacity"],f=this.HU(e,c,i),d=void 0,v=void 0;0===h&&(s=""),a["icon-image"]&&(d=this.HU(e,a["icon-image"],i),(p=this.kr[d])&&l&&(p.height,v=[-p.width/2,-p.height/2,p.width,p.height,p.x,p.y,p.width,p.height]));var g=this.HU(e,a["icon-rotation-alignment"],i),t=a["text-max-width"],u=this.HU(e,a["text-anchor"]||"center",i);(n=this.HU(e,a["text-font"],i)||"Microsoft YaHei")instanceof Array&&(n=n.join(" "));var c=a["text-offset"]?this.HU(e,a["text-offset"],i):[0,0],h=this.HU(e,a["text-size"],i),p="";return f&&a["text-field"]&&(p=this.HU(e,a["text-field"]||"{name}",i)),{zIndex:r.zIndex,Jr:g,Kr:o||"black",Qr:s,th:(r.minzoom||1)+.5,ih:(r.maxzoom||20)+.5,eh:l,nh:d,qU:v,oh:t,textAnchor:u,ah:n,sh:c,rh:h,name:p}}},lh:function(t,i,e){var r=[],n=this.Pr(t,i,e);return n&&(n.type="line",r.push(n)),(e=this.uh(t,i,e)).length&&r.push.apply(r,e),r},uh:function(t,i,e){for(var r=[],n=0;n<t.length;n+=1){var a=this.Xr([t[n]],i,e);a&&r.push(a)}return r},YU:function(t,i,e){for(var r=1,n=i.length-1;r<n;r+=2)if(this.HU(t,i[r],e))return this.HU(t,i[r+1],e);return this.HU(t,i[i.length-1],e)},JU:function(t,i,e){var r=this.HU(t,i[1],e),n=this.HU(t,i[2],e);return[r,this.HU(t,i[3],e)].join(n)},ZU:function(t,i,e){var r=i[1],n=1;"exponential"===r[0]?n=r[1]:"linear"===r[0]&&(n=1);for(var a=i.slice(3),o=[],s=0;s<a.length;s+=2)o.push([a[s],a[s+1]]);return n=this.Sr(t,{base:n,stops:o},e),this.HU(t,n,e)},XU:function(t,i,e){"zoom"===i[1][0]||"get"===i[1][0]&&(e=t.properties[i[1][1]]);for(var r=[],n=2,a=i.length;n<a;n+=2)r.push([parseFloat(i[n-1])||0,this.HU(t,i[n],e)]);if(e<r[0][0])return this.HU(t,r[0][1],e);if(e>=r[r.length-1][0])return this.HU(t,r[r.length-1][1],e);for(n=1,a=r.length;n<a;n+=1)if(e<=r[n][0])return this.HU(t,r[n-1][1],e)},tV:function(t,i,e){var r=this.HU(t,i[1],e);if(r){for(var n=2,a=i.length-1;n<a;n+=2)if(i[n]instanceof Array?-1!==this.KU(i[n],r):i[n]===r)return this.HU(t,i[n+1],e);return this.HU(t,i[i.length-1],e)}},HU:function(t,i,e){if(null==i)return null;var r=typeof i;if("number"==r||"boolean"==r)return i;if("function"==r)return i(e,t);if(!this.QU(i)){if("string"!=typeof i)return i;if(-1===this.KU(i,"{"))return i;for(var n=[],a=0,o=0,s=i.length;o<s;o+=1)"{"===i[o]&&(a=o),"}"===i[o]&&n.push(i.substring(a,o+1));for(var h,o=0,s=n.length;o<s;o+=1){if(void 0===(h=t.properties[n[o].substring(1,n[o].length-1)]))return"";i=i.replace(n[o],h)}return i}if("literal"===i[0])return i[1];if(i.stops)return this.Sr(t,i,e);if("get"===i[0])return this.Hr&&"name"===i[1].substr(0,4)&&(t.properties["name_zh-Hant"]||t.properties["name_zh-Hans"])||t.properties[i[1]];if("to-number"===i[0])return parseFloat(this.HU(t,i[1],e));if("to-string"===i[0])return(h=this.HU(t,i[1],e))?h+"":"";if("string"===i[0])return(h=this.HU(t,i[1],e))?h+"":"";if("match"===i[0])return this.tV(t,i,e);if("case"===i[0])return this.YU(t,i,e);if("interpolate"===i[0])return this.ZU(t,i,e);if("concat"===i[0])return this.JU(t,i,e);if("step"===i[0])return this.XU(t,i,e);if("coalesce"!==i[0])return"+"===i[0]?this.HU(t,i[1],e)+this.HU(t,i[2],e):"has"===i[0]?void 0!==t.properties[i[1]]:"is-supported-script"===i[0]?this.iV(this.HU(t,i[1],e)):"=="===i[0]?this.HU(t,i[1],e)===this.HU(t,i[2],e):"!="===i[0]?this.HU(t,i[1],e)!==this.HU(t,i[2],e):">"===i[0]?this.HU(t,i[1],e)>this.HU(t,i[2],e):"<"===i[0]?this.HU(t,i[1],e)<this.HU(t,i[2],e):">="===i[0]?this.HU(t,i[1],e)>=this.HU(t,i[2],e):"<="===i[0]?this.HU(t,i[1],e)<=this.HU(t,i[2],e):"in"===i[0]?-1<this.KU(this.HU(t,i[2],e),this.HU(t,i[1],e)):"!in"===i[0]?-1===this.KU(this.HU(t,i[2],e),this.HU(t,i[1],e)):"geometry-type"===i[0]?3===t.type?"Polygon":2===t.type?"LineString":"Point":void 0;for(o=1;o<i.length;o+=1){var u=this.HU(t,i[o],e);if(u)return u}},eV:function(t,i){return!(!i&&(1424<=t&&t<=2303||this.VU["Arabic Presentation Forms-A"](t)||this.VU["Arabic Presentation Forms-B"](t))||2304<=t&&t<=3583||3840<=t&&t<=4255||this.VU.Khmer(t))},iV:function(t){if(!t)return!1;for(var i=0,e=t.length;i<e;i+=1){var r=t[i];if(!this.eV(r.charCodeAt(0),!1))return!1}return!0},getStyle:function(s,h,t,u){var i=s.type,l=(s.properties.class,s.properties.type,this),c=this.styles[h];if(s.properties.iso_3166_1&&-1!==s.properties.iso_3166_1.indexOf("CN"))return{};if(c){var e=function(){for(var t=[],i=0,e=c.length;i<e;i+=1){var r=c[i];if(r.filters){for(var n=!0,a=0;a<r.filters.length;a+=1){var o=r.filters[a];if(!l.HU(s,o,u)){n=!1;break}}n&&t.push(r)}else r.id===h&&t.push(r)}return t}();if(e.length)return 1!==i?2===i?this.lh(e,u,s):3===i?this.Vr(e,u,s):void 0:this.Xr(e,u,s)}},fh:function(t,i){for(var e=1<<20-i.z,r=t.extent/256,n=0;n<t.style.length;n+=1){var a=t.style[n];if("line"!==a.type){var o="";a.hh&&(o=t.properties[a.hh]);for(var s=this.Mr,h=s?1.8*a.rh:a.rh,u=t.lines[0],l=1;l<t.lines.length;l+=1)u.length<t.lines[l].length&&(u=t.lines[l]);for(var c=[],f=0;f<u.length;f+=1){var d=[i.x*e*256+u[f][0]/r*e,256*i.y*e+u[f][1]/r*e];c.push(d)}var v=a.textAnchor;this._r.font=a.rh+"px "+a.ah;var g=this._r.measureText(o).width,p=0,y=0,b=a.nh&&"viewport"===a.Jr;if(a.nh){p=(-t.properties.dh||0)-100;var x=PlaneGeometryUtilInstance.along(c,PlaneGeometryUtilInstance.distanceOfLine(c)/2)||[],m=x[2];"viewport"!==a.Jr&&1<c.length&&(y=360-(new Pixel(c[m+1][0]-c[m][0],c[m+1][1]-c[m][1]).direction()||0)),c=[x[0],x[1]]}else{if(this.vh(u))continue;if(90<(w=new Pixel(u[1][0]-u[0][0],u[1][1]-u[0][1]).direction()||0)&&w<270&&(c.reverse(),u.reverse()),p=-t.properties.dh-1e6,PlaneGeometryUtilInstance.distanceOfLine(c)/e<1.5*g)continue}var R,w={margin:this.mh,foreign:!0,zIndex:a.zIndex,yh:y,rank:p,font:a.ah,Kr:a.Kr,Qr:a.Qr,rh:h,id:t.id,xh:c,name:o,textAlign:"center",textBaseline:"center"===v?"middle":"top",bh:[],gh:new Array,wh:b,_h:!b,kh:!a.nh,th:a.th,Mh:!0,Rh:new Array,zh:!1,zoom:i.z};a.nh?(y=0,p=a.nh.replace("{maki}",t.properties.maki).replace("{shield}",t.properties.shield).replace("{reflen}",t.properties.reflen).replace("{network}",t.properties.network),(b=this.kr[p])&&a.eh&&(y=b.height,R=[-b.width/2,-b.height/2,b.width,b.height,b.x,b.y,b.width,b.height],w.gh.push(R)),o&&(b=p=void 0,b="center"===v?(p=0,-h/2):p=n*(h+2)+y/2,w.Rh.push([o,a.ah,h,a.Kr,a.Qr,0,0,!1,[0,p,s?1.8*g:g,h]]),R=[-g/2,b,g,h],w.gh.push(R)),(y||o)&&(o?w.id="mapbox_guideboard_"+Util.stamp(w):(w.id="mapbox_singleway_"+Util.stamp(w),w.zh=!0),i.labels.push(w))):o&&(w.id="mapbox_roadname_"+Util.stamp(w),i.labels.push(w))}}},Sh:function(t,i){var e=1<<20-i.z,r=t.extent/256,n=t.Ch.xh[0][0],a=t.properties[t.style.hh];if(a){var o=this.Mr?2*t.style.rh:t.style.rh,e=[i.x*e*256+n[0]/r*e,256*i.y*e+n[1]/r*e],s=t.style.textAnchor,h={foreign:!0,margin:this.mh,zIndex:t.style.zIndex,rank:-t.properties.dh||0,id:t.id,xh:e,name:a,textAlign:"center",textBaseline:"center"===s?"middle":"top",bh:[],gh:new Array,yh:0,pos:[n[0]/r,n[1]/r],wh:!0,th:t.style.th,Mh:!0,Rh:new Array},u=0;t.style.nh&&(f=t.style.nh.replace("{maki}",t.properties.maki).replace("{shield}",t.properties.shield).replace("{reflen}",t.properties.reflen).replace("{network}",t.properties.network),(f=this.kr[f])&&t.style.eh&&(u=f.height,y=[-f.width/2,-f.height/2,f.width,f.height,f.x,f.y,f.width,f.height],h.gh=[y]));var l,f=a.indexOf("("),c=0<f?[a.substr(0,f),a.substr(f)]:20<a.length&&1<(l=a.split(" ")).length?(f=Math.floor(l.length/2),[l.slice(0,f).join(" "),l.slice(f).join(" ")]):[a];this._r.font=o+"px "+t.style.ah;for(var d=0;d<c.length;d+=1){var v=c[d],g=this._r.measureText(v).width,p="center"===s?(-.5*c.length+d)*(o+2):d*(o+2)+u/2;h.Rh.push([v,t.style.ah,o,t.style.Kr,t.style.Qr,0,0,!1,[0,p,g,o]]);var y=[-g/2,p,g,o];h.gh.push(y)}return i.labels.push(h),h}},Lh:function(t){var i,e=[],r=[];for(i in t.layers)if(t.layers.hasOwnProperty(i)){for(var n=t.layers[i],a=[],o=0;o<n.Ah.length;o+=1)3==+(s=n.Ah[o]).type?e.push(s):2==+s.type&&a.push(s);for(o=0;o<a.length;o+=1){var s,h=(s=a[o]).style;h.isOutline&&r.push([s,{zIndex:h.Or,Th:h.Yr,strokeStyle:h.Gr,strokeOpacity:h.Wr,strokeDasharray:h.Zr,lineCap:h.Br,strokeWeight:h.borderWidth,strokeColor:h.borderColor}]),r.push([s,{zIndex:h.jr,Th:h.qr,strokeStyle:h.Fr,strokeOpacity:h.Er,strokeDasharray:h.Nr,lineCap:h.Ur,strokeWeight:h.$r,strokeColor:h.faceColor}])}}r.sort(function(t,i){return t[1].zIndex>i[1].zIndex?1:-1}),t.polygons=e,t.Dh=r,delete t.layers},Ph:function(t){t.type,t.lines},jh:function(t,i,e,r){this.mh=3;var n=i.vt;n.labels=[];var a,o=[];for(a in n.layers)if(n.layers.hasOwnProperty(a)){var s=n.layers[a],h=s.Ah;o.push(a);for(var u=0,l=h.length;u<l;u++){var c=h[u];c.Fh=s.name,c.style=this.getStyle(c,s.name,!0,n.z-1),c.style,this.Ph(c),c.style&&(1==+c.type||2==+c.type&&c.style.length&&(this.fh(c,n),"line"===c.style[0].type&&(c.style=c.style[0])))}}this.Lh(n),this.Eh||(this.Eh=!0),e.features=n.labels,n.labels=null,o.length>this.layers.length&&(this.layers=o),r(null,{vt:n})}},MapboxStyle=(yVa.prototype.getMapboxStyle=function(){return mbStyle},yVa);function yVa(t){var i=null,e="";t&&((t=t.KG)&&t.styles&&(i=JSON.parse(t.styles).layers),t&&t.vectorMapForeign&&(e=t.vectorMapForeign)),mbStyle.Rr(i,e)}var LabelFormat=(EVa.prototype.Ns=function(t,i){return i.lang&&(this.lang=i.lang),this.rV(t)},EVa.prototype.rV=function(t){return t},EVa.prototype.Ws=function(t,i){void 0===t&&(t=""),void 0===i&&(i=[]);for(var e=this.Es,i=labelsUtil.EQ(t,i),r=labelsUtil.aQ(i),n=0;n<r.length;n++)e[r[n]]=1},EVa.id="labelFormat",EVa);function EVa(){this.Fs={},this.Es={},this.Ts=[]}var NebulaLabelFormat=(OVa=LabelFormat,__extends(PVa,OVa),PVa.prototype.Ns=function(t,i){return i.lang&&(this.lang=i.lang),this._opts=i,this.bt=i.zoom,this.WW=i.ZL,this.rV(t,i.R_)},PVa.prototype.rV=function(t,i){var e,r,n=t.data||{},a=n.poilabel||[],o={},s=t.cQ;for(e in a)a.hasOwnProperty(e)&&(r=this.nV(a[e],{aV:t.zo.z<10,cQ:s,R_:i}),o[e]=r);return n=n.roadName||[],n=this.oV(n,{R_:i}),o.eA=n,o},PVa.prototype.nV=function(t,i){void 0===i&&(i={});for(var e,r,n,a,o,s,h,u,l,c,f,d,v,g=CONSTS.Lj,p=g.file,y=g.size,b=CONSTS.Mp,m=CONSTS.Pp,w=CONSTS.jp,R=this._opts.scale,T=i.aV,A=i.cQ,M=this.bt,S=[],P=this.lang,C=!A&&5<=M,$=0,I=t;$<I.length;$++){var k=I[$],L=k.cw,N=k.ew,O=k.pos,E=(q=labelsUtil.tQ(k,P,C?i.R_:void 0)).name,_=q.$G||[],j=k.rank,F=k.minzoom||b,U=(T||k.maxzoom,k.Fp),D=k.Ep;if((10002!==U||28!==D)&&((e=this.oA(U,D,this.WW))&&(r=1<R||9<e.fontSize?e.fontSize:9,s=e.sn,h=e.Qe,u=e.forceShow,l=e.zIndex,z=e.zooms,c=labelsUtil.Jj([F,25],z)))){for(var B=(c=labelsUtil.$p(c))[0],G=[],V={};B<=c[1];){var H=this.vn.dn(U,D,B);H&&"0"!==H.He&&(J=H.He,-1===G.indexOf(J)&&(G.push(J),V[J]=[]),V[J].push(B)),B++}(10002!==U||20!==D&&18!==D)&&16<r&&(r=15);var z=[c[0]-m,c[1]+w];10002===U&&(13===D||18===D)&&z[0]<=3&&(z[0]=2.5),f=s&&p[s],j={data:{id:L?L+D:"",position:O,name:E,txt:E,rank:j,BG:q.type,extData:{Lp:U,Ap:D,id:L,type:"poi",bz:N}},opts:{type:"billboard",angle:0,forceShow:u,zIndex:l,visible:!0,zooms:z}},d=e.nn||0,v=e.an||0;for(var W,K=[],q=void 0,L=[0,0],Y=0;Y<G.length;Y++){var J=G[Y],Z=s&&this.aA(parseInt(J,10)),X=y,Q=labelsUtil.$p(V[J]),tt=1;!E||"152"!==J&&"153"!==J&&"154"!==J||(tt=E.length<=2?1:E.length/2),W=vector.Up(X,2),f&&K.push({type:"image",image:f,clipOrigin:vector.add(Z,[0,0]),clipSize:X,size:[W[0]*tt,W[1]],anchor:[10-20*d/24,10-20*v/24],angle:0,retina:!0,zooms:[Q[0]-m,Q[Q.length-1]+w]})}E&&(L=K.length&&K[0].image?(J=G[0],A&&(q="bottom",L=[0,0]),"北京"===E?(q="top",[0,3]):"澳门"===E?(q="left",[0,-2]):"合肥"===E||"太原"===E||"西安"===E||"郑州"===E||"杭州"===E||"台北"===E?(q="bottom",[0,-3]):10002!==U||31!==D&&32!==D&&34!==D&&5!==D?1===h||"152"!==J&&"153"!==J&&"154"!==J?(q="right",[0,-2]):(q="center",[0,-1]):(q="right",[-3,-3])):(q="center",[d,v])),N=""+U+D,(z=this.uA[N])?(n=z.faceColor,a=z.borderColor,o=z.Ke):(n=e.faceColor&&Color.normalize(e.faceColor.rgba),a=e.borderColor&&Color.normalize(e.borderColor.rgba),o=3===e.Qe?e.Ke&&Color.normalize(e.Ke.rgba):null,this.uA[N]={faceColor:n,borderColor:a,Ke:o}),L=E?{direction:q,offset:L,$G:_,style:{fontSize:r,fillColor:n,strokeColor:a,strokeWidth:2,padding:[0,1,0,1],backgroundColor:o,fold:!A&&5<=M}}:{},j.opts&&(j.opts.icon=K,j.opts.text=L),f&&(this.Fs[f]=1),E&&this.Ws(E,_),S.push(j),e=null}}return S},PVa.prototype.oV=function(t,i){for(var e=CONSTS.Lj,r=e.file,n=e.size,a=CONSTS.Mp,o=CONSTS.Rp,s=CONSTS.Pp,h=CONSTS.jp,u=[],l=this._opts.scale,c=this.lang,f=0,d=t;f<d.length;f++){var v,g=d[f],p=g.path,y=g.rank,b=g.minzoom||a,x=g.maxzoom||o,m=g.shield,w=g.shieldType,R=labelsUtil.tQ(g,c),T=R.name,A=R.$G;T&&this.Ws(T,A),m&&((v=Math.floor(p.length/2))<1||(g=[p[v-1],p[v]],A=w,(p=this.oA(40001,A,this.WW))&&(v=1<l||9<p.fontSize?p.fontSize:9,w=p.faceColor,p=p.He,b={data:{id:Util.stamp(this),position:g,positionType:"relative",name:T,txt:m,rank:y,BG:R.type,extData:{type:"shield",Lp:40001,Ap:A}},opts:{type:"billboard",angle:0,zooms:[b-s,x+h],visible:!0}},x=this.aA(parseInt(p,10)),p=1<m.length/4?m.length/4:1,p=1<l?p:9*p/7,p={type:"image",image:r[0],clipOrigin:x,clipSize:n,size:[24*p,24],anchor:"center",angle:0,retina:!0},w=m?{direction:"center",offset:[0,0],style:{fontSize:v,fillColor:w&&Color.normalize(w.rgba),strokeWidth:0,padding:[0,1,0,1]}}:{},b.opts&&(b.opts.text=w,b.opts.icon=[p]),m&&this.Ws(m),u.push(b))))}return u},PVa.prototype.DQ=function(t,i){for(var s,e=CONSTS.Mp,r=CONSTS.Rp,n=CONSTS.Pp,a=CONSTS.jp,o=this.WW=i.zoom,h=[],u=this.lang,l=0,c=t;l<c.length;l++){var f,d,v,g,p,y,b,x,m=c[l],w=m.id,R=(p=labelsUtil.tQ(m,u)).name,T=p.$G||[];R&&(f=p.type,x=labelsUtil.EQ(R,T),d=labelsUtil.aQ(x),v=m.rank,y=m.Fp,b=m.Ep,s=m.distance||0,g=m.minzoom||e,p=m.maxzoom||r,y=(m=(x=this.vn.dn(y,b,o))&&x[1]||{}).fontSize,b=m.faceColor,x=m.borderColor,g=(m=labelsUtil.$p([g,p]))[0],p=m[1],R&&w&&y&&b&&(x={id:w,positionType:"relative",name:R,$G:T,CO:d,rank:v,BG:f,distance:s,zooms:[g-n,p+a],style:{fontSize:y,fillColor:vector.Up(b.rgba,255),strokeColor:x&&vector.Up(x.rgba,255)}},h.push(x)))}return h},PVa.prototype.aA=function(t){var e=(i=CONSTS.Lj).Rj,r=i.size,i=Math.floor(t/e);return t%10==0&&--i,[(t-e*i-1)*r[0],i*r[1]]},PVa.prototype.oA=function(t,i,e){var r=[3,20],n=this.vn.dn(t,i,e),a=this.vn.mn(t,i);if(!n)for(var o=1;(r[0]<=e-o||e+o<=r[1])&&!(n=(n=this.vn.dn(t,i,e-o))||this.vn.dn(t,i,e+o));)o++;return n&&(n.zooms=a),n},PVa.prototype.mN=function(t,i){var e=[0,0];if("0"===t)switch(i){case"3":e=[6,6];break;case"4":case"5":case"6":e=[9,9]}return e},PVa.prototype.TN=function(t,i,e){if(void 0===e&&(e=[0,0]),"0"===t)switch(i){case"3":e=[30,30];break;case"4":case"5":case"6":e=[20,20]}return e},PVa.id="nebula",PVa),OVa;function PVa(t){var i=OVa.call(this)||this;return i.bt=20,i.WW=20,i._opts={},i.uA={},i.vn=t.vn,i}var geoUtil$1=new GeometryUtilCls({}),CONSTS$2={sV:"https://webapi.amap.com/style_icon/sprite_v8@2x.png",EU:[LangConf.my.type,LangConf.km.type,LangConf.PU.type,LangConf.th.type,LangConf.$U.type]},MapboxLabelFormat=($Ya=LabelFormat,__extends(_Ya,$Ya),_Ya.prototype.Ns=function(t,i){return $Ya.prototype.Ns.call(this,t,i),this.rV(t)},_Ya.prototype.rV=function(t){var i,e,r=t.data||{},n=r.poilabel||[],a={},o=this.hV(t);for(i in n)n.hasOwnProperty(i)&&(e=n[i],e=this.nV(e,o),a[i]=e);return r=r.roadName||[],this.oV(r,{}),a},_Ya.prototype.nV=function(t,i){for(var e=[],r=this.kQ,n=0,a=t;n<a.length;n++){var o,s,h,u,l,c,f,d=a[n],v=d.name,g=d.position,p=d.id,y=d.minzoom,b=d.maxzoom,x=d.style,m=void 0===x?{}:x;i&&!this.uV(g[0])||(o=m.lV,s=m.th,h=m.ih,u=m.nh,c=m.qU,l=m.eh,d=void 0===(f=m.textAnchor)?"bottom":f,x=m.rh,m.sh,f=m.Kr,m=m.Qr,y=[y,b],b=null,u&&c&&l&&(this.Fs[CONSTS$2.sV]=1,b=[{image:CONSTS$2.sV,size:[c[6]/2,c[7]/2],clipOrigin:[c[4],c[5]],clipSize:[c[6],c[7]]}]),u=null,v&&f&&(r[f]||(r[f]=Util.color2RgbaArray(f)),l=r[f],c=void 0,f=0,r[m]||(r[m]=Util.color2RgbaArray(m||"")),r[m]&&(c=r[m],f=3),m=this.fV(v)?[0,v.length]:[],this.Ws(v,m),u={txt:v,$G:m,direction:d||"center",offset:[0,0],style:{fontSize:x,fillColor:l,strokeColor:c,strokeWidth:f,fold:!1}}),y={data:{id:p,name:v,txt:v,position:g[0],positionType:"relative",zooms:[s,h],extData:{id:p,type:"poi"}},opts:{zIndex:o,zooms:y,visible:!0}},b&&(y.opts.icon=b),u&&(y.opts.text=u),(y.opts.text||y.opts.icon)&&e.push(y))}return e},_Ya.prototype.oV=function(t,i){for(var e=0,r=t;e<r.length;e++){var n=r[e].name,a=this.fV(n)?[0,n.length]:[];n&&this.Ws(n,a)}},_Ya.prototype.DQ=function(t,i){for(var e=[],r=0,n=t;r<n.length;r++){var o=(a=n[r]).path,s=a.name||"",h=labelsUtil.aQ(s.split("")),u=a.distance||1e5,c=void 0===(l=(g=a.style&&a.style[1]||{}).th)?2:l,d=void 0===(f=g.ih)?22:f,v=g.Kr,a=g.Qr,l=g.rh,f=g.zIndex,g=void 0===(g=g.Hr)?"name_en":g;s&&o&&o.length&&(a={path:o,positionType:"absolute",name:s,$G:[],CO:h,rank:f,BG:g,distance:u,zooms:[c,d],style:{fontSize:l||12,fillColor:v,strokeColor:a}},e.push(a))}return e},_Ya.prototype.fV=function(t){return t=LangManager.kU(t),-1!==CONSTS$2.EU.indexOf(t)},_Ya.prototype.uV=function(t){for(var i=ProjectionManager.getProjection("EPSG:3857").unproject(t[0],t[1]),e=outseaData.boundsP16,r=0;r<e.length;r++){var n=e[r];if(geoUtil$1.isPointInPolygon(i,n[0]))return!1}return!0},_Ya.prototype.hV=function(t){return t=[[(t=t.Ro)[0],t[1]],[t[2],t[1]],[t[2],t[3]],[t[0],t[3]]],this.cV(t)},_Ya.prototype.cV=function(t){for(var i=[],e=0;e<t.length;e++){var r=t[e],r=ProjectionManager.getProjection("EPSG:3857").unproject(r[0],r[1]);i.push(r)}for(var n=outseaData.boundsP16,a=0;a<n.length;a++){var o=n[a];if(geoUtil$1.isRingInRingByMapboxB(i,o[0]))return!0}return!1},_Ya.id="mapbox",_Ya),$Ya;function _Ya(t){var i=$Ya.call(this)||this;return i.kQ={},i}var Actor=(V$a.prototype.send=function(t,i,e,r){var n=this,a=e?this.dI+":"+this.bI:null;this.bI+=2,e&&a&&(this.pI[a]=e);var o=[],s=serialize(i,o);if(this.target.postMessage({yI:r,mI:this.dI,type:t,id:String(a),data:s},o),e)return{cancel:function(){n.target.postMessage({yI:r,mI:n.dI,type:"<cancel>",id:String(a),key:i.ya}),a&&delete n.pI[a]}}},V$a.prototype.gI=function(t){var r,i,n=this,a=(t=t.data).id;t.yI&&this.dI!==t.yI||("<cancel>"===t.type?(i=this.pI[t.id],delete this.pI[t.id],i&&i("<cancel>")):"<response>"===t.type?(i=this.pI[t.id],delete this.pI[t.id],i&&t.error?i(deserialize(t.error)):i&&i(null,deserialize(t.data))):void 0!==t.id&&this.parent[t.type]&&(r=function(t,i){delete n.pI[a];var e=[],i=serialize(i,e);n.target.postMessage({mI:n.dI,type:"<response>",id:String(a),error:t?serialize(t):null,data:i},e),r=void 0},this.pI[t.id]=null,(i=this.parent[t.type](t.mI,deserialize(t.data),r))&&null===this.pI[t.id]&&(this.pI[t.id]=i.cancel)))},V$a.prototype.remove=function(){this.target.removeEventListener("message",this.gI,!1)},V$a);function V$a(t,i,e){this.UD=!1,this.gI=this.gI.bind(this),this.target=t,this.parent=i,this.dI=e,this.pI={},this.bI=Browser.DW?1:0,this.target.addEventListener("message",this.gI,!1)}var TaskPool=(r_a.prototype.nS=function(e,t){var r=this;return this.SN[e]=!0,this.listener[e]||(this.listener[e]=[]),t(function(t,i){r.$N(e,t,i)})},r_a.prototype.cancel=function(t){delete this.SN[t]},r_a.prototype.has=function(t){return Boolean(this.SN[t])},r_a.prototype.GN=function(t){return this.listener[t]&&0<this.listener[t].length},r_a.prototype.SH=function(t,i){this.listener[t]||(this.listener[t]=[]),this.listener[t].push(i)},r_a.prototype.kN=function(t,i){!this.listener[t]||-1<(i=this.listener[t].indexOf(i))&&this.listener[t].splice(i,1)},r_a.prototype.$N=function(t,i,e){delete this.SN[t];var r=this.listener[t];if(delete this.listener[t],r)for(var n=0,a=r;n<a.length;n++)(0,a[n])(i,e)},r_a);function r_a(){this.listener={},this.SN={}}var StaticSDFManagerWorker=(M_a.prototype.oa=function(t,i,e){var a=this,o=staticSDFTileKeyToKey(t);if(!o)return console.log("!key"),e(null,[void 0,""]),{cancel:noop};var s=(t=this.fc())+o+".json",h=t+o+(i?".webp":".png");return void 0!==this._N[o]&&void 0!==this.NN[o]?(e(null,[this._N[o],this.NN[o]]),{cancel:noop}):(i=this.LN.has(o),this.LN.SH(o,u),i?{cancel:noop}:this.LN.nS(o,function(e){var r=0,n=[],t=a.ON(s,function(t,i){t?"404"!==t?(console.log(t),e(t,null)):(n[0]=i?{}:null,a._N[o]=n[0],2==++r&&e(null,n)):(n[0]=i,a._N[o]=i,2==++r&&e(null,n))}),i=a.IN(h,function(t,i){if(t||!i)"404"!==t?(console.log(t),e(t,i)):(n[1]="",a.NN[o]=n[1],2==++r&&e(null,n));else if(!i||i&&i.byteLength<128)n[1]="",a.NN[o]=n[1],2==++r&&e(null,n);else{if(i=new Blob([i],{type:"image/webp"}),!(i=URLObject.createObjectURL(i)))return console.log("createObjectURL fail"),void e("createObjectURL fail",null);n[1]=i,a.NN[o]=i,2==++r&&e(null,n)}});return"lesszoom10"!==o?{cancel:function(){a.LN.kN(o,u),a.LN.GN(o)||(t.abort(),i.abort(),a.LN.cancel(o)),u("cancel",null)}}:{cancel:function(){a.LN.kN(o,u),u("cancel",null)}}}));function u(t,i){e(t,i)}},M_a.prototype.NW=function(t){var i=this.NN[t];i&&URLObject.revokeObjectURL(i),delete this.NN[t],delete this._N[t]},M_a.prototype.zW=function(t){this._N={},this.NN={},this.jN=["://glyph.amap.com/sdf"+t+"/","://glyph01.amap.com/sdf"+t+"/","://glyph01.amap.com/sdf"+t+"/","://glyph02.amap.com/sdf"+t+"/","://glyph03.amap.com/sdf"+t+"/","://glyph04.amap.com/sdf"+t+"/"]},M_a.prototype.ON=function(t,i){return this.CN.send(t,{Me:"json",method:"get",qw:function(t){i(null,t||null)},Aw:function(t){i(t&&t.message||"unknown error")}})},M_a.prototype.IN=function(t,i){return this.CN.send(t,{Me:"arraybuffer",method:"get",qw:function(t){t?i(null,t):i("empty data",null)},Aw:function(t){i(t&&t.message||"unknown error")}})},M_a.prototype.fc=function(){this.EN=this.EN%this.jN.length;var t=this.parent.protocol+this.jN[this.EN];return this.EN++,t},M_a);function M_a(t,i){this.parent=t,this.CN=i,this.jN=[],this.EN=0,this._N={},this.NN={},this.LN=new TaskPool,this.zW(this.parent.GW.db),this.parent.Uh.send("updateDataVersion",this.parent.GW.nebulaVersion)}var emptyObj={},SDFStaticTextureCache=(A0a.prototype.xH=function(t,i){void 0===i&&(i=!1);var e=staticSDFTileKeyToKey(t),r=this.RN[e];if(i){if(!r)return;r.indexOf(t)<0&&r.push(t)}return this.DN.getImage(e)},A0a.prototype.LB=function(t){return t=staticSDFTileKeyToKey(t),this.XN[t]||emptyObj},A0a.prototype.bH=function(r,n,a,o){var s=this,h=staticSDFTileKeyToKey(r);this.DN.addImage(h,{url:n,cb:function(t,i){var e;t||(URLObject.revokeObjectURL(n),s.RN[h]||(s.RN[h]=[],s.XN[h]=a),(e=s.RN[h]).indexOf(r)<0&&e.push(r)),o(t,i)}})},A0a.prototype.kH=function(t){var i=staticSDFTileKeyToKey(t),e=this.RN[i];e?(0<=(t=e.indexOf(t))&&e.splice(t,1),0===e.length&&(this.DN.RH(i),this.UN.deleteTileStaticSDF(i),delete this.RN[i],delete this.XN[i])):delete this.XN[i]},A0a);function A0a(t,i,e){this.parent=t,this.DN=i,this.UN=e,this.RN={},this.XN={}}exports.Ge=AMapStyleSource,exports.Bh=Actor,exports.bb=BezierUtil,exports.BuildingLayer=BuildingLayer,exports.tc=CONSTS,exports._n=Color,exports.hL=Coordinate,exports.La=DynamicVertice,exports.Event=Event,exports.iz=FillExtrusionBucket,exports.GeometryUtil=GeometryUtil,exports.rW=GeometryUtilCls,exports.x_=HALF_WORLD_SIZE,exports.hG=InnerLabelsSource,exports.eG=Labels,exports.bG=LangManager,exports.lw=Layer,exports.LngLat=LngLat$2,exports.za=LocalTileZoom,exports.Ra=LocalZoom,exports.RG=MapboxLabelFormat,exports.fQ=MapboxSegements,exports.XG=MapboxStyle,exports.vo=MockTextureManager,exports.Module=Module,exports.PG=NebulaLabelFormat,exports._w=NebulaSegements,exports.pa=NebulaTile,exports.TD=NebulaTileCache,exports.wa=NebulaTileCoord,exports.pw=Pbf,exports.Pixel=Pixel,exports.kS=PlaneGeometryUtilInstance,exports.K_=PolygonBucket,exports.oE=PolygonSegements,exports.J_=PolylineBucket,exports.at=ProjectionManager,exports.tS=Queue,exports.MB=QueueBuilder,exports.Vs=RasterTile,exports.vG=SDFManagerBase,exports.jb=SDFManagerWorker,exports.LH=SDFStaticTextureCache,exports.Size=Size,exports.yp=SmartArrayBuffer,exports.IG=SmartTypedArray,exports.BE=Source,exports.xW=StaticSDFManagerWorker,exports.Cn=StyleParser,exports._=Browser,exports.vH=Task,exports.IH=TaskPool,exports.Am=TextCombineTexture,exports.Gh=Tile,exports.OD=TileCache,exports.ca=TileCoord,exports.V=transform,exports.cc=URLObject,exports.Util=Util,exports.Sw=VectorTile$1,exports.tW=VectorTile,exports.LW=VectorTileSegements,exports.Yw=XHR,exports.Ei=__extends,exports.Pt=__spreadArrays,exports.assign=assign,exports.jw=calcTileMectorBounds,exports.clone=clone$1,exports.Ex=clone,exports.yn=cloneDeep,exports.eg=copy,exports.create=create$3,exports.Il=create,exports.Dl=create$1,exports.Zl=create$2,exports.Db=distanceBetweenPos,exports.oL=distanceOfMultiPolyline,exports.nL=distanceOfPolyline,exports.equals=equals$1,exports.Ru=equals,exports.every=every,exports.filter=filter,exports.find=find,exports.findIndex=findIndex,exports.forEach=forEach$3,exports.vx=forIn,exports.Bu=fromValues$3,exports.xd=fromValues$2,exports.sL=generateGeodesicPath,exports.sE=generatePathForRectangle,exports.lE=generatePathFromCircle,exports.hE=generatePathFromEllipse,exports.N$=getMultiPolygonArea,exports.E$=getPolygonArea,exports.Ol=getTranslation,exports.Ul=invert,exports.VB=isBezierCurve,exports.xs=isBounds,exports.sB=isCircleMarker,exports.isEmpty=isEmpty,exports.isEqual=isEqual,exports.isFunction=isFunction,exports.qG=isInnerLabelsLayer,exports.px=isLayer,exports.Bs=isLngLat,exports.iL=isLnglatLikeArray,exports.eL=isLnglatLikeArrayArray,exports.yL=isLnglatLikeArrayArrayArray,exports.ys=isNumberArrayArray,exports.Ox=isNumberArrayArrayArray,exports.tL=isNumberArrayArrayArrayArray,exports.er=isOverlay,exports.RF=isOverlayGroup,exports.oy=isPixel,exports.GB=isPolyline,exports.ay=isSize,exports.jz=isUndefined,exports.FF=isVectorLayer,exports.jsonLngLatData=jsonLngLatData,exports.keys=keys,exports.bf=labelsUtil,exports.lcs=lcs,exports.lookAt=lookAt,exports.map=map,exports.V$=moveMultiPolygonWithPixel,exports.J$=moveMultiPolygonWithPos,exports.H$=movePolygonWithPixel,exports.Y$=movePolygonWithPos,exports.G$=moveRingWithPixel,exports.Z$=moveRingWithPos,exports.K$=multiPolygonJson,exports.aL=multiPolylineJson,exports.multiply=multiply,exports.ou=ortho,exports.outseaData=outseaData,exports.parseLngLatData=parseLngLatData,exports.perspective=perspective,exports.W$=pointInMultiPolygon,exports.rE=pointInMultiPolygonIndex,exports.U$=pointInPolygon,exports.pointInRing=pointInRing,exports.scale=scale,exports.set=set$1,exports.Pl=set,exports.some=some,exports.subtract=subtract,exports.TH=testWepP,exports.Gu=transformMat4,exports.Sp=vector}),define(["./shared"],function(StaticSDFManagerWorker){var Ring={read:function(A,g){return A.nw(Ring.iw,{path:[]},g)},iw:function(A,g,I){0===A&&I.tw(g.path,!0)},write:function(A,g){if(A.path)for(var I=0;I<A.path.length;I++)g.rw(0,A.path[I])}},Building={read:function(A,g){return A.nw(Building.iw,{minzoom:0,maxzoom:0,path:[],height:0,ew:""},g)},iw:function(A,g,I){0===A?g.minzoom=I.ow():1===A?g.maxzoom=I.ow():2===A?g.path.push(Ring.read(I,I.ow()+I.pos)):3===A?g.height=I.ow():4===A&&(g.ew=I.aw())},write:function(A,g){if(A.minzoom&&g.rw(0,A.minzoom),A.maxzoom&&g.rw(1,A.maxzoom),A.path)for(var I=0;I<A.path.length;I++)g.fw(2,Ring.write,A.path[I]);A.height&&g.rw(3,A.height),A.ew&&g.uw(4,A.ew)}},BuildingSameStyle={read:function(A,g){return A.nw(BuildingSameStyle.iw,{mainkey:0,subkey:0,items:[],resolution:0},g)},iw:function(A,g,I){0===A?g.mainkey=I.ow():1===A?g.subkey=I.ow():2===A?g.items.push(Building.read(I,I.ow()+I.pos)):3===A&&(g.resolution=I.ow())},write:function(A,g){if(A.mainkey&&g.rw(0,A.mainkey),A.subkey&&g.rw(1,A.subkey),A.items)for(var I=0;I<A.items.length;I++)g.fw(2,Building.write,A.items[I]);A.resolution&&g.rw(3,A.resolution)}},buildingLayer={read:function(A,g){return A.nw(buildingLayer.iw,{building:[]},g)},iw:function(A,g,I){0===A&&g.building.push(BuildingSameStyle.read(I,I.ow()+I.pos))},write:function(A,g){if(A.building)for(var I=0;I<A.building.length;I++)g.fw(0,BuildingSameStyle.write,A.building[I])}},Poi={read:function(A,g){return A.nw(Poi.IQ,{minzoom:0,maxzoom:0,pos:[],cw:"",ew:"",name:"",rank:0,BQ:"",name_en:"",QQ:"",CQ:"",$G:[],iQ:[],JQ:[]},g)},IQ:function(A,g,I){0===A?g.minzoom=I.ow():1===A?g.maxzoom=I.ow():2===A?I.tw(g.pos,!0):3===A?g.cw=I.aw():4===A?g.ew=I.aw():5===A?g.name=I.aw():6===A?g.rank=I.ow():7===A?g.BQ=I.aw():8===A?g.name_en=I.aw():9===A?g.QQ=I.aw():10===A?g.CQ=I.aw():11===A?I.tw(g.$G):12===A?I.tw(g.iQ):13===A&&I.tw(g.JQ)},write:function(A,g){if(A.minzoom&&g.rw(0,A.minzoom),A.maxzoom&&g.rw(1,A.maxzoom),A.pos)for(var I=0;I<A.pos.length;I++)g.rw(2,A.pos[I]);if(A.cw&&g.uw(3,A.cw),A.ew&&g.uw(4,A.ew),A.name&&g.uw(5,A.name),A.rank&&g.rw(6,A.rank),A.BQ&&g.uw(7,A.BQ),A.name_en&&g.uw(8,A.name_en),A.QQ&&g.uw(9,A.QQ),A.CQ&&g.uw(10,A.CQ),A.$G)for(I=0;I<A.$G.length;I++)g.rw(11,A.$G[I]);if(A.iQ)for(I=0;I<A.iQ.length;I++)g.rw(12,A.iQ[I]);if(A.JQ)for(I=0;I<A.JQ.length;I++)g.rw(13,A.JQ[I])}},PoiSameStyle={read:function(A,g){return A.nw(PoiSameStyle.IQ,{mainkey:0,subkey:0,items:[],resolution:0},g)},IQ:function(A,g,I){0===A?g.mainkey=I.ow():1===A?g.subkey=I.ow():2===A?g.items.push(Poi.read(I,I.ow()+I.pos)):3===A&&(g.resolution=I.ow())},write:function(A,g){if(A.mainkey&&g.rw(0,A.mainkey),A.subkey&&g.rw(1,A.subkey),A.items)for(var I=0;I<A.items.length;I++)g.fw(2,Poi.write,A.items[I]);A.resolution&&g.rw(3,A.resolution)}},PoiLayer={read:function(A,g){return A.nw(PoiLayer.IQ,{poilabel:[]},g)},IQ:function(A,g,I){0===A&&g.poilabel.push(PoiSameStyle.read(I,I.ow()+I.pos))},write:function(A,g){if(A.poilabel)for(var I=0;I<A.poilabel.length;I++)g.fw(0,PoiSameStyle.write,A.poilabel[I])}},Ring$1={read:function(A,g){return A.nw(Ring$1.iw,{path:[]},g)},iw:function(A,g,I){0===A&&I.tw(g.path,!0)},write:function(A,g){if(A.path)for(var I=0;I<A.path.length;I++)g.rw(0,A.path[I])}},Region={read:function(A,g){return A.nw(Region.iw,{minzoom:0,maxzoom:0,path:[],sw:""},g)},iw:function(A,g,I){0===A?g.minzoom=I.ow():1===A?g.maxzoom=I.ow():2===A?g.path.push(Ring$1.read(I,I.ow()+I.pos)):3===A&&(g.sw=I.aw())},write:function(A,g){if(A.minzoom&&g.rw(0,A.minzoom),A.maxzoom&&g.rw(1,A.maxzoom),A.path)for(var I=0;I<A.path.length;I++)g.fw(2,Ring$1.write,A.path[I]);A.sw&&g.uw(3,A.sw)}},RegionSameStyle={read:function(A,g){return A.nw(RegionSameStyle.iw,{mainkey:0,subkey:0,items:[],resolution:0},g)},iw:function(A,g,I){0===A?g.mainkey=I.ow():1===A?g.subkey=I.ow():2===A?g.items.push(Region.read(I,I.ow()+I.pos)):3===A&&(g.resolution=I.ow())},write:function(A,g){if(A.mainkey&&g.rw(0,A.mainkey),A.subkey&&g.rw(1,A.subkey),A.items)for(var I=0;I<A.items.length;I++)g.fw(2,Region.write,A.items[I]);A.resolution&&g.rw(3,A.resolution)}},regionLayer={read:function(A,g){return A.nw(regionLayer.iw,{region:[]},g)},iw:function(A,g,I){0===A&&g.region.push(RegionSameStyle.read(I,I.ow()+I.pos))},write:function(A,g){if(A.region)for(var I=0;I<A.region.length;I++)g.fw(0,RegionSameStyle.write,A.region[I])}},Road={read:function(A,g){return A.nw(Road.iw,{minzoom:0,maxzoom:0,path:[],shield:"",shieldType:0,name:"",rank:0,name_en:"",BQ:"",QQ:"",CQ:"",$G:[],iQ:[]},g)},iw:function(A,g,I){0===A?g.minzoom=I.ow():1===A?g.maxzoom=I.ow():2===A?I.tw(g.path,!0):3===A?g.shield=I.aw():4===A?g.shieldType=I.ow():5===A?g.name=I.aw():6===A?g.rank=I.ow():7===A?g.BQ=I.aw():8===A?g.name_en=I.aw():9===A?g.QQ=I.aw():10===A?g.CQ=I.aw():11===A?I.tw(g.$G):12===A&&(g.id=I.ow())},write:function(A,g){if(A.minzoom&&g.rw(0,A.minzoom),A.maxzoom&&g.rw(1,A.maxzoom),A.path)for(var I=0;I<A.path.length;I++)g.rw(2,A.path[I]);if(A.shield&&g.uw(3,A.shield),A.shieldType&&g.rw(4,A.shieldType),A.name&&g.uw(5,A.name),A.rank&&g.rw(6,A.rank),A.BQ&&g.uw(7,A.BQ),A.name_en&&g.uw(8,A.name_en),A.QQ&&g.uw(9,A.QQ),A.CQ&&g.uw(10,A.CQ),A.$G)for(I=0;I<A.$G.length;I++)g.rw(11,A.$G[I]);A.id&&g.rw(12,A.id)}},RoadSameStyle={read:function(A,g){return A.nw(RoadSameStyle.iw,{mainkey:0,subkey:0,items:[],resolution:0},g)},iw:function(A,g,I,B){0===A?g.mainkey=I.ow():1===A?g.subkey=I.ow():2===A?g.items.push(Road.read(I,I.ow()+I.pos)):3===A&&(g.resolution=I.ow())},write:function(A,g){if(A.mainkey&&g.rw(0,A.mainkey),A.subkey&&g.rw(1,A.subkey),A.items)for(var I=0;I<A.items.length;I++)g.fw(2,Road.write,A.items[I]);A.resolution&&g.rw(3,A.resolution)}},roadLayer={read:function(A,g){return A.nw(roadLayer.iw,{road:[]},g)},iw:function(A,g,I,B){0===A&&g.road.push(RoadSameStyle.read(I,I.ow()+I.pos))},write:function(A,g){if(A.road)for(var I=0;I<A.road.length;I++)g.fw(0,RoadSameStyle.write,A.road[I])}},roadNameLayer={read:function(A,g){return A.nw(roadNameLayer.iw,{roadName:[]},g)},iw:function(A,g,I,B){0===A&&g.roadName.push(RoadSameStyle.read(I,I.ow()+I.pos))},write:function(A,g){if(A.roadName)for(var I=0;I<A.road.length;I++)g.fw(0,RoadSameStyle.write,A.roadName[I])}},Result={read:function(A,g){return A.nw(Result.IQ,{tiles:[],version:"",status:!1,db:""},g)},IQ:function(A,g,I){0===A?g.tiles.push(Result.Gh.read(I,I.ow()+I.pos)):1===A?g.version=I.aw():2===A?g.status=I.vw():3===A&&(g.db=I.aw())},write:function(A,g){if(A.tiles)for(var I=0;I<A.tiles.length;I++)g.fw(0,Result.Gh.write,A.tiles[I]);A.version&&g.uw(1,A.version),A.status&&g.hw(2,A.status),A.db&&g.uw(3,A.db)},Gh:{}};Result.Gh.read=function(A,g){return A.nw(Result.Gh.IQ,{z:0,x:0,y:0,layers:[],t:0},g)},Result.Gh.IQ=function(A,g,I){0===A?g.z=I.ow():1===A?g.x=I.ow():2===A?g.y=I.ow():3===A?g.layers.push(Result.Gh.lw.read(I,I.ow()+I.pos)):4===A&&(g.t=I.ow())},Result.Gh.write=function(A,g){if(A.z&&g.rw(0,A.z),A.x&&g.rw(1,A.x),A.y&&g.rw(2,A.y),A.layers)for(var I=0;I<A.layers.length;I++)g.fw(3,Result.Gh.lw.write,A.layers[I]);A.t&&g.rw(4,A.t)},Result.Gh.lw={},Result.Gh.lw.read=function(A,g){return A.nw(Result.Gh.lw.IQ,{z:0,x:0,y:0,type:0,d:null,t:0},g)},Result.Gh.lw.IQ=function(A,g,I){0===A?g.z=I.ow():1===A?g.x=I.ow():2===A?g.y=I.ow():3===A?g.type=I.ow():4===A?g.d=I.mw():5===A&&(g.t=I.ow())},Result.Gh.lw.write=function(A,g){A.z&&g.rw(0,A.z),A.x&&g.rw(1,A.x),A.y&&g.rw(2,A.y),A.type&&g.rw(3,A.type),A.d&&g.ww(4,A.d),A.t&&g.rw(5,A.t)};var decodePois=function(A){return A=new StaticSDFManagerWorker.pw(A),PoiLayer.read(A)},decodeRoads=function(A){return A=new StaticSDFManagerWorker.pw(A),roadLayer.read(A)},decodeRoadNames=function(A){return A=new StaticSDFManagerWorker.pw(A),roadNameLayer.read(A)},decodeRegions=function(A){return A=new StaticSDFManagerWorker.pw(A),regionLayer.read(A)},decodeBuildings=function(A){return A=new StaticSDFManagerWorker.pw(A),buildingLayer.read(A)},decodeTiles=function(A){for(var A=new StaticSDFManagerWorker.pw(A),g=(A=Result.read(A)).tiles,I=0,B=g.length;I<B;I+=1)for(var Q=g[I].layers,C=0,i=Q.length;C<i;C+=1)switch(Q[C].type){case 0:Q[C].d=decodePois(Q[C].d);break;case 1:Q[C].d=decodeRoads(Q[C].d);break;case 2:Q[C].d=decodeRegions(Q[C].d);break;case 3:Q[C].d=decodeBuildings(Q[C].d);break;case 4:Q[C].d=decodeRoadNames(Q[C].d)}return A},DEF_NDS_MAX_COORD=2147483648,DEF_DEGREE_MAX_COORD=180,MIN_LAT_WGS=-90,MAX_LAT_WGS=90,MIN_LON_WGS=-180,MAX_LON_WGS=180,MKT=20037508.342789244;function tileInnerCoord2LngLat(A,g,I,B){var C=I+(Q=getTileSWCoord(A,g))[0],Q=B+Q[1];return I=C<<(g=getCoordShift(A.z,g)),B=Q<<g,0<C&&I<0&&(I=DEF_NDS_MAX_COORD-1),[coord2Degree(I),coord2Degree(B)]}function lnglat2WGSCoord(A,g,I,B){return g=getCoordShift(A,g),B<MIN_LAT_WGS&&(B=MIN_LAT_WGS),MAX_LAT_WGS<B&&(B=MAX_LAT_WGS),I<MIN_LON_WGS&&(I=MIN_LON_WGS),MAX_LON_WGS<I&&(I=MAX_LON_WGS),I=degree2Coord(I)/(1<<g),g=degree2Coord(B)/(1<<g),[0<I?Math.floor(.5+I):Math.floor(I-.5),0<g?Math.floor(.5+g):Math.floor(g-.5)]}function getWorldSize(A,g){return[2*(g=lnglat2WGSCoord(A,g,180,90))[0],2*g[1]]}function getTileSWCoord(A,g){var B=(I=getWorldSize(A.z,g))[0],g=I[1],I=1<<A.z;return[-B/2+A.x*B/I,g/2-(A.y+1)*g/I]}function degree2Coord(A){return Math.floor(A*DEF_NDS_MAX_COORD/DEF_DEGREE_MAX_COORD+.5)}function coord2Degree(A){return A*DEF_DEGREE_MAX_COORD/DEF_NDS_MAX_COORD}function getCoordShift(A,g){return 33-g-A}function getMVTTileBbox(A,g,I,B,Q){return void 0===Q&&(Q=256),[A*Q*B-MKT,-((g+1)*Q*B-MKT),(A+1)*Q*B-MKT,-(g*Q*B-MKT)]}var CONSTS={ID:"__id__",Rp:22,Mp:2,jp:.8,Pp:.2,YM:5,KM:{dom:"div",id:"_amap_custom_labellayer_div_",className:"amap-layer",style:{cssText:"position:absolute;top:0;left:0;",zIndex:"",width:"",height:"",visible:""}},Dp:{Op:180,Ad:70,Td:260,Bd:Math.PI/10},XM:{top:3,right:3,bottom:3,left:3},JM:{ZM:"top",QM:"right",tj:"bottom",LEFT:"left",nj:"middle",ij:"center",ej:"alphabetic"},oj:{CLICK:"click",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",aj:"touchstart",uj:"touchend"},sj:{rank:1,angle:0,opacity:1,offset:[0,0],zooms:[3,20],icon:{type:"image",image:"://visuallocal.amap.com/public/poi-marker.png",clipOrigin:[0,0],clipSize:[36,36],size:[36,36],anchor:"bottom-center",angel:0,retina:!0,zooms:[3,20]},text:{type:"billboard",direction:"top",offset:[0,0],zooms:[3,20],style:{fj:6,fontFamily:"sans-serif",fontSize:12,fontWeight:"normal",fillColor:[0,0,0,1],strokeWidth:0,strokeColor:[.988,.988,.988,1],borderColor:"transparent",padding:[3,3,3,3],backgroundColor:""}}},hj:{cj:{opacity:.2},vj:"fadeIn",lj:"fadeOut",dj:{bj:"start",RUNNING:"running",pj:"complete"},yj:{mj:"opacity",gj:"size"}},_d:3,wj:"_AMap_sdf_com_words",Mj:128,pc:["://sdf.amap.com","://sdf01.amap.com","://sdf02.amap.com","://sdf03.amap.com","://sdf04.amap.com"],Qu:1,sp:4,ec:24,Cd:.78125,Ld:205/256,Aj:{kj:"纹理加载失败，请重试",Oj:"资源加载失败，请重试"},xj:"bufferChanged",Ij:"frameBufferChanged",Tj:"combineFrameBufferChanged",Fj:3,_j:2,IB:3,Sj:8,ic:1,ud:12,Cj:12,Ej:"__icon_combination",Nj:"__text_combination",Lj:{file:{0:"https://vdata.amap.com/style_icon/2.0/icon-normal-big.png",1:"https://vdata.amap.com/style_icon/2.0/icon-biz-big.png"},size:[40,40],Rj:10},Kp:{buffer:3,family:"ios9",size:24},_n:{Uj:[0,0,0,1],Gp:[0,0,0,0]},yN:{version:"2.1",range:["32-40863"],urlPrefix:"://glyph.amap.com/static/"},gH:"sdf",RB:"sdfJson",FN:"version"},ImageStatus,_c,_c=ImageStatus=ImageStatus||{};_c.BLOB="blob",_c.TOLOAD="toload",_c.LOADING="loading",_c.LOADED="loaded",_c.UNLOADED="unloaded",_c.ERROR="error",_c.RELOADING="reloading",_c.UNCOMBINED="uncombined",_c.COMBINING="combining",_c.COMBINED="combined";var labelsUtil={Bj:function(A){void 0===A&&(A={});var g,I={};for(g in A)A.hasOwnProperty(g)&&(I[g]=1);return I},zj:function(A,g){A.gs=g,A.qj=g.options||{},A.Wj=g.Wj||{},A.Fs=g.Fs||{},A.Gj=g.Gj||{},A.Hj=g.Hj||{},A.Vj=g.Vj||{},A.$j=g.$j||0},Yj:function(A,g){void 0===A&&(A=[NaN,NaN,NaN,NaN]),void 0===g&&(g=[0,0,0,1]);for(var I=0;I<A.length;I++){var B=A[I];isNaN(B)&&(A[I]=g[I])}return A},Kj:function(A){return[((16711680&A)>>16)/255,((65280&A)>>8)/255,(255&A)/255,1]},Xj:function(A,g){void 0===g&&(g={});for(var I=[],B=g.qw,Q=g.Aw,C=g.complete,i=0,E=A;i<E.length;i++){var t=E[i],t=new Promise(t);I.push(t)}var o=0;Promise.all(I).then(function(){B&&B.apply(void 0,arguments),C&&!o&&(o=1,C.apply(void 0,arguments))}).catch(function(){Q&&Q.apply(void 0,arguments),C&&!o&&(o=1,C.apply(void 0,arguments))})},Jj:function(A,g){var B=void 0===(I=A[0])?0:I,C=void 0===(Q=A[1])?0:Q,Q=void 0===(I=g[0])?0:I,I=void 0===(I=g[1])?0:I;return A=B<=Q?Q<=C?I<C?[Q,I]:[Q,C]:null:labelsUtil.Jj(g,A)},measureText:function(A,g,I,B){if(void 0===g&&(g=""),void 0===B&&(B="3D"),"3D"===B)return A.measureText(g,I)},lnglatToContainer:function(A,g){return(void 0===(g=g.zoom)?20:g)<StaticSDFManagerWorker.Ra?A:(g=StaticSDFManagerWorker.lcs.getLocalByCoord(A),vector.Ip(A,g.center))},Sd:function(A,g){var B=void 0===(I=A[0])?0:I,A=void 0===(I=A[1])?0:I,I=void 0===(I=g[0])?0:I,g=void 0===(g=g[1])?0:g,B=Math.abs(I-B),A=Math.abs(g-A);return Math.sqrt(Math.pow(B,2)+Math.pow(A,2))},getAngle:function(A,g){var B=void 0===(I=A[0])?0:I,A=void 0===(I=A[1])?0:I,I=void 0===(I=g[0])?0:I,A=(void 0===(g=g[1])?0:g)-A;return 0==(B=I-B)?A<0?3*Math.PI/2:Math.PI/2:0===(A=Math.atan(A/B))||0<A?0<=B?A:A+Math.PI:0<B?2*Math.PI+A:Math.PI+A},Fd:function(A,g,I){for(var B=A[0],Q=void 0===B?0:B,C=void 0===(A=A[1])?0:A,i=(A=void 0===(A=g[0])?0:A)-Q,E=(void 0===(g=g[1])?0:g)-C,t=[],o=0;o<I;){var a=[Q+i/(I+1)*(o+1),C+E/(I+1)*(o+1)];t.push(a),o++}return t},OG:function(A,g,I){return 0===I?A:[A[0]+(g[0]-A[0])*I,A[1]+(g[1]-A[1])*I]},Ed:function(A,g){if(void 0===A&&(A=[]),void 0===g&&(g="ch"),!(I=A.length))return!1;var B=A[0],Q=A[4<=I?Math.floor(I/4*3):I-1],C=B[0],A=B[1],I=Q[0],Q=((B=Q[1])-A)/(I-C),A=[I-C,B-A];return(A="ch"===g&&1<Math.abs(Q)?vector.Zj(A,[0,1]):vector.Zj(A,[1,0]))<0},Nd:function(A,g,I){var B,Q=A[0],C=A[1],i=g[0],g=((A=g[1])-C)/(i-Q),C=[i-Q,A-C];return 1<Math.abs(g)&&"x"!==I?(B=0<vector.Zj(C,[0,-1])?vector.Qj(C,[0,-1]):vector.Qj(C,[0,1]),0<g&&(B=-B)):(B=0<vector.Zj(C,[1,0])?vector.Qj(C,[1,0]):vector.Qj(C,[-1,0]),g<0&&(B=-B)),B},Od:function(A,g,I){var B=I*Math.sin(g),g=I*Math.cos(g);return[A[0]+g,A[1]+B]},jd:function(A,g,I,B){var Q=vector.Ip(A,g),C=vector.length(Q),A=vector.Ip(I,g),I=vector.length(A),Q=vector.Zj(Q,A),Q=Math.acos(Q/(C*I)),I=Math.PI-Q,Q=C*Math.sin(I),I=C*Math.cos(I),B=Math.sqrt(Math.pow(B,2)-Math.pow(Q,2))-I,Q=0===A[0]?0<A[1]?Math.PI/2:-Math.PI/2:Math.atan(A[1]/A[0]),I=Math.abs(B*Math.sin(Q)),Q=B*Math.cos(Q),I=[0<=vector.Zj(A,[1,0])?Q:-Q,0<=vector.Zj(A,[0,1])?I:-I];return vector.add(g,I)},rank:function(A){for(var g=[],I=0;I<A.length;I++){var B=parseInt(A[I],10);B<0&&(A.splice(I--,1),g.push(B+""))}return g.concat(A)},$p:function(A){var g=CONSTS.Mp,I=CONSTS.Rp;return 20<=A[1]&&(A[1]=I),A[0]<=3&&(A[0]=g),A},toString:function(A,g){void 0===g&&(g=4);var I="";if(!A)return I;for(var B=0,Q=A;B<Q.length;B++){var C=Q[B];I+=(C+"").length<g?C:C.toFixed(g)}return I},xf:function(A,g){var I,B,Q,C=[],i=g.ja,E=g.Fa,t=g.Oa,o=g.Ea;for(I in A)A.hasOwnProperty(I)&&I!==CONSTS.gH&&I!==CONSTS.FN&&I!==CONSTS.RB&&("shields"!==I&&i?(Q=I.split("-"),B=parseInt(Q[1],10),Q=parseInt(Q[2],10),i<=B&&B<=t&&E<=Q&&Q<=o&&C.push(A[I])):C.push(A[I]));return C.length||(C=A),C},EQ:function(A,g){for(var I=[],B=g.length,Q=0;Q<B-1;Q++){var C=A.substring(g[Q],g[Q+1]);I.push(C)}return B||(I=A.split("")),I},aQ:function(A){for(var g=[],I=0;I<A.length;I++){for(var B=A[I],Q=[],C=0;C<B.length;C++){var i=B.charCodeAt(C);Q.push(i)}var E=Q.join("|");g.push(E)}return g},tQ:function(A,g,I){var B="",Q=[],C="";if(A.name)if(A.JQ&&0<A.JQ.length)B=getSpiltLineWithSpiltIndex(A.name,A.JQ),C="ch";else if(I){var i=I.lineBreak(A.name,{from:"labelsLayer",CO:[]}),E=0,t="";if(2<=i.oQ.length){for(var o=1,a=i.oQ.length-1;o<a;o++)t+=A.name.slice(E,i.oQ[o])+" ",E=i.oQ[o];t+=A.name.slice(E)}else t=A.name;B=t,C="ch"}else B=A.name,C="ch";else{switch(g){case"en":B=A.name_en,Q=A.iQ,C="en";break;case"local":B=A.QQ,Q=A.$G,C=A.CQ;break;case"zh_cn":B=A.BQ,C="ch";break;default:B=A.BQ,C="ch"}B||(A.name_en?(B=A.name_en,Q=A.iQ,C="en"):A.QQ&&(B=A.QQ,Q=A.$G,C=A.QQ))}return{name:B,$G:Q,type:C}}},vector={add:function(A,g){for(var I=[],B=0;B<A.length;B++)I[B]=A[B]+g[B];return I},Ip:function(A,g){for(var I=[],B=0;B<A.length;B++)I.push(A[B]-g[B]);return I},multiply:function(A,g){for(var I=[],B=0,Q=A;B<Q.length;B++){var C=Q[B];I.push(C*g)}return I},Up:function(A,g){for(var I=[],B=0;B<A.length;B++)I[B]=A[B]/g;return I},tA:function(A){return this.multiply(A,-1)},Zj:function(A,g){var I=A[0],B=void 0===I?0:I,A=void 0===(I=A[1])?0:I;return B*(I=void 0===(I=g[0])?0:I)+A*(void 0===(g=g[1])?0:g)},Qj:function(A,g){var I=vector.Zj(A,g),A=vector.length(A),g=vector.length(g);return Math.acos(I/(A*g))},length:function(A){var g=A[0],A=A[1];return Math.sqrt(Math.pow(g,2)+Math.pow(A,2))}};function getSpiltLineWithSpiltIndex(A,g){if(g.shift(),0===g.length)return A;for(var I="",B=0,Q=0,C=g.length;Q<C;Q++)I+=A.substr(B,g[Q]-B)+" ",B=g[Q];return I+A.substr(g[g.length-1])}var LabelPlacement=(Kh.prototype.nO=function(A,g){void 0===g&&(g={}),this.iO=g.from||"inner",labelsUtil.zj(this,A),this.eO(g)},Kh.prototype.oO=function(){return this.gs.aO()},Kh.prototype.uO=function(){return this.oO().viewMode,!0},Kh.prototype.eO=function(A){void 0===A&&(A={});var g,I,B,Q,C,i=A.center,E=this.Gj||{},t=this.Vj||{},o=this.Hj||{},a=this.iO,r=0;for(g in E)E.hasOwnProperty(g)&&g&&(C=E[g]||{},o[g]=this.sO(g,C),t[g]=this.fO(g,C,o[g],{from:a,center:i}),I=C.data.txt,B=(Q=C.opts).icon,Q=Q.text||{},C=C.CO,I&&C&&(r+=C.length+1,Q.style&&Q.style.borderWidth&&(r+=4)),B&&B.length&&B[0].image&&(r+=B.length));this.$j=r,this.Vj=t,this.Hj=o},Kh.prototype.hO=function(A,g){void 0===A&&(A=[]),void 0===g&&(g=[]);var I=CONSTS.Mp,B=CONSTS.Rp,Q=A[0]||I,A=A[1]||B;return[(I=g[0]||I)<Q?Q:I,A<(B=g[1]||B)?A:B]},Kh.prototype.cO=function(A,g){void 0===A&&(A={});var I={};return I.type=A.type||g.type,I.image=A.image||"",I.clipOrigin=A.clipOrigin||g.clipOrigin,I.clipSize=A.clipSize,I.size=A.size,I.anchor=A.anchor||g.anchor,I.angel=A.angel||g.angel,I.retina=A.retina||g.retina,I.zooms=A.zooms||g.zooms,I},Kh.prototype.vO=function(A,g){void 0===A&&(A={});var I={};I.type=A.type||g.type,I.direction=A.direction||g.direction,I.offset=A.offset||g.offset,I.zooms=A.zooms||g.zooms;var B=g.style,Q=A.style||{};return I.style={},I.style.fontFamily=Q.fontFamily||B.fontFamily,I.style.fontSize=Q.fontSize||B.fontSize,I.style.fontWeight=Q.fontWeight||B.fontWeight,I.style.fillColor=Q.fillColor||B.fillColor,g=Q.strokeColor,A=Q.strokeWidth,StaticSDFManagerWorker.jz(A)&&StaticSDFManagerWorker.jz(g)?I.style.strokeWidth=B.strokeWidth:StaticSDFManagerWorker.jz(A)&&!StaticSDFManagerWorker.jz(g)?I.style.strokeWidth=1:I.style.strokeWidth=Q.strokeWidth,I.style.borderColor=Q.borderColor,I.style.borderWidth=Q.borderWidth,I.style.strokeColor=Q.strokeColor||B.strokeColor,I.style.borderColor=Q.borderColor||B.borderColor,I.style.backgroundColor=Q.backgroundColor,I.style.padding=Q.padding||B.padding,I.style.fold=void 0!==Q.fold&&Q.fold,I},Kh.prototype.lO=function(A){return[(A=(this.ac.Fs||{})[A]||{}).width||36,A.height||36]},Kh.prototype.dO=function(A,g){var I=CONSTS.sj;return(I=this.cO(A,I.icon)).zooms=A.zooms||g.bO,g=this.hO(g.zooms,I.zooms),I.zooms=g,I.size&&I.clipSize||(A=(g=this.lO(A.image||""))[0]||0,g=g[1]||0,I.size||(I.size=[A,g]),I.clipSize||(I.clipSize=[A,g])),I},Kh.prototype.pO=function(A,g){void 0===A&&(A={});var I=CONSTS.sj,B=this.vO(A,I.text);return B.zooms=A.zooms||g.bO,I=B.direction,A=g.yO,A=(I=this.mO(I||"",A)).textAlign,I=I.verticalAlign,B.style&&(B.style.textAlign=A,B.style.verticalAlign=I),g=this.hO(g.zooms,B.zooms),B.zooms=g,B},Kh.prototype.sO=function(A,g){var B=(I=g.data)&&I.txt,C=(Q=g.opts||{}).angle||0,i=StaticSDFManagerWorker.jz(Q.opacity)?1:Q.opacity,E=Q.icon,I=Q.text,g=Q.zooms,Q=Q.visible,t={angle:C,opacity:i,zooms:this.options.zooms,bO:g},o=[];if(E)for(var a=0,r=E;a<r.length;a++){var e=r[a];o.push(this.dO(e,t))}return t.yO=!!E,(I=B?this.pO(I,t):null)&&(I.txt=B),Q={icon:o,text:I,visible:Q},"labelsLayer"===this.iO&&(Q.tn=1),Q},Kh.prototype.gO=function(A){if(this.oO().zoom<StaticSDFManagerWorker.Ra)return A;var g=StaticSDFManagerWorker.lcs.getLocalByCoord(A);return vector.Ip(A,g.center)},Kh.prototype.wO=function(A,g){if(!g||!g.image)return{size:[0,0],origin:A,anchorOffset:[0,0],coords:A};var I=CONSTS.sj.icon,B=g.size||this.lO(g.image),I=g.anchor||I.anchor;return{size:B,origin:A,anchorOffset:I=this._getAnchorOffset(B,I),coords:vector.add(A,I)}},Kh.prototype.MO=function(A,t,I){if(void 0===A&&(A="icon"),"text"!==A)return Q=void 0===(Q=t.size)?[]:Q,t.coords,{x:(C=t.c)[0],y:C[1],width:Q[0]||0,height:Q[1]||0};var B=t.origin,Q=(t.start,I.padding),C=I.c,i=void 0,t=Q.offsetX,A=Q.offsetY,I=Q.w,Q=Q.h,E=this.uO()?(i=C[0],C[1]):(i=B[0],B[1]);return{x:i+t,y:E+A,width:I,height:Q}},Kh.prototype._getAnchorOffset=function(A,g){var I=CONSTS.JM,B=A[0]||0,Q=A[1]||0;if("[object Array]"===Object.prototype.toString.apply(g)){var C=g[0],i=g[1];if("number"==typeof C&&"number"==typeof i)return vector.tA(g)}else if("string"==typeof g){switch(C=(A=g.split("-"))[0],i=A[1],A=g=0,C!==I.ij||i||(C=I.nj,i=I.ij),i){case I.LEFT:g=0;break;case I.ij:g=-B/2;break;case I.QM:g=-B;break;default:g=0}switch(C){case I.ZM:A=0;break;case I.nj:A=-Q/2;break;case I.tj:A=-Q;break;default:A=0}return[g,A]}return[0,0]},Kh.prototype.jO=function(A){return this._getAnchorOffset(A.size||[0,0],"middle-center")},Kh.prototype.AO=function(A,g,I,B){void 0===B&&(B={});var C,i=CONSTS.JM,t=void 0===(E=B.kO)?0:E,a=void 0!==(o=B.yO)&&o,r=B.padding,e=B.lines,c=(n=this.jO(A))[0]||0,s=n[1]||0,S=(h=A.anchorOffset||[])[0]||0,D=h[1]||0,o=(E=A.size||[])[0]||0,B=E[1]||0,n=S-c,h=D-s,A=r[0],E=r[1],c=r[2],s=r[3],r=.8*t;switch(I){case i.ZM:Q=a?(C=n,D-c-.2*t-(w=r*e+3*(e-1))):(C=S+s,D+A);break;case i.QM:var w=r/2*e+1.5*(e-1),Q=a?(C=S+o+s,h-w):(C=S-E,D-w-c);break;case i.tj:Q=a?(C=n,D+B+A):(C=S+s,D-c-(w=r*e+3*(e-1)));break;case i.LEFT:w=r/2*e+1.5*(e-1);Q=a?(C=S-E,h-w):(C=S+s,D-w-c);break;case i.nj:case i.ij:Q=a?(C=S+o/2,h-(w=r/2*e+1.5*(e-1))):(C=S,D-(w=r/2*e+1.5*(e-1))-c);break;default:C=S,Q=D-(w=r/2*e+1.5*(e-1))-c}return[C,Q]},Kh.prototype.OO=function(A,g){void 0===g&&(g={});var I,B,Q=CONSTS.JM,C=g.xO,i=(g.kO,g.yO),E=g.direction,t=g.lines,o=g.size,g=(g.IO,A[0]||0),A=A[1]||0;switch(this.mO(E,i).textAlign){case Q.LEFT:I=g,B=A;break;case Q.QM:I=g-C,B=A;break;case Q.ij:I=g-C/2,B=A}return{x:I,y:B,w:C,h:this.TO(o,t),FO:g,_O:A}},Kh.prototype.mO=function(A,g){var I,B,Q=CONSTS.JM;if(g)switch(A){case Q.LEFT:I=Q.QM;break;case Q.QM:I=Q.LEFT;break;case Q.ZM:case Q.tj:default:I=Q.ij,B=Q.tj}else switch(A){case Q.LEFT:case Q.ij:case Q.QM:I=A,B=Q.tj;break;case Q.ZM:case Q.tj:case Q.nj:default:I=Q.LEFT,B=A}return{textAlign:I,verticalAlign:B}},Kh.prototype.TO=function(A,g){return void 0===A&&(A=12),void 0===g&&(g=1),(A*=5/4)*g+3*(g-1)},Kh.prototype.CT=function(A,g){return this.Mf?this.Mf.measureText(A,g):this.NT?(this.NT.font=(g||12)+"px",this.NT.measureText(A.join("")).width):0},Kh.prototype.SO=function(A,g,I){if(!g||!I.txt)return{origin:A.origin,offset:[0,0],coords:A.coords,start:{}};var Q=(B=CONSTS.sj.text).direction,C=B.offset,i=B.style,E=I.yO,t=I.CO,o=g.direction||Q,a=g.offset||C,Q=(B=g.style||i).fontSize||12,C=B.padding||i.padding,g=!1===B.fold?100:i.fj,B=I.txt.length,t=(i=this.Mf.lineBreak(I.txt,{fontSize:Q,CO:t,type:I.BG||"ch",fj:g,YQ:this.NT,from:I.from})).lines.length,I=this.TO(Q,1),B={xO:i.maxWidth,kO:I,yO:E,direction:o,padding:C,fj:g,lines:t,size:Q,IO:B},o=this.AO(A,A.size,o,B),o=vector.add(o,a),a=vector.add(A.origin,o),B=this.OO(a,B);return{origin:A.origin,offset:o,coords:a,start:B}},Kh.prototype.EO=function(A,g,I){if(!g||!I.txt)return{offsetX:0,offsetY:0,w:0,h:0};var B,Q,C=CONSTS.JM,i=CONSTS.sj,E=(A.coords,A.start),a=(o=void 0===(t=A.offset)?[]:t)[0],r=o[1],e=E.w,A=E.h,t=I.yO,E=(o=i.text).direction,I=o.style,i=g.direction||E,E=(o=(g.style||I).padding||I.padding)[0],g=o[1],I=o[2],o=o[3];if(t)switch(i){case C.ZM:B=a-e/2-o,Q=r-E;break;case C.QM:B=a-o,Q=r-E;break;case C.tj:B=a-e/2-o,Q=r-E;break;case C.LEFT:B=a-e-o,Q=r-E;break;case C.nj:case C.ij:B=a-e/2-o,Q=r-E;break;default:B=a-e/2-o,Q=r+I}else switch(i){case C.ZM:B=a-o,Q=r+I;break;case C.QM:B=a-e-o,Q=r+I;break;case C.tj:case C.LEFT:B=a-o,Q=r+I;break;case C.nj:case C.ij:B=a-e/2-o,Q=r-E;break;default:B=a-e/2-o,Q=r+I}return{offsetX:B,offsetY:Q,w:e+o+g,h:A+E+I}},Kh.prototype.fO=function(A,g,I,B){void 0===B&&(B={});var Q=B.from,C=B.center,i=g.data,E=g.opts||{},t=i.position,o=i.txt,a=E.icon,E=I.text,I=g.CO,g=this.oO().zoom,g="inner"!==Q||"relative"!==i.positionType&&g>=StaticSDFManagerWorker.Ra?vector.Ip(t,C):t,C=vector.add(g,[0,0]),t=!!a,a=this.wO(C,a&&a[0]),B=this.SO(a,E,{CO:I,txt:o,yO:t,BG:i.BG,from:B.from}),t={txt:o,yO:t};return{origin:g,icon:a,text:B,padding:this.EO(B,E,t)}},Kh);function Kh(A){this.options={},this.Gj={},this.Hj={},this.Vj={},this.Wj={},this.$j=0,this.render=null,this.NO={},this.ac=A.z_,this.Mf=A.R_,this.io=A.canvas,this.NT=A.Nz}var LabelGroup=(Bm.prototype.nT=function(A){if(!A)return"";var g=A.fontSize,B=void 0===(I=A.fillColor)?CONSTS.COLOR.Uj:I,C=void 0===(Q=A.strokeColor)?CONSTS.COLOR.Uj:Q,I=A.strokeWidth,Q=A.backgroundColor,A=A.borderColor,I=labelsUtil.toString(B)+labelsUtil.toString(C)+(Q?labelsUtil.toString(Q):""+(A?labelsUtil.toString(A):""))+g+I;return this.AS(I),this.oT[I]},Bm.prototype.AS=function(A){this.oT[A]||(this.oT[A]=this.index++)},Bm);function Bm(){this.oT={},this.index=1}var labelGroup=new LabelGroup,angle=0,LabelBucket=(Om.prototype.rQ=function(A,g){var B=void 0===(I=g.from)?"inner":I,Q=CONSTS.ud;labelsUtil.zj(this,A),this.iO=B;var I=this.Mf&&"SDFManagerBase"!==this.Mf.CLASS_NAME,C=this.DO;I&&(C.rp=new Float32Array(this.$j*Q*6));var i=this.Gj,E=this.Hj,t=this.Vj;if(!E||!t)return null;var A=StaticSDFManagerWorker.assign(this.options,g),B=this.RO(i),o=StaticSDFManagerWorker.jz(A.opacity)?1:A.opacity;if(I){for(var a,r=0,e=0,n=0,c=B;n<c.length;n++){var s=c[n],S={vd:[]};(h=E[s[0]])&&h.text&&h.text.style&&(D=E[s[0]].text.style||{},S.vd=this.pO(D)),a=e,S.start=a;var D=(h=i[s[0]].opts||{}).opacity,D=StaticSDFManagerWorker.jz(D)?1:D,h=h.icon&&h.icon[0]&&h.icon[0].image;S.opacity=D,S.opacity*=o,C.pp.push(S),S.dp=[];for(var w=0,F=s;w<F.length;w++){var f=F[w],M=i[f].CO||[],u={height:i[f]&&i[f].opts.height||0,from:g.from},k=this.PO(f,t[f],E[f],C,u),G=this.UO(f,t[f],E[f],C,u),u=6*((M=this.BO(f,t[f],E[f],i[f],C,M,u))+k+G);S.dp.push({id:f,Rd:M,icon:k,bg:G,kd:u}),e+=u*Q}S.end=e,S.pd=h,r+=h=e-a,C.bd.push(h)}C.up=r}return C.Fz=B,this.DO=C},Om.prototype.ym=function(){return this.gs.aO()},Om.prototype.zO=function(A){if(!A)return[];var g=this.qO;return g[A]||(g=labelsUtil.Kj(parseInt(A,10)),this.qO[A]=g,this.qO[A])},Om.prototype.RO=function(A){var g,I,B,Q,C,i={},E=this.Gj,t=this.iO;for(r in A)A.hasOwnProperty(r)&&(C=(I=E[r]).data||{},Q=(B=I.opts||{}).zIndex,s=C.rank,s=B.forceShow?s-1e5:s,g=StaticSDFManagerWorker.jz(B.opacity)?1:B.opacity,I=("labelsLayer"===t?Q||s:Q)||1,Q=void 0===(B=(C=this.Hj[r]||{}).text)?{}:B,B=C.icon,i[I]=i[I]||{},C=void 0,C=(Q=Q&&Q.style||"")?labelGroup.nT(Q)+g:"-1-"+g,"labelsLayer"===t&&(C+=B&&B[0]&&B[0].image?B[0].image:""),i[I][C]||(i[I][C]=[]),i[I][C].push(r));for(var o=Object.keys(i),a=[],r=0;r<o.length;r++)(s=parseInt(o[r],10))<0&&(o.splice(r--,1),a.push(s+""));for(var e=[],n=0,c=o=a.concat(o);n<c.length;n++)for(var s,h=i[s=c[n]],S=0,D=Object.keys(h).sort();S<D.length;S++){var w=D[S];e.push(h[w])}return e},Om.prototype.WO=function(A,g){var I=StaticSDFManagerWorker.Util.WorldAxesCenter;return[A-I.x,g-I.y]},Om.prototype.GO=function(A){return A},Om.prototype.HO=function(A,g,I,B,Q){var C=Q.VO,E=void 0===(i=Q.type)?0:i,t=Q.zooms,o=Q.height,r=void 0===(a=g.icon)?[]:a,e=CONSTS.ud,n=this.$O,c=0,s=0;(h=this.ac.getImage(I.image))&&(c=h.startX||0,s=h.startY||0);var S=C[0],D=C[1],w=CONSTS._j,F=t[0],i=t[1],Q=w,g=r.anchorOffset,a=I.size,h=I.clipSize,C=I.clipOrigin,t=a[0],w=a[1],r=h[0],I=h[1],a=C[0],h=C[1],g=(C=this.GO(g))[0]||0,C=C[1]||0,a=c+a,h=s+h;B.set([g,C,a,h,S,D,Q,E,F,i,o,angle,g+t,C,a+r,h,S,D,Q,E,F,i,o,angle,g,w+C,a,h+I,S,D,Q,E,F,i,o,angle,g+t,C,a+r,h,S,D,Q,E,F,i,o,angle,g+t,w+C,a+r,h+I,S,D,Q,E,F,i,o,angle,g,w+C,a,h+I,S,D,Q,E,F,i,o,angle],n),this.$O+=6*e},Om.prototype.PO=function(A,g,I,B,Q){if(!g||!I)return 0;var C=g.icon,i=void 0===C?{}:C;if(!(C=void 0===(E=I.icon)?[]:E).length||!C[0].image)return 0;for(var E=(I=i.origin)[0],i=I[1],t=(I[2],this.WO(E,i)),o=Q.height,a=0,r=C;a<r.length;a++){var e=r[a];this.HO(A,g,e,B.rp,{VO:t,zooms:e.zooms,height:o})}return C.length},Om.prototype.YO=function(A,g,I,B,Q){var C=Q.VO,E=void 0===(i=Q.type)?6:i,t=Q.zooms,o=Q.height,a=CONSTS.ud,r=this.$O,e=g.padding,n=C[0],c=C[1],i=t[0],Q=t[1],g=e.w,C=e.h,t=e.offsetX,e=e.offsetY;if(B.set([t,e,0,0,n,c,0,E,i,Q,o,angle,t+g,e,0,0,n,c,0,E,i,Q,o,angle,t,C+e,0,0,n,c,0,E,i,Q,o,angle,t+g,e,0,0,n,c,0,E,i,Q,o,angle,t+g,C+e,0,0,n,c,0,E,i,Q,o,angle,t,C+e,0,0,n,c,0,E,i,Q,o,angle],r),this.$O+=6*a,r=this.$O,I=I.text.style.borderWidth){for(var s=[t,e,g,C,n,c,I,i,Q,o,angle],h=0;h<4;h++)s[11]=h,this.sT(s,B,r),r+=6*a;this.$O=r}},Om.prototype.sT=function(A,g,I){void 0===A&&(A={});var B=A[0],Q=A[1],C=A[2],i=A[3],E=A[4],t=A[5],o=A[6],a=A[7],r=A[8],e=A[9],n=A[10],c=0,s=0,h=0,S=0,D=0,w=0,F=0,f=0;switch(A[11]){case 0:S=s=Q-o,D=c=B+0,F=h=B+C,f=w=Q+0;break;case 1:h=(c=B+C)+o,S=s=Q-o,F=(D=B+C)+o,f=w=Q+i+o;break;case 2:D=c=B+0,F=h=B+C,f=w=(S=s=Q+i)+o;break;case 3:c=B-o,S=s=Q-o,D=(h=B)-o,F=B,f=w=Q+i+o}g.set([c,s,0,0,E,t,0,8,a,r,e,n,h,S,0,0,E,t,0,8,a,r,e,n,D,w,0,0,E,t,0,8,a,r,e,n,h,S,0,0,E,t,0,8,a,r,e,n,D,w,0,0,E,t,0,8,a,r,e,n,F,f,0,0,E,t,0,8,a,r,e,n],I)},Om.prototype.UO=function(A,g,I,B,Q){if(!g||!I)return 0;var C=CONSTS.Mp,i=CONSTS.Rp,E=g.text,t=(I.text||{}).zooms,C=void 0===t?[C,i]:t;return I.text&&E.origin?(t=(i=E.origin)[0],E=i[1],i[2],E=[t,E],Q=Q.height,this.YO(A,g,I,B.rp,{VO:E,zooms:C,height:Q}),Q=1,I.text.style.borderWidth&&(Q+=4),Q):0},Om.prototype.pO=function(A){var g=CONSTS.ec,I=this.ym().KO,B=void 0===I?1:I,C=void 0===(Q=A.fontSize)?12:Q,E=void 0===(i=A.fillColor)?[0,0,0,1]:i,t=A.strokeColor,a=void 0===(o=A.strokeWidth)?0:o,Q=void 0===(I=A.backgroundColor)?0:I,i=A.borderColor,E=labelsUtil.Yj(StaticSDFManagerWorker.Util.color2RgbaArray(E)),Q=Q?labelsUtil.Yj(StaticSDFManagerWorker.Util.color2RgbaArray(Q)):[0,0,0,0],t=labelsUtil.Yj(StaticSDFManagerWorker.Util.color2RgbaArray(t),[.988,.988,.988,1]),i=labelsUtil.Yj(StaticSDFManagerWorker.Util.color2RgbaArray(i),[.988,.988,.988,1]),o=(C=C||12)<10?.78125:205/256,A=0;return a&&(A=o*(1-(a=10<a*B?10:a)/10.1)),I=1.4142*(g<C||1<B?1.7:1.5)/C,o+=1.5/256*(B-1),(B=new Float32Array(19)).set(E,0),B.set(t,4),B[8]=I,B[9]=A,B[10]=o,B.set(Q,11),B.set(i,15),B},Om.prototype.CT=function(A,g){return this.Mf?this.Mf.measureText(A,g):this.NT?(this.NT.font=(g||12)+"px",this.NT.measureText(A.join("")).width):0},Om.prototype.XO=function(A,g){void 0===A&&(A=[]),void 0===g&&(g={});var I=CONSTS.JM,B=CONSTS.ec,C=void 0===(Q=g.direction)?I.LEFT:Q,Q=void 0===(Q=g.size)?B:Q,g=g.yO,g=this.CT(A,Q),A=0,Q=0;switch(C){case I.LEFT:A=-g,Q=0;break;case I.QM:Q=A=0;break;case I.ZM:case I.tj:A=-g/2,Q=0;break;case I.ij:case I.nj:A=-g/2,Q=0;break;default:Q=A=0}return[A,Q]},Om.prototype.JO=function(A,g,I,B){var Q=CONSTS.Qu,C=CONSTS.ud,i=this.$O,E=B.size,t=B.VO,a=void 0===(o=B.type)?2:o,r=(B.id,B.zooms),e=B.height,n=CONSTS.Kp,s=(c=this.Mf.mz(g)||{index:CONSTS.IB,char:this.PN[g],pos:{startX:0,startY:0}}).index,h=c.pos,S=c.char,D=t[0],w=t[1],F=r[0],f=r[1];S||(console.log("!metric",g,String.fromCharCode(g)),S=this.Mf.mz(32).char);var M=E/n.size,u=S[0],k=S[1],o=S[2],B=S[3],c=S[4],t=S[5],r=S[6],g=n.buffer;0<u&&0<k&&(u+=2*g,k+=2*g,S=+((E=I.x)+(o-g)*M),n=+(E+(o-g+u)*M),o=(E=I.y)-B*M,g=+(E+(k-B)*M),B=E=0,Q<=s&&(E+=h.startX,B+=h.startY),t=E+t,r=B+r,A.set([S,o,t,r,D,w,s,a,F,f,e,angle,n,o,t+u,r,D,w,s,a,F,f,e,angle,S,g,t,r+k,D,w,s,a,F,f,e,angle,S,g,t,r+k,D,w,s,a,F,f,e,angle,n,o,t+u,r,D,w,s,a,F,f,e,angle,n,g,t+u,r+k,D,w,s,a,F,f,e,angle],i),this.$O+=6*C),I.x=I.x+(c+CONSTS.ic)*M},Om.prototype.BO=function(A,g,I,B,Q,C,i){if(void 0===B&&(B={}),!g||!I)return 0;var E=CONSTS.Mp,t=CONSTS.Rp,o=I,r=(a=g.text).origin,e=a.offset,a=void 0===(g=(I=o.text||{}).style)?{}:g,g=void 0===(g=(I.type,I.direction))?"left":g,n=void 0===(I=I.zooms)?[E,t]:I,c=C,I=r[0],C=r[1];if(r[2],!o.text||!o.text.style)return 0;for(var s=c.length,h=s,r=!1===a.fold?100:6,S=((r=this.Mf.lineBreak(o.text.txt,{fontSize:a.fontSize,CO:B.CO,type:B.data&&B.data.BG||"ch",fj:r,from:i.from})).lines.length,r.oQ),D=a.fontSize,w={direction:g,size:D,yO:o.icon.length&&o.icon[0].image},F=[I,C],f={x:0,y:0},M=i.height,u=-1,k=0,G=0;G<s;G++){var d=c[G],y=this.eQ(S,k);k+=d.split("|").length;var l=this.nQ(c,S[y],S[y+1]),l=c.slice.apply(c,l),l=this.XO(l,w),l=vector.add(e,l);if(0===y&&0===G&&(f.x=l[0],f.y=l[1]),y&&(f.y=l[1]+(D+3)*y,u!==y)){if("32"===d){h--;continue}f.x=l[0]}u=y,this.JO(Q.rp,d,f,{size:D,VO:F,id:A,zooms:n,height:M})}return h},Om.prototype.nQ=function(A,g,I){for(var B=0,Q=0,C=0,i=A.length,E=0;E<i;E++){for(var t=A[E].split("|").length,o=0;o<t;o++){var a=C+o;a===g&&(B=E),a===I&&(Q=E)}C+=t}return C<=I&&(Q=i),[B,Q]},Om.prototype.eQ=function(A,g){void 0===A&&(A=[]);for(var I=A.length,B=0;B<I-1;B++)if(g>=A[B]&&g<A[B+1])return B;return 0},Om);function Om(A){this.DO={rp:[],pp:[],bd:[],up:0},this.ZO=[],this.options={},this.Gj={},this.Hj={},this.Vj={},this.QO={},this.tI={},this.Fs={},this.$j=0,this.qO={},this.$O=0,this.rI={},this.iO="inner",this.No=StaticSDFManagerWorker.Util.stamp(this),this.Mf=A.R_,this.ac=A.z_,this.PN=A.info||{},this.io=A.canvas,this.NT=A.Nz}var DefaultLabelsLayerOpts={opacity:1,collision:!0,animation:!0},Labels=(ft.prototype.Ns=function(A,g,I){void 0===I&&(I={});var B=I.zoom,Q=I.center,C=I.from;this.nI=A,this.iI=!0,this.iO=C,this.eI.zoom=B||20,this.oI(),this.hu=Q,this.uI(I,g)},ft.prototype.aO=function(){return this.eI},ft.prototype.zL=function(A){return this.Wj[A]},ft.prototype.uI=function(A,g){void 0===A&&(A={});var I=this.iO,I={center:this.hu,from:I};if(StaticSDFManagerWorker.assign(I,A),this.sI.nO(this,I),this.$j=this.sI.$j,A=this.fI.rQ(this,I)){var B={},Q={},I=A.Fz||{};delete A.Fz;var C,i,E,t,o,a,r=this.Gj;if("inner"===this.iO){for(var e in r)r.hasOwnProperty(e)&&(C=r[e],i=this.Vj[e],E=(a=C.data).extData,t=a.position,o=a.name,a=a.rank,B[e]={data:{position:t,name:o,rank:a,extData:{type:E.type,id:E.id,Lp:E.Lp,Ap:E.Ap,bz:E.bz}}},Q[e]={origin:i.origin,icon:{anchorOffset:i.icon.anchorOffset,size:i.icon.size},padding:i.padding},C.opts&&(B[e].opts={zooms:C.opts.zooms}));g&&g({Nf:B,style:this.Hj,coords:Q,rp:A,zp:this.zp,Fz:I})}else g&&g({Nf:r,style:this.Hj,coords:this.Vj,rp:A,zp:this.zp,Fz:I})}},ft.prototype.oI=function(){for(var A=this.nI,g=this.Gj||{},I=this.Wj,B=this.zp,Q=CONSTS.Mp,C=CONSTS.Rp,i=CONSTS.Pp,E=CONSTS.jp,t=0,o=A;t<o.length;t++){var a=o[t],r=a.data.id,e=a.opts&&a.opts.zooms||[],n=void 0===(n=e[0])?Q:n,c=void 0===(e=e[1])?C:e,s=StaticSDFManagerWorker.jz(I[r])?StaticSDFManagerWorker.Util.stamp(this):I[r];r&&(I[r]=s);for(var h=Math.ceil(n-i);h<=c+E;)B[h]||(B[h]=[]),B[h].push(s),h++;g[s]=a,g[s].CO=this.Ws(a),this.hI(a)}if("undefined"!=typeof Uint32Array)for(var S in B)B.hasOwnProperty(S)&&(B[S]=new Uint32Array(B[S]));this.Gj=g},ft.prototype.hI=function(A){var g=this.Fs;(A=(A=A.opts.icon)&&A.image||"")&&(g[A]=1)},ft.prototype.Ws=function(A){this.Es;var g=A.data.txt||"",A=(A.opts&&A.opts.text||{}).$G||[],A=labelsUtil.EQ(g,A);return labelsUtil.aQ(A)},ft),_a;function ft(A){if(this.CLASS_NAME="AMap.LabelsLayer",this.Gj={},this.Hj={},this.Vj={},this.Fs={},this.Es={},this.Wj={},this.$j=0,this.zp={},this.render=null,this.eI={},this.nI=[],this.cI=!1,this.iI=!1,this.iO="",this.cI=!1,this._opts=StaticSDFManagerWorker.assign({},DefaultLabelsLayerOpts,{opacity:A.opacity}),this.Mf=A.R_,this.ac=A.z_,this.PN=A.info||{},!this.Mf||"SDFManagerBase"===this.Mf.CLASS_NAME)try{var g=this.io=document.createElement("canvas"),I=void 0;g&&(I=this.NT=g.getContext("2d")),A.canvas=g,A.Nz=I}catch(A){console.log("canvas 初始化失败")}this.sI=new LabelPlacement(A),this.fI=new LabelBucket(A)}var geoUtil=new StaticSDFManagerWorker.rW({}),LabelFormatMap=(_a={},_a[StaticSDFManagerWorker.PG.id]=StaticSDFManagerWorker.PG,_a[StaticSDFManagerWorker.RG.id]=StaticSDFManagerWorker.RG,_a),NebulaSourceWorker=(qu=StaticSDFManagerWorker.Event,StaticSDFManagerWorker.Ei(ru,qu),ru.prototype.loadCommonWords=function(A){this.parent.yw.loadCommonWords(A)},ru.prototype.bw=function(A,g,n,c,s,I,h,S,D,w,B,F){var f=this;if(StaticSDFManagerWorker._.wasm){if(!this.parent.PW)return void F("not init");var Q='["'+g.join(";")+'","'+B+'"]',Q=this.parent.PW.transform(Q);A=A+("?key="+this.parent.key)+"&msg="+Q}else A=A+("?key="+this.parent.key)+"&flds="+B+"&t="+g.join(";");return A+="&p=2",makeFetchRequest(this.parent.Uh,A,function(A,e){A?F(A):setTimeout(function(){var I=decodeTiles(new Uint8Array(e)),B=[];StaticSDFManagerWorker.forEach(I.tiles,function(A){var g=new StaticSDFManagerWorker.Gh(new StaticSDFManagerWorker.ca(A.z,A.x,A.y));g.data=f.kw(A,s,g),f.xw(g,n),f.zw(g,n,S,D),f.nz(g,h,c),A=StaticSDFManagerWorker.Util.pW(A.t),B.push({zo:g.zo,ba:g.data,tag:A,version:I.version||""})});for(var A=[],g=f.parent.vn,Q=0,C=B;Q<C.length;Q++){var i=C[Q];if(i&&i.ba){if(i.ba.road){for(var E=[],t=0,o=i.ba.road;t<o.length;t++){var r=o[t],a=(a=g.dn(r.Fp,r.Ep,w))?a[1]:null;r.id&&a&&a.fontSize&&a.faceColor&&(delete r.gw,E.push({path:r.path,id:r.id}))}i.ba.road=E}delete i.ba.poilabel,delete i.ba.region,delete i.ba.building,delete i.ba.Mw}A.push(i)}F(null,A)},10)})},ru.prototype.bW=function(A,f,M,u,k,G){var d=this;if(StaticSDFManagerWorker._.wasm){if(!this.parent.PW)return void G("not init");var g='["'+f.join(";")+'","poi,roadname"]',g=this.parent.PW.transform(g);A=A+("?key="+this.parent.key)+"&msg="+g}else A=A+("?key="+this.parent.key)+"&flds=poi,roadname&t="+f.join(";");A+="&p=2",this.WW=u;var y=-1!==A.indexOf("/oversea"),l=new StaticSDFManagerWorker.vH;return l._H(makeFetchRequest(this.parent.Uh,A,function(A,F){A?G(A):setTimeout(function(){var A=decodeTiles(new Uint8Array(F));!y&&A.version&&d.parent.GW.nebulaVersion!==A.version&&(d.parent.GW.nebulaVersion=A.version,d.parent.GW.db=A.db,d.parent.IW.zW(d.parent.GW.db),d.parent.Uh.send("updateDataVersion",d.parent.GW.nebulaVersion));var I=[];StaticSDFManagerWorker.forEach(A.tiles,function(A){var g=new StaticSDFManagerWorker.Gh(new StaticSDFManagerWorker.ca(A.z,A.x,A.y));g.data=d.kw(A,M,g),A=StaticSDFManagerWorker.Util.pW(A.t),I.push({zo:g.zo,ba:g.data,tag:A})});for(var t=[],g=0,B=I;g<B.length;g++){var Q,C,i=B[g];i&&i.ba&&(Q=i.ba.roadName,C=i.ba.poilabel,delete i.ba.poilabel,delete i.ba.Mw,t.push({zo:i.zo,ba:{roadName:Q,poilabel:C},tag:i.tag,version:A.version||""}))}if(t.length){var E={},o={},a=f.length,r=0;if(y)for(var e=0,n=t;e<n.length;e++){var c=n[e],s=new StaticSDFManagerWorker.Gh(c.zo),h=StaticSDFManagerWorker.wa.ga(s.zo.x,s.zo.y,s.zo.z,"EPSG:3857");s.type="nebula",s.cQ=!0,h=StaticSDFManagerWorker.lcs.getLocalByCoord([h[0],h[1]]),s.Ma=h,s.data=c.ba,(h=d.parent.params).showLabel,h=h.scale,c=c.tag,d.sQ[s.zo.key+","+c]={Bw:s,params:{scale:h,tag:c}}}else for(var S=function(A,g,I,B,Q){A?G(A,null):(r++,E[g]=I,o[g]=d.hQ(B,Q),r===a&&G(null,{results:E,XE:o}))},D=0,w=f.length;D<w;D++)!function(i){var E=f[i];l._H(d.parent.IW.oa(E.slice(0,-2),k,function(A,g){var I,B,Q,C;A?G(A,null):(I=t[i],(B=new StaticSDFManagerWorker.Gh(I.zo)).type="nebula",Q=StaticSDFManagerWorker.wa.ga(B.zo.x,B.zo.y,B.zo.z,"EPSG:3857"),A=StaticSDFManagerWorker.lcs.getLocalByCoord([Q[0],Q[1]]),B.Ma=A,B.data=I.ba,(Q=d.parent.params).showLabel,A=Q.scale,I.tag,Q=new StaticSDFManagerWorker.PG({vn:d.parent.vn}),C=Q.Ns(B,{ZL:u,zoom:B.zo.z,scale:A,R_:d.parent.R_}),d.parent.z_.Vw(StaticSDFManagerWorker.keys(Q.Fs),{type:"icon",cb:function(){d.parent.R_.pH()?SDFIconLoadedcb(B,E.slice(-1),I.version,C,g,u,d.parent.R_,d.parent.z_,S):d.parent.R_.on("commonWordImageLoaded",function(){SDFIconLoadedcb(B,E.slice(-1),I.version,C,g,u,d.parent.R_,d.parent.z_,S)},d,!0)}}))}))}(D)}},10)})),{cancel:l.cancel}},ru.prototype.OW=function(A){this.parent.Zw?this.on("once",A):A()},ru.prototype.YE=function(A){var g=StaticSDFManagerWorker.Util.getOptimalZoom(this.WW);A(this.sQ,{ZL:this.WW,optimalZoom:g,cb:function(){}}),this.sQ={}},ru.prototype.kw=function(A,g,I){var n=this,B={},c=StaticSDFManagerWorker.at.getProjection(g),g=StaticSDFManagerWorker.wa.ga(A.x,A.y,A.z,"EPSG:3857"),s=StaticSDFManagerWorker.lcs.getLocalByCoord([g[0],g[1]]).center;I.Mw=s,I.Ro=g;var h=I.zo.z;return StaticSDFManagerWorker.forEach(A.layers,function(r){var A,e=[],g=ru.Wa[r.type];StaticSDFManagerWorker.forEach(r.d[g],function(o){o.items.sort(function(A,g){return A.minzoom-g.minzoom||A.maxzoom-g.maxzoom});var a=n.parent.vn.mW(o.mainkey,o.subkey,h);StaticSDFManagerWorker.forEach(o.items,function(A){if(A.path&&A.path.length)if(A.path[0].path){var g=A.path;A.oW=[];for(var I=0;I<g.length;I+=1){for(var B=g[I].path,Q=[],C=0;C<B.length;C+=2)i=B[C],E=B[C+1],t=tileInnerCoord2LngLat(r,o.resolution,i,E),Q[C]=t[0],Q[C+1]=t[1],t=c.project(t[0],t[1]),h>=StaticSDFManagerWorker.Ra&&(t[0]-=s[0],t[1]-=s[1]),B[C]=t[0],B[C+1]=t[1];g[I]=B,A.oW[I]=Q}}else for(C=0;C<A.path.length;C+=2){var i=A.path[C],E=A.path[C+1],t=tileInnerCoord2LngLat(r,o.resolution,i,E),t=c.project(t[0],t[1]);h>=StaticSDFManagerWorker.Ra&&(t[0]-=s[0],t[1]-=s[1]),A.path[C]=t[0],A.path[C+1]=t[1]}else A.pos&&(Q=tileInnerCoord2LngLat(r,o.resolution,A.pos[0],A.pos[1]),A.pos=c.project(Q[0],Q[1]));e.push(StaticSDFManagerWorker.Ln(StaticSDFManagerWorker.Ln({},A),{du:o.resolution,Fp:o.mainkey,Ep:o.subkey,zIndex:n.parent.vn.Lw(o.mainkey,o.subkey),lineCap:a[0],RQ:a[1],gw:{z:r.z,y:r.y,x:r.x}}))})}),/(poilabel)/.test(g)?n.Na(e):n.Tw(e),"poilabel"===g?(A=r.z+"-"+r.x+"-"+r.y,B[g]?B[g][A]?B[g][A].push.apply(B[g][A],e):B[g][A]=e:(B[g]={},B[g][A]=e)):B[g]?B[g].push.apply(B[g],e):B[g]=e}),B.Mw=s,B},ru.prototype.Tw=function(A){return A.sort(function(A,g){return A.zIndex-g.zIndex}),A},ru.prototype.Na=function(A){return A.sort(function(A,g){return A.rank-g.rank}),A},ru.prototype.xw=function(A,g){var I=A.data,B=new StaticSDFManagerWorker._w;if(I.Uc=B,!I.$c){I.$c=new StaticSDFManagerWorker.J_,I.road=I.road||[];var Q=A.Mw.slice(0);if(A.zo.z<=StaticSDFManagerWorker.za&&(Q[0]=0,Q[1]=0),I.road.push({name:"",rank:1,maxzoom:22,minzoom:2,path:[A.Ro[0]-Q[0],A.Ro[1]-Q[1],A.Ro[2]-Q[0],A.Ro[1]-Q[1],A.Ro[2]-Q[0],A.Ro[3]-Q[1],A.Ro[0]-Q[0],A.Ro[3]-Q[1],A.Ro[0]-Q[0],A.Ro[1]-Q[1]],Fp:-2,Ep:-2,shield:"",shieldType:0,du:13,lineCap:"butt",RQ:"butt"}),I.road)for(var C=0,i=I.road;C<i.length;C++){for(var E=i[C],t=[],o=0,a=E.path.length;o<a;o+=2)t.push(StaticSDFManagerWorker.Bu(E.path[o],E.path[o+1]));var e=(r=I.$c.hb(t,{X_:"butt"===E.lineCap?0:.9,lineCap:E.lineCap,lineJoin:"auto"})).Iw,r=r.distance;0<e&&(B.add(E.Fp,E.Ep,e,E.minzoom,E.maxzoom),E.distance=r)}}},ru.prototype.zw=function(A,g,I,B){var Q=A.data,C=new StaticSDFManagerWorker._w;if(Q.Oc=C,Q.Fc=new StaticSDFManagerWorker._w,!Q.Dc){Q.Dc=new StaticSDFManagerWorker.K_,Q.region=Q.region||[];var i=A.Mw.slice(0);if(A.zo.z<=StaticSDFManagerWorker.za&&(i[0]=0,i[1]=0),Q.region.unshift({maxzoom:22,minzoom:2,path:[[A.Ro[0]-i[0],A.Ro[1]-i[1],A.Ro[2]-i[0],A.Ro[1]-i[1],A.Ro[2]-i[0],A.Ro[3]-i[1],A.Ro[0]-i[0],A.Ro[3]-i[1],A.Ro[0]-i[0],A.Ro[1]-i[1]]],Fp:30001,Ep:1}),Q.region)for(var E=0,t=Q.region;E<t.length;E++)for(var o=t[E],a=0,r=o.path;a<r.length;a++)(d=r[a]).push(d[0],d[1]),0<(J=Q.Dc.Nx(d))&&C.add(o.Fp,o.Ep,J,o.minzoom,o.maxzoom);if(Q.building&&!Q.FD){Q.FD=new StaticSDFManagerWorker.K_,Q.BD=new StaticSDFManagerWorker._w;for(var e=Q.BD,n=0,c=Q.building;n<c.length;n++){var s=c[n],S=(h=StaticSDFManagerWorker.jw(s.gw.z,s.gw.x,s.gw.y))[0],D=h[1],w=h[2],h=h[3];A.Mw&&(S-=A.Mw[0],w-=A.Mw[0],D-=A.Mw[1],h-=A.Mw[1]);var F=Math.floor(S),f=Math.floor(w),M=Math.floor(D),u=Math.floor(h);if("2D"===I){for(var k=0,G=s.path;k<G.length;k++){var d=G[k];0<(J=Q.FD.Nx(d))&&e.add(s.Fp,s.Ep,J,s.minzoom,s.maxzoom,s.ew||"indoor_out_building")}for(var y=0,l=s.path;y<l.length;y++){var N=l[y];N.push(N[0],N[1]);for(var d=[],v=0,Y=N.length;v<Y-2;v+=2)d.push(StaticSDFManagerWorker.Bu(N[v],N[v+1])),d.push(StaticSDFManagerWorker.Bu(N[v+2],N[v+3]));for(var R=[],v=0,Y=d.length;v<Y;v+=2){var J,L=d[v][0],U=d[v][1],H=d[v+1][0],K=d[v+1][1],p=Math.floor(L),m=Math.floor(U);(L!==H||p!==F&&p!==f)&&(U!==K||m!==M&&m!==u)?R.push(d[v],d[v+1]):(0<(J=Q.Dc.Ew(R))&&Q.Fc.add(s.Fp,s.Ep,J,s.minzoom,s.maxzoom,s.ew||"indoor_out_building"),R=[])}0<R.length&&0<(J=Q.Dc.Ew(R))&&Q.Fc.add(s.Fp,s.Ep,J,s.minzoom,s.maxzoom,s.ew)}}}for(var W=[],x=0,b=Q.building;x<b.length;x++)if((s=b[x]).ew)if(-1<s.ew.indexOf("|"))for(var q=s.ew.split("|"),v=0;v<q.length;v++)W.push(q[v]);else W.push(s.ew);Q.indoorInfo||(Q.indoorInfo=[]),Q.indoorInfo=W}}},ru.prototype.nz=function(A,g,I){void 0===g&&(g={});var B=A.data;if(B.C_=new StaticSDFManagerWorker._w,!B.A_){B.A_=new StaticSDFManagerWorker.iz;var Q=g.hideWithoutStyle,C=g.areas;if(B.building)for(var i=0,E=B.building;i<E.length;i++)for(var t=E[i],o=0;o<t.path.length;o++){var a=t.path[o],r=t.oW[o];a.push(a[0],a[1]),r.push(r[0],r[1]);for(var e=[],n=0;n<r.length;n+=2)e.push([r[n],r[n+1]]);if(C){for(var c,s=!1,h=!1,S={},D=0;D<C.length;D++){var w=C[D],F=w.path;geoUtil.isRingInRing(e,F)&&(s=!0,!w.visible&&void 0!==w.visible||(h=!0,S={roofColor:StaticSDFManagerWorker.Util.color2RgbaArray(w.color1),wallColor:StaticSDFManagerWorker.Util.color2RgbaArray(w.color2)}))}!s&&Q||s&&!h||0<(c=B.A_.tz(a,t.height))&&B.C_.add(t.Fp,t.Ep,c,t.minzoom,t.maxzoom,t.ew,S.roofColor,S.wallColor)}else 0<(c=B.A_.tz(a,t.height))&&B.C_.add(t.Fp,t.Ep,c,t.minzoom,t.maxzoom,t.ew)}}},ru.prototype.hQ=function(A,g){if(A)for(var I=this.SQ(A)||[],B=0,Q=I=new LabelFormatMap[A.type]({vn:this.parent.vn}).DQ(I,{zoom:g});B<Q.length;B++){var C=Q[B],i=C.CO;C.EG||(C.EG={});for(var E=0,t=i;E<t.length;E++){var o=t[E],a=this.parent.R_.mz(o);C.EG[o]=a}}return I},ru.prototype.SQ=function(A){return A.data&&A.data.roadName||A.Dh},ru.Pw=[1,0,1,0],ru.Wa={0:"poilabel",1:"road",2:"region",3:"building",4:"roadName"},ru),qu;function ru(A){var g=qu.call(this)||this;return g.parent=A,g.id="nebula",g.sQ={},g.aW=null,g.WW=20,g}function SDFIconLoadedcb(I,A,g,B,Q,C,i,E,t){var o,a=I.zo.key+","+A,r=((A={})[CONSTS.gH]=Q[1],A[CONSTS.RB]=Q[0],A[CONSTS.FN]=g,A);for(o in B)!function(g){var A;B.hasOwnProperty(g)&&(A=B[g],new Labels({R_:i,z_:E,info:Q[0]}).Ns(A,function(A){r[g]=new StaticSDFManagerWorker.La(I.zo,A)},{ZL:C,zoom:I.zo.z,from:"inner",center:I.Ma.center}))}(o);t(null,a,r,I,C)}var hasWarning=!1;function makeFetchRequest(A,g,I){if(!StaticSDFManagerWorker._.safari&&!StaticSDFManagerWorker._.AQ&&!StaticSDFManagerWorker._.gQ&&self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal")){var B=new AbortController,Q=B.signal,Q=new self.Request(g,{method:"GET",referrer:self.location.origin,signal:Q});return fetch(Q).then(function(A){return"application/x-protobuf"===A.headers.get("content-type")?A.arrayBuffer():A.json()}).then(function(A){A.info?hasWarning||(hasWarning=!0,console.log("<AMap JSAPI> KEY异常，错误信息："+A.info)):I(null,A)}).catch(function(A){"AbortError"!==A.name&&I(A.message||"unknown error")}),{cancel:function(){B.abort()}}}var C=A.send("request",g,function(A,g){A?("<cancel>"===A&&C&&C.cancel&&C.cancel(),C=void 0,I(A)):(C=void 0,I(null,g))});return C}var MVTSourceWorker=(lz.prototype.bw=function(A,g,I,B,Q){var C=this,i=new XMLHttpRequest;return i.onreadystatechange=function(){var A;4===i.readyState&&200===i.status&&(A=new StaticSDFManagerWorker.tW(new StaticSDFManagerWorker.pw(new Uint8Array(i.response))),A=C.Ow(A,{x:g.x,y:g.y,z:g.z,projectionId:I,tileSize:B}),Q(null,{zo:g,Xw:A}))},i.responseType="arraybuffer",i.open("GET",A,!0),i.send(),{cancel:function(){i.abort()}}},lz.prototype.Ow=function(o,A){var I=A.x,B=A.y,Q=A.z,C=A.tileSize,i=A.projectionId;return o.z=Q,o.x=I,o.y=B,A=StaticSDFManagerWorker.at.getProjection(i).getResolution(Q),o.Ro=getMVTTileBbox(I,B,Q,A,C),o.zS=StaticSDFManagerWorker.lcs.getLocalByCoord([o.Ro[0],o.Ro[1]]),StaticSDFManagerWorker.vx(o.layers,function(t){var A=t.Cw,g=t.extent;t.Ah=[],t.scale=C/g,g=StaticSDFManagerWorker.V[i].Xs(C*I,C*B,Q),t.ox=g[0],t.oy=g[1],StaticSDFManagerWorker.forEach(A,function(A,g){if((A=t.Gw(g)).Dw(),t.Ah.push(A),A.lines&&A.lines.length&&(2===A.type||3===A.type)){A.Rw=[];for(var I=0,B=A.lines.length;I<B;I++){for(var Q=[],C=0,i=A.lines[I].length;C<i;C++){var E=[t.ox+t.scale*A.lines[I][C][0]-o.zS.center[0],t.oy+t.scale*A.lines[I][C][1]-o.zS.center[1]];Q.push(E)}A.Rw.push(Q)}}})}),this.uW(o),this.xw(o),o},lz.prototype.uW=function(A){var g,I=[],B=[];for(g in A.layers)if(A.layers.hasOwnProperty(g))for(var Q=A.layers[g],C=0;C<Q.Ah.length;C+=1){var i=Q.Ah[C];if(3===i.type)for(var E=0;E<i.Rw.length;E++){for(var t=i.Rw[E],o={properties:i.properties,path:[]},a=o.path,r=0;r<t.length;r++){var e=t[r];a.push(e[0],e[1])}6<a.length&&I.push(o)}else if(2===i.type)for(E=0;E<i.Rw.length;E++){for(var t=i.Rw[E],n={properties:i.properties,path:[]},a=n.path,r=0;r<t.length;r++)e=t[r],a.push(e[0],e[1]);4<a.length&&B.push(n)}}A.polygons=I,A.Dh=B,delete A.layers},lz.prototype.xw=function(A){if(!A.data||!A.data.$c){var g=A.data={},I=new StaticSDFManagerWorker._w;if(!g.$c&&(g.Uc=I,g.$c=new StaticSDFManagerWorker.J_,A.Dh))for(var B=0,Q=A.Dh;B<Q.length;B++){for(var C=Q[B],i=[],E=0,t=C.length;E<t;E+=2)i.push(StaticSDFManagerWorker.Bu(C.path[E],C.path[E+1]));var a=(o=g.$c.hb(i,{X_:0,lineJoin:"miter",lineCap:"butt"})).Iw,o=o.distance;0<a&&(I.add(C.Fp,C.Ep,a,C.minzoom,C.maxzoom),C.distance=o)}}},lz.prototype.zw=function(A){if(!A.data||!A.data.Dc){var g=A.data={},I=new StaticSDFManagerWorker._w;g.Oc=I,g.Fc=new StaticSDFManagerWorker._w,g.Dc=new StaticSDFManagerWorker.K_;for(var B=0,Q=A.polygons;B<Q.length;B++)for(var C=Q[B],i=0,E=C;i<E.length;i++){var t=E[i];t.push(t[0],t[1]),0<(t=g.Dc.Nx(t))&&I.add(C.Fp,C.Ep,t,C.minzoom,C.maxzoom)}}},lz.Wa={0:"poilabel",1:"road",2:"region",3:"building"},lz);function lz(A){this.parent=A}var DistrictSourceWorker=function(){function DistrictSourceWorker(A){this.parent=A,this.fW={}}return DistrictSourceWorker.prototype.bw=function(A,g,I,B,Q,C,i){var E,t,o=this;for(E in Q)!Q.hasOwnProperty(E)||-1<(t=Q[E]).toString().indexOf("function")&&(t=t.replace("function","return function"),Q[E]=new Function(t));var a=new XMLHttpRequest;return a.onreadystatechange=function(){var A;4!==a.readyState||200!==a.status&&204!==a.status||(A=new StaticSDFManagerWorker.tW(new StaticSDFManagerWorker.pw(new Uint8Array(a.response))),A=o.Ow(A,{x:g.x,y:g.y,z:g.z,projectionId:I,tileSize:B},Q,C),i(null,StaticSDFManagerWorker.Ln({zo:g},A)))},a.responseType="arraybuffer",a.open("GET",A,!0),a.send(),{cancel:function(){a.abort()}}},DistrictSourceWorker.prototype.Ow=function(o,A,g,I){var B=A.x,Q=A.y,C=A.z,i=A.tileSize,E=A.projectionId;o.z=C,o.x=B,o.y=Q,A=StaticSDFManagerWorker.at.getProjection(E).getResolution(C),o.Ro=getMVTTileBbox(B,Q,C,A,i),o.zS=StaticSDFManagerWorker.lcs.getLocalByCoord([o.Ro[0],o.Ro[1]]);var a=StaticSDFManagerWorker.at.getProjection(E).getResolution(C);return StaticSDFManagerWorker.vx(o.layers,function(t){var A=t.Cw;t.Ah=[],t.scale=a*i/t.extent;var g=StaticSDFManagerWorker.V[E].Xs(i*B,i*Q,C);t.ox=g[0],t.oy=g[1],StaticSDFManagerWorker.forEach(A,function(A,g){if((A=t.Gw(g)).Dw(),t.Ah.push(A),A.lines&&0<A.lines.length){A.Rw=[];for(var I=0,B=A.lines.length;I<B;I++){for(var Q=[],C=0,i=A.lines[I].length;C<i;C++){var E=[t.ox+t.scale*A.lines[I][C][0]-o.zS.center[0],t.oy-t.scale*A.lines[I][C][1]-o.zS.center[1]];Q.push(E)}A.Rw.push(Q)}}})}),this.uW(o),this.xw(o),this.zw(o),o},DistrictSourceWorker.prototype.uW=function(A){var g,I=[],B=[];for(g in A.layers)if(A.layers.hasOwnProperty(g))for(var Q=A.layers[g],C=0;C<Q.Ah.length;C+=1){var i=Q.Ah[C];if(3==+i.type&&i.Rw){for(var E=i.Rw,t=[],o=0;o<E.length;o++)StaticSDFManagerWorker.kS.isClockwise(E[o])?t.push([o]):t.length&&t[t.length-1].push(o);for(var a=0;a<t.length;a++){var r=t[a];if(1<r.length){for(var e=[],n=[],c=0;c<r.length;c++){var s=E[r[c]];0<c&&e.push(n.length/2);for(var h=0;h<s.length;h++){var S=s[h];n.push(S[0],S[1])}}I.push({properties:i.properties,path:n,LQ:e})}else{for(n=[],s=E[r[0]],h=0;h<s.length;h++){var D=s[h];n.push(D[0],D[1])}I.push({properties:i.properties,path:n})}}}else if(3!==i.type&&i.Rw)for(var w=0;w<i.Rw.length;w++)B.push({properties:i.properties,path:i.Rw[w]});this.cW(i)}A.polygons=I,A.Dh=B,delete A.layers},DistrictSourceWorker.prototype.xw=function(A){if(!A||!A.$c){var g=new StaticSDFManagerWorker.LW;if(!A.$c&&(A.Uc=g,A.$c=new StaticSDFManagerWorker.J_,A.Dh))for(var I=0,B=A.Dh;I<B.length;I++){var Q=B[I],C=JSON.stringify(Q.properties),E=(i=A.$c.hb(Q.path,{X_:0,lineJoin:"round",lineCap:"butt"})).Iw,i=i.distance;0<E&&(g.add(C,0,E,0,22),Q.distance=i)}}},DistrictSourceWorker.prototype.zw=function(A){if(!A||!A.Dc){var g=new StaticSDFManagerWorker.LW;A.Oc=g,A.Dc=new StaticSDFManagerWorker.K_;for(var I=0,B=A.polygons;I<B.length;I++){var Q=B[I],C=JSON.stringify(Q.properties);0<(Q=A.Dc.Nx(Q.path,Q.LQ))&&g.add(C,0,Q,0,22)}}},DistrictSourceWorker.prototype.dW=function(A){switch(A){case 0:case 1:return"Nation_Border_China";case 2:return"Coastline_China";case 3:case 4:return"Province_Border_China";case 5:return"City_Border_China";case 6:return"County_Border_China";case 7:case 8:return"Nation_Border_Foreign";case 9:return"Coastline_Foreign";case 10:case 11:return"Nation_Border_Foreign";case 12:return"Province_Border_Foreign";default:return""}},DistrictSourceWorker.prototype.sW=function(code){return this.fW[code]||(this.fW[code]=eval("'"+code.replace(/\//g,"\\u")+"'")),this.fW[code]},DistrictSourceWorker.prototype.cW=function(A){A.properties.NAME_CHN&&(A.properties.NAME_CHN=this.sW(A.properties.NAME_CHN.trim())),A.properties.NAME_ENG&&(A.properties.NAME_ENG=A.properties.NAME_ENG.trim()),A.properties.level&&(A.properties.level=A.properties.level.trim()),A.properties.citycode&&A.properties.citycode.length&&(A.properties.citycode=A.properties.citycode.trim()),A.properties.bC=+A.properties.type,A.properties.lW=+A.type,A.properties.type=this.dW(+A.properties.type)},DistrictSourceWorker}(),MapboxSourceWorker=(VB.prototype.YE=function(A){var g=StaticSDFManagerWorker.Util.getOptimalZoom(this.WW);A(this.sQ,{ZL:this.WW,optimalZoom:g,cb:function(){}}),this.sQ={}},VB.prototype.bw=function(A,Q,C,i,g,I,E){var t=this,o=new XMLHttpRequest;return o.onreadystatechange=function(){var A,g,I,B;4===o.readyState&&200===o.status&&(I=new StaticSDFManagerWorker.pw(new Uint8Array(o.response)),(B=new StaticSDFManagerWorker.tW(I)).nG("mapbox"),A=Q.z,g=Q.x,I=Q.y,B.data={},B=t.Ow(B,{x:Q.x,y:Q.y,z:Q.z,projectionId:C,tileSize:i}),t.wQ(B),B.zo=new StaticSDFManagerWorker.ca(A,g,I),t.FQ(B),delete B.road,E(null,StaticSDFManagerWorker.Ln({zo:Q},B)))},o.responseType="arraybuffer",o.open("GET",A,!0),o.send(),{cancel:function(){o.abort()}}},VB.prototype.wQ=function(A){A.stencil={};var g=new StaticSDFManagerWorker.fQ;A.stencil.Oc=g,A.stencil.Dc=new StaticSDFManagerWorker.K_,A=A.stencil.Dc.Nx(A.MQ),g.add({},A)},VB.prototype.Ow=function(I,A){var B=A.x,Q=A.y,o=A.z,C=A.tileSize,a=A.projectionId;I.z=o,I.x=B,I.y=Q,A=StaticSDFManagerWorker.at.getProjection(a).getResolution(o),A=getMVTTileBbox(B,Q,o,A,C),I.Ro=A,I.MQ=[A[0],A[1],A[2],A[1],A[2],A[3],A[0],A[3]],I.zS=StaticSDFManagerWorker.lcs.getLocalByCoord([I.Ro[0],I.Ro[1]]),I.Ma=I.zS;for(var i=Object.keys(I.layers),g=0;g<i.length;g++)!function(A){var t=I.layers[i[A]],g=t.Cw,A=t.extent;t.Ah=[],t.scale=C/A,t.ox=C*B,t.oy=C*Q,StaticSDFManagerWorker.forEach(g,function(A,g){if((A=t.Gw(g)).Dw(),t.Ah.push(A),A.lines&&A.lines.length&&(2===A.type||3===A.type||1===A.type)){A.Rw=[];for(var I=0,B=A.lines.length;I<B;I++){for(var Q=[],C=0,i=A.lines[I].length;C<i;C++){var E=[t.ox+t.scale*A.lines[I][C][0],t.oy+t.scale*A.lines[I][C][1]],E=[(E=StaticSDFManagerWorker.V[a].Xs(E[0],E[1],o))[0],E[1]];Q.push(E)}A.Rw.push(Q)}}})}(g);return this.uW(I,o),this.xw(I),this.zw(I),I},VB.prototype.uW=function(A,g){var I,B=[],Q=[],C=[],i=(this.kQ,null);for(I in this.parent&&this.parent.QG&&(i=this.parent.QG),this.$h=new StaticSDFManagerWorker.XG({KG:i}).getMapboxStyle(),A.bgColor=this.$h.backgroundColor,A.layers)if(A.layers.hasOwnProperty(I))for(var E=A.layers[I],t=0;t<E.Ah.length;t+=1){var o,a=E.Ah[t],r=this.$h.getStyle(a,E.name,!0,g);r&&(a.style=r,3===a.type?B.push(a):2===a.type?Q.push(a):1!==a.type||(o=r.name)&&((a={name:o,position:a.Rw[0],id:a.id,minzoom:r.th,maxzoom:r.ih}).style=r,C.push(a)))}Q.sort(function(A,g){return A.style&&g.style&&A.style.zIndex>g.style.zIndex?1:-1}),B.sort(function(A,g){return A.style&&g.style&&A.style.zIndex>g.style.zIndex?1:-1}),A.polygons=B,A.Dh=Q,A.data.poilabel=((i={})[A.z+","+A.x+","+A.y]=C,i),delete A.layers},VB.prototype.startsWith=function(A,g){return A.startsWith?A.startsWith(g):A.substr(0,g.length)===g},VB.prototype.argbHex2Rgba=function(A){for(var g=[],I=0,B=A.length;I<B;I+=2)g.push(parseInt(A.substr(I,2),16)/255);return g.push(g.shift()),g},VB.prototype.uQ=function(A,g,I){return I<0&&(I+=1),1<I&&--I,I<1/6?A+6*(g-A)*I:I<.5?g:I<2/3?A+(g-A)*(2/3-I)*6:A},VB.prototype.GQ=function(A,g,I,B){var Q,C,i;return 0===g?Q=C=i=I:(g=2*I-(I=I<.5?I*(1+g):I+g-I*g),Q=this.uQ(g,I,A+1/3),C=this.uQ(g,I,A),i=this.uQ(g,I,A-1/3)),[Q,C,i,B]},VB.prototype.color2RgbaArray=function(A,g){if(void 0===g&&(g=1),!A)return null;var I=A.toString();if(this.yQ[I])return this.yQ[I];if(A instanceof Array)return A;if(this.startsWith(A,"hsla")){var B=A.substr(5).split(","),Q=parseInt(B[0],10)/360,C=parseInt(B[1],10)/100,i=parseInt(B[2],10)/100,E=parseFloat(B[3]),t=this.GQ(Q,C,i,E);return this.yQ[I]=t}return this.startsWith(A,"hsl")?(B=A.substr(4).split(","),Q=parseInt(B[0],10)/360,C=parseInt(B[1],10)/100,i=parseInt(B[2],10)/100,t=this.GQ(Q,C,i,g),this.yQ[I]=t):this.startsWith(A,"#")?7===A.length?(t=this.argbHex2Rgba("ff"+A.substr(1)),this.yQ[I]=t):9===A.length?(t=this.argbHex2Rgba(A.substr(1)),this.yQ[I]=t):void 0:this.startsWith(A,"rgba")?(B=A.substr(5).split(","),[parseInt(B[0],10)/255,parseInt(B[1],10)/255,parseInt(B[2],10)/255,E=parseFloat(B[3])]):this.startsWith(A,"rgb")?(B=A.substr(4).split(","),[parseInt(B[0],10)/255,parseInt(B[1],10)/255,parseInt(B[2],10)/255,E=1]):void 0},VB.prototype.zw=function(A){if(!A||!A.Dc){var g=new StaticSDFManagerWorker.fQ;A.Oc=g,A.Dc=new StaticSDFManagerWorker.K_;var I={fillColor:this.color2RgbaArray(A.bgColor),zIndex:0},B=A.Dc.Nx(A.MQ);g.add(I,B);for(var Q=0,C=A.polygons;Q<C.length;Q++){var i=C[Q],E=i.style;if(E&&E.fillColor){E.fillColor=this.color2RgbaArray(E.fillColor);var t=i.Rw;if(1<t.length){for(var o=[],a=0;a<t.length;a++)StaticSDFManagerWorker.kS.isClockwise(t[a])?o.push([a]):o.length&&o[o.length-1].push(a);for(var r=0;r<o.length;r++){var e=o[r];if(1<e.length){for(var n=[],c=[],s=0;s<e.length;s++){var h=t[e[s]];0<s&&n.push(c.length/2);for(var S=0;S<h.length;S++){var D=h[S];c.push(D[0],D[1])}}var w=A.Dc.Nx(c,n);g.add(E,w)}else{for(c=[],h=t[e[0]],S=0;S<h.length;S++){var F=h[S];c.push(F[0],F[1])}w=A.Dc.Nx(c),g.add(E,w)}}}else{for(var f=t.length,c=[],M=0;M<f;M++){var u=t[M];if(0<u.length)for(S=0;S<u.length;S++)r=u[S],c.push(r[0],r[1])}i=A.Dc.Nx(c),g.add(E,i)}}}delete A.polygons}},VB.prototype.xw=function(A){if(!A||!A.$c){var g=[],I=this.kQ;A.$c=new StaticSDFManagerWorker.J_;var B=new StaticSDFManagerWorker.fQ;A.Uc=B;for(var Q=0,C=A.Dh;Q<C.length;Q++){var i=C[Q],E=i.Rw,t=E.length,o=0,a=0;i.style&&i.style[0]&&i.style[0].borderColor&&(i.style[0].borderColor=this.color2RgbaArray(i.style[0].borderColor)),i.style&&i.style[0]&&i.style[0].faceColor&&(i.style[0].faceColor=this.color2RgbaArray(i.style[0].faceColor));for(var e=(r=i.style||[])[0],n=r[1],c=0;c<t;c++){var s=E[c];if(0<s.length){for(var h=[],S=0;S<s.length;S++){var D=s[S];h.push(D[0],D[1])}for(var w=[],F=0,f=h.length;F<f;F+=2)w.push(StaticSDFManagerWorker.Bu(h[F],h[F+1]));var M=A.$c.hb(w,{X_:0,lineJoin:"miter",lineCap:"round"});o+=M.Iw,a+=M.distance}}if(0<o&&(B.add(i.style,o),i.distance=a),e&&e.borderColor&&(i.style[0].borderColor=this.color2RgbaArray(e.borderColor)),e&&e.faceColor&&(i.style[0].faceColor=this.color2RgbaArray(e.faceColor)),n&&(r=n.name||"")){i=n.Kr,e=n.Qr,i&&!I[i]&&(I[i]=StaticSDFManagerWorker.Util.color2RgbaArray(i)),e&&!I[e]&&(I[e]=StaticSDFManagerWorker.Util.color2RgbaArray(e)),n.Kr=I[i],n.Qr=I[e];for(var r,u=(r={style:n,path:[],name:r,distance:a}).path,k=0;k<t;k++)for(var G=E[k],S=0;S<G.length;S++)D=G[S],u.push(D[0],D[1]);g.push(r)}}A.road=g,delete A.Dh}},VB.prototype.FQ=function(A){var g,I={};for(g in A)A.hasOwnProperty(g)&&"fillBucket"!==g&&"fillSegements"!==g&&"lineBucket"!==g&&"lineSegements"!==g&&(I[g]=A[g]);this.sQ[A.zo.key]={Bw:I,params:{scale:this.parent.params.scale,tag:"all"}}},VB),_a$1;function VB(A){this.parent=A,this.id="mapbox",this.sQ={},this.yQ={},this.kQ={}}var mapBoxSprite="https://webapi.amap.com/style_icon/sprite_v8@2x.png",DefaultIconInfo=(_a$1={TW:{img:"https://vdata.amap.com/style_icon/2.0/icon-normal-big.png",width:512,height:1024,startX:0,startY:0,status:"loaded",type:"icon",ext:{hv:0}},RW:{img:"https://vdata.amap.com/style_icon/2.0/icon-biz-big.png",width:512,height:1024,startX:0,startY:1024,status:"loaded",type:"icon",ext:{hv:1}}},_a$1[mapBoxSprite]={img:mapBoxSprite,width:1024,height:926,startX:0,startY:2048,status:"loaded",type:"icon",ext:{hv:2}},_a$1),ImageManagerWorker=(VE=StaticSDFManagerWorker.Event,StaticSDFManagerWorker.Ei(WE,VE),WE.prototype.loadImage=function(A,g){var I=g.name,B=g.type,Q=g.cb,C=I||A;(I=this.Fs[C])&&I.status===StaticSDFManagerWorker.uc.LOADED?Q(I,g):I&&I.status===StaticSDFManagerWorker.uc.LOADING?(this.Mc[C]||(this.Mc[C]=[]),this.Mc[C].push({cb:Q,opts:g})):("icon"===B&&(g.hv=this.Uw,this.Uw++),this.Rc(A,g))},WE.prototype.loadImages=function(A,g){var Q=this,I=g.cb,C=g.type;if(0!==Object.keys(A).filter(function(A){return!Q.Fs[A]}).length){var i=[],E=[];if(A.length){for(var B=0,t=A;B<t.length;B++)!function(B){var A=new Promise(function(I,A){Q.loadImage(B,{cb:function(A,g){E.push(Q.Fs[B]),I()},type:C})});i.push(A)}(t[B]);Promise.all(i).then(function(){I(E)}).catch(function(){I(E)})}else I(E)}else I()},WE.prototype.Vw=function(A,g){var Q=this,C=g.cb,i=A.filter(function(A){return!Q.Fs[A]});if(0!==i.length){var I=[],E=[];if(A.length){for(var B=0,t=A;B<t.length;B++)!function(B){var A=new Promise(function(I,A){Q.loadImage(B,{cb:function(A,g){E.push(Q.Fs[B]),I()},type:"icon"})});I.push(A)}(t[B]);Promise.all(I).then(function(){var A=[];if(0<i.length){for(var g=0,I=i;g<I.length;g++){var B=I[g];A.push({url:B,data:Q.getImage(B)})}Q.emit("iconImageLoaded",{data:A})}C(E)}).catch(function(){C(E)})}else C(E)}else C([])},WE.prototype.getImage=function(A){return void 0===A&&(A=""),this.Fs[A]},WE.prototype.Bi=function(){var A;this.Fs=((A={})[DefaultIconInfo.TW.img]=DefaultIconInfo.TW,A[DefaultIconInfo.RW.img]=DefaultIconInfo.RW,A)},WE.prototype.Rc=function(i,E){var t=this,o=E.name,A=E.ext,a=void 0===A?{}:A,r=void 0===(A=E.type)?"other":A,e=E.cb,g=this.Fs;g[o||i]={status:StaticSDFManagerWorker.uc.LOADING,startX:0,startY:1024*(E.hv||0),type:r,height:0,width:0},StaticSDFManagerWorker.Yw.send(i,{Me:"blob",qw:function(A){var A=new Blob([A],{type:"image/png"}),A=StaticSDFManagerWorker.cc.createObjectURL(A),g=o||i,I=t.Fs;if(!A)return console.error("createObjectURL fail"),I[g].status=StaticSDFManagerWorker.uc.ERROR,void e(I[g],E);if("icon"===r?(a.hv=E.hv,I[g]=DefaultIconInfo[g]||{ext:a,type:r,startX:0,startY:1024*(E.hv||0),height:1024,width:512,status:StaticSDFManagerWorker.uc.LOADED},I[g].lc=A):I[g]={ext:a,type:r,startX:0,startY:0,height:0,width:0,lc:A,status:StaticSDFManagerWorker.uc.LOADED},e(I[g],E),t.Mc[g]){for(var B=0,Q=t.Mc[g];B<Q.length;B++){var C=Q[B];C.cb(I[g],C.opts)}delete t.Mc[g]}},Aw:function(A){console.log(A),g[A=o||i].status=StaticSDFManagerWorker.uc.ERROR,e(g[A],E)}})},WE.prototype.Sc=function(A){var g;void 0===A&&(A={});var I=A.img,A=I&&I.context?(g=I.width||0,I.height||0):(g=A.width||0,A.height||0);return[g,A]},WE),VE,_a$2;function WE(){var A,g=VE.call(this)||this;return g.Fs=((A={})[DefaultIconInfo.TW.img]=DefaultIconInfo.TW,A[DefaultIconInfo.RW.img]=DefaultIconInfo.RW,A),g.Cc=16,g.Uw=0,g.Hw={},g.Mc={},g}var LabelFormatMap$1=(_a$2={},_a$2[StaticSDFManagerWorker.PG.id]=StaticSDFManagerWorker.PG,_a$2[StaticSDFManagerWorker.RG.id]=StaticSDFManagerWorker.RG,_a$2),LabelWorker=(tG=StaticSDFManagerWorker.Event,StaticSDFManagerWorker.Ei(uG,tG),uG.prototype.iW=function(A,E){var t=this;void 0===E&&(E={});var o=[],g={},I={},B=[];this.MW.ZL=E.ZL||20;var Q,C,i,a,r,e=[],n=E.cb,c=this.parent.langForeign;for(Q in A)A.hasOwnProperty(Q)&&(C=(i=A[Q]).Bw,r=(a=i.params).scale,i=a.tag,e.push(i),a={vn:this.parent.vn},r=(a=new LabelFormatMap$1[E.id](a)).Ns(C,{ZL:this.MW.ZL,zoom:C.zo.z,scale:r,lang:c}),StaticSDFManagerWorker.assign(g,a.Fs),StaticSDFManagerWorker.assign(I,a.Es),B.push(C),o.push([C,a,r,i]));var s=Object.keys(g),h=Object.keys(I),S=Date.now(),D=[],w=B.length,F=0,f=!1,M=E.optimalZoom,u=!1,k=null;this.R_.vW(h,{tiles:B,optimalZoom:M,tags:e,stamp:S,cb:function(A){if((F+=1)===w){for(var g=0,I=o;g<I.length;g++){var Q=(B=I[g])[0],C=B[1],i=B[2],B=B[3];D.push({Bw:Q,gW:C,SW:i,tag:B})}u=!0,k=D,t.yW({imageLoaded:f,Ta:u},k,n,E)}}}),this.wW(s)?(f=!0,this.yW({imageLoaded:f,Ta:u},k,n,E)):this.z_.Vw(s,{type:"icon",cb:function(){f=!0,t.yW({imageLoaded:f,Ta:u},k,n,E)}})},uG.prototype.hW=function(A,g,I){for(var o=this,a=[],r=this,B=0,Q=A;B<Q.length;B++)!function(A){var I,g,B=A.Bw,Q=A.SW,C=(A.gW,A.tag),i=Object.keys(Q).length,E={},t=0;if(0===i)return a.push({data:B.zo});for(g in Q)!function(g){var A;Q.hasOwnProperty(g)&&(A=Q[g],new StaticSDFManagerWorker.eG({R_:r.R_,z_:r.z_}).Ns(A,function(A){E[g]=new StaticSDFManagerWorker.La(B.zo,A),++t===i&&(I=o.hQ(B,o.MW.ZL),a.push({data:E,XE:I,tag:C}))},{ZL:r.MW.ZL,zoom:B.zo.z,from:"inner",center:B.Ma.center}))}(g)}(Q[B]);A=StaticSDFManagerWorker.Util.getOptimalZoom(this.MW.ZL),g({data:a,optimalZoom:A}),this.emit("dynamicTextVerticeLoadedByTile",{data:a,optimalZoom:A,id:I.id})},uG.prototype.Fw=function(I,A,B,g){var Q=this;void 0===g&&(g={});var C=g.optimalZoom,i=Object.keys(B).length,E={},t=0;if(0!==i){var o,a=this;for(o in B)!function(g){var A;B.hasOwnProperty(g)&&(A=B[g],new StaticSDFManagerWorker.eG({R_:a.R_,z_:a.z_}).Ns(A,function(A){E[g]=new StaticSDFManagerWorker.La(I.zo,A),++t===i&&Q.emit("dynamicTextVerticeLoaded",{data:E,optimalZoom:C})},{zoom:I.zo.z,from:"inner",center:I.Ma.center}))}(o)}else this.emit("dynamicTextVerticeLoaded",{data:I.zo,optimalZoom:C})},uG.prototype.commonWordImageLoaded=function(){this.R_.commonWordImageLoaded()},uG.prototype.loadCommonWords=function(A){var g=this;"error"===this.Nw&&(this.Nw="loading",this.R_.loadCommonWords(A,function(A){A?(g.Nw="loaded",g.parent.Uh.send("commonWordLoaded",A)):g.Nw="error"}))},uG.prototype.hQ=function(A,g){if(A)for(var I=this.SQ(A)||[],B=0,Q=I=new LabelFormatMap$1[A.type]({vn:this.parent.vn}).DQ(I,{zoom:g});B<Q.length;B++){var C=Q[B],i=C.CO;C.EG||(C.EG={});for(var E=0,t=i;E<t.length;E++){var o=t[E],a=this.R_.mz(o);C.EG[o]=a}}return I},uG.prototype.SQ=function(A){return A.data&&A.data.roadName||A.road},uG.prototype.wW=function(A){void 0===A&&(A=[]);for(var g=this.hD,I=0,B=0,Q=A;B<Q.length;B++){var C=Q[B];-1!==g.indexOf(C)&&I++}return I===A.length},uG.prototype.yW=function(A,g,I,B){A.imageLoaded&&A.Ta&&g&&this.hW(g,I,B)},uG),tG;function uG(A){var g=tG.call(this)||this;return g.parent=A,g.Nw="error",g.MW={},g.hD=["https://vdata.amap.com/style_icon/2.0/icon-normal-big.png","https://vdata.amap.com/style_icon/2.0/icon-biz-big.png"],g.z_=A.z_,g.R_=A.R_,g}var InnerLabelsSourceWorker=(vI.prototype.oa=function(Q,C){var i=this,A=this.parent.dQ(Q);A&&A.YE?A.YE(function(A,g){g.GW;var I=g.cb,B=g.ZL,g=g.optimalZoom;StaticSDFManagerWorker.isEmpty(A)?C&&C({}):i.parent.yw.iW(A,{ZL:B,optimalZoom:g,id:Q,cb:function(A){C(A),I&&I()}})}):C&&C({})},vI),ImageStatus$1,II;function vI(A){this.parent=A,this.Mf=A.R_,this.ac=A.z_}II=ImageStatus$1=ImageStatus$1||{},II.BLOB="blob",II.TOLOAD="toload",II.LOADING="loading",II.LOADED="loaded",II.UNLOADED="unloaded",II.ERROR="error",II.RELOADING="reloading",II.UNCOMBINED="uncombined",II.COMBINING="combining",II.COMBINED="combined";var noop=function(A){},XHR={send:function(A,g){void 0===g&&(g={});var I=new XMLHttpRequest,Q=void 0===(B=g.qw)?noop:B,i=void 0===(C=g.Aw)?noop:C,B=g.Me,C=g.method,g=g.content;return I.responseType=B||"json",I.onreadystatechange=function(){if(4===I.readyState&&200===I.status){var A=I.response;try{Q(A)}catch(A){i(A)}}else 404===I.status&&(I.abort(),i(Error("404")))},I.onerror=function(A){I.abort(),i(A)},I.open(C||"GET",A),I.send(g||void 0),I}};function parserFunc(A){var N={TS:function(){this.PS=0}};N.TS.prototype.create=function(A){this.OS&&this.PS===A||(this.OS=[]),this.PS=A,this.FS=0,this.BS=0},N.TS.prototype.flush=function(){var A=this.FS-this.BS;if(0!==A){for(;A--;)this.ES.jS(this.OS[this.BS++]);this.FS>=this.PS&&(this.FS=0),this.BS=this.FS}},N.TS.prototype.NS=function(){this.flush(),this.ES=null},N.TS.prototype.US=function(A){this.NS(),this.ES=A},N.TS.prototype.init=function(A){A||(this.BS=0,this.FS=0)},N.TS.prototype.WS=function(A,g){var I=this.FS-A-1;for(I<0&&(I+=this.PS);g--;)I>=this.PS&&(I=0),this.OS[this.FS++]=this.OS[I++],this.FS>=this.PS&&this.flush()},N.TS.prototype.GS=function(A){this.OS[this.FS++]=A,this.FS>=this.PS&&this.flush()},N.TS.prototype.HS=function(A){return(A=this.FS-A-1)<0&&(A+=this.PS),this.OS[A]},N.VS=function(){},N.VS.prototype.US=function(A){this.ES=A},N.VS.prototype.NS=function(){this.ES=null},N.VS.prototype.init=function(){var A=5;for(this.ZS=0,this.YS=-1;A--;)this.ZS=this.ZS<<8|this.ES.JS()},N.VS.prototype.XS=function(A){for(var g,I=0,B=A;B--;)this.YS>>>=1,g=this.ZS-this.YS>>>31,this.ZS-=this.YS&g-1,I=I<<1|1-g,0==(4278190080&this.YS)&&(this.ZS=this.ZS<<8|this.ES.JS(),this.YS<<=8);return I},N.VS.prototype.qS=function(A,g){var I=A[g],B=(this.YS>>>11)*I;return(2147483648^this.ZS)<(2147483648^B)?(this.YS=B,A[g]+=2048-I>>>5,0==(4278190080&this.YS)&&(this.ZS=this.ZS<<8|this.ES.JS(),this.YS<<=8),0):(this.YS-=B,this.ZS-=B,A[g]-=I>>>5,0==(4278190080&this.YS)&&(this.ZS=this.ZS<<8|this.ES.JS(),this.YS<<=8),1)},N.QS=function(A,g){for(;g--;)A[g]=1024},N.KS=function(A){this.tR=[],this.iR=A},N.KS.prototype.init=function(){N.QS(this.tR,1<<this.iR)},N.KS.prototype.decode=function(A){for(var g=1,I=this.iR;I--;)g=g<<1|A.qS(this.tR,g);return g-(1<<this.iR)},N.KS.prototype.eR=function(A){for(var g,I=1,B=0,Q=0;Q<this.iR;++Q)I=I<<1|(g=A.qS(this.tR,I)),B|=g<<Q;return B},N.nR=function(A,g,I,B){for(var Q,C=1,i=0,E=0;E<B;++E)C=C<<1|(Q=I.qS(A,g+C)),i|=Q<<E;return i},N.oR=function(){this.rR=[],this.aR=[],this.sR=[],this.hR=new N.KS(8),this.lR=0},N.oR.prototype.create=function(A){for(;this.lR<A;++this.lR)this.aR[this.lR]=new N.KS(3),this.sR[this.lR]=new N.KS(3)},N.oR.prototype.init=function(){var A=this.lR;for(N.QS(this.rR,2);A--;)this.aR[A].init(),this.sR[A].init();this.hR.init()},N.oR.prototype.decode=function(A,g){return 0===A.qS(this.rR,0)?this.aR[g].decode(A):0===A.qS(this.rR,1)?8+this.sR[g].decode(A):16+this.hR.decode(A)},N.fR=function(){this.uR=[]},N.fR.prototype.init=function(){N.QS(this.uR,768)},N.fR.prototype.cR=function(A){for(var g=1;(g=g<<1|A.qS(this.uR,g))<256;);return 255&g},N.fR.prototype.dR=function(A,g){var I,B,Q=1;do{if(I=g>>7&1,g<<=1,Q=Q<<1|(B=A.qS(this.uR,(1+I<<8)+Q)),I!==B){for(;Q<256;)Q=Q<<1|A.qS(this.uR,Q);break}}while(Q<256);return 255&Q},N.pR=function(){},N.pR.prototype.create=function(A,g){var I;if(!this.vR||this.mR!==g||this.yR!==A)for(this.yR=A,this.xR=(1<<A)-1,this.mR=g,this.vR=[],I=1<<this.mR+this.yR;I--;)this.vR[I]=new N.fR},N.pR.prototype.init=function(){for(var A=1<<this.mR+this.yR;A--;)this.vR[A].init()},N.pR.prototype.bR=function(A,g){return this.vR[((A&this.xR)<<this.mR)+((255&g)>>>8-this.mR)]},N.gR=function(){this.wR=new N.TS,this._R=new N.VS,this.kR=[],this.MR=[],this.SR=[],this.RR=[],this.zR=[],this.CR=[],this.AR=[],this.IR=[],this.$R=new N.KS(4),this.LR=new N.oR,this.DR=new N.oR,this.TR=new N.pR,this.PR=-1,this.OR=-1,this.AR[0]=new N.KS(6),this.AR[1]=new N.KS(6),this.AR[2]=new N.KS(6),this.AR[3]=new N.KS(6)},N.gR.prototype.FR=function(A){return!(A<0||(this.PR!==A&&(this.PR=A,this.OR=Math.max(this.PR,1),this.wR.create(Math.max(this.OR,4096))),0))},N.gR.prototype.BR=function(A,g,I){var B=1<<I;return!(8<A||4<g||4<I||(this.TR.create(g,A),this.LR.create(B),this.DR.create(B),this.jR=B-1,0))},N.gR.prototype.init=function(){var A=4;for(this.wR.init(!1),N.QS(this.kR,192),N.QS(this.CR,192),N.QS(this.MR,12),N.QS(this.SR,12),N.QS(this.RR,12),N.QS(this.zR,12),N.QS(this.IR,114),this.TR.init();A--;)this.AR[A].init();this.LR.init(),this.DR.init(),this.$R.init(),this._R.init()},N.gR.prototype.decode=function(A,g,I){var B,Q,C,i,E=0,t=0,o=0,a=0,r=0,e=0,n=0;for(this._R.US(A),this.wR.US(g),this.init();I<0||e<I;)if(i=e&this.jR,0===this._R.qS(this.kR,(E<<4)+i))C=this.TR.bR(e++,n),n=7<=E?C.dR(this._R,this.wR.HS(t)):C.cR(this._R),this.wR.GS(n),E=E<4?0:E-(E<10?3:6);else{if(1===this._R.qS(this.MR,E))(B=0)===this._R.qS(this.SR,E)?0===this._R.qS(this.CR,(E<<4)+i)&&(E=E<7?9:11,B=1):(0===this._R.qS(this.RR,E)?Q=o:(0===this._R.qS(this.zR,E)?Q=a:(Q=r,r=a),a=o),o=t,t=Q),0===B&&(B=2+this.DR.decode(this._R,i),E=E<7?8:11);else if(r=a,a=o,o=t,B=2+this.LR.decode(this._R,i),E=E<7?7:10,4<=(C=this.AR[B<=5?B-2:3].decode(this._R))){if(t=(2|1&C)<<(i=(C>>1)-1),C<14)t+=N.nR(this.IR,t-C-1,this._R,i);else if(t+=this._R.XS(i-4)<<4,(t+=this.$R.eR(this._R))<0){if(-1===t)break;return!1}}else t=C;if(e<=t||t>=this.OR)return!1;this.wR.WS(t,B),e+=B,n=this.wR.HS(0)}return this.wR.flush(),this.wR.NS(),this._R.NS(),!0},N.gR.prototype.ER=function(A){var g,I,B;return!(A.size<5)&&(g=(B=A.JS())%9,I=(B=~~(B/9))%5,B=~~(B/5),!!this.BR(g,I,B)&&(B=A.JS(),B|=A.JS()<<8,B|=A.JS()<<16,B+=16777216*A.JS(),this.FR(B)))},N.NR=function(A,g){var I,B=new N.gR;if(!B.ER(A))throw new Error("Incorrect stream properties");if(I=A.JS(),I|=A.JS()<<8,I|=A.JS()<<16,I+=16777216*A.JS(),A.JS(),A.JS(),A.JS(),A.JS(),!B.decode(A,g,I))throw new Error("Error in data stream");return!0};var xA=1e-9;function bA(A,g,I){return function(A){for(var C,i,I=0,B="",Q=0,I=0;I<A.length;)(C=A[I])>>>7==0?("0"!==(i=String.fromCharCode(A[I])).charCodeAt(0).toString(16)&&(B+=i),I+=1):252==(252&C)?(Q=(3&A[I])<<30,Q|=(63&A[I+1])<<24,Q|=(63&A[I+2])<<18,Q|=(63&A[I+3])<<12,Q|=(63&A[I+4])<<6,Q|=63&A[I+5],B+=String.fromCharCode(Q),I+=6):248==(248&C)?(Q=(7&A[I])<<24,Q|=(63&A[I+1])<<18,Q|=(63&A[I+2])<<12,Q|=(63&A[I+3])<<6,Q|=63&A[I+4],B+=String.fromCharCode(Q),I+=5):240==(240&C)?(Q=(15&A[I])<<18,Q|=(63&A[I+1])<<12,Q|=(63&A[I+2])<<6,Q|=63&A[I+3],B+=String.fromCharCode(Q),I+=4):224==(224&C)?(Q=(31&A[I])<<12,Q|=(63&A[I+1])<<6,Q|=63&A[I+2],B+=String.fromCharCode(Q),I+=3):192==(192&C)?(Q=(63&A[I])<<6,Q|=63&A[I+1],B+=String.fromCharCode(Q),I+=2):("0"!==(i=String.fromCharCode(A[I])).charCodeAt(0).toString(16)&&(B+=i),I+=1);return B.trim()}(A.subarray(g,I))}var B=new RegExp("^[+\\-]?[0-1]*[.]?[0-1]*$","gi");function qA(A,g){A=A.toString(),g=g.toString(),A=new Array(32-A.length+1).join("0")+A,g=new Array(32-g.length+1).join("0")+g;var I=B;return I.lastIndex=0,(A=(g+A).toString().match(I))?(-1===A[I=0].indexOf(".")&&(I=parseInt(A,2)),I.toString(36).toUpperCase()):"error"}A.getUnifyJson=function(A){var g=[];if(!(A instanceof ArrayBuffer)){var I={status:3,building:{},floor:{},id:""};return g.push(I),g}var B=new DataView(A),Q=0;Q+=4;var C=B.getInt16(Q,!1);Q+=2;try{for(;0<C;){Q+=4;var i=B.getUint8(Q);Q+=1;for(var E=new ArrayBuffer(i),t=new Uint8Array(E),o=0;o<i;o++)t[o]=B.getUint8(Q),Q+=1;var a=bA(t,0,i);Q+=2;var r=B.getInt8(Q);Q+=1,0!==r&&((I={}).status=r,I.building={},I.floor={},I.id=a,g.push(I));var e=B.getInt32(Q,!1);Q+=4;var n=B.getInt32(Q,!0);Q+=4;var c=e-n;if(0!==n){for(var s=2078870821,E=8*Math.ceil(n/8),h=n%8,e=new ArrayBuffer(E),S=new Int32Array(e),D=0;8<=n;){var w=B.getInt32(Q,!0),F=B.getInt32(Q+4,!0),f=w^s,M=292664^F;S[D]=f,S[D+1]=M,D+=2,Q+=8,n-=8}0!==n&&(w=B.getInt32(Q,!0),F=B.getInt32(Q+4,!0),f=w^s,M=292664^F,S[D]=f,S[D+1]=M,Q+=n);for(var u=new Uint8Array(e),k=u.length,G=k-8+h,d=new Uint8Array(G),o=0;o<G;o++)d[o]=u[o];for(o=0;o<h;o++)d[G-h+o]=u[k-1-o];E={data:d,offset:0,JS:function(){return this.data[this.offset++]}},e={data:[],offset:0,jS:function(A){this.data[this.offset++]=A}},N.NR(E,e);for(var y=e.data,G=y.length,e=new ArrayBuffer(G),l=new Int8Array(e),o=0;o<G;o++)l[o]=y[o];(I=function(A){var g={},I={},B=new Uint8Array(A),Q=new DataView(A),C=0;C+=4,C+=4;var i=Q.getInt32(C,!0);C+=4,C+=4;var E=Q.getInt32(C,!0);C+=4+E,C+=4;var a=qA(t=Q.getUint32(C,!0).toString(2),o=Q.getUint32(C+4,!0).toString(2)),r=bA(B,C+=8,C+64),e=bA(B,C+=64,C+64);C+=64;var n=Q.getInt8(C),c=bA(B,C+=1,C+8);C+=8;var s=Q.getInt16(C,!0),h=Q.getInt16(C+2,!0);C+=4;var S=Q.getFloat32(C,!0),D=Q.getFloat32(C+4,!0);C+=8,A=Q.getFloat32(C,!0),E=Q.getFloat32(C+4,!0),C+=8;var t=Q.getFloat32(C,!0),o=Q.getFloat32(C+4,!0);C+=8;var w=Q.getInt32(C,!0);C+=4;var F=Q.getInt32(C,!0);C+=4;var f=Q.getInt32(C,!0);C+=4;for(var M=[],u=0;u<w;u++)M.push(Q.getInt32(C,!0)),C+=4;for(var k=[],u=0;u<f;u++)k.push(Q.getInt32(C,!0)),C+=4;for(var G=[],u=0;u<w;u++){var d=bA(B,C,C+48);G.push(d),C+=48}for(var y=[],u=0;u<w;u++){var l=bA(B,C,C+8);y.push(l),C+=8}for(var N=[],u=0;u<F;u++){var v=Q.getInt32(C,!0)*xA+D,Y=Q.getInt32(C+4,!0)*xA+S;N.push([v,Y]),C+=8}t={type:"Feature",geometry:{type:"Polygon",coordinates:[N]},properties:{pid:a,name_cn:r,name_en:e,default_floor:n,buildingtype:c,building_poi_style:[s,h],centerPoint:[D,S],left_bottom_Point:[A,E],width:t,height:o,numberofFloor:w,numberofGeoPoints:F,park_floor_count:f,floor_indexs:M,park_floors:k,floor_names:G,floor_nonas:y}};for(var R=0;R<i;R++){var J=bA(B,C,C+8);C+=8;var L=Q.getInt8(C);C+=1,I[L]={floor:{},shops:[],pubs:[],cons:[]};var U=Q.getInt16(C,!0),H=Q.getInt16(C+2,!0);C+=4;var K=Q.getInt16(C,!0),p=Q.getInt16(C+2,!0);C+=4;var m=Q.getInt16(C,!0),W=Q.getInt16(C+2,!0);C+=4;var x=Q.getInt32(C,!0);C+=4;var b=Q.getInt32(C,!0);C+=4;var q=Q.getInt32(C,!0);C+=4;var T=Q.getInt32(C,!0);C+=4;for(var Z=[],O=0;O<T;O++){var X=Q.getInt32(C,!0);C+=4;for(var z=[],j=0;j<X;j++)v=Q.getInt32(C,!0)*xA+D,Y=Q.getInt32(C+4,!0)*xA+S,z.push([v,Y]),C+=8;Z.push(z)}var V="Polygon",P=Z[0];1<T&&(V="MultiPolygon",P=Z),W={type:"Feature",geometry:{type:V,coordinates:[P]},properties:{namecode:J,index:L,floor_region_type:[U,H],unhighlighted_floor_line_style:[K,p],highlighted_floor_line_style:[m,W],numberofShopCount:x,numberofPubCount:b,numberofConCount:q,floor_area_count:T}},I[L].floor=W;for(var _=[],$=0;$<x;$++){var AA=bA(B,C,C+128);C+=128;var gA=Q.getUint32(C,!0).toString(2),IA=Q.getUint32(C+4,!0).toString(2),BA=qA(gA,IA),QA=bA(B,C+=8,C+24),CA=bA(B,C+=24,C+12);C+=12;var iA=Q.getInt32(C,!0);C+=4;var EA=Q.getFloat32(C,!0);C+=4;var tA=Q.getInt8(C);C+=1;var oA=Q.getInt16(C,!0),aA=Q.getInt16(C+2,!0);C+=4;var rA=Q.getInt16(C,!0),eA=Q.getInt16(C+2,!0);C+=4,gA=Q.getInt32(C,!0)*xA+D,IA=Q.getInt32(C+4,!0)*xA+S,C+=8;var nA=Q.getInt32(C,!0);C+=4;for(var cA=[],O=0;O<nA;O++)v=Q.getInt32(C,!0)*xA+D,Y=Q.getInt32(C+4,!0)*xA+S,cA.push([v,Y]),C+=8;IA={type:"Feature",geometry:{type:"Polygon",coordinates:[cA]},properties:{name:AA,pid:BA,cpid:QA,logo:CA,area:iA,rank:EA,height:tA,poitype:[oA,aA],regiontype:[rA,eA],font_anthor_point:[gA,IA],shop_point_number:nA}},_.push(IA)}I[L].shops=_;for(var sA=[],hA=0;hA<b;hA++){var SA=bA(B,C,C+24);C+=24;var DA=Q.getUint32(C,!0).toString(2),wA=Q.getUint32(C+4,!0).toString(2),FA=qA(DA,wA),fA=bA(B,C+=8,C+48);C+=48;var MA=Q.getFloat32(C,!0);C+=4,DA=Q.getInt16(C,!0),wA=Q.getInt16(C+2,!0),C+=4,v=Q.getInt32(C,!0)*xA+D,Y=Q.getInt32(C+4,!0)*xA+S,C+=8,wA={type:"Feature",geometry:{type:"Point",coordinates:[v,Y]},properties:{cpid:SA,pid:FA,name:fA,rank:MA,poitype:[DA,wA]}},sA.push(wA)}I[L].pubs=sA;for(var uA=[],kA=0;kA<q;kA++){var GA=bA(B,C,C+24);C+=24;var dA=Q.getUint32(C,!0).toString(2),yA=Q.getUint32(C+4,!0).toString(2),lA=qA(dA,yA),NA=bA(B,C+=8,C+48);C+=48;var vA=Q.getFloat32(C,!0);C+=4,dA=Q.getInt16(C,!0),yA=Q.getInt16(C+2,!0),C+=4,v=Q.getInt32(C,!0)*xA+D,Y=Q.getInt32(C+4,!0)*xA+S,C+=8,yA={type:"Feature",geometry:{type:"Point",coordinates:[v,Y]},properties:{cpid:GA,pid:lA,name:NA,rank:vA,poitype:[dA,yA]}},uA.push(yA)}I[L].cons=uA}C+=4,C+=4+(o=Q.getInt32(C,!0));var YA=Q.getInt32(C,!0);C+=4;for(var RA=[],u=0;u<YA;u++)v=Q.getInt32(C,!0)*xA+D,Y=Q.getInt32(C+4,!0)*xA+S,RA.push([v,Y]),C+=8;t.properties.outside_outline=RA;var JA,LA={};for(JA in I)if(I.hasOwnProperty(JA)){for(LA.floor=I[JA].floor,j=0;j<I[JA].shops.length;j++){var UA=Q.getInt16(C,!0);C+=2;var HA=Q.getInt16(C,!0);C+=2,I[JA].shops[j].properties.zoom_min=UA,I[JA].shops[j].properties.zoom_max=HA}for(LA.shops=I[JA].shops,j=0;j<I[JA].pubs.length;j++){var KA=Q.getInt16(C,!0);C+=2;var pA=Q.getInt16(C,!0);C+=2,I[JA].pubs[j].properties.zoom_min=KA,I[JA].pubs[j].properties.zoom_max=pA}for(LA.pubs=I[JA].pubs,j=0;j<I[JA].cons.length;j++){var mA=Q.getInt16(C,!0);C+=2;var WA=Q.getInt16(C,!0);C+=2,I[JA].cons[j].properties.zoom_min=mA,I[JA].cons[j].properties.zoom_max=WA}LA.cons=I[JA].cons,g.floor=LA}return C+=4,C+=4+(o=Q.getInt32(C,!0)),o=Q.getInt8(C),C+=1,t.properties.UR=o,g.building=t,g}(e)).status=r,I.id=a,g.push(I)}Q+=c,--C}}catch(A){}return g}}var obj={WR:parserFunc};parserFunc(obj);var IndoorMapBinDataParser=obj,OverlayWorker=(RN.prototype.setPathWebgl=function(A,g){try{for(var I=new StaticSDFManagerWorker.K_,B=new StaticSDFManagerWorker.J_,Q=new StaticSDFManagerWorker.oE,C=new StaticSDFManagerWorker.oE,i=A.data,E=this.EW(i[0][0][0]),t=0,o=i;t<o.length;t++){for(var a=o[t],r=E.center,e=[],n=[],c=a[0],s=[],h=[],S=[],D=0,w=c;D<w.length;D++){var F=w[D],f=StaticSDFManagerWorker.at.getProjection("EPSG:3857").project(F[0],F[1]);e.push(f[0]-r[0],f[1]-r[1]),n.push(F)}for(var M=1,u=a.length;M<u;M++){for(var k=a[M],G=[],d=[],y=0,l=k;y<l.length;y++)F=l[y],StaticSDFManagerWorker.Bs(F)?(G.push(F.pos[0]-r[0],F.pos[1]-r[1]),d.push(F.toJSON())):(f=StaticSDFManagerWorker.at.getProjection("EPSG:3857").project(F[0],F[1]),G.push(f[0]-r[0],f[1]-r[1]),d.push(F));s.push(G),h.push(d)}for(var N=[],M=0,u=e.length;M<u;M+=2)N.push(StaticSDFManagerWorker.Bu(e[M],e[M+1]));StaticSDFManagerWorker.equals(N[0],N[N.length-1])||N.push(StaticSDFManagerWorker.Ex(N[0]));for(var v=e.length,M=0;M<s.length;M++)S.push(v/2),v+=s[M].length,StaticSDFManagerWorker.Util.Ig(e,s[M]);c=I.Nx(e,S),Q.add(c);for(var Y=B.Nx(N,{lineJoin:"miter"}).Iw,M=0;M<s.length;M++){for(var G=s[M],R=[],J=0,u=G.length;J<u;J+=2)R.push(StaticSDFManagerWorker.Bu(G[J],G[J+1]));R.push(StaticSDFManagerWorker.Bu(G[0],G[1])),Y+=B.Nx(R,{lineJoin:"miter"}).Iw}C.add(Y)}g(null,{$c:B,Dc:I,Sx:E,Oc:Q,Uc:C})}catch(A){g(A.message)}},RN.prototype.AW=function(A,g){try{var I={},B=IndoorMapBinDataParser.getUnifyJson(A);if(!B)return!1;for(var Q,C,i,E,t,o=0;o<B.length;o++)0===B[o].status&&(Q=(E=B[o]).floor,t=E.building,C=E.status,i=E.id,E=Q.floor.properties.index,I[i]||(I[i]={}),I[i].building=t,I[i].data||(I[i].data={}),t={floor:Q,status:C,id:i,building:t},I[i].data[E]=t);g(null,I)}catch(A){g(A.message,null)}},RN.prototype.EW=function(A){if(A)return A=StaticSDFManagerWorker.Bs(A)?StaticSDFManagerWorker.at.getProjection("EPSG:3857").project(A.KL,A.kT):StaticSDFManagerWorker.at.getProjection("EPSG:3857").project(A[0],A[1]),StaticSDFManagerWorker.lcs.getLocalByCoord(A)},RN),wasm;function RN(A){this.parent=A}var heap=new Array(32).fill(void 0);function getObject(A){return heap[A]}heap.push(void 0,null,!0,!1);var heap_next=heap.length;function dropObject(A){A<36||(heap[A]=heap_next,heap_next=A)}function takeObject(A){var g=getObject(A);return dropObject(A),g}var cachedTextDecoder=self.TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{};cachedTextDecoder.decode&&cachedTextDecoder.decode();var cachegetUint8Memory0=null;function getUint8Memory0(){return null!==cachegetUint8Memory0&&cachegetUint8Memory0.buffer===wasm.memory.buffer||(cachegetUint8Memory0=new Uint8Array(wasm.memory.buffer)),cachegetUint8Memory0}function getStringFromWasm0(A,g){return cachedTextDecoder.decode(getUint8Memory0().subarray(A,A+g))}var WASM_VECTOR_LEN=0,cachedTextEncoder=self.TextEncoder?new TextEncoder:{},encodeString="function"==typeof cachedTextEncoder.encodeInto?function(A,g){return cachedTextEncoder.encodeInto(A,g)}:function(A,g){var I=cachedTextEncoder.encode(A);return g.set(I),{read:A.length,jW:I.length}};function passStringToWasm0(A,g,I){if(void 0===I){var B=cachedTextEncoder.encode(A),Q=g(B.length);return getUint8Memory0().subarray(Q,Q+B.length).set(B),WASM_VECTOR_LEN=B.length,Q}for(var C=A.length,i=g(C),E=getUint8Memory0(),t=0;t<C;t++){var o=A.charCodeAt(t);if(127<o)break;E[i+t]=o}return t!==C&&(0!==t&&(A=A.slice(t)),i=I(i,C,C=t+3*A.length),I=getUint8Memory0().subarray(i+t,i+C),t+=encodeString(A,I).jW),WASM_VECTOR_LEN=t,i}var cachegetInt32Memory0=null;function getInt32Memory0(){return null!==cachegetInt32Memory0&&cachegetInt32Memory0.buffer===wasm.memory.buffer||(cachegetInt32Memory0=new Int32Array(wasm.memory.buffer)),cachegetInt32Memory0}function addHeapObject(A){heap_next===heap.length&&heap.push(heap.length+1);var g=heap_next;return heap_next=heap[g],heap[g]=A,g}var RSAPublicKeyPair=(qP.XW=function(A){var g=Object.create(qP.prototype);return g.UW=A,g},qP.prototype.VW=function(){var A=this.UW;this.UW=0,wasm.__wbg_rsapublickeypair_free(A)},qP.prototype.init=function(){wasm.rsapublickeypair_init(this.UW)},qP.prototype.encode=function(A){try{var g=passStringToWasm0(A,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc);return wasm.rsapublickeypair_encode(8,this.UW,g,WASM_VECTOR_LEN),getStringFromWasm0(I=getInt32Memory0()[2],B=getInt32Memory0()[3])}finally{var I=getInt32Memory0()[2],B=getInt32Memory0()[3];wasm.__wbindgen_free(I,B)}},qP);function qP(){var A=wasm.rsapublickeypair_new();return qP.XW(A)}function load(g,A){return WebAssembly.instantiate(g,A).then(function(A){return A instanceof WebAssembly.Instance?{instance:A,module:g}:A})}function init(A){var g={wbg:{}};return g.wbg.__wbg_new_59cb74e423758ede=function(){return addHeapObject(new Error)},g.wbg.__wbg_stack_558ba5917b466edd=function(A,g){var I=passStringToWasm0(getObject(g).stack,wasm.__wbindgen_malloc,wasm.__wbindgen_realloc),g=WASM_VECTOR_LEN;getInt32Memory0()[A/4+1]=g,getInt32Memory0()[A/4+0]=I},g.wbg.__wbg_error_4bb6c2a97407129a=function(A,g){try{console.error(getStringFromWasm0(A,g))}finally{wasm.__wbindgen_free(A,g)}},g.wbg.__wbindgen_object_drop_ref=function(A){takeObject(A)},g.wbg.__wbindgen_throw=function(A,g){throw new Error(getStringFromWasm0(A,g))},load(A,g).then(function(A){var g=A.instance,A=A.module;return wasm=g.exports,init.WE=A,wasm})}var data="AGFzbQEAAAABaBBgAn9/AGACf38Bf2ADf39/AX9gA39/fwBgAX8AYAF/AX9gBH9/f38AYAAAYAV/f39/fwF/YAF/AX5gBX9/f39/AGAAAX9gBH9/f38Bf2AGf39/f39/AGAHf39/f39/fwF/YAJ+fwF/AqABBQN3YmcaX193YmdfbmV3XzU5Y2I3NGU0MjM3NThlZGUACwN3YmccX193Ymdfc3RhY2tfNTU4YmE1OTE3YjQ2NmVkZAAAA3diZxxfX3diZ19lcnJvcl80YmI2YzJhOTc0MDcxMjlhAAADd2JnGl9fd2JpbmRnZW5fb2JqZWN0X2Ryb3BfcmVmAAQDd2JnEF9fd2JpbmRnZW5fdGhyb3cAAAPSAdABAAUECgIAAggEAQEHAgMBAwAIAAQABQYEAAABBQ4DAAMPAwEAAQMACAELAAMGCgAGAwYBAwYBAAMAAAEBAwEBAAUGAAAFBwQBBgoDBAQBCAMDAwEBAwMBAQEBBQAAAQAFAwcAAAEGAAAFAwAAAgwAAwMNAwcAAAAEBAACCwwFBAAFAQABAAADAAAAAAMHAwAFAAAAAAIEBAUEBAMABAQEBQAAAQEBAwYFDAAAAAIBBAEBAwIDAQUFAwAHAQECAQcHAAEAAQEHAAkBBQEFCQkEAAQFAXABS0sFAwEAEQYJAX8BQYCAwAALB7IBCAZtZW1vcnkCABtfX3diZ19yc2FwdWJsaWNrZXlwYWlyX2ZyZWUAngEUcnNhcHVibGlja2V5cGFpcl9uZXcAgAEVcnNhcHVibGlja2V5cGFpcl9pbml0AIMBF3JzYXB1YmxpY2tleXBhaXJfZW5jb2RlADERX193YmluZGdlbl9tYWxsb2MAggESX193YmluZGdlbl9yZWFsbG9jAJkBD19fd2JpbmRnZW5fZnJlZQCwAQmEAQEAQQELStMBaKAB0wHMAdMBN9MBywHLAcsB0wGKAZgB0wFNzwHQAdMB0wFGzQHOAcIB0wGpAdMBtwEpYleGAaMBhgGGAdQB0wGxARNbiAHRAagBmgFppwF8xgGaASgzmwHSAWylAcwBWMABuQFMDr8BtAGyAVLTAdEBES1ewQHIAVzJAQqhtQLQAf05Af0BfyMAQeABayICJAAgAkE4aiABQYABQQBBEEHsk8AAEHYgAkFAayACKAI4IAIoAjwQJiACQTBqIAFBgAFBEEEgQfyTwAAQdiACQdAAaiACKAIwIAIoAjQQJiACQShqIAFBgAFBIEEwQYyUwAAQdiACQeAAaiACKAIoIAIoAiwQJiACQSBqIAFBgAFBMEHAAEGclMAAEHYgAkHwAGogAigCICACKAIkECYgAkEYaiABQYABQcAAQdAAQayUwAAQdiACQYABaiACKAIYIAIoAhwQJiACQRBqIAFBgAFB0ABB4ABBvJTAABB2IAJBkAFqIAIoAhAgAigCFBAmIAJBCGogAUGAAUHgAEHwAEHMlMAAEHYgAkGgAWogAigCCCACKAIMECYgAiABQYABQfAAQYABQdyUwAAQdiACQbABaiACKAIAIAIoAgQQJiACKAJAIQogAigCRCELIAIoAkghDCACKAJMIQ0gAkHYAWoiASACQdgAaiIDKQMANwMAIAIgAikDUDcD0AEgAkHAAWogAkHQAWpBARBZIAIoAsABIQ4gAigCxAEhDyACKALIASEQIAIoAswBIREgASACQegAaiIEKQMANwMAIAIgAikDYDcD0AEgAkHAAWogAkHQAWpBAhBZIAIoAsABIRIgAigCxAEhEyACKALIASEUIAIoAswBIRUgASACQfgAaiIFKQMANwMAIAIgAikDcDcD0AEgAkHAAWogAkHQAWpBAxBZIAIoAsABIRYgAigCxAEhFyACKALIASEYIAIoAswBIRkgASACQYgBaiIGKQMANwMAIAIgAikDgAE3A9ABIAJBwAFqIAJB0AFqQQQQWSACKALAASEaIAIoAsQBIRsgAigCyAEhHCACKALMASEdIAEgAkGYAWoiBykDADcDACACIAIpA5ABNwPQASACQcABaiACQdABakEFEFkgAigCwAEhHiACKALEASEfIAIoAsgBISAgAigCzAEhISABIAJBqAFqIggpAwA3AwAgAiACKQOgATcD0AEgAkHAAWogAkHQAWpBBhBZIAIoAsABISIgAigCxAEhIyACKALIASEkIAIoAswBISUgASACQbgBaiIJKQMANwMAIAIgAikDsAE3A9ABIAJBwAFqIAJB0AFqQQcQWSACKALAASEmIAIoAsQBIScgAigCyAEhKCACKALMASEpIAEgAikDSDcDACACIAIpA0A3A9ABIAJBwAFqIAJB0AFqQQEQWiACKALAASEqIAIoAsQBISsgAigCyAEhLCACKALMASEtIAMoAgAhLiACKAJQIS8gAigCVCEwIAIoAlwhMSABIAQpAwA3AwAgAiACKQNgNwPQASACQcABaiACQdABakEBEFkgAigCwAEhMiACKALEASEzIAIoAsgBITQgAigCzAEhNSABIAUpAwA3AwAgAiACKQNwNwPQASACQcABaiACQdABakECEFkgAigCwAEhNiACKALEASE3IAIoAsgBITggAigCzAEhOSABIAYpAwA3AwAgAiACKQOAATcD0AEgAkHAAWogAkHQAWpBAxBZIAIoAsABITogAigCxAEhOyACKALIASE8IAIoAswBIT0gASAHKQMANwMAIAIgAikDkAE3A9ABIAJBwAFqIAJB0AFqQQQQWSACKALAASE+IAIoAsQBIT8gAigCyAEhQCACKALMASFBIAEgCCkDADcDACACIAIpA6ABNwPQASACQcABaiACQdABakEFEFkgAigCwAEhQiACKALEASFDIAIoAsgBIUQgAigCzAEhRSABIAkpAwA3AwAgAiACKQOwATcD0AEgAkHAAWogAkHQAWpBBhBZIAIoAsABIUYgAigCxAEhRyACKALIASFIIAIoAswBIUkgASACKQNINwMAIAIgAikDQDcD0AEgAkHAAWogAkHQAWpBAhBaIAIoAsABIUogAigCxAEhSyACKALIASFMIAIoAswBIU0gASADKQMANwMAIAIgAikDUDcD0AEgAkHAAWogAkHQAWpBARBaIAIoAsABIU4gAigCxAEhTyACKALIASFQIAIoAswBIVEgBCgCACFSIAIoAmAhUyACKAJkIVQgAigCbCFVIAEgBSkDADcDACACIAIpA3A3A9ABIAJBwAFqIAJB0AFqQQEQWSACKALAASFWIAIoAsQBIVcgAigCyAEhWCACKALMASFZIAEgBikDADcDACACIAIpA4ABNwPQASACQcABaiACQdABakECEFkgAigCwAEhWiACKALEASFbIAIoAsgBIVwgAigCzAEhXSABIAcpAwA3AwAgAiACKQOQATcD0AEgAkHAAWogAkHQAWpBAxBZIAIoAsABIV4gAigCxAEhXyACKALIASFgIAIoAswBIWEgASAIKQMANwMAIAIgAikDoAE3A9ABIAJBwAFqIAJB0AFqQQQQWSACKALAASFiIAIoAsQBIWMgAigCyAEhZCACKALMASFlIAEgCSkDADcDACACIAIpA7ABNwPQASACQcABaiACQdABakEFEFkgAigCwAEhZiACKALEASFnIAIoAsgBIWggAigCzAEhaSABIAIpA0g3AwAgAiACKQNANwPQASACQcABaiACQdABakEDEFogAigCwAEhaiACKALEASFrIAIoAsgBIWwgAigCzAEhbSABIAMpAwA3AwAgAiACKQNQNwPQASACQcABaiACQdABakECEFogAigCwAEhbiACKALEASFvIAIoAsgBIXAgAigCzAEhcSABIAQpAwA3AwAgAiACKQNgNwPQASACQcABaiACQdABakEBEFogAigCwAEhciACKALEASFzIAIoAsgBIXQgAigCzAEhdSAFKAIAIXYgAigCcCF3IAIoAnQheCACKAJ8IXkgASAGKQMANwMAIAIgAikDgAE3A9ABIAJBwAFqIAJB0AFqQQEQWSACKALAASF6IAIoAsQBIXsgAigCyAEhfCACKALMASF9IAEgBykDADcDACACIAIpA5ABNwPQASACQcABaiACQdABakECEFkgAigCwAEhfiACKALEASF/IAIoAsgBIYABIAIoAswBIYEBIAEgCCkDADcDACACIAIpA6ABNwPQASACQcABaiACQdABakEDEFkgAigCwAEhggEgAigCxAEhgwEgAigCyAEhhAEgAigCzAEhhQEgASAJKQMANwMAIAIgAikDsAE3A9ABIAJBwAFqIAJB0AFqQQQQWSACKALAASGGASACKALEASGHASACKALIASGIASACKALMASGJASABIAIpA0g3AwAgAiACKQNANwPQASACQcABaiACQdABakEEEFogAigCwAEhigEgAigCxAEhiwEgAigCyAEhjAEgAigCzAEhjQEgASADKQMANwMAIAIgAikDUDcD0AEgAkHAAWogAkHQAWpBAxBaIAIoAsABIY4BIAIoAsQBIY8BIAIoAsgBIZABIAIoAswBIZEBIAEgBCkDADcDACACIAIpA2A3A9ABIAJBwAFqIAJB0AFqQQIQWiACKALAASGSASACKALEASGTASACKALIASGUASACKALMASGVASABIAUpAwA3AwAgAiACKQNwNwPQASACQcABaiACQdABakEBEFogAigCwAEhlgEgAigCxAEhlwEgAigCyAEhmAEgAigCzAEhmQEgBigCACGaASACKAKAASGbASACKAKEASGcASACKAKMASGdASABIAcpAwA3AwAgAiACKQOQATcD0AEgAkHAAWogAkHQAWpBARBZIAIoAsABIZ4BIAIoAsQBIZ8BIAIoAsgBIaABIAIoAswBIaEBIAEgCCkDADcDACACIAIpA6ABNwPQASACQcABaiACQdABakECEFkgAigCwAEhogEgAigCxAEhowEgAigCyAEhpAEgAigCzAEhpQEgASAJKQMANwMAIAIgAikDsAE3A9ABIAJBwAFqIAJB0AFqQQMQWSACKALAASGmASACKALEASGnASACKALIASGoASACKALMASGpASABIAIpA0g3AwAgAiACKQNANwPQASACQcABaiACQdABakEFEFogAigCwAEhqgEgAigCxAEhqwEgAigCyAEhrAEgAigCzAEhrQEgASADKQMANwMAIAIgAikDUDcD0AEgAkHAAWogAkHQAWpBBBBaIAIoAsABIa4BIAIoAsQBIa8BIAIoAsgBIbABIAIoAswBIbEBIAEgBCkDADcDACACIAIpA2A3A9ABIAJBwAFqIAJB0AFqQQMQWiACKALAASGyASACKALEASGzASACKALIASG0ASACKALMASG1ASABIAUpAwA3AwAgAiACKQNwNwPQASACQcABaiACQdABakECEFogAigCwAEhtgEgAigCxAEhtwEgAigCyAEhuAEgAigCzAEhuQEgASAGKQMANwMAIAIgAikDgAE3A9ABIAJBwAFqIAJB0AFqQQEQWiACKALAASG6ASACKALEASG7ASACKALIASG8ASACKALMASG9ASAHKAIAIb4BIAIoApABIb8BIAIoApQBIcABIAIoApwBIcEBIAEgCCkDADcDACACIAIpA6ABNwPQASACQcABaiACQdABakEBEFkgAigCwAEhwgEgAigCxAEhwwEgAigCyAEhxAEgAigCzAEhxQEgASAJKQMANwMAIAIgAikDsAE3A9ABIAJBwAFqIAJB0AFqQQIQWSACKALAASHGASACKALEASHHASACKALIASHIASACKALMASHJASABIAIpA0g3AwAgAiACKQNANwPQASACQcABaiACQdABakEGEFogAigCwAEhygEgAigCxAEhywEgAigCyAEhzAEgAigCzAEhzQEgASADKQMANwMAIAIgAikDUDcD0AEgAkHAAWogAkHQAWpBBRBaIAIoAsABIc4BIAIoAsQBIc8BIAIoAsgBIdABIAIoAswBIdEBIAEgBCkDADcDACACIAIpA2A3A9ABIAJBwAFqIAJB0AFqQQQQWiACKALAASHSASACKALEASHTASACKALIASHUASACKALMASHVASABIAUpAwA3AwAgAiACKQNwNwPQASACQcABaiACQdABakEDEFogAigCwAEh1gEgAigCxAEh1wEgAigCyAEh2AEgAigCzAEh2QEgASAGKQMANwMAIAIgAikDgAE3A9ABIAJBwAFqIAJB0AFqQQIQWiACKALAASHaASACKALEASHbASACKALIASHcASACKALMASHdASABIAcpAwA3AwAgAiACKQOQATcD0AEgAkHAAWogAkHQAWpBARBaIAIoAsABId4BIAIoAsQBId8BIAIoAsgBIeABIAIoAswBIeEBIAgoAgAh4gEgAigCoAEh4wEgAigCpAEh5AEgAigCrAEh5QEgASAJKQMANwMAIAIgAikDsAE3A9ABIAJBwAFqIAJB0AFqQQEQWSACKALAASHmASACKALEASHnASACKALIASHoASACKALMASHpASABIAIpA0g3AwAgAiACKQNANwPQASACQcABaiACQdABakEHEFogAigCwAEh6gEgAigCxAEh6wEgAigCyAEh7AEgAigCzAEh7QEgASADKQMANwMAIAIgAikDUDcD0AEgAkHAAWogAkHQAWpBBhBaIAIoAsABIQMgAigCxAEh7gEgAigCyAEh7wEgAigCzAEh8AEgASAEKQMANwMAIAIgAikDYDcD0AEgAkHAAWogAkHQAWpBBRBaIAIoAsABIQQgAigCxAEh8QEgAigCyAEh8gEgAigCzAEh8wEgASAFKQMANwMAIAIgAikDcDcD0AEgAkHAAWogAkHQAWpBBBBaIAIoAsABIQUgAigCxAEh9AEgAigCyAEh9QEgAigCzAEh9gEgASAGKQMANwMAIAIgAikDgAE3A9ABIAJBwAFqIAJB0AFqQQMQWiACKALAASEGIAIoAsQBIfcBIAIoAsgBIfgBIAIoAswBIfkBIAEgBykDADcDACACIAIpA5ABNwPQASACQcABaiACQdABakECEFogAigCwAEhByACKALEASH6ASACKALIASH7ASACKALMASH8ASABIAgpAwA3AwAgAiACKQOgATcD0AEgAkHAAWogAkHQ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lJnAADYCECAAQSM2AiwgAEGAmcAANgJYIABCATcCTCAAQeybwAA2AkggACAAQShqNgIgIAAgAEHIAGo2AjggACAAQcQAajYCMCAAIABBQGs2AiggAEEQakH0m8AAEI0BAAsgACgCCCIBIAEoAgAiAUF/ajYCACABQQFGBEAgAEEIahBRCyAAQeAAaiQAC5IEAQd/IwBBMGsiAyQAAn9BACACRQ0AGiADQShqIQgCQAJAAkACQANAIAAoAggtAAAEQCAAKAIAQcylwABBBCAAKAIEKAIMEQIADQULIANBCjYCKCADQoqAgIAQNwMgIAMgAjYCHCADQQA2AhggAyACNgIUIAMgATYCECADQQhqQQogASACEBsCfwJAAkAgAygCCEEBRgRAIAMoAgwhBANAIAMgBCADKAIYakEBaiIENgIYAkAgBCADKAIkIgVJBEAgAygCFCEHDAELIAMoAhQiByAESQ0AIAVBBU8NByAEIAVrIgYgAygCEGoiCSAIRg0EIAkgCCAFEHFFDQQLIAMoAhwiBiAESSAHIAZJcg0CIAMgAyAFakEnai0AACADKAIQIARqIAYgBGsQGyADKAIEIQQgAygCAEEBRg0ACwsgAyADKAIcNgIYCyAAKAIIQQA6AAAgAgwBCyAAKAIIQQE6AAAgBkEBagshBCAAKAIEIQUgACgCACAERSACIARGciIGRQRAIAIgBE0NAyABIARqLAAAQb9/TA0DCyABIAQgBSgCDBECAA0EIAZFBEAgAiAETQ0EIAEgBGosAABBv39MDQQLIAEgBGohASACIARrIgINAAtBAAwECyAFQQRB4KnAABBVAAsgASACQQAgBEGYqsAAEAgACyABIAIgBCACQaiqwAAQCAALQQELIANBMGokAAvQAwIFfwF+IwBBQGoiAyQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAgBBAWsOAgIAAQsgAigCBCIEIAJBCGooAgBqIgIgBE8NAiADQShqIAJBABC4ASADKQMoIQggAEEBNgIAIAAgCDcCBAwKCyABKAIEIgIEQCACQQF0IQIMAgtBBCECDAILIAIoAgQiBCACQQhqKAIAaiICIARJDQIgASgCBEEBdCIEIAIgBCACSxshAgsgAkEASA0CCyADQTBqIAEQhwEgAygCMCIGDQIgA0EIaiACQQEQdSADKAII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QbABEH8aIAFBwAFqJAALcAECfwJAIAAoAgAiAUEQaigCACICRQ0AIAJBADoAACABQRRqKAIAIgJFDQAgASgCECACQQEQvAELIAFBHGooAgBBAUEBELwBIAAoAgAiASABKAIEIgFBf2o2AgQgAUEBRgRAIAAoAgBBMEEIELwBCwtbAQJ/IwBBIGsiAiQAIAFBHGooAgAhAyABKAIYIAJBGGogACgCACIAQRBqKQIANwMAIAJBEGogAEEIaikCADcDACACIAApAgA3AwggAyACQQhqEAsgAkEgaiQAC2sBAn8jAEEQayIGJAACQCAAIAEgAiADIAQQFiIFDQAgBkEIaiADIAAgASAEKAIMEQYAQQAhBSAGKAIIDQAgBigCDCIFIAIoAgA2AgggAiAFNgIAIAAgASACIAMgBBAWIQULIAZBEGokACAFC20BAX8jAEEwayIDJAAgAyABNgIEIAMgADYCACADQRxqQQI2AgAgA0EsakE6NgIAIANCAjcCDCADQaSlwAA2AgggA0E6NgIkIAMgA0EgajYCGCADIAM2AiggAyADQQRqNgIgIANBCGogAhCTAQALbQEBfyMAQTBrIgMkACADIAE2AgQgAyAANgIAIANBHGpBAjYCACADQSxqQTo2AgAgA0ICNwIMIANBgKnAADYCCCADQTo2AiQgAyADQSBqNgIYIAMgA0EEajYCKCADIAM2AiAgA0EIaiACEJMBAAttAQF/IwBBMGsiAyQAIAMgATYCBCADIAA2AgAgA0EcakECNgIAIANBLGpBOjYCACADQgI3AgwgA0G0qcAANgIIIANBOjYCJCADIANBIGo2AhggAyADQQRqNgIoIAMgAzYCICADQQhqIAIQkwEAC1YBAn8jAEEgayICJAAgAUEcaigCACEDIAEoAhggAkEYaiAAQRBqKQIANwMAIAJBEGogAEEIaikCADcDACACIAApAgA3AwggAyACQQhqEAsgAkEgaiQAC1sBAn8jAEEQayICJAAgACgCACIAKAIIIQMgACgCACEAIAIgARCVASADBEADQCACIAA2AgwgAiACQQxqECsgAEEBaiEAIANBf2oiAw0ACwsgAhCUASACQRBqJAALXQEDfyAAIAEoAgAiBCACQR9xIgN0NgIAIAAgASgCDCADdCABKAIIIgVBACACa0EfcSICdnI2AgwgACAFIAN0IAEoAgQiASACdnI2AgggACABIAN0IAQgAnZyNgIEC10BAn8gACABKAIMIgMgAkEfcSIEdjYCDCAAIANBACACa0EfcSICdCABKAIIIgMgBHZyNgIIIAAgAyACdCABKAIEIgMgBHZyNgIEIAAgAyACdCABKAIAIAR2cjYCAAtZAQF/IwBBIGsiAiQAIAIgACgCADYCBCACQRhqIAFBEGopAgA3AwAgAkEQaiABQQhqKQIANwMAIAIgASkCADcDCCACQQRqQZyWwAAgAkEIahALIAJBIGokAAtZAQF/IwBBIGsiAiQAIAIgACgCADYCBCACQRhqIAFBEGopAgA3AwAgAkEQaiABQQhqKQIANwMAIAIgASkCADcDCCACQQRqQdinwAAgAkEIahALIAJBIGokAAtWAQF/IwBBIGsiAiQAIAIgADYCBCACQRhqIAFBEGopAgA3AwAgAkEQaiABQQhqKQIANwMAIAIgASkCADcDCCACQQRqQeSLwAAgAkEIahALIAJBIGokAAtWAQF/IwBBIGsiAiQAIAIgADYCBCACQRhqIAFBEGopAgA3AwAgAkEQaiABQQhqKQIANwMAIAIgASkCADcDCCACQQRqQdinwAAgAkEIahALIAJBIGokAAtrAQN/IAAoAgwhASAAQYCAxAA2AgwCQCABQYCAxABHDQBBgIDEACEBIAAoAgAiAiAAKAIERg0AIAAgAkEBajYCACAAKAIIIgMgAi0AACICQQR2ai0AACEBIAAgAyACQQ9xai0AADYCDAsgAQtSAQF/IwBBQGoiAiQAIAIgARBHIAJBEGogAhAVIAJBIGogAkEQahBIIAJBOGogAkEoaikDADcDACACIAIpAyA3AzAgACACQTBqEHAgAkFAayQAC1wBAX8jAEEgayICJAAgAkEANgIIIAJCATcDACACQRhqIAFBCGopAgA3AwAgAiABKQIANwMQIAIgAkEQahAdIABBCGogAigCCDYCACAAIAIpAwA3AgAgAkEgaiQAC0oBAX8jAEEgayICJAAgACgCACACQRhqIAFBEGopAgA3AwAgAkEQaiABQQhqKQIANwMAIAIgASkCADcDCCACQQhqEF0gAkEgaiQAC1gBAX8jAEGAGWsiAiQAIAFFBEAQwwEACyACIAEQlwEgAigCBEEANgIAIAJBCGogAUH0GBB/GiAAIAJBCGpBBHJB8BgQfxogAUH0GEEEELwBIAJBgBlqJAALTAEBfyAAQQF0QYBAcSAAQQJ0QYAYcSAAQQN0QYABcSAAQf//A3EiAUEBdkHwAHEgAEEPcXJyIAFBAnZBgAZxcnIgAUEDdkGAIHFycgtTAQF/IwBBIGsiAyQAIANBCGogAUEIaikBADcDACADIAEpAQA3AwAgA0EYaiACQQhqKQEANwMAIAMgAikBADcDECAAIAMgA0EQahBPIANBIGokAAtiAQF/IwBBMGsiACQAIABBKjYCDCAAQYSBwAA2AgggAEEkakEBNgIAIABCATcCFCAAQYikwAA2AhAgAEE7NgIsIAAgAEEoajYCICAAIABBCGo2AiggAEEQakGQgsAAEJMBAAtKAQF/IwBBIGsiAiQAIAJBCGogASABQRBqECQgAi0ACEEBRwRAEGYACyAAIAIpAAk3AAAgAEEIaiACQRFqKQAANwAAIAJBIGokAAtWAQJ/IAEoAgAhAiABQQA2AgACQCACBEAgASgCBCEDQQhBBBC1ASIBRQ0BIAEgAzYCBCABIAI2AgAgAEGchsAANgIEIAAgATYCAA8LAAtBCEEEEMcBAAtMAQF/IwBBEGsiAiQAIAIgARCJASACIAA2AgwgAiACQQxqQeiawAAQKiACIABBBGo2AgwgAiACQQxqQdihwAAQKiACEEUgAkEQaiQAC04BAX8jAEEQayIEJAACQCABKAIEIAJrIANPBEAgAEEANgIADAELIARBCGogAzYCACAEIAI2AgQgBEEBNgIAIAAgASAEEBILIARBEGokAAtUAQF/IwBBIGsiAiQAIAJBCGogARAvIAJBADYCGCACIAIpAwg3AxAgAkEQakG8g8AAIAEQtgEgAEEIaiACKAIYNgIAIAAgAikDEDcCACACQSBqJAALVgECfyABKAIAIQIgAUEANgIAAkAgAgRAIAEoAgQhA0EIQQQQtQEiAUUNASABIAM2AgQgASACNgIAIABBwKHAADYCBCAAIAE2AgAPCwALQQhBBBDHAQALTgEBfyMAQfAYayIBJAAgASAAQfAYEH8hAUH0GEEEELUBIgBFBEBB9BhBBBDHAQALIABBADYCACAAQQRqIAFB8BgQfxogAUHwGGokACAAC0kBAX8jAEEQayIDJAAgAyAAIAEgAhBqAkAgAygCAEEBRgRAIANBCGooAgAiAEUNASADKAIEIAAQxwEACyADQRBqJAAPCxC+AQALRwEBfyMAQRBrIgIkACACIAAgARBBAkAgAigCAEEBRgRAIAJBCGooAgAiAEUNASACKAIEIAAQxwEACyACQRBqJAAPCxC+AQALVAAgACABLwEOOwEOIAAgAS8BCDsBCCAAIAEoAQQ2AQQgACABLwEMQX9zOwEMIAAgAS8BCkF/czsBCiAAIAEvAQJBf3M7AQIgACABLwEAQX9zOwEAC0MBA38CQCACRQ0AA0AgAC0AACIEIAEtAAAiBUYEQCAAQQFqIQAgAUEBaiEBIAJBf2oiAg0BDAILCyAEIAVrIQMLIAMLSgACfyABQYCAxABHBEBBASAAKAIYIAEgAEEcaigCACgCEBEBAA0BGgsgAkUEQEEADwsgACgCGCACIAMgAEEcaigCACgCDBECAAsLQgEEfwJAIAEoAgAiAiABKAIETw0AIAJBAWoiAyACSQ0AIAEoAgAhBCABIAM2AgBBASEFCyAAIAQ2AgQgACAFNgIAC1wBAX8jAEEgayIDJAAgA0GAgMQANgIMIANB+IPAADYCCCADIAE2AgAgAyABIAJqNgIEIANBGGogA0EIaikDADcDACADIAMpAwA3AxAgACADQRBqEGEgA0EgaiQACy0AAkAgAQRAIAEgAhC1ASICDQFBACECDAELQQAhAQsgACABNgIEIAAgAjYCAAs7AAJAIAQgA08EQCACIARJDQEgACAEIANrNgIEIAAgASADajYCAA8LIAMgBCAFEFYACyAEIAIgBRBVAAtIAQF/IwBBIGsiAyQAIANBFGpBADYCACADQbijwAA2AhAgA0IBNwIEIAMgATYCHCADIAA2AhggAyADQRhqNgIAIAMgAhCTAQALOgEBfyMAQRBrIgAkAEHUxsAAKAIAQQNHBEAgAEEBOgALIAAgAEELajYCDCAAQQxqEA0LIABBEGokAAs8AQF/An9BACABKAIAIgIgASgCBEYNABogASACQQFqNgIAIAItAAAhAUEBCyECIAAgAToAASAAIAI6AAALOwEBfyMAQRBrIgIkACACQQhqIAEoAgAQeSACLQAIIQEgACACLQAJOgABIAAgAUEBcToAACACQRBqJAALOQECfiAAIAEpAQAiAj0BACAAIAIgAkIgiIU9AQYgACACQhCIIgMgAkIwiIU9AQQgACAC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rgELCxoBAX8gACgCCCIBIAAoAgRHBEAgACABEG8LCxoAIABCADcCBCAAQQQ2AgAgAEEMakIANwIACxYAIABBCHRBgID8B3EgAEEYdHJBEHYLHQAgASgCAEUEQAALIABBwKHAADYCBCAAIAE2AgALGwAgARCiASAAIAEoAgg2AgQgACABKAIANgIACxwAIAEoAhhBxKPAAEELIAFBHGooAgAoAgwRAgALHAAgASgCGEHPo8AAQQ4gAUEcaigCACgCDBECAAscACABKAIYQYS4wABBBSABQRxqKAIAKAIMEQIACxcAIAAgAjYCCCAAIAI2AgQgACABNgIACxcAIAAgAjYCCCAAIAM2AgQgACABNgIACxIAIABBDHQgAEHw/wNxQQR2cgsNACAAIAEgAiADEIEBCxAAIAEEQCAAIAFBARC8AQsLFgAgACABKAIINgIEIAAgASgCADYCAAsQACABBEAgACABQQQQvAELCxIAIAAoAgAgASABIAJqEDBBAAsVACABIAAoAgAiACgCACAAKAIEEAkLDAAgAARADwsQwwEACxQAIAAoAgAgASAAKAIEKAIMEQEACwgAIAAgARA6Cw4AIAAgASABIAJqEIsBCxAAIAAoAgAgASACELYBQQALEAAgACACNgIEIAAgATYCAAsQACABIAAoAgAgACgCBBAJCw0AIAAtAABBEHFBBHYLDQAgAC0AAEEgcUEFdgsKACAAIAEgAhA8Cw0AIAAgACgCCCABEG4LEQBBl6PAAEERQaijwAAQdwALDgAgACgCABoDQAwACwALCwAgADUCACABECULDQAgACgCACABIAIQEQsLACAAKAIAIAEQHwsNAEGwj8AAQRsQxQEACw4AQcuPwABBzwAQxQEACwkAIAAgARAEAAsGACABEAYLGQAgACABQfjGwAAoAgAiAEEkIAAbEQAAAAsLACAAKAIAIAEQLQsNACABQaiowABBAhAJCwYAEL4BAAsGACABEBwLDABC5K7ChZebpYgRCwQAIAELBABBAAsFAEGABAsEAEEBCwwAQvTQ1KnQ97O+ZgsMAEKNybDVpKrTlVYLAwABCwMAAQsL3D4CAEGAgMAAC8k+L1VzZXJzL3lhbmdkb25nbGFpLy5jYXJnby9yZWdpc3RyeS9zcmMvZ2l0aHViLmNvbS0xZWNjNjI5OWRiOWVjODIzL2Flcy1zb2Z0LTAuNS4wL3NyYy9iaXRzbGljZS5ycwAAAAAAEABhAAAAGgAAACgAAAAAABAAYQAAACEAAAAiAAAAU2xpY2UgbXVzdCBiZSB0aGUgc2FtZSBsZW5ndGggYXMgdGhlIGFycmF5L1VzZXJzL3lhbmdkb25nbGFpLy5jYXJnby9yZWdpc3RyeS9zcmMvZ2l0aHViLmNvbS0xZWNjNjI5OWRiOWVjODIzL2dlbmVyaWMtYXJyYXktMC4xNC40L3NyYy9saWIucnOuABAAYgAAAEoCAAAJAAAAL1VzZXJzL3lhbmdkb25nbGFpLy5jYXJnby9yZWdpc3RyeS9zcmMvZ2l0aHViLmNvbS0xZWNjNjI5OWRiOWVjODIzL2Flcy1zb2Z0LTAuNS4wL3NyYy9pbXBscy5ycwAAIAEQAF4AAAA1AAAAGQAAAHNyYy9saWIucnMAAJABEAAKAAAAZwAAABQAAACQARAACgAAAGcAAAAJAAAAYW1hcC13ZWKQARAACgAAADYAAAAaAAAASW5zdGFuY2Ugbm90IGNyZWF0ZWSQARAACgAAAEYAAAAVAAAAMDEyMzQ1Njc4OWFiY2RlZi9Vc2Vycy95YW5nZG9uZ2xhaS8uY2FyZ28vcmVnaXN0cnkvc3JjL2dpdGh1Yi5jb20tMWVjYzYyOTlkYjllYzgyMy9hZXMtc29mdC0wLjUuMC9zcmMvZXhwYW5kLnJzAAgCEABfAAAANwAAACYAAAAIAhAAXwAAADgAAAAaAAAACAIQAF8AAAA5AAAAGgAAAAgCEABfAAAAOgAAABoAAAAIAhAAXwAAADcAAAAJAAAACAIQAF8AAABAAAAAFwAAAAgCEABfAAAAQgAAADMAAAAIAhAAXwAAAEcAAAAcAAAACAIQAF8AAABHAAAACQAAAAgCEABfAAAATwAAACEAAAABAAAACAAAAAQAAAACAAAAAwAAAAQAAAAIAAAABAAAAAUAAAAvVXNlcnMveWFuZ2RvbmdsYWkvLnJ1c3R1cC90b29sY2hhaW5zL3N0YWJsZS14ODZfNjQtYXBwbGUtZGFyd2luL2xpYi9ydXN0bGliL3NyYy9ydXN0L3NyYy9saWJjb3JlL2FsbG9jL2xheW91dC5ycwAAACwDEABxAAAA5wAAAAkAAABjYWxsZWQgYFJlc3VsdDo6dW53cmFwKClgIG9uIGFuIGBFcnJgIHZhbHVlAAYAAAAAAAAAAQAAAAcAAAAIAAAAAAAAAAEAAAAJAAAACgAAAAsAAAAMAAAABAAAAAQAAAANAAAADgAAAC9Vc2Vycy95YW5nZG9uZ2xhaS8ucnVzdHVwL3Rvb2xjaGFpbnMvc3RhYmxlLXg4Nl82NC1hcHBsZS1kYXJ3aW4vbGliL3J1c3RsaWIvc3JjL3J1c3Qvc3JjL2xpYnN0ZC9zeW5jL29uY2UucnMAAAAYBBAAbQAAAAgBAAApAAAAY2FsbGVkIGBPcHRpb246OnVud3JhcCgpYCBvbiBhIGBOb25lYCB2YWx1ZQAPAAAAAAAAAAEAAAAQAAAAEQAAABIAAAATAAAAAAAAAAEAAAAQAAAAEQAAABIAAAAUAAAABAAAAAQAAAAVAAAAFgAAABcAAAAMBRAAAAAAAGEgRGlzcGxheSBpbXBsZW1lbnRhdGlvbiByZXR1cm5lZCBhbiBlcnJvciB1bmV4cGVjdGVkbHkvVXNlcnMveWFuZ2RvbmdsYWkvLnJ1c3R1cC90b29sY2hhaW5zL3N0YWJsZS14ODZfNjQtYXBwbGUtZGFyd2luL2xpYi9ydXN0bGliL3NyYy9ydXN0L3NyYy9saWJhbGxvYy9zdHJpbmcucnMASwUQAGwAAACMCAAACQAAABkAAAAAAAAAAQAAABoAAAAKClN0YWNrOgoKCgobAAAABAAAAAQAAAAcAAAAHQAAAB4AAABhc3NlcnRpb24gZmFpbGVkOiBgKGxlZnQgPT0gcmlnaHQpYAogIGxlZnQ6IGBgLAogcmlnaHQ6IGBgOiD8BRAALQAAACkGEAAMAAAANQYQAAMAAABkZXN0aW5hdGlvbiBhbmQgc291cmNlIHNsaWNlcyBoYXZlIGRpZmZlcmVudCBsZW5ndGhzUAYQADQAAAAvVXNlcnMveWFuZ2RvbmdsYWkvLnJ1c3R1cC90b29sY2hhaW5zL3N0YWJsZS14ODZfNjQtYXBwbGUtZGFyd2luL2xpYi9ydXN0bGliL3NyYy9ydXN0L3NyYy9saWJjb3JlL21hY3Jvcy9tb2QucnMAjAYQAG8AAAAoAAAACQAAAFRyaWVkIHRvIHNocmluayB0byBhIGxhcmdlciBjYXBhY2l0eS9Vc2Vycy95YW5nZG9uZ2xhaS8ucnVzdHVwL3Rv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BAAAFgAAAHRocmVhZCBuYW1lIG1heSBub3QgY29udGFpbiBpbnRlcmlvciBudWxsIGJ5dGVzAHgNEAAYAAAAcwQAABoAAABpbmNvbnNpc3RlbnQgc3RhdGUgaW4gdW5wYXJreA0QABgAAACrBAAAEgAAAHgNEAAYAAAAuQQAAA4AAABhdHRlbXB0ZWQgdG8gdXNlIGEgY29uZGl0aW9uIHZhcmlhYmxlIHdpdGggdHdvIG11dGV4ZXNzcmMvbGlic3RkL3N5bmMvY29uZHZhci5ycw4PEAAaAAAAPwIAABIAAABzcmMvbGlic3RkL3N5bmMvb25jZS5yc2Fzc2VydGlvbiBmYWlsZWQ6IHN0YXRlX2FuZF9xdWV1ZSAmIFNUQVRFX01BU0sgPT0gUlVOTklORzgPEAAXAAAApwEAABUAAABPbmNlIGluc3RhbmNlIGhhcyBwcmV2aW91c2x5IGJlZW4gcG9pc29uZWQAADgPEAAXAAAAiwEAABUAAAA4DxAAFwAAAOgBAAAJAAAAOA8QABcAAAD0AQAAHgAAAFBvaXNvbkVycm9yIHsgaW5uZXI6IC4uIH1jYW5ub3QgbW9kaWZ5IHRoZSBwYW5pYyBob29rIGZyb20gYSBwYW5pY2tpbmcgdGhyZWFkc3JjL2xpYnN0ZC9wYW5pY2tpbmcucnNBEBAAFwAAAGoAAAAJAAAAQRAQABcAAAChAQAADwAAAEEQEAAXAAAAogEAAA8AAAAxAAAAEAAAAAQAAAAyAAAAMwAAADQAAAAMAAAABAAAADUAAAAlAAAACAAAAAQAAAA2AAAANwAAACUAAAAIAAAABAAAADgAAABOdWxFcnJvciUAAAAEAAAABAAAADkAAABjYW4ndCBibG9jayB3aXRoIHdlYiBhc3NlbWJseXNyYy9saWJzdGQvc3lzL3dhc20vY29uZHZhci5ycwAFERAAHgAAABUAAAAJAAAAY2Fubm90IHJlY3Vyc2l2ZWx5IGFjcXVpcmUgbXV0ZXhzcmMvbGlic3RkL3N5cy93YXNtL211dGV4LnJzVBEQABwAAAAVAAAACQAAAHNyYy9saWJhbGxvYy9yYXdfdmVjLnJzY2FwYWNpdHkgb3ZlcmZsb3eAERAAFwAAAG4CAAAFAAAAYC4uALkREAACAAAAQm9ycm93RXJyb3JCb3Jyb3dNdXRFcnJvcmNhbGxlZCBgT3B0aW9uOjp1bndyYXAoKWAgb24gYSBgTm9uZWAgdmFsdWW4ERAAAAAAADogAAC4ERAAAAAAABASEAACAAAAQgAAAAAAAAABAAAAQwAAAHBhbmlja2VkIGF0ICcnLCBAEhAAAQAAAEESEAADAAAAOgAAALgREAAAAAAAVBIQAAEAAABUEhAAAQAAAGluZGV4IG91dCBvZiBib3VuZHM6IHRoZSBsZW4gaXMgIGJ1dCB0aGUgaW5kZXggaXMgAABwEhAAIAAAAJASEAASAAAAQgAAAAwAAAAEAAAARAAAAEUAAABGAAAAICAgICB7CiwKLCAgeyB9IH0oCigsKQpbXXNyYy9saWJjb3JlL2ZtdC9udW0ucnMA5RIQABYAAABUAAAAFAAAADB4MDAwMTAyMDMwNDA1MDYwNzA4MDkxMDExMTIxMzE0MTUxNjE3MTgxOTIwMjEyMjIzMjQyNTI2MjcyODI5MzAzMTMyMzMzNDM1MzYzNzM4Mzk0MDQxNDI0MzQ0NDU0NjQ3NDg0OTUwNTE1MjUzNTQ1NTU2NTc1ODU5NjA2MTYyNjM2NDY1NjY2NzY4Njk3MDcxNzI3Mzc0NzU3Njc3Nzg3OTgwODE4MjgzODQ4NTg2ODc4ODg5OTA5MTkyOTM5NDk1OTY5Nzk4OTkAAEIAAAAEAAAABAAAAEcAAABIAAAASQAAAHNyYy9saWJjb3JlL2ZtdC9tb2QucnMAAPATEAAWAAAATAQAABEAAADwExAAFgAAAFYEAAAkAAAAKClzcmMvbGliY29yZS9zbGljZS9tZW1jaHIucnMAAAAqFBAAGwAAAFIAAAAFAAAAaW5kZXggIG91dCBvZiByYW5nZSBmb3Igc2xpY2Ugb2YgbGVuZ3RoIFgUEAAGAAAAXhQQACIAAABzbGljZSBpbmRleCBzdGFydHMgYXQgIGJ1dCBlbmRzIGF0IACQFBAAFgAAAKYUEAANAAAAc3JjL2xpYmNvcmUvc3RyL3BhdHRlcm4ucnMAAMQUEAAaAAAAjAEAACYAAABzcmMvbGliY29yZS9zdHIvbW9kLnJzAADwFBAAFgAAAIAHAAAvAAAA8BQQABYAAADDBwAALwAAAPAUEAAWAAAABAgAAC8AAABbLi4uXWJ5dGUgaW5kZXggIGlzIG91dCBvZiBib3VuZHMgb2YgYAAAPRUQAAsAAABIFRAAFgAAALgREAABAAAAYmVnaW4gPD0gZW5kICggPD0gKSB3aGVuIHNsaWNpbmcgYAAAeBUQAA4AAACGFRAABAAAAIoVEAAQAAAAuBEQAAEAAAAgaXMgbm90IGEgY2hhciBib3VuZGFyeTsgaXQgaXMgaW5zaWRlICAoYnl0ZXMgKSBvZiBgPRUQAAsAAAC8FRAAJgAAAOIVEAAIAAAA6hUQAAYAAAC4ERAAAQAAAHNyYy9saWJjb3JlL3VuaWNvZGUvcHJpbnRhYmxlLnJzGBYQACAAAAAKAAAAHAAAABgWEAAgAAAAGgAAACgAAAAAAQMFBQYGAwcGCAgJEQocCxkMFA0QDg0PBBADEhITCRYBFwUYAhkDGgccAh0BHxYgAysDLAItCy4BMAMxAjIBpwKpAqoEqwj6AvsF/QT+A/8JrXh5i42iMFdYi4yQHB3dDg9LTPv8Li8/XF1fteKEjY6RkqmxurvFxsnK3uTl/wAEERIpMTQ3Ojs9SUpdhI6SqbG0urvGys7P5OUABA0OERIpMTQ6O0VGSUpeZGWEkZudyc7PDREpRUlXZGWNkam0urvFyd/k5fANEUVJZGWAhLK8vr/V1/Dxg4WLpKa+v8XHzs/a20iYvc3Gzs9JTk9XWV5fiY6Psba3v8HGx9cRFhdbXPb3/v+ADW1x3t8ODx9ubxwdX31+rq+7vPoWFx4fRkdOT1haXF5+f7XF1NXc8PH1cnOPdHWWL18mLi+nr7e/x8/X35pAl5gwjx/Awc7/Tk9aWwcIDxAnL+7vbm83PT9CRZCR/v9TZ3XIydDR2Nnn/v8AIF8igt8EgkQIGwQGEYGsDoCrNSgLgOADGQgBBC8ENAQHAwEHBgcRClAPEgdVBwMEHAoJAwgDBwMCAwMDDAQFAwsGAQ4VBToDEQcGBRAHVwcCBxUNUARDAy0DAQQRBg8MOgQdJV8gbQRqJYDIBYKwAxoGgv0DWQcVCxcJFAwUDGoGCgYaBlkHKwVGCiwEDAQBAzELLAQaBgsDgKwGCgYhP0wELQN0CDwDDwM8BzgIKwWC/xEYCC8RLQMgECEPgIwEgpcZCxWIlAUvBTsHAg4YCYCzLXQMgNYaDAWA/wWA3wzuDQOEjQM3CYFcFIC4CIDLKjgDCgY4CEYIDAZ0Cx4DWgRZCYCDGBwKFglMBICKBqukDBcEMaEEgdomBwwFBYClEYFtEHgoKgZMBICNBIC+AxsDDw0ABgEBAwEEAggICQIKBQsCDgQQARECEgUTERQBFQIXAhkNHAUdCCQBagNrArwC0QLUDNUJ1gLXAtoB4AXhAugC7iDwBPgC+QL6AvsBDCc7Pk5Pj56enwYHCTY9Plbz0NEEFBg2N1ZXf6qur7014BKHiY6eBA0OERIpMTQ6RUZJSk5PZGVctrcbHAcICgsUFzY5Oqip2NkJN5CRqAcKOz5maY+Sb1/u71pimpsnKFWdoKGjpKeorbq8xAYLDBUdOj9FUaanzM2gBxkaIiU+P8XGBCAjJSYoMzg6SEpMUFNVVlhaXF5gY2Vma3N4fX+KpKqvsMDQrq95zG5vk14iewUDBC0DZgMBLy6Agh0DMQ8cBCQJHgUrBUQEDiqAqgYkBCQEKAg0CwGAkIE3CRYKCICYOQNjCAkwFgUhAxsFAUA4BEsFLwQKBwkHQCAnBAwJNgM6BRoHBAwHUEk3Mw0zBy4ICoEmUk4oCCpWHBQXCU4EHg9DDhkHCgZICCcJdQs/QSoGOwUKBlEGAQUQAwWAi2IeSAgKgKZeIkULCgYNEzkHCjYsBBCAwDxkUwxICQpGRRtICFMdOYEHRgodA0dJNwMOCAoGOQcKgTYZgLcBDzINg5tmdQuAxIq8hC+P0YJHobmCOQcqBAJgJgpGCigFE4KwW2VLBDkHEUAFCwIOl/gIhNYqCaL3gR8xAxEECIGMiQRrBQ0DCQcQk2CA9gpzCG4XRoCaFAxXCRmAh4FHA4VCDxWFUCuA1S0DGgQCgXA6BQGFAIDXKUwECgQCgxFETD2AwjwGAQRVBRs0AoEOLARkDFYKgK44HQ0sBAkHAg4GgJqD2AgNAw0DdAxZBwwUDAQ4CAoGKAgiToFUDBUDAwUHCRkHBwkDDQcpgMslCoQGc3JjL2xpYmNvcmUvdW5pY29kZS91bmljb2RlX2RhdGEucnMAAJ8bEAAjAAAASwAAACgAAACfGxAAIwAAAFcAAAAWAAAAnxsQACMAAABSAAAAPgAAAEIAAAAEAAAABAAAAEoAAABFcnJvcgAAAAADAACDBCAAkQVgAF0ToAASF6AeDCDgHu8sICsqMKArb6ZgLAKo4Cwe++AtAP6gNZ7/4DX9AWE2AQqhNiQNYTerDuE4LxghOTAcYUbzHqFK8GphTk9voU6dvCFPZdHhTwDaIVAA4OFRMOFhU+zioVTQ6OFUIAAuVfABv1UAcAAHAC0BAQECAQIBAUgLMBUQAWUHAgYCAgEEIwEeG1sLOgkJARgEAQkBAwEFKwN3DwEgNwEBAQQIBAEDBwoCHQE6AQEBAgQIAQkBCgIaAQICOQEEAgQCAgMDAR4CAwELAjkBBAUBAgQBFAIWBgEBOgEBAgEECAEHAwoCHgE7AQEBDAEJASgBAwE5AwUDAQQHAgsCHQE6AQIBAgEDAQUCBwILAhwCOQIBAQIECAEJAQoCHQFIAQQBAgMBAQgBUQECBwwIYgECCQsGSgIbAQEBAQE3DgEFAQIFCwEkCQFmBAEGAQICAhkCBAMQBA0BAgIGAQ8BAAMAAx0DHQIeAkACAQcIAQILCQEtA3cCIgF2AwQCCQEGA9sCAgE6AQEHAQEBAQIIBgoCATARPwQwBwEBBQEoCQwCIAQCAgEDOAEBAgMBAQM6CAICmAMBDQEHBAEGAQMCxjoBBQABwyEAA40BYCAABmkCAAQBCiACUAIAAQMBBAEZAgUBlwIaEg0BJggZCy4DMAECBAICJwFDBgICAgIMAQgBLwEzAQEDAgIFAgEBKgIIAe4BAgEEAQABABAQEAACAAHiAZUFAAMBAgUEKAMEAaUCAAQAApkLsAE2DzgDMQQCAkUDJAUBCD4BDAI0CQoEAgFfAwIBAQIGAaABAwgVAjkCAQEBARYBDgcDBcMIAgMBARcBUQECBgEBAgEBAgEC6wECBAYCAQIbAlUIAgEBAmoBAQECBgEBZQMCBAEFAAkBAvUBCgIBAQQBkAQCAgQBIAooBgIECAEJBgIDLg0BAgAHAQYBAVIWAgcBAgECegYDAQECAQcBAUgCAwEBAQACAAU7BwABPwRRAQACAAEBAwQFCAgCBx4ElAMANwQyCAEOARYFAQ8ABwERAgcBAgEFAAcABAAHbQcAYIDwAExheW91dEVycnByaXZhdGUAQajHwAALAQEAbwlwcm9kdWNlcnMCCGxhbmd1YWdlAQRSdXN0AAxwcm9jZXNzZWQtYnkDBXJ1c3RjHTEuNDQuMCAoNDljYWU1NTc2IDIwMjAtMDYtMDEpBndhbHJ1cwYwLjE4LjAMd2FzbS1iaW5kZ2VuBjAuMi42NQ==",RSAWorker=(TP.prototype.transform=function(A){if(this.instance)return this.instance.encode(A)},TP.prototype.dE=function(A){var g=this;return init(base64ToBuffer(data)).then(function(){g.instance=new RSAPublicKeyPair,g.instance.init(),A(null)})},TP),env;function TP(A,g){this.parent=A,this.dE(g)}function base64ToBuffer(A){for(var g=atob(A),I=new Uint8Array(g.length),B=0,Q=g.length;B<Q;B++)I[B]=g.charCodeAt(B);return I.buffer}env=StaticSDFManagerWorker._.DW?{movingDraw:sharedChunk.movingDraw,db:sharedChunk.db,nebulaVersion:sharedChunk.nebulaVersion,host:sharedChunk.host}:{movingDraw:window.movingDraw};var AMapWorker=(eQ.prototype.initCryptWorker=function(A,g,I){StaticSDFManagerWorker._.wasm?this.PW=new RSAWorker(this,I):I()},eQ.prototype.setId=function(A,g,I){this.No=g,I()},eQ.prototype.loadNebulaSourceTile=function(A,g,I){var B=this,Q=g.url,C=g.ya,i=g.zoom,E=g.projectionId,t=g.optimalZoom,o=g.Ca,a=g.mS,r=g.viewMode,e=g.showBuildingBlock,n=g.ZL,g=g.hH;return this.Ww.bw(Q,C,i,t,E,o,a,r,e,n,g,function(A,g){B.Zw?B.$w.push({done:I,type:"NebulaSourceTile",data:g}):I(A,g)})},eQ.prototype.loadNebulaSourceTileSdf=function(A,g,I){var B=this,Q=g.url,C=g.CD,i=(g.zoom,g.projectionId),E=(g.optimalZoom,g.Ca,g.mS,g.viewMode,g.showBuildingBlock,g.mH),g=g.ZL;return this.Ww.bW(Q,C,i,g,E,function(A,g){B.Zw?B.$w.push({done:I,type:"NebulaSourceTileSdf",data:g}):I(A,g)})},eQ.prototype.loadMVTSourceTile=function(A,g,I){var B=g.url,Q=g.Zh,C=g.projectionId,g=g.tileSize;return this._getMVTSourceWorker(),this.Kw.bw(B,Q,C,g,I)},eQ.prototype.loadDistrictSourceTile=function(A,g,I){var B=g.url,Q=g.Zh,C=g.projectionId,i=g.tileSize,E=g.styles,g=g.adcode;return this._getDistrictSourceWorker(),this.kW.bw(B,Q,C,i,E,g,I)},eQ.prototype.loadMapboxSourceTile=function(A,g,I){var B=g.url,Q=g.Zh,C=g.projectionId,i=g.tileSize,E=g.styles,g=g.adcode;return this._getMapboxSourceWorker(),this.vQ.bw(B,Q,C,i,E,g,I)},eQ.prototype.updateMapStyle=function(A,g,I){this.vn=g.vn},eQ.prototype.updateUserStyle=function(A,g,I){this.vn&&(this.vn.Ve=g.Kd),I&&I()},eQ.prototype.sendHttp=function(A,g){this.R_.protocol=g.protocol,this.protocol=g.protocol},eQ.prototype.updateParams=function(A,g){this.params=StaticSDFManagerWorker.assign(this.params,g),g.langForeign&&(this.langForeign=g.langForeign),g.QG&&(this.QG=g.QG)},eQ.prototype.commonWordImageLoaded=function(A){this.yw.commonWordImageLoaded()},eQ.prototype.loadCommonWords=function(A,g){this.Ww.loadCommonWords(g)},eQ.prototype.getSDFData=function(A,g,I){this.R_.oa(g,{cb:function(A){I(null,A)}})},eQ.prototype.getImages=function(A,g){var C=this,i=g.data,E=g.cb,t=this.z_;t.loadImages(i,{cb:function(A){for(var g=[],I=0,B=i;I<B.length;I++){var Q=B[I];g.push({url:Q,data:t.getImage(Q)})}C.Uh.send("imageLoaded",{data:g,cb:E})},type:"icon"})},eQ.prototype.setPathWebgl=function(A,g,I){this.BW.setPathWebgl(g,I)},eQ.prototype.sendIndoorRequest=function(A,g,I){var B=this;this.BW.AW(g,function(A,g){B.Zw?B.$w.push({done:I,type:"sendIndoorRequest",data:g}):I(A,g)})},eQ.prototype.Qw=function(A){this.Uh.send("NebulaTileSdfLoaded",StaticSDFManagerWorker.ca)},eQ.prototype.setMainThreadBusy=function(A,g){if(env.movingDraw)this.Zw=!1;else{if(this.Zw=g,!this.Zw)for(var I=0,B=this.$w;I<B.length;I++){var Q=B[I];Q.done?Q.done(null,Q.data):this.Uh.send(Q.type,Q.data)}this.$w=[]}},eQ.prototype.loadWordsByFront=function(A){this.Uh.send("loadWordsByFront",A.Es,A.cb)},eQ.prototype.innerLabelsLoadData=function(A,g,I){this.NQ.oa(g.id,I)},eQ.prototype.dQ=function(A){return this.lQ[A]},eQ.prototype.deleteTileStaticSDF=function(A,g){this.IW.NW(g)},eQ.prototype._getNebulaSourceWorker=function(){return this.Ww||(this.Ww=new NebulaSourceWorker(this)),this.Ww},eQ.prototype._getMVTSourceWorker=function(){return this.Kw||(this.Kw=new MVTSourceWorker(this)),this.Kw},eQ.prototype._getDistrictSourceWorker=function(){return this.kW||(this.kW=new DistrictSourceWorker(this)),this.kW},eQ.prototype._getMapboxSourceWorker=function(){var A;return this.vQ||(A=this.vQ=new MapboxSourceWorker(this),this.lQ[A.id]=A),this.vQ},eQ.prototype.Fb=function(){var B=this;this.z_.on("iconImageLoaded",function(A){delete A.type,B.Uh.send("iconImageLoaded",A)}),this.R_.on("dynamicTextTextureInfoLoaded",function(A){delete A.type,B.Uh.send("dynamicTextTextureInfoLoaded",A)}),this.R_.on("dynamicTextSDFInfoLoaded",function(A){delete A.type,B.Uh.send("dynamicTextSDFInfoLoaded",A.data)}),this.yw.on("dynamicTextVerticeLoaded",function(A){var g,I=A;B.Zw?(g=A.type,delete A.type,B.$w.push({type:g,data:I})):(delete A.type,B.Uh.send("dynamicTextVerticeLoaded",I))}),this.yw.on("dynamicTextVerticeLoadedByTile",function(A){var g,I=A;B.Zw?(g=A.type,delete A.type,B.$w.push({type:g,data:I})):(delete A.type,B.Uh.send("dynamicTextVerticeLoadedByTile",I))})},eQ);function eQ(A,g,I){this.key=g,this.GW=I,this.lQ={},this.Zw=!1,this.No="-1",this.protocol="https",this.Yw=XHR,this.$w=[],this.Uh=new StaticSDFManagerWorker.Bh(A,this),this.self=A,A=this.z_=new ImageManagerWorker,this.R_=new StaticSDFManagerWorker.jb({parent:this,z_:A}),this.IW=new StaticSDFManagerWorker.xW(this,XHR),this.Ww=new NebulaSourceWorker(this),this.NQ=new InnerLabelsSourceWorker(this),this.lQ[this.Ww.id]=this.Ww,this.yw=new LabelWorker(this),this.BW=new OverlayWorker(this),this.Fb()}return StaticSDFManagerWorker._.DW&&(self.Wh=new AMapWorker(self,sharedChunk.key,env),self.Cn=StaticSDFManagerWorker.Cn),AMapWorker}),define(["./shared"],function(yt){var f={"AMap.MouseTool":["AMap.RangingTool"],"AMap.Adaptor":["AMap.CallAMap"]},u=new yt.tS;function c(t){try{var i=localStorage.getItem("_AMap_"+t);return i?(i=JSON.parse(i)).version===yt.Module.eS.iS?(window._jsload_(t,i.script,!0),i.css&&window._cssload_(t,i.css,!0),u.finish(t),1):void window.localStorage.removeItem("_AMap_"+t):void 0}catch(t){return}}function o(t){for(var i=[],n=0,e=t;n<e.length;n++){var s=e[n],r=s;if(!u.has(s)){if(r=f[r])for(var o=0,a=r;o<a.length;o++){var h=a[o];!t[h]&&i.indexOf(h)<0&&(c(h)||i.push(h))}i.indexOf(s)<0&&(c(s)||i.push(s))}}return i}function a(t,i){var n=document.createElement("script");n.type="text/javascript",document.body?(n.onload=function(){document.body.removeChild(n),i()},n.src=t,document.body.appendChild(n)):(n.onload=function(){document.head.removeChild(n),i()},n.src=t,document.head.appendChild(n))}var i,e=((i=document.getElementById("AMap_Dynamic_style"))||((i=document.createElement("style")).type="text/css",i.id="AMap_Dynamic_style",(qi=document.head||document.getElementsByTagName("head")[0]).childNodes.length<2?qi.appendChild(i):qi.insertBefore(i,qi.childNodes[1])),function(t){i.appendChild(document.createTextNode(t))});window._cssload_=function(t,i,n){try{!n&&window.localStorage&&i&&""!==i&&window.localStorage.setItem("_AMap_"+t,JSON.stringify({css:i,version:yt.Module.eS.iS}))}catch(t){}e(i)},window._jsload_=function(t,i,n){try{var e;!n&&i&&""!==i&&(e=window.localStorage["_AMap_"+t]||"{}",(e=JSON.parse(e)).version!==yt.Module.eS.iS||e.script?window.localStorage.setItem("_AMap_"+t,JSON.stringify({version:yt.Module.eS.iS,script:i})):window.localStorage.setItem("_AMap_"+t,JSON.stringify({version:yt.Module.eS.iS,script:i,css:e.css})))}catch(t){}yt.Module.nS(t,i)};var r="function"==typeof Float32Array;function s(t,i){return 1-3*i+3*t}function h(t,i){return 3*i-6*t}function l(t,i,n){return((s(i,n)*t+h(i,n))*t+3*i)*t}function v(t,i,n){return 3*s(i,n)*t*t+2*h(i,n)*t+3*i}var I=(t.prototype.t=function(t){for(var i=0,n=1;10!==n&&this.i[n]<=t;++n)i+=.1;--n;var e=i+(t-this.i[n])/(this.i[n+1]-this.i[n])*.1,s=v(e,this.o,this.s);return.001<=s?function(t,i,n,e){for(var s=0;s<4;++s){var r=v(i,n,e);if(0===r)return i;i-=(l(i,n,e)-t)/r}return i}(t,e,this.o,this.s):0===s?e:function(t,i,n,e,s){for(var r,o,a=0;0<(r=l(o=i+(n-i)/2,e,s)-t)?n=o:i=o,1e-7<Math.abs(r)&&++a<10;);return o}(t,i,i+.1,this.o,this.s)},t.prototype.h=function(t){return 0===t?0:1===t?1:l(this.t(t),this.l,this.u)},t.prototype.p=function(t){return t},t);function t(t,i,n,e){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");this.o=t,this.l=i,this.s=n,this.u=e,this.i=new(r?Float32Array:Array)(11);for(var s=0;s<11;++s)this.i[s]=l(.1*s,t,n)}var n,d,k={getViewport:function(t){return t?[t.clientWidth,t.clientHeight]:[0,0]},getStyle:function(t,i){var n,e=t.style[i];return e&&"auto"!==e||!document.defaultView||(e=(n=document.defaultView.getComputedStyle(t,null))?n[i]:null),e&&"auto"!==e||"height"!==i||(e=t.clientHeight+"px"),e&&"auto"!==e||"width"!==i||(e=t.clientWidth+"px"),"auto"===e?null:e},getViewportOffset:function(t){var i,n=0,e=0,s=t,r=document.body,o=document.documentElement;do{if(n+=s.offsetTop||0,e+=s.offsetLeft||0,n+=parseInt(k.getStyle(s,"borderTopWidth"),10)||0,e+=parseInt(k.getStyle(s,"borderLeftWidth"),10)||0,i=k.getStyle(s,"position"),s.offsetParent===r&&"absolute"===i)break;if("fixed"===i){n+=r.scrollTop||o.scrollTop||0,e+=r.scrollLeft||o.scrollLeft||0;break}}while(s=s.offsetParent);for(s=t;s!==r&&(n-=s.scrollTop||0,e-=s.scrollLeft||0,!k.m()&&yt._.webkit&&(e+=s.scrollWidth-s.clientWidth),s=s.parentNode););return[e,n]},m:function(){return n||(d="ltr"===k.getStyle(document.body,"direction"),n=!0),d},create:function(t,i,n,e){return t=document.createElement(t),n&&(t.className=n),i&&(e&&"before"===e?(e=i.firstChild,i.insertBefore(t,e)):i.appendChild(t)),t},toggleClass:function(t,i,n){n?this.addClass(t,i):this.removeClass(t,i)},hasClass:function(t,i){if(t&&i)return 0<t.className.length&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(t.className)},addClass:function(t,i){t&&i&&(t.classList&&t.classList.add?t.classList.add(i):this.hasClass(t,i)||(t.className+=(t.className?" ":"")+i))},setClass:function(t,i){t&&(t.className=i||"")},removeClass:function(t,n){t&&n&&(t.classList&&t.classList.remove?t.classList.remove(n):t.className=t.className.replace(/(\S+)\s*/g,function(t,i){return i===n?"":t}).replace(/(^\s+|\s+$)/,""))},watchSize:function(n,e,s){var t=document.createElement("iframe");t.style.cssText="width: 100%;height: 100%;position: absolute;pointEvents:none; opacity:0; margin: 0;padding: 0;border: none;",t.onload=function(){t.contentWindow.onresize=i},n.appendChild(t),t.src="about:blank";var r=0,o=0;function i(){s.k=n.getBoundingClientRect(),s.M=[n.clientLeft,n.clientTop];var t=n.offsetWidth,i=n.offsetHeight;t===r&&i===o||(e(t,i),r=t,o=i)}return i(),s.resize=i,window.onscroll=i,function(){t.contentWindow.onresize=null}},watchSize2:function(n,e,s){var r=document.createElement("_");r.className="expand";var o=r.appendChild(document.createElement("_"));o.className="shrink";var a=r.appendChild(document.createElement("_"));a.className="expandChild";var h,f,t=o.appendChild(document.createElement("_"));return t.className="shrinkChild",o.style.cssText=r.style.cssText="height:100%;left:0;opacity:0;overflow:hidden;pointer-events:none;position:absolute;top:0;transition:0s;width:100%;z-index:-1",t.style.cssText=a.style.cssText="display:block;height:100%;transition:0s;width:100%",t.style.width=t.style.height="200%",n.appendChild(r),u(),function(){c(),n.removeChild(r)};function u(){c(),s.k=n.getBoundingClientRect(),s.M=[n.clientLeft,n.clientTop];var t=n.offsetWidth,i=n.offsetHeight;t===h&&i===f||(h=t,f=i,a.style.width=2*t+"px",a.style.height=2*i+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight,e(t,i)),o.addEventListener("scroll",u),r.addEventListener("scroll",u)}function c(){o.removeEventListener("scroll",u),r.removeEventListener("scroll",u)}},mousePos:function(t,i,n){return t&&(n.k=t.getBoundingClientRect(),n.M=[t.clientLeft,t.clientTop]),t=n.k,i.touches&&i.changedTouches&&(i=0<i.touches.length?i.touches[0]:i.changedTouches[i.changedTouches.length-1]),[i.clientX-t.left-n.M[0],i.clientY-t.top-n.M[1]]},remove:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},closest:function(t,i){return t?this.hasClass(t,i)?t:(t=t.parentElement)?k.closest(t,i):null:null},fillText:function(t,i){if(t)return void 0!==t.textContent?t.textContent=i:void 0!==t.innerText?t.innerText=i:t.innerHTML=i,t},_L:function(t){for(var i=document.documentElement.style,n=0;n<t.length;n+=1)if(t[n]in i)return t[n];return!1},rotate:function(t,i,n){var e,s=k.kL;n=n||{x:t.clientWidth/2,y:t.clientHeight/2},s?(e="",e+=" rotate("+i+"deg)",t.style[s]=e,t.style[k.ML[s]+"-origin"]=n.x+"px "+n.y+"px"):(s=Math.cos(i*Math.PI/180),i=Math.sin(i*Math.PI/180),t.style.filter="progid:DXImageTransform.Microsoft.Matrix()",0<t.filters.length&&((t=t.filters.item(0)).Dx=-n.x*s+n.y*i+n.x,t.Dy=-n.x*i-n.y*s+n.y,t.M11=t.M22=s,t.M12=-(t.M21=i)))},setCss:function(t,i){t=t instanceof Array?t:[t];for(var n=0;n<t.length;n+=1)for(var e in i)i.hasOwnProperty(e)&&(t[n].style[e]=i[e]);return this},setOpacity:function(t,i){t.style&&("opacity"in t.style?t.style.opacity=""+i:"filter"in t.style&&(i=Math.round(100*i),t.style.filter="",100!==i&&(t.style.filter=" progid:DXImageTransform.Microsoft.Alpha(opacity="+i+")")))},ML:{},kL:d=n=!1};k.kL=k._L(["WebkitTransform","OTransform","MozTransform","msTransform","transform"]),k.ML={transform:"transform",WebkitTransform:"-webkit-transform",OTransform:"-o-transform",MozTransform:"-moz-transform",msTransform:"-ms-transform"};var p=(m.prototype.isEnabled=function(){return"disabled"!==this.R},m.prototype.isActive=function(){return"active"===this.R},m.prototype.enable=function(){this.isEnabled()||(this.R="enabled")},m.prototype.disable=function(){this.isEnabled()&&(this.R,this.R="disabled")},m.prototype.L=function(t){this.A&&(this.A=!1),t.ctrlKey||0!==t.button||(document.addEventListener("mousemove",this.T),document.addEventListener("mouseup",this.I),this.D(t))},m.prototype.P=function(t){if(1<t.touches.length)return this.j.removeEventListener("touchmove",this.T),void(this.R="enabled");this.A&&(this.A=!1),"enabled"===this.R&&(this.j.addEventListener("touchmove",this.T,{capture:!0,passive:!0}),document.addEventListener("touchend",this.oS),this.D(t))},m.prototype.D=function(t){this.$=this.U=this.B=k.mousePos(this.j,t,this._map),this.YF=this._map.getView().getStatus().centerCoord,this.XF=this._map.containerToCoord(this.$),this.W=[[Date.now(),this.$]],this.R="active"},m.prototype.Z=function(t){var i;"touchmove"===t.type&&1<t.touches.length||(this.W.length<2&&"active"===this.R&&this.G("dragstart",t),"touchmove"===t.type&&this.G("touchmove",t),this.G("dragging",t),this.isEnabled()&&("active"===this.R&&(this.R="pending"),"disabled"!==this.R&&this._map.getStatus().dragEnable&&(i=k.mousePos(this.j,t,this._map),this.q=t,this.B=yt.set(yt.create(),i[0],i[1]),this.Y(),this.W.push([Date.now(),this.B]),this.W.length<2||(t=this._map.getView(),i=this._map.containerToCoord(i),i=[this.XF[0]-i[0]+this.YF[0],this.XF[1]-i[1]+this.YF[1]],t.setOptions({center:this._map.getProjection().unproject(i[0],i[1])})))))},m.prototype.tt=function(t){if(0===t.button){if(this.it())return this.S(),void this.C();switch(this.R){case"active":this.R="enabled",this.S(),this.C();break;case"pending":this.R="enabled",this.S(),this.C(),this.et(t),this.G("dragend",t);break;default:this.R="enabled",this.S(),this.G("dragend",t)}}},m.prototype.N=function(t){if(0<t.touches.length)return this.$=this.U=this.B=k.mousePos(this.j,t,this._map),this.YF=this._map.getView().getStatus().centerCoord,void(this.XF=this._map.containerToCoord(this.$));if(this.it())return this.S(),this.C(),this.R="enabled",void this.G("dragend",t);switch(this.R){case"active":this.R="enabled",this.S(),this.C();break;case"pending":this.R="enabled",this.S(),this.C(),this.G("dragend",t),this.et(t);break;default:this.G("dragend",t),this.S()}},m.prototype.it=function(){var t=this._map.getLimitBounds();if(t=t&&t.toJSON()){var i=this._map.getBounds().toJSON(),n=[],e=this._map.getCenter().toJSON(),s=[e[0],e[1]];return(i[0]<t[0]||i[1]<t[1]||i[2]>t[2]||i[3]>t[3])&&(n[0]=i[0]-t[0],n[1]=i[1]-t[1],n[2]=i[2]-t[2],n[3]=i[3]-t[3],n[0]<0&&0<n[2]?s[0]=(t[0]+t[2])/2:n[0]<0?s[0]=e[0]-n[0]:0<n[2]&&(s[0]=e[0]-n[2]),n[1]<0&&0<n[3]?s[1]=(t[1]+t[3])/2:n[1]<0?s[1]=e[1]-n[1]:0<n[3]&&(s[1]=e[1]-n[3]),this._map.panTo(s,100),!0)}},m.prototype.S=function(){this.j.removeEventListener("touchmove",this.T),document.removeEventListener("touchend",this.oS),document.removeEventListener("mousemove",this.T),document.removeEventListener("mouseup",this.I)},m.prototype.C=function(){delete this.q,delete this.$,delete this.U,delete this.B},m.prototype.Y=function(){for(var t=this.W,i=Date.now();0<t.length&&60<i-t[0][0];)t.shift()},m.prototype.et=function(t){var i,n,e,s,r,o,a,h,f,u,c,l,v,d;function p(){this.isEnabled()&&this.A||(r=-1);var t=Date.now()-a;h<t&&(r=-1),t=[l[0]*t+v[0]*t*t/2,l[1]*t+v[1]*t*t/2],o=[o[0]+(t[0]-d[0]),o[1]+(t[1]-d[1])],d=t,r<=0?this.A=!1:(e.setOptions({center:yt.at.getProjection(s.projectionId).unproject(o[0],o[1])}),yt.Util.requestAnimFrame(p.bind(this)),r--)}this._map.getStatus().jogEnable&&(this.A=!0,this.Y(),(u=this.W).length<2||(c=u[u.length-1],i=u[0],n=[c[1][0]-i[1][0],c[1][1]-i[1][1]],0==(f=(c[0]-i[0])/1e3)||yt.equals(c[1],i[1])?this.G("moveend",t):(t=[n[0]/(.3/f),n[1]/(.3/f)],f=Math.sqrt(t[0]*t[0]+t[1]*t[1])/750,e=this._map.getView(),t=(s=e.getStatus()).rotation,f=r=parseInt((1e3*f+400)/17+"",10),new I(.1,0,1,.1),yt.V[s.projectionId].nt(-n[0]/7,n[1]/7,s.zoom),o=yt.at.getProjection(s.projectionId).project(s.center[0],s.center[1]),a=Date.now(),h=17*f,f=u[u.length-Math.min(u.length,3)],u=[c[1][0]-f[1][0],c[1][1]-f[1][1]],0!==t&&(u=this.J(t,u)),u=yt.V[s.projectionId].nt(u[0],-u[1],s.zoom),c=Math.min(f[0]-c[0],-15),l=[u[0]/c,u[1]/c],v=[-l[0]/h,-l[1]/h],d=[0,0],yt.Util.requestAnimFrame(p.bind(this)))))},m.prototype.J=function(t,i){var n=Math.sqrt(i[0]*i[0]+i[1]*i[1]),e=Math.atan2(i[1],i[0]),e=t/180*Math.PI-e;return i[0]=n*Math.cos(e),i[1]=-n*Math.sin(e),i},m.prototype.G=function(t,i){this._map.getBindHandler().fireEvent(t,i)},m);function m(t,i){this.st="mouse",this._map=i,this.W=[],this.j=t,this.R="disabled",this.T=this.Z.bind(this),this.I=this.tt.bind(this),this.oS=this.N.bind(this)}var y=(_.prototype.isEnabled=function(){return"disabled"!==this.R},_.prototype.isActive=function(){return"active"===this.R},_.prototype.enable=function(){this.isEnabled()||(this.rt=!0,this.R="enabled")},_.prototype.ht=function(){return!!this.lt},_.prototype.disable=function(){if(this.isEnabled())switch(this.R){case"enabled":case"active":this.R="disabled",this.S(),this.C();break;case"pending":this.R="disabled",this.S();break;default:this.R="disabled"}},_.prototype.ut=function(t){t.preventDefault(),"enabled"===this.R&&this._map.getStatus().doubleClickZoom&&(t.ctrlKey||0!==t.button||this.D(t))},_.prototype.P=function(t,i){var n=this;if(this.$=k.mousePos(this.j,t,this._map),2===t.touches.length)return this.rt=!1,void(this.ct=0);this.rt=!0,this.ct++,this.ft=i,this.lt=!1,setTimeout(function(){1===n.ct&&(n.ct=0)},300),this.pt=[t.changedTouches[0].clientX,t.changedTouches[0].clientY],this.j.addEventListener("touchmove",this.dt),2<=this.ct&&this.j.addEventListener("touchend",this.N.bind(this))},_.prototype.vt=function(t){var i=this;this.rt&&(this.yt++,setTimeout(function(){i.yt=0},300),2===this.yt&&!this.lt&&this._map.getStatus().doubleClickZoom&&(t.preventDefault(),this.yt=0,this.ct=0,this.D(t)),2===this.ct&&(this.ct=0))},_.prototype.D=function(i){var n=this;this.lt=!0,this.R="active",this.G("zoomstart");var e,s,r=0,o=this._map.getView().getStatus().zoom,a=new I(.4,0,.15,1);o>=this.xt[1]||(s=0,e=function(){r+=16;var t=o+a.h(r/400);t>=n.xt[1]||(n.bt(i,t),o+1<=t&&(yt.Util.cancelAnimFrame(s),n.lt=!1,n.R="enabled",n.tt(),n.N()),(n.lt||r<400)&&(s=yt.Util.requestAnimFrame(e)))},s=yt.Util.requestAnimFrame(e))},_.prototype.gt=function(t){var i,n,e=k.mousePos(this.j,t,this._map);e[0]-this.$[0]==0&&e[1]-this.$[1]==0||(this.yt=-1,this.ct<2?this.ct=0:this.rt&&(this.lt=!0,this.wt=!0,this.ft.disable(),i=t.changedTouches.length,n=this._map.getView(),e=this._map.getView().getStatus().zoom-(t.changedTouches[i-1].clientY-this.pt[1])/100,n.setOptions({zoom:e}),this.pt=[t.changedTouches[i-1].clientX,t.changedTouches[i-1].clientY]))},_.prototype.N=function(){this.wt&&2<=this.ct&&(this.ft.enable(),this.tt(),this.lt=!1,this.wt=!1)},_.prototype.bt=function(t,i){var n,e,s=this._map.getView(),r=s.getStatus(),o=r.center,a=r.zoom,h=r.rotation,f=r.projectionId;this._map.getStatus().zoomEnable&&(n=k.mousePos(this.j,t,this._map),e=[this.j.clientWidth/2,this.j.clientHeight/2],r=this._t(e,n),t=Math.atan((n[1]-e[1])/(n[0]-e[0])),t=-h/180*Math.PI+t,r=[-Math.cos(t)*r,Math.sin(t)*r],n[0]-e[0]<0&&(r[0]=-r[0],r[1]=-r[1]),e=yt.V[f].nt(r[0],r[1],a),r=yt.V[f].nt(r[0],r[1],i),a=Math.pow(2,i-a),s.setOptions({kt:{pos:n,Mt:i,Rt:r,zt:e,scale:a,center:yt.set(yt.create(),o[0],o[1])}}),this.G("zooming"))},_.prototype.tt=function(t){t&&0!==t.button||(this.S(),this.C(),this.G("zoomend"))},_.prototype.S=function(){this.j.removeEventListener("dblclick",this.St),this.j.removeEventListener("touchmove",this.dt)},_.prototype.C=function(){delete this.$,delete this.U,delete this.U},_.prototype._t=function(t,i){var n=i[0]-t[0],t=i[1]-t[1];return Math.sqrt(n*n+t*t)},_.prototype.G=function(t,i){this._map.getBindHandler().fireEvent(t,i)},_);function _(t,i){this.lt=!1,this.wt=!1,this.rt=!0,this.xt=[2,22],this.yt=0,this.ct=0,this.pt=[0,0],this._map=i,this.j=t,this.R="disabled",this.St=this.ut.bind(this),this.dt=this.gt.bind(this)}var g=(b.prototype.isEnabled=function(){return"disabled"!==this.R},b.prototype.isActive=function(){return"active"===this.R},b.prototype.enable=function(){this.isEnabled()||(this.R="enabled")},b.prototype.disable=function(){if(this.isEnabled())switch(k.removeClass(this.j,"mapboxgl-touch-drag-pan"),this.R){case"active":this.R="disabled",this.S(),this.G("zoomstart");break;case"pending":this.R="disabled",this.S();break;default:this.R="disabled"}},b.prototype.ht=function(){return!!this.lt},b.prototype.P=function(t){2===t.touches.length&&(t.stopPropagation(),this.G("zoomstart"),this.$=t.touches,this.B=t.touches,this.j.addEventListener("touchmove",this.T),this.j.addEventListener("touchend",this.At))},b.prototype.Z=function(t){var i,n,e,s,r,o,a,h,f,u,c,l,v,d,p,m,y,_,g,b,x;t.touches.length<2||(this.G("touchmove"),this._map.getStatus().touchZoom&&this.isEnabled()&&(this.lt=!0,i=-this.CF(t),e=(m=(n=this._map.getView()).getStatus()).rotation,s=m.center,r=m.zoom,b=m.projectionId,_=void 0===(d=m.Tt)?b:d,o=m.pitch,a=(y=this._map.getStatus()).rotateEnable,h=y.zoomEnable,f=y.pitchEnable,u=y.touchZoomCenter,v=l=c=!1,p=this.It(this.B[0],this.B[1]),g=this.It(t.touches[0],t.touches[1]),x=this.Dt(this.B[0],this.B[1]),b=this.Dt(t.touches[0],t.touches[1]),d=r+(g-p)/180,m=[((m=yt.Pt(k.mousePos(this.j,this.$[0],this._map),k.mousePos(this.j,this.$[1],this._map)))[0]+m[2])/2,(m[1]+m[3])/2],y=[this.j.clientWidth/2,this.j.clientHeight/2],g=this.jt(y,m),p=Math.atan((m[1]-y[1])/(m[0]-y[0])),p=e*Math.PI/180+p,g=[-Math.cos(p)*g,Math.sin(p)*g],m[0]-y[0]<0&&(g[0]=-g[0],g[1]=-g[1]),m=yt.V[_].nt(g[0],g[1],r),y=yt.V[_].nt(g[0],g[1],d),_=Math.pow(2,d-r),g=e+(b-x),3<Math.abs(g-e)&&(c=!0),1<Math.abs(i)&&(l=c=!(v=!0)),.01<Math.abs(d-r)&&(l=!0),b=k.mousePos(this.j,this.$[0],this._map),x=k.mousePos(this.j,this.$[1],this._map),1===u?n.setOptions({pitch:f&&v?o+i:o,zoom:h&&l?d:r,rotation:a&&c?g:e}):n.setOptions({pitch:f&&v?o+i:o,kt:h&&l&&{Mt:d,Rt:y,zt:m,pos:[(b[0]+x[0])/2,(b[1]+x[1])/2],scale:_,center:yt.set(yt.create(),s[0],s[1])},rotation:a&&c?g:e}),this.B=t.touches))},b.prototype.CF=function(t){var i=this.B,n=this.$,e=[k.mousePos(this.j,i[0],this._map),k.mousePos(this.j,i[1],this._map)],s=(k.mousePos(this.j,n[0],this._map),k.mousePos(this.j,n[1],this._map),[k.mousePos(this.j,t.touches[0],this._map),k.mousePos(this.j,t.touches[1],this._map)]),i=Math.sqrt(Math.pow(e[0][0]-e[1][0],2)+Math.pow(e[0][1]-e[1][1],2)),n=Math.sqrt(Math.pow(s[0][0]-s[1][0],2)+Math.pow(s[0][1]-s[1][1],2));return 2<Math.abs(n-i)?0:(t=s[0][0]-e[0][0],n=s[0][1]-e[0][1],i=s[1][0]-e[1][0],e=s[1][1]-e[1][1],Math.abs(n)<Math.abs(t)||Math.abs(e)<Math.abs(i)?0:-(n+e)/2/4)},b.prototype.Et=function(t){this.G("zoomend"),this.S()},b.prototype.It=function(t,i){var n=i.clientX-t.clientX,t=i.clientY-t.clientY;return Math.sqrt(n*n+t*t)},b.prototype.jt=function(t,i){var n=i[0]-t[0],t=i[1]-t[1];return Math.sqrt(n*n+t*t)},b.prototype.Dt=function(t,i){var n=t.pageX-i.pageX,i=t.pageY-i.pageY;return Math.atan2(i,n)/Math.PI*180},b.prototype.S=function(){this.j.removeEventListener("touchstart",this.Nt),this.j.removeEventListener("touchmove",this.T),this.j.removeEventListener("touchend",this.At)},b.prototype.G=function(t,i){this._map.getBindHandler().fireEvent(t,i)},b);function b(t,i){this._map=i,this.j=t,this.R="disabled",this.T=this.Z.bind(this),this.At=this.Et.bind(this)}var E=(x.wi={ZERO:0,ONE:1,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771},x.tH=[!0,!0,!0,!0],x.iH=[!1,!1,!1,!1],x.disabled=new x([x.wi.ONE,x.wi.ZERO,x.wi.ONE,x.wi.ZERO],x.iH),x.Mi=new x([x.wi.ONE,x.wi.ZERO,x.wi.ONE,x.wi.ZERO],x.tH),x.Ri=new x([x.wi.SRC_ALPHA,x.wi.ONE_MINUS_SRC_ALPHA,x.wi.SRC_ALPHA,x.wi.ONE_MINUS_SRC_ALPHA],x.tH),x.zi=new x([x.wi.ONE,x.wi.ONE_MINUS_SRC_ALPHA,x.wi.ONE,x.wi.ONE_MINUS_SRC_ALPHA],x.tH),x.Si=new x([x.wi.SRC_ALPHA,x.wi.ONE_MINUS_SRC_ALPHA,x.wi.ONE,x.wi.ONE_MINUS_SRC_ALPHA],x.tH),x.land=new x([x.wi.SRC_ALPHA,x.wi.ONE_MINUS_SRC_ALPHA,x.wi.ONE,x.wi.ZERO],x.tH),x);function x(t,i){this.Ci=t,this.mask=i}var T=(w.disable=new w({test:(w.wi={NOTEQUAL:517,ALWAYS:519,EQUAL:514,GEQUAL:518,GREATER:516,LESS:513,NEVER:512,KEEP:7680,REPLACE:7681,ZERO:0,INCR_WRAP:34055,INCR:7682,DECR:7683}).ALWAYS,Li:0,mask:0},[w.wi.KEEP,w.wi.KEEP,w.wi.KEEP],0),w.Ai=new w({test:w.wi.ALWAYS,Li:254,mask:255},[w.wi.KEEP,w.wi.KEEP,w.wi.REPLACE],255),w.writeWithStencil=new w({test:w.wi.LESS,Li:240,mask:255},[w.wi.KEEP,w.wi.KEEP,w.wi.KEEP],255),w.nH=new w({test:w.wi.EQUAL,Li:0,mask:255},[w.wi.KEEP,w.wi.KEEP,w.wi.KEEP],255),w.$H=new w({test:w.wi.EQUAL,Li:0,mask:255},[w.wi.KEEP,w.wi.KEEP,w.wi.INCR],255),w.DH=new w({test:w.wi.EQUAL,Li:254,mask:255},[w.wi.KEEP,w.wi.KEEP,w.wi.KEEP],255),w.FH=new w({test:w.wi.EQUAL,Li:254,mask:255},[w.wi.KEEP,w.wi.KEEP,w.wi.DECR],255),w.PH=new w({test:w.wi.ALWAYS,Li:255,mask:255},[w.wi.KEEP,w.wi.KEEP,w.wi.INCR],255),w.HH=new w({test:w.wi.NOTEQUAL,Li:1,mask:1},[w.wi.KEEP,w.wi.KEEP,w.wi.KEEP],255),w.js=new w({test:w.wi.NOTEQUAL,Li:1,mask:255},[w.wi.KEEP,w.wi.KEEP,w.wi.KEEP],255),w.nbStencil=new w({test:w.wi.EQUAL,Li:254,mask:255},[w.wi.KEEP,w.wi.KEEP,w.wi.KEEP],0),w.outseaStencil=new w({test:w.wi.ALWAYS,Li:254,mask:255},[w.wi.KEEP,w.wi.KEEP,w.wi.REPLACE],255),w.TE=new w({test:w.wi.EQUAL,Li:0,mask:255},[w.wi.KEEP,w.wi.KEEP,w.wi.INCR],255),w.FE=new w({test:w.wi.EQUAL,Li:1,mask:255},[w.wi.KEEP,w.wi.KEEP,w.wi.ZERO],255),w.test=new w({test:w.wi.NOTEQUAL,Li:254,mask:255},[w.wi.ZERO,w.wi.ZERO,w.wi.INCR],255),w.HE=new w({test:w.wi.EQUAL,Li:1,mask:255},[w.wi.KEEP,w.wi.KEEP,w.wi.KEEP],0),w);function w(t,i,n){this.stencilFunc=t,this.stencilOp=i,this.stencilMask=n}var C=(A.prototype.set=function(t){this.current=t},A.prototype.get=function(){return this.current},A.prototype.setDirty=function(){this.Pi=!0},A.prototype.reset=function(){this.set(this.default)},A.prototype.ji=function(t){return this.Pi||!this.Oi(t,this.current)},A);function A(t){this.Oi=vi,this.gl=t.gl,this.default=this.Fi(),this.current=this.Fi(),this.Pi=!1}var S,z=(S=C,yt.Ei(L,S),L.prototype.Fi=function(){return!1},L.prototype.set=function(t){var i;this.ji(t)&&(i=this.gl,t?i.enable(i.BLEND):i.disable(i.BLEND),this.current=t,this.Pi=!1)},L);function L(){return null!==S&&S.apply(this,arguments)||this}var D,F=(D=C,yt.Ei(H,D),H.prototype.Fi=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},H.prototype.set=function(t){var i=this.current;t[0]===i[0]&&t[1]===i[1]&&t[2]===i[2]&&t[3]===i[3]&&!this.Pi||(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.Pi=!1)},H);function H(){return null!==D&&D.apply(this,arguments)||this}var $,B=($=C,yt.Ei(O,$),O.prototype.Fi=function(){return!1},O.prototype.set=function(t){var i;this.ji(t)&&(i=this.gl,t?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST),this.current=t,this.Pi=!1)},O);function O(){return null!==$&&$.apply(this,arguments)||this}var P,R=(P=C,yt.Ei(N,P),N.prototype.Fi=function(){return!1},N.prototype.set=function(t){var i;this.ji(t)&&(i=this.gl,t?i.enable(i.STENCIL_TEST):i.disable(i.STENCIL_TEST),this.current=t,this.Pi=!1)},N);function N(){return null!==P&&P.apply(this,arguments)||this}var W,j=(W=C,yt.Ei(G,W),G.prototype.Fi=function(){return{test:this.gl.ALWAYS,Li:1,mask:65535}},G.prototype.set=function(t){this.ji(t)&&(this.gl.stencilFunc(t.test,t.Li,t.mask),this.current=t,this.Pi=!1)},G);function G(){return null!==W&&W.apply(this,arguments)||this}var U,Z=(U=C,yt.Ei(V,U),V.prototype.Fi=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},V.prototype.set=function(t){var i;this.ji(t)&&((i=this.gl).stencilOp.apply(i,t),this.current=t,this.Pi=!1)},V);function V(){return null!==U&&U.apply(this,arguments)||this}var Y,K,J=(Y=C,yt.Ei(X,Y),X.prototype.Fi=function(){return!1},X.prototype.set=function(t){var i;this.ji(t)&&(i=this.gl,t?i.enable(i.CULL_FACE):i.disable(i.CULL_FACE),this.current=t,this.Pi=!1)},X);function X(){return null!==Y&&Y.apply(this,arguments)||this}function Q(){return null!==K&&K.apply(this,arguments)||this}K=C,yt.Ei(Q,K),Q.prototype.Fi=function(){return[this.gl.ONE,this.gl.ZERO]},Q.prototype.set=function(t){this.ji(t)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.Pi=!1)};var q,tt=(q=C,yt.Ei(it,q),it.prototype.Fi=function(){var t=this.gl.ONE,i=this.gl.ZERO;return[t,i,t,i]},it.prototype.set=function(t){var i;this.ji(t)&&((i=this.gl).blendFuncSeparate.apply(i,t),this.current=t,this.Pi=!1)},it);function it(){return null!==q&&q.apply(this,arguments)||this}var nt,rt,et=(nt=C,yt.Ei(st,nt),st.prototype.Fi=function(){return this.gl.FUNC_ADD},st.prototype.set=function(t){this.ji(t)&&(this.gl.blendEquation(t),this.current=t,this.Pi=!1)},st);function st(){return null!==nt&&nt.apply(this,arguments)||this}function ot(){return null!==rt&&rt.apply(this,arguments)||this}rt=C,yt.Ei(ot,rt),ot.prototype.Fi=function(){return[this.gl.FUNC_ADD,this.gl.FUNC_ADD]},ot.prototype.set=function(t){var i;this.ji(t)&&((i=this.gl).blendEquationSeparate.apply(i,t),this.current=t,this.Pi=!1)};var at,ht=(at=C,yt.Ei(ft,at),ft.prototype.Fi=function(){return this.gl.BACK},ft.prototype.set=function(t){this.ji(t)&&(this.gl.cullFace(t),this.current=t,this.Pi=!1)},ft);function ft(){return null!==at&&at.apply(this,arguments)||this}var ut,ct=(ut=C,yt.Ei(lt,ut),lt.prototype.Fi=function(){return this.gl.CCW},lt.prototype.set=function(t){(this.ji(t)||this.Pi)&&(this.gl.frontFace(t),this.current=t,this.Pi=!1)},lt);function lt(){return null!==ut&&ut.apply(this,arguments)||this}var vt,dt=(vt=C,yt.Ei(pt,vt),pt.prototype.Fi=function(){return 1},pt.prototype.set=function(t){this.ji(t)&&(this.gl.clearDepth(t),this.current=t,this.Pi=!1)},pt);function pt(){return null!==vt&&vt.apply(this,arguments)||this}var mt,_t=(mt=C,yt.Ei(gt,mt),gt.prototype.Fi=function(){return[0,0,0,0]},gt.prototype.set=function(t){var i;this.ji(t)&&((i=this.gl).clearColor.apply(i,t),this.current=t,this.Pi=!1)},gt);function gt(){return null!==mt&&mt.apply(this,arguments)||this}var bt,xt=(bt=C,yt.Ei(kt,bt),kt.prototype.Fi=function(){return 0},kt.prototype.set=function(t){this.ji(t)&&(this.gl.clearStencil(t),this.current=t,this.Pi=!1)},kt);function kt(){return null!==bt&&bt.apply(this,arguments)||this}var wt,Mt=(wt=C,yt.Ei(Ct,wt),Ct.prototype.Fi=function(){return[!0,!0,!0,!0]},Ct.prototype.set=function(t){var i;this.ji(t)&&((i=this.gl).colorMask.apply(i,t),this.current=t,this.Pi=!1)},Ct);function Ct(){return null!==wt&&wt.apply(this,arguments)||this}var At,St=(At=C,yt.Ei(It,At),It.prototype.Fi=function(){return!0},It.prototype.set=function(t){this.ji(t)&&(this.gl.depthMask(t),this.current=t,this.Pi=!1)},It);function It(){return null!==At&&At.apply(this,arguments)||this}var zt,Tt=(zt=C,yt.Ei(Lt,zt),Lt.prototype.Fi=function(){return 65535},Lt.prototype.set=function(t){this.ji(t)&&(this.gl.stencilMask(t),this.current=t,this.Pi=!1)},Lt);function Lt(){return null!==zt&&zt.apply(this,arguments)||this}var Dt,Ft=(Dt=C,yt.Ei(Ht,Dt),Ht.prototype.Fi=function(){return null},Ht.prototype.set=function(t){var i;this.ji(t)&&((i=this.gl).bindFramebuffer(i.FRAMEBUFFER,t),this.current=t,this.Pi=!1)},Ht);function Ht(){return null!==Dt&&Dt.apply(this,arguments)||this}var $t,Et=($t=C,yt.Ei(Bt,$t),Bt.prototype.Fi=function(){return null},Bt.prototype.set=function(t){this.ji(t)&&(this.current&&this.current!==t&&this.current.Ni(),t?this.gl.useProgram(t.$i):this.gl.useProgram(null),this.current=t,this.Pi=!1)},Bt);function Bt(){return null!==$t&&$t.apply(this,arguments)||this}var Ot,Pt=(Ot=C,yt.Ei(Rt,Ot),Rt.prototype.Fi=function(){return this.gl.TEXTURE0},Rt.prototype.set=function(t){this.ji(t)&&(this.gl.activeTexture(this.gl.TEXTURE0+t),this.current=t,this.Pi=!1)},Rt);function Rt(){return null!==Ot&&Ot.apply(this,arguments)||this}var Nt,Wt=(Nt=C,yt.Ei(jt,Nt),jt.prototype.Fi=function(){return null},jt.prototype.set=function(t){var i;this.ji(t)&&((i=this.gl).bindTexture(i.TEXTURE_2D,t),this.current=t,this.Pi=!1)},jt);function jt(){return null!==Nt&&Nt.apply(this,arguments)||this}var Gt,Ut=(Gt=C,yt.Ei(Zt,Gt),Zt);function Zt(t,i){var n=Gt.call(this,t)||this;return n.context=t,n.parent=i,n}var Vt,Yt=(Vt=Ut,yt.Ei(Jt,Vt),Jt.prototype.set=function(t){var i,n;(this.Pi||this.ji(t))&&(i=this.gl,n=this.context.bindFramebuffer.current,this.context.bindFramebuffer.set(this.parent.framebuffer),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0),this.context.bindFramebuffer.set(n),this.current=t)},Jt.prototype.Bi=function(){var t=this.current,i=this.gl;t&&(i.deleteTexture(t),this.current=null)},Jt.prototype.Fi=function(){return null},Jt);function Jt(){return null!==Vt&&Vt.apply(this,arguments)||this}var Xt,Kt=(Xt=Ut,yt.Ei(Qt,Xt),Qt.prototype.set=function(t){var i;(this.Pi||this.ji(t))&&(i=this.gl,this.context.bindFramebuffer.set(this.parent.framebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,t),this.current=t)},Qt.prototype.Bi=function(){var t=this.current,i=this.gl;t&&(i.deleteRenderbuffer(t),this.current=null)},Qt.prototype.Fi=function(){return null},Qt);function Qt(){return null!==Xt&&Xt.apply(this,arguments)||this}var qt,ti=(qt=C,yt.Ei(ii,qt),ii.prototype.Fi=function(){return null},ii.prototype.set=function(t){t&&t.xe,this.ji(t)&&(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.current=t,this.Pi=!1)},ii);function ii(){return null!==qt&&qt.apply(this,arguments)||this}var ni,ei=(ni=C,yt.Ei(si,ni),si.prototype.Fi=function(){return null},si.prototype.set=function(t){this.ji(t)&&(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.Pi=!1)},si);function si(){return null!==ni&&ni.apply(this,arguments)||this}var ri,oi=(ri=C,yt.Ei(ai,ri),ai.prototype.Fi=function(){return!1},ai.prototype.set=function(t){this.ji(t)&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.Pi=!1)},ai);function ai(){return null!==ri&&ri.apply(this,arguments)||this}var hi=(fi.prototype.resize=function(t,i){this.Wi.Bi(),this.Gi.Bi(),this.width=t,this.height=i},fi.prototype.destroy=function(){var t=this.context.gl;this.Wi.Bi(),this.Gi.Bi(),t.deleteFramebuffer(this.framebuffer)},fi.prototype.get=function(){return this.framebuffer},fi);function fi(t,i,n){if(this.context=t,this.width=i,this.height=n,!(n=t.gl.createFramebuffer()))throw Error("createFramebuffer error");this.framebuffer=n,this.Wi=new Yt(t,this),this.Gi=new Kt(t,this)}var ui=(ci.prototype.update=function(t,i,n){var e=t.width,s=t.height,r=i&&i.resize||(!this.size||this.size[0]!==e||this.size[1]!==s)&&!n,o=this.context.gl,a=i&&i.format||o.RGBA;this.Zi=Boolean(i&&i.Zi),o.bindTexture(o.TEXTURE_2D,this.texture),i&&i.Yi&&o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),i&&i.flipY?this.context.hB.set(!0):this.context.hB.set(!1),r?(this.size=[e,s],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData?o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,t):o.texImage2D(o.TEXTURE_2D,0,a,e,s,0,a,o.UNSIGNED_BYTE,t.data)):(n=(r=n||{x:0,y:0}).x,r=r.y,t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData?o.texSubImage2D(o.TEXTURE_2D,0,n,r,o.RGBA,o.UNSIGNED_BYTE,t):o.texSubImage2D(o.TEXTURE_2D,0,n,r,e,s,a,o.UNSIGNED_BYTE,t.data)),this.Zi&&this.Vi()&&o.generateMipmap(o.TEXTURE_2D),i&&i.Yi&&o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),o.bindTexture(o.TEXTURE_2D,null)},ci.prototype.generateMipmap=function(){var t;this.Vi()?((t=this.context.gl).bindTexture(t.TEXTURE_2D,this.texture),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)):console.log("generateMipmap error")},ci.prototype.bind=function(t,i,n){var e=this.context.gl;e.bindTexture(e.TEXTURE_2D,this.texture),i&&i!==this.Xi&&(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,i),this.Xi=i),n&&n!==this.Hi&&(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),this.Hi=n),t&&t!==this.wrap&&(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t),this.wrap=t)},ci.prototype.Vi=function(){return Math.log(this.size[0])/Math.LN2%1==0&&Math.log(this.size[1])/Math.LN2%1==0},ci.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null},ci.prototype.get=function(){return this.texture},ci);function ci(t,i,n){this.context=t,this.texture=t.gl.createTexture(),this.update(i,n)}function vi(t,i){return!function(t,i){if(typeof t!=typeof(e=i)||"object"==typeof t&&Array.isArray(t)!==Array.isArray(e))return 1;var e;switch(typeof t){case"boolean":case"number":case"string":return t!==i;case"object":return Array.isArray(t)?function(t,i){if(t!==i){if(t.length!==i.length)return 1;for(var n=0,e=t.length;n<e;n++)if(t[n]!==i[n])return 1}}(t,i):t!==i;default:return 1}}(t,i)}var di=(pi.prototype.clear=function(t){var i=0,n=this.gl;t.color&&(i|=n.COLOR_BUFFER_BIT),t.depth&&(i|=n.DEPTH_BUFFER_BIT),t.stencil&&(i|=n.STENCIL_BUFFER_BIT),0!==i&&n.clear(i)},pi.prototype.Qi=function(t){this.te(t,E.Mi)?(this.ie.set(!1),this.colorMask.set(E.tH)):this.te(t,E.disabled)?this.colorMask.set(E.iH):(this.ie.set(!0),this.ee.set(t.Ci),this.colorMask.set(t.mask))},pi.prototype.ne=function(t){this.depthTest.set(t)},pi.prototype.ae=function(t){this.te(t.stencilFunc.test,T.wi.ALWAYS)&&!t.stencilMask?this.se.set(!1):(this.se.set(!0),this.stencilFunc.set(t.stencilFunc),this.stencilOp.set(t.stencilOp),this.stencilMask.set(t.stencilMask))},pi.prototype.re=function(t){t.enable?(this.cullFace.set(t.enable),this.he.set(t.mode),this.frontFace.set(t.frontFace)):this.cullFace.set(!1)},pi.prototype.reset=function(){this.ie.reset(),this.ee.reset(),this.blendEquation.reset(),this.cullFace.reset(),this.he.reset(),this.frontFace.reset(),this.depthTest.reset(),this.se.reset(),this.stencilFunc.reset(),this.stencilOp.reset(),this.stencilMask.reset(),this.le.reset(),this.ue.reset(),this.ce.reset(),this.bindFramebuffer.set(null)},pi.prototype.createFramebuffer=function(t,i){return new hi(this,t,i)},pi.prototype.createRenderbuffer=function(t,i){var n=this.gl,e=n.createRenderbuffer();if(n.bindRenderbuffer(n.RENDERBUFFER,e),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t,i),!e)throw Error("bindRenderbuffer error");return e},pi.prototype.createTexture=function(t,i){return new ui(this,t,i)},pi.prototype.fe=function(t,i,n){void 0===n&&(n="STATIC_DRAW");var e=this.gl,s=e.createBuffer();if(!s)throw Error("createBuffer error");return s.context=this,s.size=i,s.length=t.byteLength/i,i=this.de.current,this.de.set(s),e.bufferData(e.ARRAY_BUFFER,t,e[n]),this.de.set(i),s},pi.prototype.ve=function(t){var i=this.gl,n=i.createBuffer();if(!n)throw Error("createBuffer error");n.context=this,n.length=t.length,n.type="int",n.G_=!0,t instanceof Uint16Array?n.size=16:n.size=32;var e=this.me.current;return this.me.set(n),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t,i.STATIC_DRAW),this.me.set(e),n},pi.prototype.getSize=function(){return{width:this.gl.canvas.width,height:this.gl.canvas.height}},pi.prototype.getParameter=function(t){return this.ye[t]||(this.ye[t]=this.gl.getParameter(this.gl[t])),this.ye[t]},pi.prototype.deleteBuffer=function(t){this.de.set(null),this.me.set(null),this.gl.deleteBuffer(t),t.xe=!0},pi.prototype.getExtension=function(t){this.extensions[t]||(this.Z_?this.Z_.indexOf(t)<0?console.error("WebGL: supportedExtension not exist "+t):this.extensions[t]||(this.extensions[t]=this.gl.getExtension(t),this.extensions[t]||console.error("WebGL: getExtension "+t+" failed")):console.error("WebGL: supportedExtension not exist"))},pi.prototype.setDirty=function(){this.ge.setDirty(),this.bindTexture.setDirty(),this.bindFramebuffer.setDirty(),this.de.setDirty(),this.me.setDirty(),this.be.setDirty(),this.activeTexture.setDirty(),this.colorMask.setDirty(),this.depthMask.setDirty(),this.se.setDirty(),this.le.setDirty(),this.stencilMask.setDirty(),this.stencilFunc.setDirty(),this.stencilOp.setDirty(),this.colorMask.setDirty(),this.ie.setDirty(),this.blendEquation.setDirty(),this.ee.setDirty(),this.depthTest.setDirty(),this.cullFace.setDirty(),this.he.setDirty(),this.frontFace.setDirty(),this.hB.setDirty()},pi);function pi(t){this.te=vi,this.gl=t,this.Z_=this.gl.getSupportedExtensions(),this.extensions={},this.be=new F(this),this.ie=new z(this),this.ee=new tt(this),this.blendEquation=new et(this),this.cullFace=new J(this),this.he=new ht(this),this.frontFace=new ct(this),this.depthTest=new B(this),this.se=new R(this),this.stencilFunc=new j(this),this.stencilOp=new Z(this),this.stencilMask=new Tt(this),this.le=new xt(this),this.ue=new _t(this),this.ce=new dt(this),this.bindFramebuffer=new Ft(this),this.ge=new Et(this),this.bindTexture=new Wt(this),this.activeTexture=new Pt(this),this.de=new ti(this),this.me=new ei(this),this.colorMask=new Mt(this),this.depthMask=new St(this),this.ye={},this.hB=new oi(this)}var mi=(yi.we=new yi(!1,(yi.wi={CW:2304,CCW:2305,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032}).FRONT_AND_BACK,yi.wi.CW),yi._e=new yi(!0,yi.wi.FRONT,yi.wi.CW),yi.back=new yi(!0,yi.wi.BACK,yi.wi.CW),yi);function yi(t,i,n){this.enable=t,this.mode=i,this.frontFace=n}var _i=(gi.prototype.set=function(t){var i,n,e=this.context.gl;if(!t)return this.current=void 0,void e.disableVertexAttribArray(this.location);if(t.type===this.type){if(this.ke(t)){switch(this.current=t,e.enableVertexAttribArray(this.location),this.context.de.set(t.buffer),this.type){case"float":case"int":i=1;break;case"vec2":i=2;break;case"vec3":i=3;break;case"vec4":i=4;break;default:i=1}switch(this.Me){case"int8":n=e.BYTE;break;case"uint8":n=e.UNSIGNED_BYTE;break;case"int16":n=e.SHORT;break;case"uint16":n=e.UNSIGNED_SHORT;break;case"float32":n=e.FLOAT}e.vertexAttribPointer(this.location,i,n,this.normalize,t.Re,t.offset)}}else console.error("error webglBuffer type,need "+this.type+", receive "+t.type+" ")},gi.prototype.ke=function(t){return!0},gi);function gi(t,i,n,e,s){void 0===s&&(s=!1),this.context=t,this.type=i,this.Me=n,this.location=e,this.normalize=s}var bi=(xi.prototype.set=function(t){if(!this.te(this.current,t)&&void 0!==t){switch(this.type){case"bool":case"int":case"sampler2D":this.ze.uniform1i(this.location,t);break;case"sampler2D[]":this.ze.uniform1iv(this.location,t);break;case"float":this.ze.uniform1f(this.location,t);break;case"float[]":this.ze.uniform1fv(this.location,t);break;case"vec2":this.ze.uniform2f(this.location,t[0],t[1]);break;case"vec3":this.ze.uniform3f(this.location,t[0],t[1],t[2]);break;case"vec4":this.ze.uniform4f(this.location,t[0],t[1],t[2],t[3]);break;case"mat2":this.ze.uniformMatrix2fv(this.location,!1,new Float32Array(t));break;case"mat3":this.ze.uniformMatrix3fv(this.location,!1,new Float32Array(t));break;case"mat4":this.ze.uniformMatrix4fv(this.location,!1,new Float32Array(t))}this.current=t}},xi);function xi(t,i,n){this.context=t,this.type=i,this.location=n,this.Re=0,this.offset=0,this.te=vi,this.ze=t.gl}var ki=(wi.createProgram=function(t,i,n){var e=wi.Se(t,t.VERTEX_SHADER,i),s=wi.Se(t,t.FRAGMENT_SHADER,n);return e&&s&&(i=t.createProgram())?(t.attachShader(i,e),t.attachShader(i,s),t.bindAttribLocation(i,0,"a_Position"),t.linkProgram(i),n=t.getProgramParameter(i,t.LINK_STATUS),t.deleteShader(s),t.deleteShader(e),n?i:(n=t.getProgramInfoLog(i),console.log("Failed to link program: "+n),t.deleteProgram(i),null)):null},wi.Se=function(t,i,n){return null===(i=t.createShader(i))?null:(t.shaderSource(i,n),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(n=t.getShaderInfoLog(i),console.log("Failed to compile shader: "+n),t.deleteShader(i),null))},wi.prototype.Ce=function(t,i,n,e,s,r,o,a,h,f){var u,c;void 0===s&&(s="TRIANGLES"),void 0===r&&(r=!1),void 0===o&&(o=E.Mi),void 0===a&&(a=T.disable),void 0===h&&(h=mi.we),void 0===f&&(f=0),this.je&&(c=(u=this.context).gl,u.ge.set(this),u.ne(r),u.ae(a),u.Qi(o),u.re(h),u.hB.set(!1),this.Le(t),this.Ae(i),e?(u.me.set(e),32===e.size?c.drawElements(c[s],n,c.UNSIGNED_INT,e.size/8*f):c.drawElements(c[s],n,c.UNSIGNED_SHORT,e.size/8*f)):c.drawArrays(c[s],f,n))},wi.prototype.Le=function(t){if(this.je)for(var i in this.Te){var n=this.Te[i];if("sampler2D"===n.type)0<=(u=this.Ie.indexOf(i))&&(this.context.activeTexture.set(u),(f=t[i]).bind(),n.set(u));else if("sampler2D[]"===n.type){for(var e=t[i],s=e.De,r=e.offset||0,o=e.count||s.length,a=[],h=0;h<o;h++){var f,u=r+h;(f=s[h])?(this.context.activeTexture.set(u),f.bind(),a.push(u)):(this.context.activeTexture.set(r),s[0].bind(),a.push(r))}n.set(a)}else n.set(t[i])}},wi.prototype.Ae=function(t){if(this.je)for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&this.attributes[i].set(t[i])},wi.prototype.Pe=function(t,i,n,e,s,r,o,a){var h,f;void 0===i&&(i=0),void 0===e&&(e="TRIANGLES"),void 0===s&&(s=!1),void 0===r&&(r=E.Mi),void 0===o&&(o=T.disable),void 0===a&&(a=mi.we),this.je&&(f=(h=this.context).gl,h.ge.set(this),h.ne(s),h.ae(o),h.Qi(r),h.re(a),n?(h.me.set(n),f.drawElements(f[e],t,f.UNSIGNED_SHORT,n.size/8*i)):f.drawArrays(f[e],i,t))},wi.prototype.Ni=function(){if(this.je)for(var t in this.attributes)this.attributes.hasOwnProperty(t)&&this.attributes[t].set(null)},wi.prototype.destroy=function(){this.je&&(this.context.gl.deleteProgram(this.$i),this.$i=null)},wi);function wi(t,i,n,e,s,r){this.name=r,this.Ie=[],this.context=t,this.attributes={},this.Te={};var o,a,h,f,u,c=t.gl,n=wi.createProgram(c,i,n);if(this.$i=n,!this.$i)return console.log("createProgram fail",this.name),this.je=!1,this;for(h in this.je=!0,e)e.hasOwnProperty(h)&&(f=e[h].Oe,o=e[h].Me,u=c.getAttribLocation(this.$i,h),a=e[h].normalize,this.attributes[h]=new _i(t,f,o,u,a));for(h in s)s.hasOwnProperty(h)&&(f=s[h],(u=c.getUniformLocation(this.$i,h))&&(this.Te[h]=new bi(t,f,u)),"sampler2D"===f&&this.Ie.push(h))}function Mi(t,i,n){return t+(i-t)*n}var Ci=(Ai.prototype.An=function(t,i,n,e,s){return(e=this.Tn(t,i,n,e))?(e=e[this.key])&&e.rgba?this.In(e.rgba):e:null},Ai.prototype.In=function(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]/255]},Ai.prototype.Dn=function(t,i,n,e,s){var r=Math.floor(e),o=Math.ceil(e),a=e-r<.8?r:o,h=this.Tn(t,i,n,r),f=this.Tn(t,i,n,o);if((h||a!==r)&&(h||f)&&(!h||f||a!==o)&&(h||!f||r!==a)){if(e-=r,h||(e=(e-.8)/.2),e=Math.max(e,0),"const"===this.type)return this.Pn(t,i,n,a);if("linear"===this.type&&r===o)return this.Pn(t,i,n,r);if(!h&&f)return"number"!=typeof(o=f[this.key])?((v=o.normalize())&&"line"!==this.sort&&(v[3]=v[3]*e),v):Mi(0,o,e);if(h&&!f)return this.Pn(t,i,n,r);if(h=h[this.key],f=f[this.key],h)return"number"==typeof h?Mi(h,f,e):(u=f,c=e,l=[0,0,0,1],yt.forEach(h.rgba,function(t,i){var n=u.rgba[i];l[i]=Mi(t,n,c)/255}),l);if("number"==typeof f)return Mi(0,f,e);var u,c,l,v=f.normalize();return"line"!==this.sort&&(v[3]=v[3]*e),v}},Ai.prototype.Pn=function(t,i,n,e){var s;switch(this.sort){case"line":s=this.jn(t,i,n,e);break;case"other":s=this.On(t,i,n,e);break;default:s=this.On(t,i,n,e)}return s},Ai.prototype.Tn=function(t,i,n,e){var s;switch(this.sort){case"line":s=this.Fn(t,i,n,e);break;case"other":s=this.En(t,i,n,e);break;default:s=this.En(t,i,n,e)}return s},Ai.prototype.Fn=function(t,i,n,e){if(e=t.dn(i,n,e),this.Nn(e))return e[0]},Ai.prototype.En=function(t,i,n,e){if(e=t.dn(i,n,e),this.Nn(e))return e},Ai.prototype.jn=function(t,i,n,e){var s,r=Math.floor(e),e=Math.ceil(e);return(r=t.dn(i,n,r))?(s=r[0][this.key])&&s.normalize?s.normalize():s:(s=t.dn(i,n,e)[0][this.key])&&s.normalize?s.normalize():s},Ai.prototype.On=function(t,i,n,e){var s,r=Math.floor(e),e=Math.ceil(e);return(r=t.dn(i,n,r))?(s=r[this.key])instanceof yt._n?s.normalize():s:(s=t.dn(i,n,e)[this.key])instanceof yt._n?s.normalize():s},Ai);function Ai(t,i,n){void 0===n&&(n="other"),this.key=t,this.type=i,this.sort=n}var Si,Ii=(Si=Ci,yt.Ei(zi,Si),zi.prototype.Nn=function(t){return t&&t[0].roadColor},zi);function zi(t,i){var n=Si.call(this,t,i,"line")||this;return n.key=t,n.type=i,n}var Ti,Li=(Ti=Ci,yt.Ei(Di,Ti),Di.prototype.Nn=function(t){return t&&t[0].borderColor},Di);function Di(t,i){var n=Ti.call(this,t,i,"line")||this;return n.key=t,n.type=i,n}var Fi,Hi=(Fi=Ci,yt.Ei($i,Fi),$i.prototype.Nn=function(t){return t&&t.faceColor},$i);function $i(){return null!==Fi&&Fi.apply(this,arguments)||this}var Ei,Bi=(Ei=Ci,yt.Ei(Oi,Ei),Oi.prototype.Nn=function(t){return t&&t.faceColor},Oi);function Oi(){return null!==Ei&&Ei.apply(this,arguments)||this}var Pi,Ri=(Pi=Ci,yt.Ei(Ni,Pi),Ni.prototype.Nn=function(t){return t&&t.wallColor2},Ni);function Ni(){return null!==Pi&&Pi.apply(this,arguments)||this}function Wi(t,i,n,e,s){void 0===n&&(n=[0,0]),void 0===s&&(s=1);var r=t.$n.zoom;if(!(i.minzoom-.2>t.$n.zoom&&3<i.minzoom)){var o=i.mainkey,a=i.subkey,h=i.minzoom,f=Gi.faceColor.An(e,o,a,r,h),i=t.map.JF(t.$n.optimalZoom);if(f)return{u_matrix:t.$n.mvpMatrix,u_color:f,u_offset:[0,0],u_skyHeight:s,u_viewHeight:t.$n.size[1],u_skyColor:i||[1,1,1,0],u_image:Gi.texture.An(e,o,a,r,h),u_imageSize:[1,1],u_localDeltaCenter:n,u_resolution:t.$n.optimalResolution}}}var ji={uniforms:{u_skyColor:"vec3",u_color:"vec4",u_skyHeight:"float",u_viewHeight:"float",u_offset:"vec2",u_matrix:"mat4",u_localDeltaCenter:"vec2"},attributes:{a_pos:{Me:"float32",Oe:"vec2"}},vertexSource:"precision highp float;\nattribute vec2 a_pos;\nuniform mat4 u_matrix;\nuniform vec2 u_localDeltaCenter;\nuniform vec2 u_offset;\nvarying vec4 v_pos;\n\nvoid main() {\n    vec2 pos = vec2(a_pos.x+u_localDeltaCenter.x+u_offset.x,a_pos.y+u_localDeltaCenter.y+u_offset.y);\n    gl_Position = u_matrix * vec4(pos, 0, 1);\n    v_pos = gl_Position;\n}\n",fragmentSource:"precision highp float;\nuniform vec4 u_color;\n// uniform float u_opacity;\nuniform float u_skyHeight;\nuniform float u_viewHeight;  // 地图容器高度，单位像素\nuniform vec3 u_skyColor;\nvarying vec4 v_pos;\n\nvoid main() {\n    gl_FragColor = u_color;\n    // gl_FragColor = v_color;\n    // gl_FragColor = vec4(0,0,1.0,1.0);\n    // return;\n\n    // 雾化\n    float y = v_pos.y / v_pos.w;\n    float fogHeight = 2. / u_viewHeight * 30.;  // 10 像素高度作为模糊处理\n    vec3 fogColor= vec3(0.9, 0.9, 0.9);\n    if(u_skyHeight < 1.0 && y > 0.0) {\n        float fogFactor = smoothstep(u_skyHeight + fogHeight/2.0, u_skyHeight - fogHeight/2.0, y);\n        // float fogFactor = smoothstep(u_skyHeight + fogHeight, u_skyHeight, y);\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\n        gl_FragColor.a *= fogFactor;\n    }\n    #ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n    #endif\n}\n\n"},Gi={faceColor:new Hi("faceColor","linear"),borderWidth:new Hi("borderWidth","linear"),borderColor:new Hi("borderColor","linear"),texture:new Hi("texture","const")},Ui={uniforms:{u_color:"vec4",u_skyColor:"vec4",u_viewHeight:"float",u_skyHeight:"float",u_offset:"vec2",u_matrix:"mat4",u_localDeltaCenter:"vec2",u_image:"sampler2D",u_resolution:"float",u_imageSize:"vec2"},attributes:{a_pos:{Me:"float32",Oe:"vec2"}},vertexSource:"precision highp float;\n#define GLSLIFY 1\nattribute vec2 a_pos;\nuniform mat4 u_matrix;\nuniform vec2 u_localDeltaCenter;\nuniform float u_resolution;\nuniform vec2 u_offset;\nvarying vec4 v_pos;\nvarying vec2 v_coord;\n\n// varying vec2 v_texture_pos;\nvoid main(){\n    vec2 pos = vec2(a_pos.x+u_localDeltaCenter.x+u_offset.x,a_pos.y+u_localDeltaCenter.y+u_offset.y);\n    gl_Position = u_matrix * vec4(pos, 0, 1);\n    v_pos = gl_Position;\n    v_coord = pos;\n}\n",fragmentSource:"precision highp float;\n#define GLSLIFY 1\nuniform vec4 u_color;\nuniform sampler2D u_image;\n// uniform float u_opacity;\nuniform float u_skyHeight;\nuniform float u_viewHeight;  // 地图容器高度，单位像素\nuniform float u_resolution;\nuniform vec2 u_imageSize;\nvarying vec4 v_pos;\nvarying vec2 v_coord;\n// varying vec2 v_texture_pos;\n\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\n    float y = pos.y / pos.w;\n    float fogHeight = 2. / viewHeight * 30.;\n    float fogFactor = 1.0;\n    if(skyHeight < 1.0 && y > 0.0) {\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\n    }\n    return fogFactor;\n}\n\nvoid main() {\n    vec2 v_texture_pos = mod(vec2(v_coord.x,v_coord.y*-1.0)/u_resolution/u_imageSize,1.0);\n    gl_FragColor = texture2D(u_image, v_texture_pos);\n    // gl_FragColor = vec4(1.0,0,0,1.0);\n   \n    float y = v_pos.y / v_pos.w;\n    if(u_skyHeight > 0.0 && y > u_skyHeight) {\n        gl_FragColor.a = 1.0 - smoothstep(u_skyHeight, 1.0, y);\n    }\n    gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\n    #ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n    #endif\n}\n"},Zi={uniforms:{u_skyBMRange:"vec2",u_skyHeight:"float",u_viewHeight:"float",u_heightFactor:"float",u_roofColor:"vec4",u_wallColor:"vec4",u_lightDir:"vec3",u_opacity:"float",u_pitch:"float",u_offset:"vec2",u_matrix:"mat4",u_normalMatrix:"mat4",u_localDeltaCenter:"vec2"},attributes:{a_pos:{Me:"float32",Oe:"vec4"},a_normal:{Me:"float32",Oe:"vec3"}},vertexSource:"precision highp float;\nattribute vec4 a_pos;\n// attribute vec4 a_color;\n// attribute float a_flag;\nattribute vec3 a_normal;\n\nuniform mat4 u_matrix;\nuniform vec2 u_localDeltaCenter;\nuniform vec2 u_offset;\nuniform float u_pitch;\nuniform float u_heightFactor;\nuniform vec4 u_roofColor;\nuniform vec4 u_wallColor;\n\nvarying vec3 v_normal;\nvarying vec4 v_color;\nvarying vec4 v_roofColor;\n// varying vec4 v_color;\n// varying float v_height;\n// varying float v_flag;\nvarying float v_fullHeight;\nvarying float v_fragHeight;\nvarying vec4 v_pos;\n\nvoid main() {\n    vec3 pos = vec3(\n        a_pos.x + u_localDeltaCenter.x + u_offset.x,\n        a_pos.y + u_localDeltaCenter.y + u_offset.y,\n        a_pos.z * u_heightFactor * min((u_pitch + 20.0) / 50.0, 0.8)\n    );\n    gl_Position = u_matrix * vec4(pos.xyz, 1);\n\n    // v_color = a_color;\n    // v_flag = a_flag;\n    v_pos = gl_Position;\n    // vec4(a_pos, 1);\n    v_fragHeight = a_pos.z;\n    v_fullHeight = a_pos.w;\n    // v_height = pos.z / a_pos.w;\n    v_normal = normalize(a_normal);\n    // 1.4 拿过来的\n    v_roofColor = u_roofColor;\n    v_color = u_roofColor + (u_wallColor - u_roofColor) * (a_pos.z == 0.0 ? 1.0 : 0.6);\n}\n",fragmentSource:"precision mediump float;\n\n// uniform vec4 u_roofColor;\n// uniform vec4 u_wallColor;\nuniform vec3 u_lightColor;\nuniform vec3 u_lightDir;\nuniform mat4 u_normalMatrix;\nuniform float u_opacity;\nuniform float u_skyHeight;\nuniform float u_viewHeight;\nuniform vec2 u_skyBMRange;\n\nvarying vec3 v_normal;\nvarying vec4 v_color;\n// varying vec4 v_color;\n// varying float v_flag;\nvarying float v_fullHeight;\nvarying float v_fragHeight;\nvarying vec4 v_roofColor;\nvarying vec4 v_pos;\n\nvoid main() {\n    // 环境光\n    vec3 ambientLightColor = vec3(1, 1, 1);\n    float ambientStrength = 0.92;\n    vec3 ambient = ambientStrength * ambientLightColor;\n\n    // 平行光的漫反射\n    // vec3 norm = normalize(vec3(u_normalMatrix * vec4(v_normal, 1)));  //\n    vec3 lightDir = u_lightDir;\n    vec3 lightColor = vec3(1, 1, 1);\n    float lightStrength = 0.1;\n    vec3 norm = normalize(v_normal);\n    float nDotL = max(dot(lightDir, norm), 0.0);\n    vec3 diff = lightStrength * lightColor * nDotL;\n\n    // 如果是顶面，不同建筑物的顶面透明度是要有差异的\n    float topOpacity = 1.0;\n    if(v_fragHeight >= v_fullHeight) {\n        // topOpacity = clamp((1.3 - v_fullHeight / 50.0), 0.9, 1.3);\n    }\n\n    // 根据楼高判断颜色\n    if(v_fragHeight >= v_fullHeight) {\n        gl_FragColor = v_roofColor;\n        // gl_FragColor = u_roofColor;\n    } else {\n        // 渐变色，暂时不用\n        // float hFactor = v_fragHeight / v_fullHeight / 8.0 + 1.0;\n        gl_FragColor = v_color;\n    }\n\n    gl_FragColor.rgb *= diff + ambient;\n    gl_FragColor.a *= u_opacity * topOpacity;\n\n    // 雾化\n    // float y = v_pos.y / v_pos.w;\n    // float fogHeight = 2. / u_viewHeight * 10.;  // 20 像素高度作为模糊处理\n    // vec3 fogColor = vec3(0.95, 0.85, 0.95);\n    if(u_skyHeight < 1.0) {\n        // float fogFactor = smoothstep(u_skyHeight, u_skyHeight - fogHeight, y);\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\n        // gl_FragColor.a *= fogFactor;\n\n        float cameraToFragDist = gl_FragCoord.z * v_pos.w;\n        float fogFactor = smoothstep(u_skyBMRange.y, u_skyBMRange.x, cameraToFragDist);\n        gl_FragColor.a *= fogFactor;\n    }\n\n    #ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n    #endif\n}\n"};function Vi(t){var i=-15*((i=new Date).getHours()+i.getMinutes()/60)+300;return[Math.sin(t[0]-i),1,.75]}function Yi(t,i,n,e,s,r){void 0===e&&(e=[0,0]);var o=i.minzoom,a=i.maxzoom,h=t.$n.zoom;if(!(h<o-.2&&3<o||a+.8<h&&a<18))return i.mainkey,i.subkey,(n?function(t,i,n,e,s){void 0===n&&(n=[0,0]);var r=t.$n.zoom,o=i.mainkey,a=i.subkey,h=i.minzoom,f=nn.borderColor.An(e,o,a,r,h);if(f)return i=nn.roadWidth.An(e,o,a,r,h)+nn.borderWidth.An(e,o,a,r,h),h=nn.borderDash.An(e,o,a,r,h)||[1,0,1,0],{u_skyHeight:s,u_matrix:t.$n.mvpMatrix,u_meter_per_pixel:t.$n.resolution,u_width:i,u_border:1,u_color:f,u_dash:h,u_localDeltaCenter:n,u_viewHeight:t.size[1]}}:function(t,i,n,e,s){void 0===n&&(n=[0,0]);var r=t.$n.zoom,o=i.mainkey,a=i.subkey,h=i.minzoom,f=(i.maxzoom,nn.roadColor.An(e,o,a,r,h));if(a<0&&o<0&&(f=[1,0,0,t.debug?1:0]),f)return i=nn.roadWidth.An(e,o,a,r,h),h=nn.roadDash.An(e,o,a,r,h)||[1,0,1,0],{u_matrix:t.$n.mvpMatrix,u_meter_per_pixel:t.$n.resolution,u_width:i,u_color:f,u_dash:h,u_border:0,u_localDeltaCenter:n,u_viewHeight:t.size[1],u_skyHeight:s}})(t,i,e,s,r)}var Ji={uniforms:{u_skyBMRange:"vec2",u_skyHeight:"float",u_viewHeight:"float",u_heightFactor:"float",u_roofColor:"vec4",u_wallColor:"vec4",u_lightDir:"vec3",u_opacity:"float",u_pitch:"float",u_offset:"vec2",u_matrix:"mat4",u_normalMatrix:"mat4",u_localDeltaCenter:"vec2",u_image:"sampler2D",u_imageSize:"vec2",u_resolution:"float"},attributes:{a_pos:{Me:"float32",Oe:"vec4"},a_normal:{Me:"float32",Oe:"vec3"},a_textureCoord:{Me:"uint16",Oe:"vec2"}},vertexSource:"precision highp float;\nattribute vec4 a_pos;\n// attribute vec4 a_color;\n// attribute float a_flag;\nattribute vec3 a_normal;\nattribute vec2 a_textureCoord;\n\nuniform mat4 u_matrix;\nuniform vec2 u_localDeltaCenter;\nuniform vec2 u_offset;\nuniform float u_pitch;\nuniform float u_heightFactor;\nuniform vec4 u_roofColor;\nuniform vec4 u_wallColor;\n\nvarying vec3 v_normal;\nvarying vec4 v_color;\nvarying vec4 v_roofColor;\n// varying vec4 v_color;\n// varying float v_height;\n// varying float v_flag;\nvarying float v_fullHeight;\nvarying float v_fragHeight;\nvarying vec4 v_pos;\nvarying vec3 v_coord;\nvarying vec2 v_textureCoord;\n\n\nvoid main() {\n    vec3 pos = vec3(\n        a_pos.x + u_localDeltaCenter.x + u_offset.x,\n        a_pos.y + u_localDeltaCenter.y + u_offset.y,\n        a_pos.z * u_heightFactor * min((u_pitch + 20.0) / 50.0, 0.8)\n    );\n    gl_Position = u_matrix * vec4(pos.xyz, 1);\n\n    // v_color = a_color;\n    // v_flag = a_flag;\n    v_coord = pos;\n    v_textureCoord = a_textureCoord;\n    v_pos = gl_Position;\n    // vec4(a_pos, 1);\n    v_fragHeight = a_pos.z;\n    v_fullHeight = a_pos.w;\n    // v_height = pos.z / a_pos.w;\n    v_normal = normalize(a_normal);\n    // 1.4 拿过来的\n    v_roofColor = u_roofColor;\n    v_color = u_roofColor + (u_wallColor - u_roofColor) * (a_pos.z == 0.0 ? 1.0 : 0.6);\n}\n",fragmentSource:"precision mediump float;\n\n// uniform vec4 u_roofColor;\n// uniform vec4 u_wallColor;\nuniform vec3 u_lightColor;\nuniform vec3 u_lightDir;\nuniform mat4 u_normalMatrix;\nuniform float u_opacity;\nuniform float u_skyHeight;\nuniform float u_viewHeight;\nuniform vec2 u_skyBMRange;\n\n// pattern\nuniform float u_resolution;\nuniform sampler2D u_image;\nuniform vec2 u_imageSize;\n\nvarying vec3 v_normal;\nvarying vec4 v_color;\n// varying vec4 v_color;\n// varying float v_flag;\nvarying float v_fullHeight;\nvarying float v_fragHeight;\nvarying vec4 v_roofColor;\nvarying vec4 v_pos;\nvarying vec3 v_coord;\nvarying vec2 v_textureCoord;\n\n\nvoid main() {\n    // 环境光\n    vec3 ambientLightColor = vec3(1, 1, 1);\n    float ambientStrength = 0.92;\n    vec3 ambient = ambientStrength * ambientLightColor;\n\n    // 平行光的漫反射\n    // vec3 norm = normalize(vec3(u_normalMatrix * vec4(v_normal, 1)));  //\n    vec3 lightDir = u_lightDir;\n    vec3 lightColor = vec3(1, 1, 1);\n    float lightStrength = 0.1;\n    vec3 norm = normalize(v_normal);\n    float nDotL = max(dot(lightDir, norm), 0.0);\n    vec3 diff = lightStrength * lightColor * nDotL;\n\n    // 如果是顶面，不同建筑物的顶面透明度是要有差异的\n    float topOpacity = 1.0;\n    if(v_fragHeight >= v_fullHeight) {\n        // topOpacity = clamp((1.3 - v_fullHeight / 50.0), 0.9, 1.3);\n    }\n\n    // 根据楼高判断颜色\n    if(v_fragHeight >= v_fullHeight) {\n        // vec2 v_texture_pos = mod(vec2(v_coord.x,v_coord.y*-1.0)/u_resolution/u_imageSize,1.0);\n        // gl_FragColor = texture2D(u_image, v_texture_pos);\n        gl_FragColor = v_roofColor;\n    } else if(v_textureCoord.x<0.0){\n        gl_FragColor = v_color;\n      \n    }else{\n        vec2 v_texture_pos = v_textureCoord;\n        gl_FragColor = texture2D(u_image, v_texture_pos);\n        gl_FragColor.a *= v_color.a;\n    }\n\n    gl_FragColor.rgb *= diff + ambient;\n    gl_FragColor.a *= u_opacity * topOpacity;\n\n    // 雾化\n    // float y = v_pos.y / v_pos.w;\n    // float fogHeight = 2. / u_viewHeight * 10.;  // 20 像素高度作为模糊处理\n    // vec3 fogColor = vec3(0.95, 0.85, 0.95);\n    if(u_skyHeight < 1.0) {\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\n        // float fogFactor = smoothstep(u_skyHeight, u_skyHeight - fogHeight, y);\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\n        // gl_FragColor.a *= fogFactor;\n\n        float cameraToFragDist = gl_FragCoord.z * v_pos.w;\n        float fogFactor = smoothstep(u_skyBMRange.y, u_skyBMRange.x, cameraToFragDist);\n        gl_FragColor.a *= fogFactor;\n    }\n\n    #ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n    #endif\n}\n"},Xi={texture:new Bi("texture","const")},Ki={uniforms:{u_skyColor:"vec3",u_viewHeight:"float",u_skyHeight:"float",u_texture:"sampler2D",u_opacity:"float",u_mvpMatrix:"mat4",u_localDeltaCenter:"vec2"},attributes:{a_Position:{Oe:"vec4",Me:"float32"}},vertexSource:"precision highp float;\n\nuniform mat4 u_mvpMatrix;\nuniform vec2 u_localDeltaCenter;\n\nvarying vec2 v_TextureCoord;\nvarying vec4 v_pos;\n\nattribute vec4 a_Position;\n\nvoid main(){\n    v_TextureCoord=a_Position.zw;\n    vec4 pos=vec4(a_Position.x+u_localDeltaCenter.x,a_Position.y+u_localDeltaCenter.y,0.,1.);\n    gl_Position=u_mvpMatrix*pos;\n    v_pos = gl_Position;\n}\n",fragmentSource:"precision highp float;\n\nuniform sampler2D u_texture;\nuniform float u_opacity;\nuniform float u_skyHeight;\nuniform float u_viewHeight;  // 地图容器高度，单位像素\nuniform vec3 u_skyColor;\n\nvarying vec2 v_TextureCoord;\nvarying vec4 v_pos;\n\nvoid main(void) {\n    vec4 smpColor = texture2D(u_texture, v_TextureCoord);\n    if(smpColor.a < 0.01){\n        discard;\n    }\n    gl_FragColor = smpColor;\n    gl_FragColor.a *= u_opacity;\n\n    float y = v_pos.y / v_pos.w;\n    float fogHeight = 2. / u_viewHeight * 30.;  // 10 像素高度作为模糊处理\n    vec3 fogColor = vec3(0.9, 0.9, 0.9);\n    if(u_skyHeight < 1.0 && y > 0.0) {\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\n        // float fogFactor = smoothstep(u_skyHeight + fogHeight, u_skyHeight, y);\n        float fogFactor = smoothstep(u_skyHeight + fogHeight/2.0, u_skyHeight - fogHeight/2.0, y);\n        gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\n        gl_FragColor.a *= fogFactor;\n    }\n    // gl_FragColor = vec4(1.0,0,0,1.0);\n}\n"},Qi={uniforms:{u_gl_size:"vec2",u_matrix:"mat4",u_texsize:"float[]",u_texture:"sampler2D[]",u_event:"int",u_zoom:"float",u_color:"vec4",u_borderColor:"vec4",u_strokeColor:"vec4",u_backgroundColor:"vec4",u_borderBuffer:"float",u_buffer:"float",u_gamma:"float",u_opacity:"float",u_delta_center:"vec2",u_offset:"vec2",u_transform:"vec4",u_skyHeight:"float"},attributes:{a_vertex:{Oe:"vec2",Me:"float32"},a_texcoord:{Oe:"vec2",Me:"float32"},a_origin:{Oe:"vec2",Me:"float32"},a_zooms:{Oe:"vec2",Me:"float32"},a_height:{Oe:"float",Me:"float32"},a_angle:{Oe:"float",Me:"float32"},a_type:{Oe:"float",Me:"float32"},a_texIndex:{Oe:"float",Me:"float32"},a_visible:{Oe:"float",Me:"uint8"}},vertexSource:"precision mediump float;\nattribute highp vec2 a_vertex;\nattribute vec2 a_texcoord;\nattribute highp vec2 a_origin;\nattribute lowp float a_type;\nattribute lowp float a_texIndex;\nattribute vec4 a_color;\nattribute lowp vec2 a_zooms;\nattribute lowp float a_visible;\nattribute highp float a_height;\nattribute lowp float a_angle;\n\nuniform lowp vec2 u_gl_size;\nuniform highp mat4 u_matrix;\nuniform float u_texsize[_TotalTextureLenTwice];\nuniform lowp int u_event;\nuniform float u_zoom;\nuniform highp vec2 u_delta_center;\nuniform highp vec2 u_offset;\n// u_transform.x => rotate; u_transform.y => pinch; u_transform.z => scale\nuniform lowp vec4 u_transform;\nuniform float u_skyHeight;\n\nvarying vec2 v_texcoord;\nvarying float v_texIndex;\nvarying float v_type;\nvarying vec4 v_color;\nvarying vec2 v_pos;\n\nmat4 rotateMat4(mat4 a, float rad, vec3 axis) {\n    float x = axis[0], y = axis[1], z = axis[2];\n    float len = length(axis);\n    float s, c, t;\n    float a00, a01, a02, a03;\n    float a10, a11, a12, a13;\n    float a20, a21, a22, a23;\n    float b00, b01, b02;\n    float b10, b11, b12;\n    float b20, b21, b22;\n\n    len = 1.0 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n\n    s = sin(rad);\n    c = cos(rad);\n    t = 1.0 - c;\n\n    a00 = a[0][0]; a01 = a[0][1]; a02 = a[0][2]; a03 = a[0][3];\n    a10 = a[1][0]; a11 = a[1][1]; a12 = a[1][2]; a13 = a[1][3];\n    a20 = a[2][0]; a21 = a[2][1]; a22 = a[2][2]; a23 = a[2][3];\n\n    // Construct the elements of the rotation matrix\n    b00 = x * x * t + c; b01 = y * x * t + z * s; b02 = z * x * t - y * s;\n    b10 = x * y * t - z * s; b11 = y * y * t + c; b12 = z * y * t + x * s;\n    b20 = x * z * t + y * s; b21 = y * z * t - x * s; b22 = z * z * t + c;\n\n    // Perform rotation-specific matrix multiplication\n    mat4 outMatrix = mat4(\n    a00 * b00 + a10 * b01 + a20 * b02,\n    a00 * b10 + a10 * b11 + a20 * b12,\n    a00 * b20 + a10 * b21 + a20 * b22,\n    a[3][0],\n\n    a01 * b00 + a11 * b01 + a21 * b02,\n    a01 * b10 + a11 * b11 + a21 * b12,\n    a01 * b20 + a11 * b21 + a21 * b22,\n    a[3][1],\n\n    a02 * b00 + a12 * b01 + a22 * b02,\n    a02 * b10 + a12 * b11 + a22 * b12,\n    a02 * b20 + a12 * b21 + a22 * b22,\n    a[3][2],\n\n    a03 * b00 + a13 * b01 + a23 * b02,\n    a03 * b10 + a13 * b11 + a23 * b12,\n    a03 * b20 + a13 * b21 + a23 * b22,\n    a[3][3]\n    );\n\n\n    //    outMatrix = mat4(1.0);\n    return outMatrix;\n}\n\nmat4 scaleMat4(mat4 a, vec3 v) {\n    float x = v.x, y = v.y, z = v.z;\n\n    mat4 outMatrix = mat4(\n        a[0][0] * x, a[1][0] * y, a[2][0] * z, a[3][0],\n        a[0][1] * x, a[1][1] * y, a[2][1] * z, a[3][1],\n        a[0][2] * x, a[1][2] * y, a[2][2] * z, a[3][2],\n        a[0][3] * x, a[1][3] * y, a[2][3] * z, a[3][3]\n    );\n\n    return outMatrix;\n}\n\nvec2 getSizeFromArray(float u_texsize[_TotalTextureLenTwice], int ndx){\n    vec2 texsize;\n\n    if (ndx==0){\n        texsize=vec2(u_texsize[0], u_texsize[1]);\n    } else if (ndx==1){\n        texsize=vec2(u_texsize[2], u_texsize[3]);\n    } else if (ndx==2){\n        texsize=vec2(u_texsize[4], u_texsize[5]);\n    } else if (ndx==3){\n        texsize=vec2(u_texsize[6], u_texsize[7]);\n    } else if (ndx==4){\n        texsize=vec2(u_texsize[8], u_texsize[9]);\n    } else if (ndx==5){\n        texsize=vec2(u_texsize[10], u_texsize[11]);\n    }else if (ndx==6){\n        texsize=vec2(u_texsize[12], u_texsize[13]);\n    }\n\n    return texsize;\n}\n\nvoid main(){\n    float pi = 3.141592653589793238462;\n\n    if (a_visible!=0. && u_zoom>=a_zooms.x && u_zoom<=a_zooms.y){\n        // 绘制背景 || border\n        if (a_type==6. || a_type==8.){\n            vec4 cur_position=u_matrix*vec4(a_origin.xy + u_delta_center + u_offset, a_height, 1);\n            gl_Position=cur_position/cur_position.w+vec4(a_vertex.x/u_gl_size.x*2., -a_vertex.y/u_gl_size.y*2., 0, 0);\n            v_type=a_type;\n            v_pos = gl_Position.xy;\n        }else if(a_type==1.){\n            // 绘制贴地效果文字\n            gl_Position = u_matrix * vec4(a_vertex.xy, 0, 1);\n        } else {\n            // 绘制 billborad 效果\n            mat4 originMatirx = mat4(1.0);\n            mat4 scaleMatrix = scaleMat4(originMatirx, vec3(u_transform.z));\n            mat4 rotateMatrix = rotateMat4(originMatirx, a_angle + u_transform.x, vec3(0, 0, 1));\n            vec4 trans_position = rotateMatrix * scaleMatrix * vec4(a_vertex.x, -a_vertex.y, 0, 1);\n\n            vec4 trans_normalize_position = vec4(trans_position.xy/u_gl_size.xy*2., 0, 1);\n\n            vec4 cur_position = u_matrix * vec4(a_origin.xy + u_delta_center + u_offset, a_height, 1);\n\n            // 修复文字超出 z 轴范围没有裁剪的问题，现象就是在地图最大级别、pitch 最大的时候出现文字（不应该在地图中的）悬浮在高空中。\n            gl_Position=vec4(cur_position.xy/cur_position.w+trans_normalize_position.xy/trans_normalize_position.w,cur_position.z/cur_position.w,1);\n        }\n\n        v_texcoord=a_texcoord/getSizeFromArray(u_texsize, int(a_texIndex));\n        v_texIndex=a_texIndex;\n        v_type=floor(a_type + 0.1);\n        v_pos = gl_Position.xy;\n    }\n}\n",fragmentSource:"precision mediump float;\nuniform sampler2D u_texture[_TotalTextureLen];\nuniform vec4 u_color;\nuniform vec4 u_borderColor;\nuniform vec4 u_strokeColor;\nuniform vec4 u_backgroundColor;\nuniform float u_borderBuffer;\nuniform float u_buffer;\nuniform float u_gamma;\nuniform lowp int u_event;\nuniform float u_zoom;\nuniform lowp float u_opacity;\nuniform float u_skyHeight;\n\nvarying vec2 v_texcoord;\nvarying float v_texIndex;\nvarying float v_type;\nvarying vec4 v_color;\nvarying vec2 v_pos;\n\nfloat skyOpacity() {\n    if (v_pos.y > u_skyHeight){\n        return 1.0 - smoothstep(u_skyHeight, u_skyHeight + (1.0 - u_skyHeight) / 6.0, v_pos.y);\n    }\n    return 1.0;\n}\n\n/*由于片元着色器的数据index必须是常量，只能如此取出相应的值*/\n\nvoid main() {\n    // texture5\n    int texIdx = int(floor(v_texIndex + 0.1));\n\n    vec4 distColor;\n\n    if (v_type == 6.0){\n        gl_FragColor = vec4(u_backgroundColor.rgb, u_backgroundColor.a * u_opacity);\n        gl_FragColor.a *= skyOpacity();\n    } else if (v_type == 8.0){\n        gl_FragColor = vec4(u_borderColor.rgb, u_borderColor.a * u_opacity);\n        gl_FragColor.a *= skyOpacity();\n    } else {\n\n        __SmpColorLoop__\n\n        // icon\n        if (v_type == 0.0){\n            float opacity = u_opacity * distColor.a;\n            if (opacity < 0.03){\n                discard;\n            }\n            gl_FragColor = vec4(distColor.rgb, opacity);\n            // gl_FragColor = vec4(distColor.rgb, u_opacity * distColor.a);\n            gl_FragColor.a *= skyOpacity();\n            return;\n        }\n\n        float dist;\n        float alpha;\n\n        // 后端加载纹理 rgba => [[0, 255], [0, 255], [0, 255], [0, 1]]\n        // 前端加载纹理 rgba => [[0, 0, 0, [0, 1]]\n        if (distColor.r != 0.){\n            dist = distColor.r;\n        } else if (distColor.a == 1.0){\n            dist = 0.0;\n        } else {\n            dist = distColor.a;\n        }\n\n        //    gl_FragColor = vec4(dist, dist, dist, 1);\n        //    return;\n        //    dist = 255.0;\n\n        if (u_borderBuffer == 0.0){\n            alpha = smoothstep(u_buffer - u_gamma, u_buffer, dist);\n            gl_FragColor = vec4(u_color.rgb, alpha * u_color.a * u_opacity);\n            // gl_FragColor = vec4(1.0,0,0,1.0);\n        } else {\n            if (dist <= u_buffer - u_gamma){\n                // border 与外界交界\n                alpha = smoothstep(u_borderBuffer - u_gamma, u_borderBuffer, dist);\n                float opacity = alpha * u_strokeColor.a * u_opacity;\n                if (opacity == 0.0){\n                    discard;\n                }\n                gl_FragColor = vec4(u_strokeColor.rgb, opacity);\n            } else if (dist < u_buffer){\n                // 文字与 border 交界\n                alpha = smoothstep(u_buffer - u_gamma, u_buffer, dist);\n                gl_FragColor = vec4(alpha * u_color.rgb + (1.0 - alpha) * u_strokeColor.rgb, 1.0 * u_color.a *\n                alpha * u_opacity + (1.0 - alpha) * u_strokeColor.a * u_opacity);\n            } else {\n                // 文字\n                alpha = 1.0;\n                gl_FragColor = vec4(u_color.rgb, alpha * u_color.a * u_opacity);\n            }\n        }\n        gl_FragColor.a *= skyOpacity();\n    }\n}\n"},qi={uniforms:{u_color:"vec4",u_normal:"vec3",u_matrix:"mat4",u_localDeltaCenter:"vec2"},attributes:{a_pos:{Oe:"vec2",Me:"float32"}},vertexSource:"precision highp float;\nattribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_localDeltaCenter;\n\nvarying vec2 v_pos;\n\nvoid main(){\n    vec2 pos=vec2(a_pos.x+u_localDeltaCenter.x,a_pos.y+u_localDeltaCenter.y);\n    gl_Position=u_matrix*vec4(pos,0,1);\n    v_pos=(gl_Position.xy/gl_Position.w+1.)/2.*vec2(1583.*1.,946.*1.);\n}\n",fragmentSource:"precision mediump float;\nuniform vec4 u_color;\nvarying vec2 v_pos;\n// uniform float u_opacity;\n\nvoid main(){\n    // float dist=length(v_pos-gl_FragCoord.xy);\n    // float alpha=1.-smoothstep(0.,1.,dist);\n    gl_FragColor=u_color;\n    // gl_FragColor=vec4(0.8, 0.8, 0.8, 0.5);\n\n    #ifdef OVERDRAW_INSPECTOR\n    gl_FragColor=vec4(1.);\n    #endif\n}\n"},tn={faceColor:new Bi("faceColor","linear"),borderWidth:new Ri("borderWidth","const"),borderColor:new Ri("borderColor","linear"),wallColor1:new Bi("wallColor1","linear"),wallColor2:new Bi("wallColor2","linear")},nn={roadColor:new Ii("roadColor","linear"),roadWidth:new Ii("roadWidth","linear"),roadDash:new Ii("roadDash","const"),borderColor:new Li("borderColor","linear"),borderWidth:new Li("borderWidth","linear"),borderDash:new Li("borderDash","const")},en={fill:ji,fillPattern:Ui,sky:{uniforms:{u_mvpMatrix:"mat4",u_opacity:"float",u_skyline:"vec2"},attributes:{a_pos:{Me:"float32",Oe:"vec4"},a_color:{Me:"float32",Oe:"vec4"}},vertexSource:"precision highp float;\nuniform vec2 u_skyline;\nuniform mat4 u_mvpMatrix;\nattribute vec4 a_pos;\nattribute vec4 a_color;\nvarying vec4 v_color;\nvarying vec4 v_pos;\n\nvoid main() {\n    vec4 pos = u_mvpMatrix * vec4(a_pos.xyz, 1);\n    gl_Position = pos;\n    v_color = a_color;\n    v_pos = gl_Position;\n}\n",fragmentSource:"precision highp float;\nuniform float u_opacity;\n\nvarying vec4 v_color;\nvarying vec4 v_pos;\n\nvoid main() {\n  gl_FragColor = v_color;\n  // float x = v_pos.x / v_pos.w;\n  gl_FragColor.a *= u_opacity;\n}"},skyPattern:{uniforms:{u_mvpMatrix:"mat4",u_opacity:"float",u_skyline:"vec2",u_texture:"sampler2D",u_rotation:"float"},attributes:{a_pos:{Me:"float32",Oe:"vec4"},a_opacity:{Me:"float32",Oe:"float"},a_coord:{Me:"float32",Oe:"vec2"}},vertexSource:"precision highp float;\nuniform vec2 u_skyline;\nuniform mat4 u_mvpMatrix;\nattribute vec4 a_pos;\nattribute float a_opacity;\nattribute vec2 a_coord;\n\n\nvarying vec2 v_coord;\nvarying float v_opacity;\n\nvoid main() {\n    vec4 pos = u_mvpMatrix * vec4(a_pos.xyz, 1);\n    gl_Position = pos;\n    v_coord = a_coord;\n    v_opacity = a_opacity;\n}\n",fragmentSource:"precision highp float;\nuniform sampler2D u_texture;\n\nuniform float u_opacity;\nuniform float u_rotation;\nvarying vec2 v_coord;\nvarying float v_opacity;\nvoid main() {\n  // gl_FragColor = vec4(1.0,0,0,1.0);\n  gl_FragColor = texture2D(u_texture, vec2(v_coord.x+u_rotation, v_coord.y));\n  // // float x = v_pos.x / v_pos.w;\n  gl_FragColor.a *= u_opacity*v_opacity;\n}"},mask:{uniforms:{u_mvpMatrix:"mat4",u_color:"vec4",u_deltaCenter:"vec2"},attributes:{a_pos:{Me:"float32",Oe:"vec2"}},vertexSource:"precision highp float;\nuniform mat4 u_mvpMatrix;\nuniform vec2 u_deltaCenter;\nattribute vec2 a_pos;\n\nvoid main() {\n    gl_Position = u_mvpMatrix * vec4(a_pos.xy+u_deltaCenter, 0, 1);\n}\n",fragmentSource:"precision highp float;\n// uniform float u_opacity;\nuniform vec4 u_color;\n\n// varying vec4 v_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n    // gl_FragColor = vec4(0, 0, 0, 0);\n}"},fillExtrusion:Zi,fillExtrusionPattern:Ji,raster:Ki,labelsLayer:Qi,fillOutline:qi,line:{uniforms:{u_skyHeight:"float",u_viewHeight:"float",u_width:"float",u_border:"float",u_matrix:"mat4",u_meter_per_pixel:"float",u_color:"vec4",u_dash:"vec4",u_localDeltaCenter:"vec2"},attributes:{a_pos:{Oe:"vec2",Me:"float32"},a_normal:{Oe:"vec2",Me:"float32"},a_distance:{Oe:"float",Me:"float32"},a_dir:{Oe:"vec2",Me:"float32"}},vertexSource:"precision highp float;\nattribute vec2 a_pos;\nattribute vec2 a_normal;\nattribute float a_distance;\nattribute vec2 a_dir;\n\n// attribute vec4 a_color;\n// attribute float a_width;\n// attribute vec4 a_dash;\n\nuniform float u_meter_per_pixel;\nuniform mat4 u_matrix;\nuniform vec2 u_localDeltaCenter;\nuniform float u_width;\n\nvarying float v_distance;\nvarying vec2 v_normal;\nvarying float v_width;\nvarying vec4 v_pos;\n\n#define WORLD_SIZE 20037508.342789244\n\nvoid main(){\n    float width = u_width + 0.0;\n    float cosValue = dot(a_normal , a_dir);\n    v_distance = a_distance/u_meter_per_pixel + (cosValue * width * 0.5);\n\n    vec2 pos=a_pos;\n    pos.x+=u_localDeltaCenter.x;\n    pos.y+=u_localDeltaCenter.y;\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\n    v_normal = normalize(a_normal*sign(width*u_meter_per_pixel*.5));\n    v_width = width;\n    v_pos = gl_Position;\n}",fragmentSource:"precision highp float;\n\nuniform vec4 u_color;\n// uniform float u_opacity;\nuniform vec4 u_dash;\nuniform float u_border;\nuniform float u_skyHeight;\nuniform float u_viewHeight;\n\nvarying highp float v_distance;\nvarying vec2 v_normal;\nvarying float v_width;\nvarying vec4 v_pos;\n\nvoid main() {\n    float offset = mod(v_distance, u_dash.r + u_dash.g + u_dash.b + u_dash.a);\n    if(offset>u_dash.r && offset < u_dash.r + u_dash.g){\n        discard;\n    }else if(offset> u_dash.r + u_dash.g + u_dash.b){\n        discard;\n    }\n\n    float startBlur = 0.0;\n    float endBlur = 1.0;\n    // float dist = length(v_normal) * 0.8;\n\n    // if(v_width < 4.0 && u_border == 1.0) {\n    //     startBlur = 0.0;\n    // } else {\n    //     // 线主体\n    //     if(v_width < 4.0 && u_border == 0.0) {\n    //         startBlur = 0.0;\n    //     } else {\n    //         startBlur = 0.4;\n    //     }\n    // }\n    // startBlur = clamp(0.0, 0.4, smoothstep(0.0, 4.0, v_width) - 0.6);\n\n    // startBlur = 0.0;\n    // float opacity = 1.0 - smoothstep(startBlur, endBlur, dist);\n    gl_FragColor = u_color;\n    // gl_FragColor.a *= opacity;\n\n    // gl_FragColor = vec4(1, 0, 0, 1);\n\n\n    // 雾化\n    float y = v_pos.y / v_pos.w;\n    float fogHeight = 2. / u_viewHeight * 30.;  // 10 像素高度作为模糊处理\n    vec3 fogColor= vec3(0.9, 0.9, 0.9);\n    if(u_skyHeight < 1.0 && y > 0.0) {\n        // 片元颜色 = 物体颜色 * 雾化因子 + 雾的颜色 * （1 - 雾化因子）\n        float fogFactor = smoothstep(u_skyHeight + fogHeight/2.0, u_skyHeight - fogHeight/2.0, y);\n        // float fogFactor = smoothstep(u_skyHeight + fogHeight, u_skyHeight, y);\n        // gl_FragColor.rgb = gl_FragColor.rgb * fogFactor + fogColor * (1.0 - fogFactor);\n        gl_FragColor.a *= fogFactor;\n    }\n\n    #ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n    #endif\n}\n"},combineText:{uniforms:{u_sourceTexture:"sampler2D",u_sourceTextureSize:"vec2",u_targetTextureSize:"vec2"},attributes:{a_targetTexturePos:{Oe:"vec2",Me:"uint16"},a_sourceTexturePos:{Oe:"vec2",Me:"uint16"}},vertexSource:"precision highp float;\n\nattribute vec2 a_targetTexturePos;\nattribute vec2 a_sourceTexturePos;\n\nuniform vec2 u_targetTextureSize;\nuniform vec2 u_sourceTextureSize;\n\nvarying vec2 v_textureCoord;\n\n\nvoid main() {\n  v_textureCoord = a_sourceTexturePos / u_sourceTextureSize;\n  // v_textureCoord = vec2(a_sourceTexturePos.x / u_sourceTextureSize.x, a_sourceTexturePos.y / u_sourceTextureSize.y);\n\n  vec2 pos = (a_targetTexturePos / u_targetTextureSize) *2.0 -vec2(1.0,1.0);\n  // vec2 pos = vec2(a_targetTexturePos.x / u_targetTextureSize.x, a_targetTexturePos.y / u_targetTextureSize.y);\n  // pos.x = (pos.x - 0.5)*2.0;\n  // pos.y = (pos.y - 0.5)*2.0;\n\n  gl_Position = vec4(pos, 0, 1.0);\n  // gl_Position = vec4(a_targetTexturePos,0,1.0);\n}",fragmentSource:"precision highp float;\n\nuniform sampler2D u_sourceTexture; \n\nvarying vec2 v_textureCoord;\n\n\nvoid main(){\n  gl_FragColor = texture2D(u_sourceTexture, v_textureCoord);\n  // gl_FragColor = vec4(1,0, 0, 0 ,1.0);\n    // gl_FragColor = vec4(0,0,1.0,1.0);\n}"},debugImage:{uniforms:{u_texture:"sampler2D"},attributes:{a_pos:{Oe:"vec2",Me:"uint16"},a_coord:{Oe:"vec2",Me:"uint16"}},vertexSource:"precision highp float;\n\nattribute vec2 a_pos;\nattribute vec2 a_coord;\n\nvarying vec2 v_coord;\n\nvoid main() {\n  v_coord = vec2(a_coord.x,1.0 - a_coord.y) ;\n  vec2 pos = a_pos *2.0 -vec2(1.0,1.0);\n  // vec2 pos = a_pos -vec2(,1.0);\n  gl_Position = vec4(pos,0,1.0);\n}",fragmentSource:"precision highp float;\n\nvarying vec2 v_coord;\n\nuniform sampler2D u_texture;\n\nvoid main(){\n  gl_FragColor = texture2D(u_texture, v_coord);\n  // gl_FragColor = vec4(1.0,0,0,1.0);\n}\n"},circle:{uniforms:{u_pos:"vec2",u_color:"vec4",u_borderColor:"vec4",u_matrix:"mat4",u_localDeltaCenter:"vec2",u_offset:"vec2",u_radius:"float",u_range:"vec2",u_retinaRatio:"float",u_skyHeight:"float",u_viewHeight:"float"},attributes:{},vertexSource:"precision highp float;\n#define GLSLIFY 1\nuniform vec2 u_pos;\nuniform mat4 u_matrix;\nuniform float u_radius;\nuniform vec2 u_localDeltaCenter;\nuniform vec2 u_offset;\nuniform float u_retinaRatio;\nvarying vec4 v_pos;\n\nvoid main(){\n    vec2 pos=vec2(u_pos.x+u_localDeltaCenter.x+u_offset.x,u_pos.y+u_localDeltaCenter.y+u_offset.y);\n    gl_Position=u_matrix * vec4(pos,0,1);\n    gl_PointSize = u_radius * u_retinaRatio * 2.0;\n    v_pos = gl_Position;\n}\n",fragmentSource:"\n\nprecision highp float;\n#define GLSLIFY 1\nuniform  float u_radius;\nuniform  vec2 u_range;\nuniform highp vec4 u_color;\nuniform highp vec4 u_borderColor;\nuniform float u_skyHeight;\nuniform float u_viewHeight;  // 地图容器高度，单位像素\n\nvarying vec4 v_pos;\n\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\n    float y = pos.y / pos.w;\n    float fogHeight = 2. / viewHeight * 30.;\n    float fogFactor = 1.0;\n    if(skyHeight < 1.0 && y > 0.0) {\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\n    }\n    return fogFactor;\n}\n\nvoid main() {\n  float offset = distance(gl_PointCoord, vec2(0.5,0.5))*2.0;\n  float flag = step(1.0,offset);\n  float borderFlag = 1.- smoothstep(1.0 -1./u_radius, 1.0, offset);\n  if(flag > 0.0){\n    discard;\n  }\n  float opacity_t = 1.-smoothstep(u_range[1] -1./u_radius, u_range[1], offset);\n  gl_FragColor = mix(u_borderColor, u_color, opacity_t);\n  gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight)*borderFlag;\n}"},polyline:{uniforms:{u_width:"float",u_dashType:"int",u_matrix:"mat4",u_offset:"vec2",u_meter_per_pixel:"float",u_color:"vec4",u_dash:"vec3",u_localDeltaCenter:"vec2",u_skyHeight:"float",u_viewHeight:"float"},attributes:{a_pos:{Oe:"vec2",Me:"float32"},a_normal:{Oe:"vec2",Me:"float32"},a_distance:{Oe:"float",Me:"float32"},a_dir:{Oe:"vec2",Me:"float32"}},vertexSource:"precision highp float;\n#define GLSLIFY 1\nattribute vec2 a_pos;\nattribute vec2 a_normal;\nattribute float a_distance;\nattribute vec2 a_dir;\n\n// attribute vec4 a_color;\n// attribute float a_width;\n// attribute vec4 a_dash;\n\nuniform float u_meter_per_pixel;\nuniform mat4 u_matrix;\nuniform vec2 u_localDeltaCenter;\n\nuniform  mediump float u_width;\nuniform vec2 u_offset;  // polygin 拖动平移的时候使用\nvarying float v_distance;\nvarying float v_width;\nvarying vec2 v_normal;\nvarying float v_flag;\nvarying vec4 v_pos;\n\n#define WORLD_SIZE 20037508.342789244\n\nvoid main(){\n\n    float width = u_width;\n    float cosValue = dot(a_normal , a_dir);\n    float sinValue = cross(vec3(normalize(a_normal),0.0), vec3(a_dir,0.0))[2];\n    sinValue = step(0.0, sinValue);\n    sinValue = (sinValue - 0.5)* 2.0;\n    v_distance = a_distance/u_meter_per_pixel + (cosValue * width *0.5);\n\n    vec2 pos = a_pos;\n    pos.x+=u_localDeltaCenter.x + u_offset.x;\n    pos.y+=u_localDeltaCenter.y + u_offset.y;\n//    gl_PointSize = 3.0;\n//    gl_Position = u_matrix * vec4(pos, 0, 1);\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\n    v_width = width;\n    v_normal = normalize(a_normal * sqrt(1.0 - pow(cosValue, 2.0)));\n    v_flag = sinValue;\n    v_pos = gl_Position;\n\n}",fragmentSource:"precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 u_color;\nuniform vec4 u_outLinecolor;\n// uniform float u_opacity;\nuniform vec3 u_dash;\nuniform int u_dashType;\nuniform sampler2D u_texture;\nuniform  mediump float u_width;\n\nvarying highp float v_distance;\nvarying float v_width;\nvarying vec2 v_normal;\nvarying float v_flag;\nvarying vec4 v_pos;\n\nuniform float u_skyHeight;\nuniform float u_viewHeight;  // 地图容器高度，单位像素\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\n    float y = pos.y / pos.w;\n    float fogHeight = 2. / viewHeight * 30.;\n    float fogFactor = 1.0;\n    if(skyHeight < 1.0 && y > 0.0) {\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\n    }\n    return fogFactor;\n}\n\nvoid main() {\n    // vec2 icon_offset = vec2(80.0, 0.0);\n    // vec2 icon_size = vec2(40.0, 40.0);\n    // vec2 icon_offset = vec2(0.0, 0.0);\n    // vec2 icon_size = vec2(44.0, 32.0);\n    // vec2 texture_size = vec2(512.0, 2048.0);\n    float offset = 0.0;\n    if( u_dashType == 2 ){\n        float offset = mod(v_distance, u_dash.r + u_dash.g);\n        if(offset>u_dash.r && offset < u_dash.r + u_dash.g){\n            discard;\n        }\n    }else if(u_dashType == 3) {\n        float all = u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2] * 2.0;\n        offset = mod(v_distance, all);\n        vec3 solidBound = vec3(u_dash[0], u_dash[0] + u_dash[1] + u_dash[2], u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2]);\n        vec3 dashBound = vec3(solidBound.x + u_dash[1], solidBound.y + u_dash[0], solidBound.z + u_dash[2]);\n\n        if (offset > solidBound.x && offset <= dashBound.x\n            || offset > solidBound.y && offset <= dashBound.y\n            || offset > solidBound.z && offset <= dashBound.z) {\n            discard;\n        }\n    }\n\n    float startBlur = 0.0;\n    float endBlur = 1.0;\n    // float dist = length(v_normal) * 0.8;\n\n    // if(v_width < 4.0 && u_border == 1.0) {\n    //     startBlur = 0.0;\n    // } else {\n    //     // 线主体\n    //     if(v_width < 4.0 && u_border == 0.0) {\n    //         startBlur = 0.0;\n    //     } else {\n    //         startBlur = 0.4;\n    //     }\n    // }\n    // startBlur = clamp(0.0, 0.4, smoothstep(0.0, 4.0, v_width) - 0.6);\n\n    // startBlur = 0.0;\n    // float opacity = 1.0 - smoothstep(startBlur, endBlur, dist);\n\n    gl_FragColor = u_color;\n    gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\n    #ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n    #endif\n}\n"},"polyline-pattern":{uniforms:{u_width:"float",u_matrix:"mat4",u_offset:"vec2",u_meter_per_pixel:"float",u_meter_per_pixel_optimal:"float",u_localDeltaCenter:"vec2",u_texture:"sampler2D",u_iconsize:"vec2",u_dir_color:"vec3",u_custom_img_flag:"bool",u_skyHeight:"float",u_viewHeight:"float"},attributes:Ut={a_pos:{Oe:"vec2",Me:"float32"},a_normal:{Oe:"vec2",Me:"float32"},a_distance:{Oe:"float",Me:"float32"},a_dir:{Oe:"vec2",Me:"float32"}},vertexSource:"precision highp float;\n#define GLSLIFY 1\nattribute vec2 a_pos;\nattribute vec2 a_normal;\nattribute float a_distance;\nattribute vec2 a_dir;\n\n// attribute vec4 a_color;\n// attribute float a_width;\n// attribute vec4 a_dash;\n\nuniform highp float u_meter_per_pixel;\nuniform highp float u_meter_per_pixel_optimal;\nuniform mat4 u_matrix;\nuniform vec2 u_localDeltaCenter;\n\nuniform  highp float u_width;\nuniform vec2 u_offset;  // polygin 拖动平移的时候使用\nvarying highp float v_distance;\n// varying mediump float v_width;\n// varying vec2 v_normal;\nvarying highp float v_flag;\nvarying vec4 v_pos;\n\n#define WORLD_SIZE 20037508.342789244\n\nvoid main(){\n\n    float width = u_width + 0.0;\n    float cosValue = dot(a_normal , a_dir);\n    float sinValue = cross(vec3(normalize(a_normal),0.0), vec3(a_dir,0.0))[2];\n    sinValue = step(0.0, sinValue);\n    // sinValue = (sinValue - 0.5)* 2.0;\n    v_distance = a_distance/u_meter_per_pixel + (cosValue * width *0.5);\n\n    vec2 pos = a_pos;\n    pos.x+=u_localDeltaCenter.x + u_offset.x;\n    pos.y+=u_localDeltaCenter.y + u_offset.y;\n//    gl_PointSize = 3.0;\n//    gl_Position = u_matrix * vec4(pos, 0, 1);\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\n    // v_width = width;\n    // v_normal = normalize(a_normal * sqrt(1.0 - pow(cosValue, 2.0)));\n    v_flag = sinValue;\n    v_pos = gl_Position;\n\n}",fragmentSource:"precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D u_texture;\nuniform  highp vec2 u_iconsize;\nuniform  mediump vec3 u_dir_color;\nuniform  bool u_custom_img_flag;\nuniform  highp float u_width;\nuniform highp float u_meter_per_pixel;\nuniform highp float u_meter_per_pixel_optimal;\n\nvarying highp float v_distance;\n// varying float v_width;\n// varying vec2 v_normal;\nvarying highp float v_flag;\nvarying vec4 v_pos;\n\nuniform float u_skyHeight;\nuniform float u_viewHeight;  // 地图容器高度，单位像素\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\n    float y = pos.y / pos.w;\n    float fogHeight = 2. / viewHeight * 30.;\n    float fogFactor = 1.0;\n    if(skyHeight < 1.0 && y > 0.0) {\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\n    }\n    return fogFactor;\n}\n\nvoid main() {\n    // if(abs(v_flag)>=1.0){\n    //     discard;\n    // }\n    vec2 icon_size = u_iconsize * vec2(u_width/u_iconsize.y, 1.0 );\n    float offset = 0.0;\n    float text_offset_x = mod(v_distance, (icon_size.x*4.0)*u_meter_per_pixel_optimal/u_meter_per_pixel);\n    // float text_offset_x = mod(v_distance, 120.0);\n\n    if(text_offset_x<=0.0){\n        discard;\n    }\n    if(text_offset_x>=icon_size.x){\n        discard;\n    }\n\n    text_offset_x = 1.0 - clamp(0.0,1.0,text_offset_x/icon_size.x);\n\n    // float  text_offset_y  = (v_flag+1.0)/2.0  ;\n    float  text_offset_y  = v_flag  ;\n\n    if(u_custom_img_flag){\n        gl_FragColor = texture2D(u_texture, vec2(text_offset_y, text_offset_x));\n    }else{\n        vec4 color = texture2D(u_texture, vec2(text_offset_y,text_offset_x));\n        if(color.a>0.0){\n            gl_FragColor = vec4(u_dir_color,1.0);\n        }\n    }\n   gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\n    #ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n    #endif\n}\n"},"polyline-gradient":{uniforms:{u_width:"float",u_matrix:"mat4",u_offset:"vec2",u_meter_per_pixel:"float",u_localDeltaCenter:"vec2",u_texture:"sampler2D",u_total_distance:"float",u_skyHeight:"float",u_viewHeight:"float"},attributes:Ut,vertexSource:"precision highp float;\n#define GLSLIFY 1\nattribute vec2 a_pos;\nattribute vec2 a_normal;\nattribute float a_distance;\nattribute vec2 a_dir;\n\n// attribute vec4 a_color;\n// attribute float a_width;\n// attribute vec4 a_dash;\n\nuniform float u_meter_per_pixel;\nuniform mat4 u_matrix;\nuniform vec2 u_localDeltaCenter;\n\nuniform  mediump float u_width;\nuniform vec2 u_offset;  // polygin 拖动平移的时候使用\n\nvarying float v_distance;\nvarying float v_width;\nvarying vec2 v_normal;\nvarying float v_flag;\nvarying vec4 v_pos;\n\n#define WORLD_SIZE 20037508.342789244\n\nvoid main(){\n\n    float width = u_width;\n    float cosValue = dot(a_normal , a_dir);\n\n    v_distance = a_distance + (cosValue * width *0.5)*u_meter_per_pixel;\n    // v_distance = a_distance;\n\n    vec2 pos = a_pos;\n    pos.x+=u_localDeltaCenter.x + u_offset.x;\n    pos.y+=u_localDeltaCenter.y + u_offset.y;\n    gl_Position = u_matrix * vec4(pos + a_normal * width * u_meter_per_pixel * 0.5, 0, 1);\n    v_pos = gl_Position;\n}",fragmentSource:"precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 u_outLinecolor;\n// uniform float u_opacity;\nuniform vec3 u_dash;\nuniform int u_dashType;\nuniform sampler2D u_texture;\nuniform  mediump float u_width;\nuniform  highp float u_total_distance;\n\nvarying highp float v_distance;\nvarying vec4 v_pos;\n\nuniform float u_skyHeight;\nuniform float u_viewHeight;  // 地图容器高度，单位像素\nfloat fogcalc(vec4 pos, float skyHeight, float viewHeight) {\n    float y = pos.y / pos.w;\n    float fogHeight = 2. / viewHeight * 30.;\n    float fogFactor = 1.0;\n    if(skyHeight < 1.0 && y > 0.0) {\n        fogFactor = smoothstep(skyHeight + fogHeight/2.0, skyHeight - fogHeight/2.0, y);\n    }\n    return fogFactor;\n}\n\nvoid main() {\n\n    float offset = 0.0;\n    if( u_dashType == 2 ){\n        float offset = mod(v_distance, u_dash.r + u_dash.g);\n        if(offset>u_dash.r && offset < u_dash.r + u_dash.g){\n            discard;\n        }\n    }else if(u_dashType == 3) {\n        float all = u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2] * 2.0;\n        offset = mod(v_distance, all);\n        vec3 solidBound = vec3(u_dash[0], u_dash[0] + u_dash[1] + u_dash[2], u_dash[0] * 2.0 + u_dash[1] * 2.0 + u_dash[2]);\n        vec3 dashBound = vec3(solidBound.x + u_dash[1], solidBound.y + u_dash[0], solidBound.z + u_dash[2]);\n\n        if (offset > solidBound.x && offset <= dashBound.x\n            || offset > solidBound.y && offset <= dashBound.y\n            || offset > solidBound.z && offset <= dashBound.z) {\n            discard;\n        }\n    }\n    float texture_x = v_distance/u_total_distance;\n    gl_FragColor = texture2D(u_texture, vec2(texture_x,0.5));\n    gl_FragColor.a *= fogcalc(v_pos, u_skyHeight, u_viewHeight);\n    #ifdef OVERDRAW_INSPECTOR\n        gl_FragColor = vec4(1.0);\n    #endif\n}\n"}},sn=(rn.prototype.Un=function(){return this.Bn("circle")},rn.prototype.rS=function(){return this.Bn("sky")},rn.prototype.EB=function(){return this.Bn("skyPattern")},rn.prototype.aS=function(){return this.Bn("mask")},rn.prototype.Wn=function(){return this.Bn("fill")},rn.prototype.aH=function(){return this.Bn("fillPattern")},rn.prototype.k_=function(){return this.Bn("fillExtrusion")},rn.prototype.sH=function(){return this.Bn("fillExtrusionPattern")},rn.prototype.Gn=function(){return this.Bn("raster")},rn.prototype.Zn=function(){var t=this.context.gl,i="labelsLayer";if(!this.cache[i]){for(var t=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),n=Math.min(t,16),t=en[i],e=[],s=0;s<n;s++)e.push((0<s?"else ":" ")+"if(texIdx=="+s+"){ distColor = texture2D(u_texture["+s+"], v_texcoord); }");t.vertexSource=t.vertexSource.replace(/_TotalTextureLenTwice/g,(2*n).toString()).replace(/_TotalTextureLen/g,n.toString()),t.fragmentSource=t.fragmentSource.replace(/_TotalTextureLen/g,n.toString()).replace(/__SmpColorLoop__/g,e.join("\n"))}return this.Bn(i)},rn.prototype.Yn=function(){return this.Bn("fillOutline")},rn.prototype.Vn=function(){return this.Bn("line")},rn.prototype.Xn=function(){return this.Bn("polyline")},rn.prototype.M_=function(){return this.Bn("polyline-pattern")},rn.prototype.sS=function(){return this.Bn("polyline-gradient")},rn.prototype.Hn=function(){return this.Bn("combineText")},rn.prototype.Jn=function(){return this.Bn("debugImage")},rn.prototype.destroy=function(){for(var t in this.cache)this.cache.hasOwnProperty(t)&&(this.cache[t].destroy(),delete this.cache[t])},rn.prototype.Bn=function(t){if(this.cache[t])return this.cache[t];var i=en[t];return i&&(this.cache[t]=new ki(this.context,i.vertexSource,i.fragmentSource,i.attributes,i.uniforms,t)),this.cache[t]},rn);function rn(t){this.context=t,this.context=t,this.cache={}}function on(){this.hS=yt.Util.stamp(this)}on.prototype.destroy=function(){};var an,hn=(an=C=on,yt.Ei(fn,an),fn.prototype.Kn=function(t,i,n,e,s){},fn);function fn(){var t=an.call(this)||this;return t.CLASS_NAME="AMap.Land",t.e_=[0,0,0,0],t.Qn={color:[.9882352941176471,.9764705882352941,.9490196078431372,1]},t}function un(t){this.map=t}un.prototype.lS=function(t,i){var n,e,s=this.map.fS(),r=s.uS(),o={};for(n in r)r.hasOwnProperty(n)&&(e=r[n],e=i.uo.getData(e.co(),i.$n,this.context||null),o[n]=e);s.cS(t,i,o)},Ci=un;var cn,ln=yt._.scale,vn=(cn=Ci,yt.Ei(dn,cn),dn.prototype.getMapState=function(){return this.map&&this.map.getMapState()||{}},dn.prototype.getMap=function(){return this.map},dn.prototype.to=function(){this.map&&this.map.setNeedUpdate(!0)},dn.prototype.Kn=function(t){t.size[0]*ln!==this.io.width&&(this.io.width=t.size[0]*ln,this.io.style.width=t.size[0]+"px"),t.size[1]*ln!==this.io.height&&(this.io.height=t.size[1]*ln,this.io.style.height=t.size[1]+"px"),this.context.be.set([0,0,this.io.width,this.io.height]),this.context.clear({stencil:!0,color:!0,depth:!0});var i,n=t.$n.zoom,e=t.layers.sort(function(t,i){return t.eo().zIndex-i.eo().zIndex});this.no.Kn(this.oo,this.map.options.backgroundColor,t,{},this),this.map.ao.update(this.oo),this.map.so.update(this.oo),this.lS(this.oo,t);for(var s=!0,r=0,o=e.length;r<o;r+=1){var a=(i=e[r]).getState(),h=i.eo().zooms,f=0<a.opacity;"AMap.IndoorMap"===i.CLASS_NAME&&(f=0<=a.opacity),!(a.visible&&f&&yt.Util.dS(n,h)||"AMap.CustomLayer"===i.CLASS_NAME)||(f=i.getRender())&&(i.lo()||(s=!1),(h=t.uo.getData(e[r].co(),t.$n,this.context))&&(i.beforeRender(),f.Kn(this.oo,h,t,a,this,e[r],h.fo),i.afterRender()))}!this.map.complete&&s&&(this.map.emit("complete"),this.map.complete=!0),this.map.getView().h_()||(this.map.getView().aD(),this.map.emit("viewchange",{zoom:t.$n.zoom,center:t.$n.center,pitch:t.$n.pitch,rotation:t.$n.rotation}))},dn.prototype.destroy=function(){this.oo.destroy(),this.po.destroy()},dn);function dn(t){var i=cn.call(this,t)||this;i.map=t,i.io=k.create("canvas",t.do,"amap-layer"),i.io.width=0,i.io.height=0;var n=yt._.getContext(i.io,!1);return(i.gl=n).getExtension("OES_standard_derivatives"),n.getExtension("OES_element_index_uint"),i.context=new di(n),i.oo=new sn(i.context),i.z_=t.z_,i.R_=t.R_,i.po=new yt.vo,i.no=new hn,i}var pn,mn=(pn=yt.OD,yt.Ei(yn,pn),yn);function yn(t){return void 0===t&&(t=500),t=pn.call(this,t)||this,yt.Event.extend("delete",t.Ho,t),t}var _n=(gn.prototype.CS=function(){this.AS=!1},gn.prototype.getData=function(){var r=this,t=this.$E;if(this.AS)return this.AS;if(t){var i,s,o,a,h,n=yt.GeometryUtil.typePolygon(t),f={type:"Polygon",$S:new Array,polygons:new Array,BM:new Array,LS:{x:0,y:0}};return n&&"Polygon"===n?(t[0][0]instanceof yt.LngLat?f.LS=yt.lcs.getLocalByLnglat(t[0][0].toString()):f.LS=yt.lcs.getLocalByLnglat(t[0][0]),i=f.LS,s=i.x,o=i.y,yt.forEach(t,function(t,i){var e;0===i?yt.forEach(t,function(t){t instanceof yt.LngLat&&(t=t.toArray());var i=yt.lcs.getLocalByLnglat(t),t=(n=r.DS(s,o,i.x,i.y))[0],n=n[1];f.$S.push(i.Sa[0]+t,i.Sa[1]+n)}):(e=[],yt.forEach(t,function(t){t instanceof yt.LngLat&&(t=t.toArray());var i=yt.lcs.getLocalByLnglat(t),t=(n=r.DS(s,o,i.x,i.y))[0],n=n[1];e.push(i.Sa[0]+t,i.Sa[1]+n)}),f.BM.push(e))})):n&&"MultiPolygon"===n&&(f.type="MultiPolygon",t[0][0][0]instanceof yt.LngLat?f.LS=yt.lcs.getLocalByLnglat(t[0][0][0].toArray()):f.LS=yt.lcs.getLocalByLnglat(t[0][0][0]),n=f.LS,a=n.x,h=n.y,yt.forEach(t,function(t){var s=[],n=[];yt.forEach(t,function(t,i){var e;0===i?yt.forEach(t,function(t){t instanceof yt.LngLat&&(t=t.toArray());var i=yt.lcs.getLocalByLnglat(t),t=(n=r.DS(a,h,i.x,i.y))[0],n=n[1];s.push(i.Sa[0]+t,i.Sa[1]+n)}):(e=[],yt.forEach(t,function(t){t instanceof yt.LngLat&&(t=t.toArray());var i=yt.lcs.getLocalByLnglat(t),t=(n=r.DS(a,h,i.x,i.y))[0],n=n[1];e.push(i.Sa[0]+t,i.Sa[1]+n)}),n.push(e))}),f.BM.push(n),f.polygons.push(s)})),this.AS=this.zw(f),this.AS}return!0},gn.prototype.DS=function(t,i,n,e){return e-=i,[(t=n-t)*(i=yt.lcs.getSize())[0],e*i[1]]},gn.prototype.zw=function(t){if(t.Oc=new yt._w,!t.Dc){t.Dc=new yt.K_;var i=[],n=[];"Polygon"===t.type?(i=[t.$S],n=[t.BM]):"MultiPolygon"===t.type&&(i=t.polygons,n=t.BM);for(var e=0;e<i.length;e++){for(var s=i[e],r=[],o=0;o<n[e].length;o++){var a=n[e][o];r.push(s.length/2),s.push.apply(s,a)}var h=t.Dc.Nx(s,r);0<h&&t.Oc.add(99,99,h,2,22)}return t}},gn.prototype.EE=function(t){if(!t)return null;for(var i=[],n=t.length,e=0;e<n;e++){var s=t[e],s=[(s=this.map.pixelToLngLat(s,16)).lng,s.lat];i.push(s)}return[i]},gn);function gn(t,i,n){this.map=i,this.$E=t}var bn,xn=yt._.scale,Hi=(bn=yt.BE,yt.Ei(kn,bn),kn.prototype.oa=function(t,i,n,e){var s=this;if(e.gn.dE){this.aa=t,this.sa=[];for(var r,o,a=t.bounds,h=this.ra(t.optimalZoom),f=this.ha(a,h),u=[],c=t.optimalZoom,l=yt.map(f,function(t){var i=s.fa(t.x,t.z);return t.z+","+i+","+t.y}),v=this.QH.qH(l),d=this.KH.qH(l),p=[],m=[],y=0;y<f.length;y++){var _,g,b,x=f[y],k=new yt.ca(x.z,this.fa(x.x,x.z),x.y),w=new yt.ca(x.z,x.x,x.y),M=yt.Util.kD(k.key,c),C=this.ua.getTile(k,!0);C?((_=this.ua.MD(C.tag,M))&&(C.tag=M,b=x.key+","+yt.Util.SD(_),v.yB.indexOf(b)<0&&p.push(b)),C.gB===_||C.xB&&C.xB!==yt.Mo.ERROR||(b=x.key+","+yt.Util.SD(_),d.yB.indexOf(b)<0&&(C.xB=yt.Mo.LOADING,m.push(x.key+","+yt.Util.SD(C.gB)))),(g=this.ua.MD(C.gB,M))&&(C.gB=M,b=x.key+","+yt.Util.SD(_),d.yB.indexOf(b)<0&&m.push(b))):(b=k.key+","+yt.Util.SD(M),v.yB.indexOf(b)<0&&((k=new yt.pa(k)).status=yt.Mo.LOADING,k.xB=yt.Mo.LOADING,this.ua.Jo(k),k.tag=M,k.gB=M,p.push(b),m.push(b))),!C||C.status!==yt.Mo.LOADED&&C.status!==yt.Mo.RELOADING||this.sa.push(w),C&&(C.status===yt.Mo.LOADED||C.status===yt.Mo.RELOADING)||u.push(x),C&&C.status===yt.Mo.LOADED&&C.version&&C.version!==this.VH&&(this.sa.push(w),C.status=yt.Mo.RELOADING,p.push(x.key+","+yt.Util.SD(C.tag)),m.push(x.key+","+yt.Util.SD(C.gB)),(_=this.ua.MD(C.tag,M))&&(b=x.key+","+yt.Util.SD(_),v.yB.indexOf(b)<0&&p.push(b)),(g=this.ua.MD(C.gB,M))&&(b=x.key+","+yt.Util.SD(g),d.yB.indexOf(b)<0&&m.push(b)))}this.da(t,this.sa,u,e),this.map.getOutseaState()?9.8<=h?(o=this.OE(p),r=this.OE(m),a=o.overseaTile,l=o.chinaTile,o=o.mapboxTile,this.PE(a,"oversea"),this.PE(l,"china"),this.PE(o,"mapbox"),this.zD(l,t,h,e,n),e.showLabel&&this.bB(r.chinaTile,t),this.zD(a,t,h,e,n,void 0,"outsea"),e.showLabel&&this.bB(r.overseaTile,t,"outsea")):(this.PE(p,"china"),this.zD(p,t,h,e,n,void 0,"a00"),e.showLabel&&this.bB(m,t,"a00")):(this.PE(p,"china"),this.zD(p,t,h,e,n,void 0),e.showLabel&&this.bB(m,t))}},kn.prototype.getData=function(i){var n=this,t=i.bounds,e=this.ra(i.optimalZoom),s=this.ha(t,e),r=[],o={};14===e&&(o=this.ha(t,15,!0));var a=this.map.qF();if(this.ua.QF(a),this.sa.sort(function(t){return n.ra(i.optimalZoom)===t.z?1:-1}),0<this.sa.length)for(var h=0;h<this.sa.length;h++){var f,u,c,d,p,l=this.sa[h],v=this.ua.getTile(l,!0),m=[0,0],y=i.centerCoord;v?(f=yt.lcs.getLocalByCoord([y[0],y[1]]),i.optimalZoom>=yt.Ra?(u=yt.lcs.getSize(),d=v.Ma.x-f.x,p=v.Ma.y-f.y,0!=d&&(d*=u[0],m[0]=d),0!=p&&(p*=u[1],m[1]=p),i.optimalZoom>=yt.Ra&&yt.za>=v.zo.z&&(m[0]=-f.center[0],m[1]=-f.center[1])):i.optimalZoom<yt.Ra&&yt.za<v.zo.z&&(m[0]=f.center[0],m[1]=f.center[1])):(f=new yt.ca(l.z,this.fa(l.x,l.z),l.y),(f=this.ua.getTile(f,!0))&&(v=new yt.pa(l),u=1<<l.z,(l.x<0||l.x>=u)&&(c=Math.floor(l.x/u),m[0]+=20037508.342789244*c*2),c=f.tag,v.Ro=f.Ro,v.ID(f),v.Sa=m,v.status=f.status,v.tag=c)),v&&(v.stamp=a,v.Sa=m,r.push(v))}var _=i.optimalZoom,g=yt.every(s,function(e){return yt.some(r,function(t){var i=t.zo.key,n=t.zo.z,n=yt.Util.VF(n,_),t=t.tag,n=yt.Util.LD(t,n);return i===e.key&&n})});(t=this.map.getOutseaState())&&(g=!(b=yt.filter(s,function(t){return!(t=n.NE.getTile(t))||!t.boundsStatus||!1!==t.boundsStatus.isInNebulaOversea})).length||yt.every(b,function(e){return yt.some(r,function(t){var i=t.zo.key,n=t.zo.z,n=yt.Util.VF(n,_),t=t.tag,n=yt.Util.LD(t,n);return i===e.key&&n})})),this.Fo(g);var b=this.jE(r);return g&&(this.a_=!0),o={s_:this.a_,fo:!!g&&b,tiles:r,Ca:o,outseaData:void 0},t&&r.length&&(t=this.GE(),o.outseaData=t),o.tiles=this.UE(r,e),o},kn.prototype.ZE=function(t){return!1},kn.prototype.OE=function(t){for(var i=t.length,n=[],e=[],s=[],r=0;r<i;r++){var o=void 0,a=void 0,h=t[r],f=h.split(","),u=new yt.ca(f[0],f[1],f[2]),c=this.NE.getTile(u);if(c&&c.boundsStatus)o=c.boundsStatus.isInChina,a=c.boundsStatus.isInNebulaOversea;else{if(!(f=yt.wa.ga(parseInt(f[1],10),parseInt(f[2],10),parseInt(f[0],10),"EPSG:3857")))continue;f=[[f[0],f[1]],[f[2],f[1]],[f[2],f[3]],[f[0],f[3]]],o=this.VE(f,"china",h),a=this.VE(f,"oversea",h),(u=new yt.pa(u)).boundsStatus={isInChina:o,isInNebulaOversea:a},this.NE.Jo(u)}o&&n.push(h),a&&e.push(h),o||a||s.push(h)}return{chinaTile:n,overseaTile:e,mapboxTile:s}},kn.prototype.ra=function(t){return{2:3,3:3,4:3,5:3,6:6,7:6,8:8,9:8,10:10,11:10,12:10,13:12,14:12,15:14,16:14,17:14,18:14,19:14,20:14,21:14,22:14}[t]},kn.prototype.YE=function(t){var i=this;t(null,{GW:"worker",cb:function(t){i.dynamicTextVerticeLoadedByTile(t)}})},kn.prototype.destroy=function(){this.ua.forEach(function(t){t.status!==yt.Mo.LOADED&&t.request&&(t.request.cancel(),delete t.request),t.destroy()}),this.ua.destroy(),this.sa=[],this.la=[]},kn.prototype.reload=function(){this.ua.forEach(function(t){t.status!==yt.Mo.LOADED&&t.request&&(t.request.cancel(),delete t.request)}),this.ua.destroy(),this.sa=[],this.la=[]},kn.prototype.Aa=function(t){var i;!t.zo||(i=this.ua.getTile(t.zo))&&(i.rO({Ta:!0},t.tag),i.xa({Ta:!0},t.tag),i.JE({Ta:!0},t.tag))},kn.prototype.Ks=function(t){t=t||(yt._.$e?50:200),this.ua.Xo(t)},kn.prototype.UH=function(t){this.VH=t},kn.prototype.dynamicTextVerticeLoaded=function(t){var i=t.data,n=t.XE;if(i instanceof yt.ca){var e=this.ua.getTile(i);return e?(e.data||e.xa({},t.tag),void e.rO({},t.tag)):void 0}if(e=i[Object.keys(i)[0]],e=this.ua.getTile(e.zo,!0)){e.data||e.xa({},t.tag);var s,r,o={};for(s in i)i.hasOwnProperty(s)&&(r=i[s],o[s]=new yt.La(r.zo,r));e.rO({labels:o,XE:n},t.tag),e.KE(),this.Eo()}},kn.prototype.dynamicTextVerticeLoadedByTile=function(t){for(var i=0,n=t.data;i<n.length;i++){var e=n[i];this.dynamicTextVerticeLoaded({data:e.data,tag:e.tag,XE:e.XE})}},kn.prototype.Ia=function(){this.map.on("tileSdfInfoFinished",this.Aa.bind(this))},kn.prototype.zD=function(t,i,n,e,s,r,o){void 0===r&&(r="road,building,region");var a=this.cP(),h={};a&&(h=a.getState().vS),h=yt.Ln(yt.Ln({},h),{buildingColor:yt.Ln({},e.getBuildingColor())}),r={zoom:i.zoom,optimalZoom:i.optimalZoom,projectionId:i.projectionId,mS:h,viewMode:i.viewMode,showBuildingBlock:this.map.yS(),ZL:i.zoom,hH:r},this.QH._B(t,r,o)},kn.prototype.bB=function(t,i,n){i={zoom:i.zoom,projectionId:i.projectionId,mH:yt._.mH},this.KH._B(t,i,n)},kn.prototype.cP=function(){for(var t,i=this.map.getLayers(),n=0;n<i.length;n++)if("AMap.Buildings"===(e=i[n]).CLASS_NAME&&!e.getState().u$){t=e;break}if(!t)for(var e,n=0;n<i.length;n++)if("AMap.Buildings"===(e=i[n]).CLASS_NAME){t=e;break}return t},kn.prototype.ma=function(t,i){var n=new RegExp(/\{(\w|\,)+\}/g);if(n.test(this.Be)){var e=this.Be.match(n)[0].replace(/[\{|\}]/g,"").split(",");return this.Be.replace(n,e[(t+i)%4])}return this.Be},kn.prototype.AD=function(){var t=new RegExp(/\{(\w|\,)+\}/g),n=(i=this.Be.match(t)[0].replace(/[\{|\}]/g,"").split(",")).length,i=this.Be.replace(t,i[this.$D%n]);return this.$D=(this.$D+1)%n,i},kn.prototype.ha=function(t,i,n){void 0===n&&(n=!1);var e=[t[0],t[3]],s=[t[2],t[1]],t=this.Ga(e,i),e=this.Ga(s,i),s=t[0],r=t[1],o=e[0],a=e[1];if(n)return{ja:s,Fa:r,Oa:o,Ea:a,z:i};this.Pa={ja:s,Fa:r,Oa:o,Ea:a,z:i};for(var h=[],f=s;f<=o;f+=1)for(var u=r;u<=a;u+=1)h.push(new yt.ca(i,f,u));return this.Da(h),h},kn.prototype.da=function(t,i,n,e){var s=[3,6,8,10,12,14],r=this.ra(t.optimalZoom);if(this.Za)for(var o=Math.min(14,r+3),a=r+1;n.length&&a<=o;a+=1)if(-1!==s.indexOf(a)){for(var h=a-r,f=[],u=[],c=n.length-1;0<=c;--c)for(var l=n[c].x<<h,v=n[c].y<<h,d=1<<h;0<=d;--d)for(var p=1<<h;0<=p;--p){var m=new yt.ca(a,this.fa(l+d,a),v+p),y=new yt.ca(a,l+d,v+p);((b=this.ua.getTile(m,!0))&&b.status===yt.Mo.LOADED?u:f).push(y)}u.length&&i.push.apply(i,u),n=f}if(this.qa)for(var _=this.xt[0],a=r-1;n.length&&_<=a;--a)if(-1!==s.indexOf(a)){u=[];for(var f=[],g={},c=n.length-1;0<=c;--c){var b,x=n[c],h=a,k=x.z-h,d=x.x>>k,p=x.y>>k;g[x=(m=new yt.ca(h,d,p)).key]||(k=new yt.ca(h,this.fa(d,h),p),y=new yt.ca(h,d,p),b=this.ua.getTile(k,!0),g[x]=!0,(b&&b.status===yt.Mo.LOADED?u:f).push(y))}u.length&&i.push.apply(i,u),n=f}return i},kn.prototype.Da=function(t){var s,r,o;t.length&&(s=this.Pa.z,r=(this.Pa.ja+this.Pa.Oa)/2,o=(this.Pa.Fa+this.Pa.Ea)/2,t.sort(function(t,i){var n=(t.x<<s-t.z)-r,e=(t.y<<s-t.z)-o;return n*n+e*e<=(t=(i.x<<s-i.z)-r)*t+(i=(i.y<<s-i.z)-o)*i?-1:1}))},kn.prototype.Ga=function(t,i){var n=Math.pow(2,i),e=360/n,i=180/n;return[Math.floor(t[0]/e)+n/2,n/2-Math.ceil(t[1]/i)]},kn.prototype.fa=function(t,i){for(var n=1<<(i=i||this.aa.optimalZoom);t<0||n<=t;)t=n<=t?t-n:t<0?n+t:t;return t},kn.prototype.sD=function(){var s=this,r=this.hD,o=this.z_;o.loadImages(r,{type:"icon",cb:function(){for(var t=[],i=0;i<r.length;i++){var n=r[i],e=o.getImage(n);t.push({img:e.img,name:n,hv:i,width:e.width,height:e.height})}s.map.so.sv(t)}})},kn.prototype.PE=function(t,i){for(var n=0,e=t;n<e.length;n++){var s=e[n].split(",").slice(0,3).join(",");(s=this.ua.xf(s))&&(s.region=i)}},kn.prototype.UE=function(t,i){void 0===t&&(t=[]);var n=[];if(10<=i){for(var e=0,s=t;e<s.length;e++){var r=s[e];"china"!==r.region&&"oversea"!==r.region||n.push(r)}return n}return t},kn.prototype.jE=function(t){for(var i=this.R_.pH(),n=!!t.length,e=0,s=t;e<s.length;e++){var r=s[e].data;if(n)for(var o=0,a=r;o<a.length;o++){var h=a[o];if(!(n=n&&!!h.Ta))break}}return i&&n},kn.prototype.QE=function(t,i,n,e,s){n.xa({Ta:!0},yt.Util.pW(parseInt(i[i.length-1],10))),t&&"outsea"===t?n.qE({Ta:!0,labels:e},yt.Util.pW(parseInt(i[i.length-1],10))):n.rO({Ta:!0,labels:e,XE:s[i]},yt.Util.pW(parseInt(i[i.length-1],10))),n.KE()},kn);function kn(t,i,n,e){var h=bn.call(this,t,i,n,e)||this;return h.Ya=!1,h.Va=!1,h.xt=[2,22],h.sa=[],h.la=[],h.bD=[],h._D={},h.wB=[],h.kB={},h.qa=!0,h.Za=!0,h.a_=!1,h.$D=0,h.hD=["https://vdata.amap.com/style_icon/2.0/icon-normal-big.png","https://vdata.amap.com/style_icon/2.0/icon-biz-big.png"],h.VH="",h.wH=function(t){h.map.yH&&(parseInt(t.key.split(",")[0],10)<10||h.map.yH.kH(t.key))},h.GE=function(){var t=yt.outseaData.boundsP16;return new _n(t,h.map).getData()},h.Xa=t.tileSize,h.Be=t.tileUrl,h.tG=null,t=yt._.$e?50:200,h.ua=new yt.TD(t),h.NE=new mn(t),n.gn.Ha({scale:xn,showLabel:n.showLabel,DD:-1!==location.search.indexOf("forceAll")}),h.R_=n.R_,h.z_=n.z_,n.gn.Ja(AMap.getConfig().protocol),h.mapStyle=n.mapStyle,h.mapStyle.pn(function(){n.gn.Ka(h.mapStyle.vn)}),h.Ia(),h.sD(),h.ua.on("delete",h.wH),h.QH=new yt.MB(function(t,o,i,a){var n=h.AD();return!a||"outsea"!==a&&"a00"!==a||(n=yt._.wasm?n.replace("/nebula/v3","/oversea/v3"):n.replace("/nebula/v2","/oversea/v2")),new yt.vH(h.map.gn.va({url:n,zoom:i.zoom,optimalZoom:i.optimalZoom,projectionId:i.projectionId,mS:i.mS,viewMode:i.viewMode,showBuildingBlock:i.showBuildingBlock,ya:t,ZL:i.zoom,hH:i.hH},function(t){h.QH.CB(o);for(var i=0,n=t;i<n.length;i++){var e,s=n[i],r=s&&h.ua.getTile(s.zo);r&&(delete r.request,a&&"outsea"===a?r.JE(s.ba,s.tag):r.xa(s.ba,s.tag),r.KE(),r.status=yt.Mo.LOADED,e=yt.wa.ga(r.zo.x,r.zo.y,r.zo.z,"EPSG:3857"),s=yt.lcs.getLocalByCoord([e[0],e[1]]),r.Ma=s,r.Ro=e)}h.map.setNeedUpdate(!0)}))},function(t){for(var i=0,n=t;i<n.length;i++){var e=n[i];(e=h.ua.xf(e.slice(0,-2)))&&e.status!==yt.Mo.LOADED&&h.ua.ea(e)}}),h.KH=new yt.MB(function(t,o,i,a){var n=h.AD();return!a||"outsea"!==a&&"a00"!==a||(n=yt._.wasm?n.replace("/nebula/v3","/oversea/v3"):n.replace("/nebula/v2","/oversea/v2")),new yt.vH(h.map.gn.RD({url:n,projectionId:i.projectionId,CD:t,ZL:i.zoom,mH:i.mH},function(t,i){h.KH.CB(o);var s=i.results,r=i.XE;if(t)console.log(t);else if(s&&r)if(h.map.I_)if(h.map.yH)for(var n=0,e=Object.keys(s);n<e.length;n++)!function(i){var t=i.slice(0,-2),n=s[i],e=h.ua.xf(t);e&&(e.version=n.version,e.xB=yt.Mo.LOADED,n&&n[yt.tc.gH]&&n[yt.tc.RB]?h.map.yH.xH(t,!0)?(h.QE(a,i,e,n,r),h.Eo()):h.map.yH.bH(t,n[yt.tc.gH],n[yt.tc.RB],function(t){t?console.error(t):(h.QE(a,i,e,n,r),h.Eo())}):(e.xa({Ta:!0},yt.Util.pW(parseInt(i[i.length-1],10))),a&&"outsea"===a?e.qE({Ta:!0,labels:{}},yt.Util.pW(parseInt(i[i.length-1],10))):e.rO({Ta:!0,labels:{},XE:[]},yt.Util.pW(parseInt(i[i.length-1],10))),h.Eo()))}(e[n]);else console.error("no sdfStaticManager");else console.error("no textureManger")}))},function(t){for(var i=0,n=t;i<n.length;i++){var e=n[i];(e=h.ua.xf(e.slice(0,-2)))&&e.xB!==yt.Mo.LOADED&&(e.xB=yt.Mo.ERROR)}}),h}function wn(){}var Mn=(wn.prototype.Qa=function(t){for(var i=this.createEmpty(),n=0,e=t.length;n<e;n+=1)this.extendCoordinate(i,t[n]);return i},wn.prototype.ns=function(t,i,n){var e=Math.min.apply(null,t),s=Math.max.apply(null,t),t=Math.min.apply(null,i),i=Math.max.apply(null,i);return this.os(e,s,t,i,n)},wn.prototype.buffer=function(t,i){t[0]-=i,t[1]-=i,t[2]+=i,t[3]+=i},wn.prototype.clone=function(t){return t.slice()},wn.prototype.ss=function(t,i){return t[0]<=i[0]&&i[0]<=t[2]&&t[1]<=i[1]&&i[1]<=t[3]},wn.prototype.rs=function(t,i){return t[0]<=i[0]&&i[2]<=t[2]&&t[1]<=i[1]&&i[3]<=t[3]},wn.prototype.createEmpty=function(){return[1/0,1/0,-1/0,-1/0]},wn.prototype.os=function(t,i,n,e,s){return void 0!==s?(s[0]=t,s[2]=i,s[1]=n,s[3]=e,s):[t,n,i,e]},wn.prototype.empty=function(t){return t[0]=t[1]=1/0,t[2]=t[3]=-1/0,t},wn.prototype.equals=function(t,i){return t[0]===i[0]&&t[2]===i[2]&&t[1]===i[1]&&t[3]===i[3]},wn.prototype.extend=function(t,i){i[0]<t[0]&&(t[0]=i[0]),i[2]>t[2]&&(t[2]=i[2]),i[1]<t[1]&&(t[1]=i[1]),i[3]>t[3]&&(t[3]=i[3])},wn.prototype.extendCoordinate=function(t,i){+i[0]<t[0]&&(t[0]=i[0]),+i[0]>t[2]&&(t[2]=i[0]),+i[1]<t[1]&&(t[1]=i[1]),+i[1]>t[3]&&(t[3]=i[1])},wn.prototype.hs=function(t){return[t[0],t[1]]},wn.prototype.ls=function(t){return[t[2],t[1]]},wn.prototype.getCenter=function(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]},wn.prototype.us=function(t,i,n,e,s){for(var r,o,a=i*e[0]/2,e=i*e[1]/2,h=Math.cos(n),f=Math.sin(n),u=[-a,-a,a,a],c=[-e,e,-e,e],l=0;l<4;l+=1)r=u[l],o=c[l],u[l]=t[0]+r*h-o*f,c[l]=t[1]+r*f+o*h;return this.ns(u,c,s)},wn.prototype.getHeight=function(t){return t[3]-t[1]},wn.prototype.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},wn.prototype.cs=function(t){return[t[0],t[3]]},wn.prototype.fs=function(t){return[t[2],t[3]]},wn.prototype.getWidth=function(t){return t[2]-t[0]},wn.prototype.intersects=function(t,i){return t[0]<=i[2]&&t[2]>=i[0]&&t[1]<=i[3]&&t[3]>=i[1]},wn.prototype.isEmpty=function(t){return t[2]<t[0]||t[3]<t[1]},wn.prototype.normalize=function(t,i){return[(i[0]-t[0])/(t[2]-t[0]),(i[1]-t[1])/(t[3]-t[1])]},wn.prototype.ps=function(t,i){var n=(t[2]-t[0])/2*(i-1),i=(t[3]-t[1])/2*(i-1);t[0]-=n,t[2]+=n,t[1]-=i,t[3]+=i},wn.prototype.touches=function(t,i){return this.intersects(t,i)&&(t[0]===i[2]||t[2]===i[0]||t[1]===i[3]||t[3]===i[1])},wn.prototype.transform=function(t,i,n){return i(t=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]],t,2),i=[t[0],t[2],t[4],t[6]],t=[t[1],t[3],t[5],t[7]],this.ns(i,t,n)},new wn),Cn=(An.from=function(t){for(var i=1/0,n=1/0,e=-1/0,s=-1/0,r=0,o=t;r<o.length;r++)var a=o[r],i=Math.min(i,a.southWest.KL),n=Math.min(n,a.southWest.kT),e=Math.max(e,a.northEast.KL),s=Math.max(s,a.northEast.kT);return new An(new yt.LngLat(i,n),new yt.LngLat(e,s))},An.xS=function(t){if(t)return t=yt.jsonLngLatData(t),new An(Mn.Qa(t))},An.bS=function(t){if(t&&t.length){for(var i,n=0,e=yt.jsonLngLatData(t);n<e.length;n++){var s,r=e[n];i?(s=An.ds(r))&&i.union(s):i=An.xS(r)}return i}},An.ds=function(t){if(t)return t=yt.jsonLngLatData(t),yt.ys(t)?An.xS(t):An.xS(t[0])},An.ms=function(t){if(t&&t.length){for(var i,n=0,e=yt.jsonLngLatData(t);n<e.length;n++){var s,r=e[n];i?(s=An.ds(r))&&i.union(s):i=An.ds(r)}return i}},An.prototype.getSouthWest=function(){return this.southWest},An.prototype.getNorthEast=function(){return this.northEast},An.prototype.getNorthWest=function(){return new yt.LngLat(this.southWest.KL,this.northEast.kT,!0)},An.prototype.getSouthEast=function(){return new yt.LngLat(this.northEast.KL,this.southWest.kT,!0)},An.prototype.contains=function(t){var i=this.southWest,n=this.northEast;if(yt.xs(t))return!1;t=yt.parseLngLatData(t);var e=i.KL,s=n.KL;return s<e&&(s+=360),t.KL>=e&&t.kT>=i.kT&&t.KL<=s&&t.kT<=n.kT},An.prototype.intersects=function(t){var i=this.southWest,n=this.northEast,e=t.southWest,s=t.northEast,t=s.kT>=i.kT&&e.kT<=n.kT,n=s.KL>=i.KL&&e.KL<=n.KL;return t&&n},An.prototype.getCenter=function(){var t=this.southWest.KL>this.northEast.KL?(this.southWest.KL+this.northEast.KL+360)/2%360:(this.southWest.KL+this.northEast.KL)/2,i=(this.southWest.kT+this.northEast.kT)/2;return new yt.LngLat(t,i)},An.prototype.extend=function(t){return this.southWest.setLng(Math.min(this.southWest.KL,t.KL)),this.southWest.setLat(Math.min(this.southWest.kT,t.kT)),this.northEast.setLng(Math.max(this.northEast.KL,t.KL)),this.northEast.setLat(Math.max(this.northEast.kT,t.kT)),this},An.prototype.union=function(t){return this.extend(t.southWest).extend(t.northEast)},An.prototype.toString=function(){return this.southWest.toString()+";"+this.northEast.toString()},An.prototype.toJSON=function(){return[this.southWest.lng,this.southWest.lat,this.northEast.lng,this.northEast.lat]},An.prototype.getWidth=function(){return Math.abs(this.northEast.lng-this.southWest.lng)},An.prototype.getHeight=function(){return Math.abs(this.southWest.lat-this.northEast.lat)},An.prototype.clone=function(){return An.from([this])},An);function An(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.className="AMap.Bounds";var n,e,s,r,o,a="function"==typeof Float64Array;if(1===arguments.length&&(arguments[0]instanceof Array||a&&arguments[0]instanceof Float64Array))r=new yt.LngLat(arguments[0][0],arguments[0][1],!0),o=new yt.LngLat(arguments[0][2],arguments[0][3],!0);else if(2===arguments.length)r=yt.parseLngLatData(arguments[0]),o=yt.parseLngLatData(arguments[1]),r=new yt.LngLat(r.KL,r.kT),o=new yt.LngLat(o.KL,o.kT);else if(4===arguments.length)r=new yt.LngLat(arguments[0],arguments[1]),o=new yt.LngLat(arguments[2],arguments[3]);else{if(0!==arguments.length)throw Error("Invalid Object: Bounds("+arguments+")");r=new yt.LngLat(-180,-90),o=new yt.LngLat(180,90)}(r.KL>o.KL||r.kT>o.kT)&&(n=Math.max(r.KL,o.KL),e=Math.min(r.KL,o.KL),s=Math.max(r.kT,o.kT),a=Math.min(r.kT,o.kT),r=new yt.LngLat(e,a),o=new yt.LngLat(n,s)),this.southWest=r,this.northEast=o}var Sn,Ri=(Sn=yt.BE,yt.Ei(In,Sn),In.prototype.oa=function(t,s,r){var o,a=this;this.ze=s,this.Oo&&!this.io||(o=t.projectionId,(t=new Image).crossOrigin="",t.onload=function(t){var i,n,e;a.Oo&&!a.io||(a.Fo(!0),(e=a.gs.getBounds())instanceof Cn&&(e=e.toJSON()),n=(i=yt.at.getProjection(o)).project(e[0],e[1]),e=i.project(e[2],e[3]),a.ws=[n[0],n[1],e[0],e[1]],s&&(a._s=s.createTexture(t.target,{}),a._s.bind(s.gl.CLAMP_TO_EDGE,s.gl.LINEAR,s.gl.LINEAR),a.ks=s.fe(new Float32Array([a.ws[0],a.ws[1],0,1,a.ws[2],a.ws[1],1,1,a.ws[0],a.ws[3],0,0,a.ws[2],a.ws[1],1,1,a.ws[2],a.ws[3],1,0,a.ws[0],a.ws[3],0,0]),16)),r())},this.io?t.src=this.io.toDataURL():t.src=this.gs.getImageUrl(),this.Rs=t)},In.prototype.getData=function(t){if(this.Oo){(i=this.gs.getBounds())instanceof Cn&&(i=i.toJSON());var n=yt.lcs.getLocalByCoord([t.centerCoord[0],t.centerCoord[1]]),s=(e=yt.at.getProjection(t.projectionId)).project(i[0],i[1]),e=e.project(i[2],i[3]),r=[0,0,0,0];if(t.optimalZoom>=yt.Ra){for(var i=yt.lcs.getLocalByCoord([s[0],s[1]]),t=yt.lcs.getLocalByCoord([e[0],e[1]]),o=yt.lcs.getSize(),r=[i.x-n.x,i.y-n.y,t.x-n.x,t.y-n.y],a=0;a<r.length;a++)0!==r[a]&&(r[a]*=o[0]);r=[r[0]-i.center[0],r[1]-i.center[1],r[2]-t.center[0],r[3]-t.center[1]]}return this.ze&&(this.ks=this.ze.fe(new Float32Array([s[0]+r[0],s[1]+r[1],0,1,e[0]+r[2],s[1]+r[1],1,1,s[0]+r[0],e[1]+r[3],0,0,e[0]+r[2],s[1]+r[1],1,1,e[0]+r[2],e[1]+r[3],1,0,s[0]+r[0],e[1]+r[3],0,0]),16)),{Ro:this.ws,image:this.Rs,texture:this._s,zs:this.ks,Sa:[0,0]}}},In);function In(t,i,n,e){return(n=Sn.call(this,t,i,n,e)||this).gs=e,n.io=e.canvas,n}var zn,Bi=(zn=yt.BE,yt.Ei(Tn,zn),Tn.prototype.add=function(t,i,n){void 0===t&&(t={}),void 0===i&&(i={}),Object.keys(t).length&&(this.Ls=t,this.HB=!0,this.OB=i,n&&n())},Tn.prototype.remove=function(t,i,n){void 0===t&&(t={}),void 0===i&&(i={}),this.Ls=t,this.HB=!0,this.OB=i,n&&n()},Tn.prototype.update=function(t,i){void 0===t&&(t={}),this.HB=!0,this.OB=t,i&&i()},Tn.prototype.clear=function(){this.Ls={},this.Ts=[],this.gS=null},Tn.prototype.getData=function(){return{other:this.gS}},Tn.prototype.Ds=function(t){return this.Ls[t]||null},Tn.prototype.zL=function(t){return this.CL&&this.CL.zL(t)},Tn.prototype.oa=function(t,i,n){var e=this;this.HB&&(this.HB=!1,this.As(this.OB,function(){e.Fo(!0),n()}))},Tn.prototype.As=function(i,n){var e=this;void 0===i&&(i={});var t,s,r=this.R_,o=this.z_,a=this.Ls;for(t in this.Ts=[],a)a.hasOwnProperty(t)&&(s=a[t],s=this.Ps(s),this.Ts.push(s));if(!this.Ts.length)return this.clear(),void n();var h=this.Ts[0].data.position;this.Os(h),o.loadImages(Object.keys(this.Fs),{cb:function(){var t;r&&"SDFManagerBase"!==r.CLASS_NAME?(t=Object.keys(e.Es),r.getData(t,function(t){e.qL(i,n)})):e.qL(i,n)}})},Tn.prototype.qL=function(t,i){var n=this;void 0===t&&(t={});var e=this.R_,s=this.z_,e=this.CL=new yt.eG({R_:e,z_:s}),r=this.Us,s={from:"labelsLayer",zoom:this._map.getView().getOptions().zoom,center:r.center};yt.assign(s,t),e.Ns(this.Ts,function(t){n._map&&n._map.isDOMMode()?n.gS=t:n.gS=new yt.La(t.zo,t),n.gS.zo=r,i&&i(t)},s)},Tn.prototype.Ps=function(t){if(!t||"AMap.LabelMarker"===t.type){var i=this._map.getProjection();this.AL={};var n=t.getOptions();if(!(e=t.getPosition()))return null;var s=[yt.tc.Mp,yt.tc.Rp],o=void 0===(r=n.zooms)?s:r,a=n.opacity,h=n.rank,f=n.icon,u=n.text,c=n.zIndex,v=void 0===(l=n.visible)||l,d=yt.Bs(e)?e.toJSON():e,r=u&&u.content||"",n=u&&u.style;f&&f.image&&(this.Fs[f.image]=1),u&&u.content&&this.Ws(u.content);var p,m,l=f&&f.image?[{type:"image",image:f.image||"",size:f.size,clipOrigin:f.clipOrigin,clipSize:f.clipSize,anchor:f.anchor,retina:f.retina}]:{},e=0,f=0;return n&&(e=!n.strokeWidth&&n.strokeColor?1:n.strokeWidth||0,p=!n.strokeColor&&n.strokeWidth?"#fcfcfc":n.strokeColor,f=!n.borderWidth&&n.borderColor?1:n.borderWidth||0,m=!n.borderColor&&n.strokeWidth?"#ccc":n.borderColor),n=n?{fontFamily:n.fontFamily,fontSize:n.fontSize,fontWeight:n.fontWeight,fillColor:n.fillColor,strokeColor:p,strokeWidth:e,borderColor:m,borderWidth:f,padding:this.Gs(n.padding||[3]),backgroundColor:n.backgroundColor,fold:n.fold}:{},s=yt.bf.Jj(o,u&&u.zooms||s),n=u&&r?{txt:u.content||"",direction:u.direction,offset:u.offset,zooms:s,style:n}:{},d=i.project(d[0],d[1]),{data:{id:t.hS,name:r,txt:r,position:d,positionType:"lnglat",extData:{id:t.hS},rank:h,zooms:o},opts:{visible:v,opacity:a,zooms:o,zIndex:c,icon:l,text:n}}}},Tn.prototype.Ws=function(t){void 0===t&&(t="");for(var i=0;i<t.length;i++)this.Es[t.substr(i,1)]=1},Tn.prototype.Os=function(t){yt.Bs(t)?this.Us=yt.lcs.getLocalByCoord([t.KL,t.kT]):this.Us=yt.lcs.getLocalByCoord(t)},Tn.prototype.Gs=function(t){if("string"==typeof t&&(t=(t=t.trim()).split(" ")),"[object Array]"!==Object.prototype.toString.apply(t))return[3,3,3,3];for(var i=t.length,n=0;n<i;n++){var e="string"==typeof(e=t[n])?parseInt(e,10):e;isNaN(e)?t[n]=3:t[n]=e}switch(i){case 0:t=[3,3,3,3];break;case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return t},Tn);function Tn(t,i,n,e){return(t=zn.call(this,t,i,n,e)||this).Fs={},t.Es={},t.Ts=[],t.HB=!1,t.Ls={},t.AL={},i=n.R_,e=n.z_,t.R_=i,t.z_=e,t._map=n,t}var Ln,Ii=(Ln=yt.BE,yt.Ei(Dn,Ln),Dn.prototype.setTileUrl=function(t){void 0===t&&(t=""),this.Be=t},Dn.prototype.oa=function(t,i,n,e){var o=this;this.aa=t,this.ze=i,this.Zs=[],this.sa=[];var s=t.projectionId,r=[],a=t.boundsCoord,h=t.optimalZoom,f=t.optimalResolution,u=this.ha(a,h,f);this.ua.forEach(function(t){var i=t.zo,n=!1;if(t.status!==yt.Mo.LOADED){for(var e=u.ja;e<=u.Oa;e+=1)for(var s=u.Fa;s<=u.Ea;s+=1){var r=o.fa(e,u.z);i.z===u.z&&i.y===s&&r===i.x&&(n=!0)}n||(t.data.src="",o.ua.ea(t))}}),f=this.qs(t,this.Zs,r),this.Ys(f,i,s,n),this.da(t,this.sa,r,e),this.sa=this.sa.concat(this.Zs)},Dn.prototype.getData=function(){var t=this.aa,i=[],n=this.map.qF();if(this.ua.QF(n),0<this.sa.length)for(var e=0;e<this.sa.length;e++){for(var s=this.sa[e],r=[],o=0;o<s.length;o++){var a,h,f,u,c,l,v,d,p=[0,0],m=t.centerCoord,y=this.ua.getTile(s[o]),_=yt.lcs.getLocalByCoord([m[0],m[1]]);y||(a=this.ua.getTile(new yt.ca(s[o].z,this.fa(s[o].x,s[o].z),s[o].y)),y=new yt.Vs(s[o]),a&&(f=this.aa.projectionId,h=yt.at.getProjection(f).getResolution(y.zo.z),c=(u=y.zo.x*this.Xa*h)+this.Xa*h,l=(m=y.zo.y*this.Xa*h)+this.Xa*h,h=yt.V[f].Xs(u,m),f=yt.V[f].Xs(c,l),u=h[0],c=f[0],m=f[1],l=h[1],y.Ro=[u,m,c,l],l=yt.lcs.getLocalByCoord([y.Ro[0],y.Ro[1]]),this.aa.optimalZoom>=yt.Ra&&(y.Ro[0]-=l.center[0],y.Ro[1]-=l.center[1],y.Ro[2]-=l.center[0],y.Ro[3]-=l.center[1]),this.ze?y.data={Hs:l,texture:a.data.texture,Js:a.data.Js,zs:this.ze.fe(new Float32Array([y.Ro[0],y.Ro[1],0,1,y.Ro[2],y.Ro[1],1,1,y.Ro[0],y.Ro[3],0,0,y.Ro[2],y.Ro[1],1,1,y.Ro[2],y.Ro[3],1,0,y.Ro[0],y.Ro[3],0,0]),16)}:(y.data=a.data,y.data.Hs=l),y.data&&(y.status=yt.Mo.LOADED))),y.data&&(t.optimalZoom>=yt.Ra&&y.data.Hs?(l=yt.lcs.getSize(),v=y.data.Hs.x-_.x,d=y.data.Hs.y-_.y,0!=v&&(v*=l[0],p[0]=v),0!=d&&(d*=l[1],p[1]=d),t.optimalZoom>=yt.Ra&&yt.za>=y.zo.z&&(p[0]=-_.center[0],p[1]=-_.center[1])):t.optimalZoom<yt.Ra&&yt.za<y.zo.z&&(p[0]=_.center[0],p[1]=_.center[1]),y.data.Sa=p,y.stamp=n,r.push(y))}i.push(r)}return{tiles:i}},Dn.prototype.Ks=function(t){t=t||(yt._.$e?50:200),this.ua.Xo(t)},Dn.prototype.reload=function(){this.ua.forEach(function(t){t.status!==yt.Mo.LOADED&&t.request&&t.request.cancel&&(t.request.cancel(),delete t.request)}),this.ua.destroy(),this.sa=[],this.pS=!1,this.Fo(!1)},Dn.prototype.getTileCache=function(){return this.ua},Dn.prototype.Da=function(t,i){var s,r,o;t.length&&(s=this.Pa.z,r=(this.Pa.ja+this.Pa.Oa)/2,o=(this.Pa.Fa+this.Pa.Ea)/2,t.sort(function(t,i){var n=(t.x<<s-t.z)-r,e=(t.y<<s-t.z)-o;return n*n+e*e<=(t=(i.x<<s-i.z)-r)*t+(i=(i.y<<s-i.z)-o)*i?-1:1}))},Dn.prototype.ha=function(t,i,n){var e=this.aa.projectionId,s=yt.at.getProjection(e);this.TB()&&(i++,n=s.getResolution(i)),i<this.Qs[0]?(i=this.Qs[0],n=s.getResolution(i)):i>this.Qs[1]&&(i=this.Qs[1],n=s.getResolution(i));var r=this.Xa,o=20037508.342789244,a=t[0]+o,e=-(t[3]-o),s=a/n,a=(t[2]+o)/n,e=e/n,n=-(t[1]-o)/n;return{Oa:Math.floor(a/r),Ea:Math.min((1<<i)-1,Math.floor(n/r)),ja:Math.floor(s/r),Fa:Math.max(Math.floor(e/r),0),z:i}},Dn.prototype.qs=function(t,i,n){this.Oo=!1;var e=t.optimalZoom,s=t.optimalResolution,r=t.boundsCoord,o=yt.at.getProjection(t.projectionId),r=this.ha(r,e,s);this.TB()&&e++,e<this.Qs[0]?e=this.Qs[0]:e>this.Qs[1]&&(e=this.Qs[1]),o.getResolution(e);for(var a=[],h=[],f=!0,u=r,c=u.ja;c<=u.Oa;c+=1)for(var l=u.Fa;l<=u.Ea;l+=1){var v=new yt.ca(e,this.fa(c,e),l),d=this.ua.getTile(v);this.PF(v,t.projectionId);var p=new yt.ca(e,c,l);d?d.status===yt.Mo.LOADED?h.push(p):(f=!1,n.push(p)):(f=!1,a.push(v),n.push(p))}return h.length&&i.push(h),this.Pa=r,this.Fo(f),a},Dn.prototype.da=function(t,i,n,e){if(t=t.optimalZoom,this.Za="overlay"!==this.To.type,this.qa="overlay"!==this.To.type,this.Za)for(var s=Math.min(this.xt[1],t+2),r=t+1;n.length&&r<=s;r+=1){for(var o=[],a=[],h=r,f=n.length-1;0<=f;--f)for(var u=n[f],c=u.x<<1,l=u.y<<1,v=1;0<=v;--v)for(var d=1;0<=d;--d){var p=new yt.ca(h,this.fa(c+v,h),l+d),m=this.ua.getTile(p),y=new yt.ca(h,c+v,l+d);(m&&m.status===yt.Mo.LOADED?a:o).push(y)}a.length&&i.push(a),n=o}if(this.qa)for(var _=this.xt[0],r=t-1;n.length&&_<=r;--r){a=[];for(var o=[],g={},f=n.length-1;0<=f;--f){var b=n[f],h=r,x=b.z-h,v=b.x>>x,d=b.y>>x;g[x=(p=new yt.ca(h,this.fa(v,h),d)).key]||(m=this.ua.getTile(p),g[x]=!0,(m&&m.status===yt.Mo.LOADED?a:o).push(new yt.ca(h,v,d)))}a.length&&i.push(a),n=o}return i},Dn.prototype.ma=function(){var t=new RegExp(/\{(\w|\,)+\}/g);if(t.test(this.Be)){var i=this.Be.match(t)[0].replace(/[\{|\}]/g,"").split(",");return this.tr++,i&&this.tr>=i.length&&(this.tr=0),this.Be.replace(t,i[this.tr])}return this.Be},Dn.prototype.Ys=function(c,l,v,d){var m;if(!(this.aa.optimalZoom<this.xt[0]||this.aa.optimalZoom>this.xt[1])){this.Da(c);for(var y=this,t=0,i=c.length;t<i;t+=1)!function(t){var i=y.To.eo(),n=c[t],e=y.ma().replace("[z]",n.z+"").replace("[x]",n.x+"").replace("[y]",n.y+""),r=new yt.Vs(n);y.ua.Qo(r),i.getTileUrl&&(e=i.getTileUrl(n.x,n.y,n.z));var s=yt.at.getProjection(v).getResolution(n.z),o=n.x*y.Xa*s,a=o+y.Xa*s,h=n.y*y.Xa*s,f=h+y.Xa*s,t=yt.V[v].Xs(o,h),s=yt.V[v].Xs(a,f);function u(t){var i,n,e,s;l&&((i=l.createTexture(t.target||t,{Zi:!0})).bind(l.gl.CLAMP_TO_EDGE,l.gl.LINEAR,l.gl.LINEAR),n=yt.lcs.getLocalByCoord([r.Ro[0],r.Ro[1]]),r.zo.z>yt.za&&(r.Ro[0]-=n.center[0],r.Ro[1]-=n.center[1],r.Ro[2]-=n.center[0],r.Ro[3]-=n.center[1]),e=l.fe(new Float32Array([r.Ro[0],r.Ro[1],0,1,r.Ro[2],r.Ro[1],1,1,r.Ro[0],r.Ro[3],0,0,r.Ro[2],r.Ro[1],1,1,r.Ro[2],r.Ro[3],1,0,r.Ro[0],r.Ro[3],0,0]),16),(t=(s=document.createElement("canvas")).getContext("2d"))&&(s.height=s.width=256,s.style.height="512px",s.style.width="512px",t.beginPath(),t.moveTo(0,0),t.lineTo(256,0),t.lineTo(256,256),t.lineTo(0,256),t.lineTo(0,0),t.lineWidth=1,t.font="25px Verdana",t.fillStyle="#ff0000",t.strokeStyle="#FF0000",t.strokeRect(0,0,256,256),t.fillText(r.zo.z+"/"+r.zo.x+"/"+r.zo.y,50,50),t.stroke()),(s=l.createTexture(s,{Zi:!0})).bind(l.gl.MIRRORED_REPEAT,l.gl.LINEAR,l.gl.LINEAR_MIPMAP_NEAREST),r.data={texture:i,zs:e,Js:s,Hs:n}),r.status=yt.Mo.LOADED,d()}o=t[0],a=s[0],h=s[1],f=t[1],r.Ro=[o,h,a,f],r.status=yt.Mo.LOADING,"AMap.TileLayer.Flexible"===y.To.CLASS_NAME||"AMap.TileLayer.WMTS"===y.To.CLASS_NAME||"AMap.TileLayer.WMS"===y.To.CLASS_NAME?i.createTile(n.x,n.y,n.z,function(t){l?u(t):(r.data=t,r.status=yt.Mo.LOADED)}.bind(y),function(){}):(n=new Image,"w"===(null===(m=y.map)||void 0===m?void 0:m.baseRender)&&(n.crossOrigin="anonymous"),n.onload=u.bind(y),"d"===(null===(m=y.map)||void 0===m?void 0:m.baseRender)&&0<e.indexOf("traffictile")&&(e+="&hash="+Math.random()),n.src=e,(r.data=n).addEventListener("dragstart",function(t){return t.preventDefault(),!1}))}(t)}},Dn.prototype.fa=function(t,i){for(var n=1<<(i=i||this.aa.optimalZoom);t<0||n<=t;)t=n<=t?t-n:t<0?n+t:t;return t},Dn.prototype.PF=function(t,i){var n=yt.at.getProjection(i).getResolution(t.z),e=(s=t.x*this.Xa*n)+this.Xa*n,t=(r=t.y*this.Xa*n)+this.Xa*n,n=yt.V[i].Xs(s,r),i=yt.V[i].Xs(e,t),s=n[0],e=i[0],r=i[1],t=n[1];return!(e<(n=this.map.getView().getStatus().boundsCoord)[0]&&t<n[1]||s>n[2]&&e>n[3])},Dn.prototype.TB=function(){var t=!1;return this.To.getState().detectRetina&&yt._.Ue,"d"===yt._.baseRender&&yt._.Ue&&this.To.getState().detectRetina&&yt._.$e&&(t=!0),t},Dn);function Dn(t,i,n,e){return(e=Ln.call(this,t,i,n,e)||this).ua=new yt.OD(yt._.$e?200:400),e.Xa=256,e.sa=[],e.Zs=[],e.tr=-1,e.qa=!0,e.Za=!0,e.xt=t.zooms,e.Qs=t.dataZooms,e.Xa=t.tileSize,e.Be=t.tileUrl,e}var Fn,Li=(Fn=yt.BE,yt.Ei(Hn,Fn),Hn.prototype.oa=function(t,i,n){this.ze=i,this.Oo||(this.Fo(!0),n())},Hn.prototype.getData=function(t){if(this.ir=t.bounds,this.Oo){var i=yt.lcs.getLocalByCoord([t.centerCoord[0],t.centerCoord[1]]),e=(n=yt.at.getProjection(t.projectionId)).project(this.ir[0],this.ir[1]),n=n.project(this.ir[2],this.ir[3]),s=[0,0,0,0];if(t.optimalZoom>=yt.Ra){for(var e=yt.lcs.getLocalByCoord([e[0],e[1]]),n=yt.lcs.getLocalByCoord([n[0],n[1]]),r=yt.lcs.getSize(),s=[e.x-i.x,e.y-i.y,n.x-i.x,n.y-i.y],o=0;o<s.length;o++)0!==s[o]&&(s[o]*=r[0]);s=[s[0]-e.center[0],s[1]-e.center[1],s[2]-n.center[0],s[3]-n.center[1]]}return{texture:this._s,zs:this.ks,Sa:[0,0]}}},Hn);function Hn(t,i,n,e){return(i=Fn.call(this,t,i,n,e)||this).ir=n.getView().getStatus().bounds,i.io=e.canvas,i}var $n,ji=($n=yt.BE,yt.Ei(En,$n),En.prototype.hasOverlay=function(t){return-1<this._overlays.indexOf(t)},En.prototype.getAllOverlays=function(){return this._overlays},En.prototype.add=function(t){this.hasOverlay(t)||yt.er(t)&&(this._overlays.push(t),t.Zx(this.map),t.init(),t._bindEvents&&t._bindEvents(),(yt.GB(t)||yt.VB(t))&&this.YB.push(t),t._afterSetMap&&t._afterSetMap(this.map),this.map.setNeedUpdate(!0))},En.prototype.remove=function(t){this.hasOverlay(t)&&yt.er(t)&&(t._beforeRemoveMap&&t._beforeRemoveMap(),this.ar(t),this.map.setNeedUpdate(!0),t.Zx(null))},En.prototype.getData=function(t,i){this.nr();for(var n=0,e=0,s=this._overlays.length,r=[],o=new Cn(t.bounds);n<8&&e<s;){var a,h=this._overlays[e];e++,h&&(a=Date.now(),h._needUpdate&&(h.ZB(i),this.map.setNeedUpdate(!0)),n+=Date.now()-a)}for(var f=0,u=this._overlays;f<u.length;f++){var c=(h=u[f]).getBounds();h.visible&&c&&o.intersects(c)&&r.push(h)}return{sr:r}},En.prototype.oa=function(){},En.prototype.destroy=function(){this.map&&this.map.off("zoomend",this.W_);for(var t=0,i=this._overlays.slice(0);t<i.length;t++){var n=i[t];this.remove(n)}this._overlays=[]},En.prototype.rr=function(t){for(var i=t.lnglat,n=t.pixel,e=this._overlays.length-1;0<=e;e--){var s=this._overlays[e];if(!s._opts.noSelect&&s.visible)if(yt.sB(s)&&n){if(s.containsWithPixel(n))return s}else if(s.contains(i))return s}},En.prototype.W_=function(){for(var t=0,i=this.YB;t<i.length;t++){var n=i[t];n.W_&&n.W_()}},En.prototype.nr=function(){this._overlays.sort(function(t,i){return t._opts.zIndex-i._opts.zIndex})},En.prototype.ar=function(t){var i=this._overlays.indexOf(t);-1<i&&this._overlays.splice(i,1),!yt.GB(t)&&!yt.VB(t)||-1<(t=this.YB.indexOf(t))&&this.YB.splice(t,1)},En);function En(t,i,n,e){return(e=$n.call(this,t,i,n,e)||this)._overlays=[],e.YB=[],e.Fo(!0),e.W_=e.W_.bind(e),n.on("zoomend",e.W_),e}var Bn,On=yt._.scale,Ui=(Bn=yt.BE,yt.Ei(Pn,Bn),Pn.prototype.oa=function(n,t,e,i){var o=this;this.aa=n,this.sa=[];var s=n.optimalResolution,r=n.boundsCoord,a=n.zoom,h=n.optimalZoom;if(h<9.8)return!1;for(var f=this.ha(r,h,s,n),u=[],c=yt.map(f,function(t){return t.key}),l=[],v=0,d=this.la;v<d.length;v++){var p=d[v];c.indexOf(p.key)<0&&(b=this.ua.getTile(p))&&b.status!==yt.Mo.LOADED&&b.request&&(b.request.cancel(),delete b.request,this.ua.ea(b))}for(var m=[],y=(s=i.getMapState()).panning,_=s.zooming,g=0;g<f.length;g++){var b,x=f[g],k=new yt.ca(x.z,this.fa(x.x,x.y,x.z),x.y),w=new yt.ca(x.z,x.x,x.y);!(b=this.ua.getTile(k))&&y&&!_||(b?b&&b.status===yt.Mo.LOADED?this.sa.push(w):l.push(x):((w=new yt.Sw(k)).nG(this.type),w.status=yt.Mo.LOADING,this.ua.Jo(w),m.push(k),l.push(x)),(!b||b&&b.status!==yt.Mo.LOADED)&&u.push(x))}if(this.da(n,this.sa,u,i),this.la=l,0===m.length)return!1;var M=this.map.getMapboxStyle(),C=[],A=256;yt.map(m,function(t){var i=t.x,n=t.y,e=t.z,s=o.NE.getTile(t),r=null;s&&s.boundsStatus?r=s.boundsStatus.isInNebulaOversea:(s=o.aa.projectionId,e=[yt.V[s].Xs(i*A,n*A,e),yt.V[s].Xs((i+1)*A,n*A,e),yt.V[s].Xs((i+1)*A,(n+1)*A,e),yt.V[s].Xs(i*A,(n+1)*A,e)],r=o.rG(e,t.key),(e=new yt.pa(t)).boundsStatus={isInNebulaOversea:r},o.NE.Jo(e)),r||C.push(t),r=o.NE.getTile(t),(t=o.ua.getTile(t))&&r&&r.boundsStatus&&(t.sG=r.boundsStatus)}),m=C,yt.map(m,function(t){var i=o.ua.getTile(t);i&&(t={url:o.AD(t.x,t.y,t.z),zo:t,zoom:a,$n:n,styles:M},o.bw(i,t,e))})},Pn.prototype.oG=function(t,i,n,e){void 0===e&&(e="lnglat");var s=[-180,-90],r=[180,90],o=yt.at.getProjection("EPSG:3857");return"lnglat"===e?[256*t+s[0],r[1]-256*i,256*(t+1)+s[0],r[1]-256*(i+1)]:"EPSG:3857"!==e?[0,0,0,0]:(e=o.project(256*t+s[0],r[1]-256*i),i=o.project(256*(t+1)+s[0],r[1]-256*(i+1)),[e[0],e[1],i[0],i[1]])},Pn.prototype.bw=function(t,i,e){var s=this,n=i.url,r=i.zo,o=i.zoom,a=i.$n,i=i.styles;this.map.gn.aG(t,{url:n,ya:r.key,zoom:o,optimalZoom:a.optimalZoom,projectionId:a.projectionId,Zh:r,tileSize:this.Xa,styles:i},function(t){var i,n=t&&s.ua.getTile(t.zo);n&&(delete n.request,n.status=yt.Mo.LOADED,n.Ma=t.zS,n.Ro=t.Ro,n.stencil=t.stencil,i=yt.lcs.getLocalByCoord([n.Ro[0],n.Ro[1]]),n.data=yt.Ln(yt.Ln({},t),{Hs:i}),e())})},Pn.prototype.getData=function(t){var i=this,n=t.optimalResolution,e=t.boundsCoord,s=t.optimalZoom;if(s<10)return this.Fo(!0),!1;var e=this.ha(e,s,n,t),n=t.projectionId,r=yt.at.getProjection(n),o=[],a=this.map.qF();if(this.ua.QF(a),this.sa.sort(function(t){return s===t.z+1?1:-1}),0<this.sa.length)for(var h=0;h<this.sa.length;h++){var f,p,m,u=this.sa[h],c=this.ua.getTile(u),l=[0,0],v=t.centerCoord,d=yt.lcs.getLocalByCoord([v[0],v[1]]);c||(f=this.ua.getTile(new yt.ca(u.z,this.fa(u.x,u.y,u.z),u.y)))&&((c=new yt.Sw(u)).nG(this.type),v=r.getResolution(u.z),u=u.x-f.zo.x,l[0]+=v*this.Xa*u,c.Ro=f.Ro,c.Ma=f.Ma,c.data=f.data,c.Sa=l,c.status=f.status),c&&(s>=yt.Ra&&c.data.Hs?(f=yt.lcs.getSize(),p=c.data.Hs.x-d.x,m=c.data.Hs.y-d.y,0!=p&&(p*=f[0],l[0]=p),0!=m&&(m*=f[1],l[1]=m),l[0]=-d.center[0],l[1]=-d.center[1]):(l[0]=d.center[0],l[1]=d.center[1])),c&&(c.Sa=l,c.stamp=a,o.push(c))}return e=!(e=yt.filter(e,function(t){return!(!(t=i.NE.getTile(t))||!t.boundsStatus||!1!==t.boundsStatus.isInNebulaOversea)})).length||yt.every(e,function(i){return yt.some(o,function(t){return t.zo.key===i.key})}),this.Fo(e),e&&(this.a_=!0),{s_:this.a_,fo:!!e,tiles:o}},Pn.prototype.destroy=function(){this.ua.forEach(function(t){t.status!==yt.Mo.LOADED&&t.request&&(t.request.cancel(),delete t.request),t.destroy()}),this.ua.destroy(),this.sa=[],this.la=[]},Pn.prototype.reload=function(){this.ua.forEach(function(t){t.status!==yt.Mo.LOADED&&t.request&&(t.request.cancel(),delete t.request)}),this.ua.destroy(),this.sa=[],this.la=[]},Pn.prototype.setTileUrl=function(t){this.Be=t||this.Be},Pn.prototype.getTileCache=function(){return this.ua},Pn.prototype.Ks=function(t){t=t||(yt._.$e?50:200),this.ua.Xo(t)},Pn.prototype.AD=function(t,i,n){return this.Be.replace("[x]",t.toString()).replace("[y]",i.toString()).replace("[z]",n.toString()).replace("{1234}",(Math.abs(t+i)%4+1).toString())},Pn.prototype.Da=function(t,i){var s,r,o;t.length&&(s=this.Pa.z,r=(this.Pa.ja+this.Pa.Oa)/2,o=(this.Pa.Fa+this.Pa.Ea)/2,t.sort(function(t,i){var n=(t.x<<s-t.z)-r,e=(t.y<<s-t.z)-o;return n*n+e*e<=(t=(i.x<<s-i.z)-r)*t+(i=(i.y<<s-i.z)-o)*i?-1:1}))},Pn.prototype.ha=function(t,i,n,e){var s=this.To.Lo().dataZooms;i=Math.max(Math.min(i,s[1]),s[0])-1,n=yt.at.getProjection(e.projectionId).getResolution(i);var r=this.Xa,o=20037508.342789244,a=t[0]+o,s=-(t[3]-o),e=a/n,a=(t[2]+o)/n,s=s/n,n=-(t[1]-o)/n,h=Math.floor(a/r),f=Math.min((1<<i)-1,Math.floor(n/r)),e=Math.floor(e/r),u=Math.max(Math.floor(s/r),0);this.Pa={Oa:h,Ea:f,ja:e,Fa:u,z:i};for(var c=[],l=e;l<=h;l+=1)for(var v=u;v<=f;v+=1)c.push(new yt.ca(i,l,v));return this.Da(c),c},Pn.prototype.da=function(t,i,n,e){if(t=t.optimalZoom-1,this.Za="overlay"!==this.To.type,this.qa="overlay"!==this.To.type,this.Za)for(var s=Math.min(this.xt[1]-1,2+t),r=1+t;n.length&&r<=s;r+=1){for(var o=[],a=[],h=r,f=n.length-1;0<=f;--f)for(var u=n[f],c=u.x<<1,l=u.y<<1,v=1;0<=v;--v)for(var d=1;0<=d;--d){var p=new yt.ca(h,this.fa(c+v,d,h),l+d),m=this.ua.getTile(p),y=new yt.ca(h,c+v,l+d);(m&&m.status===yt.Mo.LOADED?a:o).push(y)}a.length&&i.push.apply(i,a),n=o}if(this.qa)for(var _=this.xt[0]-1,r=t-1;n.length&&_<=r;--r){a=[];for(var o=[],g={},f=n.length-1;0<=f;--f){var b=n[f],h=r,x=b.z-h,v=b.x>>x,d=b.y>>x;g[x=(p=new yt.ca(h,this.fa(v,d,h),d)).key]||(m=this.ua.getTile(p),g[x]=!0,(m&&m.status===yt.Mo.LOADED?a:o).push(new yt.ca(h,v,d)))}a.length&&i.push.apply(i,a),n=o}return i},Pn.prototype.fa=function(t,i,n){for(var e=1<<(n=n||this.aa.optimalZoom);t<0||e<=t;)t=e<=t?t-e:t<0?e+t:t;return t},Pn);function Pn(t,i,n,e){return(e=Bn.call(this,t,i,n,e)||this).type="vector",e.Ya=!1,e.Va=!1,e.Xa=256,e.xt=[2,22],e.sa=[],e.la=[],e.qa=!0,e.Za=!0,e.a_=!1,e.$D=0,e.Xa=t.tileSize,e.Be=t.tileUrl,t=yt._.$e?50:200,e.ua=new yt.OD(t),e.NE=new mn(t),n.gn.Ha({scale:On,showLabel:n.showLabel}),e.R_=n.R_,e.z_=n.z_,n.gn.Ja(AMap.getConfig().protocol),n.mapStyle.pn(function(){n.gn.Ka(n.mapStyle.vn)}),e}var Rn,Nn=yt._.scale,Zi=(Rn=yt.BE,yt.Ei(Wn,Rn),Wn.prototype.oa=function(e,t,s,i){var r=this;this.aa=e,this.sa=[];for(var n=e.optimalResolution,o=e.optimalZoom,a=e.boundsCoord,h=e.zoom,f=this.ha(a,o,n,e),u=[],c=yt.map(f,function(t){return t.key}),l=[],v=0,d=this.la;v<d.length;v++){var p=d[v];c.indexOf(p.key)<0&&(b=this.ua.getTile(p))&&b.status!==yt.Mo.LOADED&&b.request&&(b.request.cancel(),delete b.request,this.ua.ea(b))}for(var m=[],y=(n=i.getMapState()).panning,_=n.zooming,g=0;g<f.length;g++){var b,x=f[g],k=new yt.ca(x.z,this.fa(x.x,x.y,x.z),x.y),w=new yt.ca(x.z,x.x,x.y);!(b=this.ua.getTile(k))&&y&&!_||(b?b&&b.status===yt.Mo.LOADED?this.sa.push(w):l.push(x):((w=new yt.Sw(k)).status=yt.Mo.LOADING,this.ua.Jo(w),m.push(k),l.push(x)),(!b||b&&b.status!==yt.Mo.LOADED)&&u.push(x))}if(this.da(e,this.sa,u,i),this.la=l,0===m.length)return!1;var M=this.To.SS().adcode;yt.map(m,function(t){var i,n=r.ua.getTile(t);n&&(i=r.Be.replace("[z]",t.z+"").replace("[x]",t.x+"").replace("[y]",t.y+""),r.map.gn.RS(n,{url:i,ya:t.key,zoom:h,optimalZoom:e.optimalZoom,projectionId:e.projectionId,Zh:t,tileSize:r.Xa,styles:{},adcode:M},function(t){var i,n=t&&r.ua.getTile(t.zo);n&&(delete n.request,n.status=yt.Mo.LOADED,n.Ma=t.zS,n.Ro=t.Ro,i=yt.lcs.getLocalByCoord([n.Ro[0],n.Ro[1]]),n.data=yt.Ln(yt.Ln({},t),{Hs:i}),s())}))})},Wn.prototype.getData=function(t){var i=t.optimalResolution,n=t.optimalZoom,e=t.boundsCoord,e=this.ha(e,n,i,t),i=this.aa.projectionId,s=yt.at.getProjection(i),r=[],o=this.map.qF();if(this.ua.QF(o),this.sa.sort(function(t){return n===t.z?1:-1}),0<this.sa.length)for(var a=0;a<this.sa.length;a++){var h,d,p,f=this.sa[a],u=this.ua.getTile(f),c=[0,0],l=t.centerCoord,v=yt.lcs.getLocalByCoord([l[0],l[1]]);u||(l=this.fa(f.x,f.y,f.z),(h=this.ua.getTile(new yt.ca(f.z,l,f.y)))&&(u=new yt.Sw(f),l=s.getResolution(f.z),f=f.x-h.zo.x,c[0]+=l*this.Xa*f,u.Ro=h.Ro,u.Ma=h.Ma,u.data=h.data,u.Sa=c,u.status=h.status)),u&&(n>=yt.Ra&&u.data.Hs?(h=yt.lcs.getSize(),d=u.data.Hs.x-v.x,p=u.data.Hs.y-v.y,0!=d&&(d*=h[0],c[0]=d),0!=p&&(p*=h[1],c[1]=p),n>=yt.Ra&&yt.za>=u.zo.z&&(c[0]=-v.center[0],c[1]=-v.center[1])):n<yt.Ra&&yt.za<u.zo.z&&(c[0]=v.center[0],c[1]=v.center[1])),u&&(u.Sa=c,u.stamp=o,r.push(u))}return e=yt.every(e,function(i){return yt.some(r,function(t){return t.zo.key===i.key})}),this.Fo(e),e&&(this.a_=!0),{s_:this.a_,fo:!!e,tiles:r}},Wn.prototype.destroy=function(){this.ua.forEach(function(t){t.status!==yt.Mo.LOADED&&t.request&&(t.request.cancel(),delete t.request),t.destroy()}),this.ua.destroy(),this.sa=[],this.la=[]},Wn.prototype.reload=function(){this.ua.forEach(function(t){t.status!==yt.Mo.LOADED&&t.request&&(t.request.cancel(),delete t.request)}),this.ua.destroy(),this.sa=[],this.la=[]},Wn.prototype.setTileUrl=function(t){this.Be=t||this.Be},Wn.prototype.getTileCache=function(){return this.ua},Wn.prototype.Ks=function(t){t=t||(yt._.$e?50:200),this.ua.Xo(t)},Wn.prototype.Da=function(t,i){var s,r,o;t.length&&(s=this.Pa.z,r=(this.Pa.ja+this.Pa.Oa)/2,o=(this.Pa.Fa+this.Pa.Ea)/2,t.sort(function(t,i){var n=(t.x<<s-t.z)-r,e=(t.y<<s-t.z)-o;return n*n+e*e<=(t=(i.x<<s-i.z)-r)*t+(i=(i.y<<s-i.z)-o)*i?-1:1}))},Wn.prototype.ha=function(t,i,n,e){var s=this.To.Lo().dataZooms;i=Math.max(Math.min(i,s[1]),s[0])-1,n=yt.at.getProjection(e.projectionId).getResolution(i);var r=this.Xa,o=20037508.342789244,a=t[0]+o,s=-(t[3]-o),e=a/n,a=(t[2]+o)/n,s=s/n,n=-(t[1]-o)/n,h=Math.floor(a/r),f=Math.min((1<<i)-1,Math.floor(n/r)),e=Math.floor(e/r),u=Math.max(Math.floor(s/r),0);this.Pa={Oa:h,Ea:f,ja:e,Fa:u,z:i};for(var c=[],l=e;l<=h;l+=1)for(var v=u;v<=f;v+=1)c.push(new yt.ca(i,l,v));return this.Da(c),c},Wn.prototype.da=function(t,i,n,e){if(t=t.optimalZoom-1,this.Za="overlay"!==this.To.type,this.qa="overlay"!==this.To.type,this.Za)for(var s=Math.min(this.xt[1]-1,2+t),r=1+t;n.length&&r<=s;r+=1){for(var o=[],a=[],h=r,f=n.length-1;0<=f;--f)for(var u=n[f],c=u.x<<1,l=u.y<<1,v=1;0<=v;--v)for(var d=1;0<=d;--d){var p=new yt.ca(h,this.fa(c+v,d,h),l+d),m=this.ua.getTile(p),y=new yt.ca(h,c+v,l+d);(m&&m.status===yt.Mo.LOADED?a:o).push(y)}a.length&&i.push.apply(i,a),n=o}if(this.qa)for(var _=this.xt[0]-1,r=t-1;n.length&&_<=r;--r){a=[];for(var o=[],g={},f=n.length-1;0<=f;--f){var b=n[f],h=r,x=b.z-h,v=b.x>>x,d=b.y>>x;g[x=(p=new yt.ca(h,this.fa(v,d,h),d)).key]||(m=this.ua.getTile(p),g[x]=!0,(m&&m.status===yt.Mo.LOADED?a:o).push(new yt.ca(h,v,d)))}a.length&&i.push.apply(i,a),n=o}return i},Wn.prototype.fa=function(t,i,n){for(var e=1<<(n=n||this.aa.optimalZoom);t<0||e<=t;)t=e<=t?t-e:t<0?e+t:t;return t},Wn);function Wn(t,i,n,e){return(e=Rn.call(this,t,i,n,e)||this).Ya=!1,e.Va=!1,e.Xa=256,e.xt=[2,22],e.sa=[],e.la=[],e.qa=!0,e.Za=!0,e.a_=!1,e.Xa=t.tileSize,e.Be=t.tileUrl,e.FB=yt._.$e?50:200,e.ua=new yt.OD(e.FB),n.gn.Ha({scale:Nn,showLabel:n.showLabel}),e.R_=n.R_,e.z_=n.z_,n.gn.Ja(AMap.getConfig().protocol),e}var jn,Ji=(jn=yt.BE,yt.Ei(Gn,jn),Gn.prototype.oa=function(t,i,n){this.ze=i,this.Oo||(this.Fo(!0),n())},Gn.prototype.getData=function(t){return this.ir=t.bounds,{Sa:[0,0]}},Gn);function Gn(t,i,n,e){return(i=jn.call(this,t,i,n,e)||this).ir=n.getView().getStatus().bounds,i.io=e.canvas,i}var Un,Ki=(Un=yt.BE,yt.Ei(Zn,Un),Zn.prototype.oa=function(t,i,n){return!0},Zn.prototype.getData=function(t){return!0},Zn);function Zn(t,i,n,e){return(n=Un.call(this,t,i,n,e)||this).gs=e,n}var Vn,Qi=(Vn=yt.BE,yt.Ei(Yn,Vn),Yn.prototype.CS=function(){this.AS=!1},Yn.prototype.oa=function(t,i,n){return!0},Yn.prototype.getData=function(t){var r=this,i=this.gs.getState().path;if(this.AS)return this.AS;if(i){var n,s,o,a,h,e=yt.GeometryUtil.typePolygon(i),f={type:"Polygon",$S:new Array,polygons:new Array,BM:new Array,LS:{x:0,y:0}};return e&&"Polygon"===e?(i[0][0]instanceof yt.LngLat?f.LS=yt.lcs.getLocalByLnglat(i[0][0].toString()):f.LS=yt.lcs.getLocalByLnglat(i[0][0]),n=f.LS,s=n.x,o=n.y,yt.forEach(i,function(t,i){var e;0===i?yt.forEach(t,function(t){t instanceof yt.LngLat&&(t=t.toArray());var i=yt.lcs.getLocalByLnglat(t),t=(n=r.DS(s,o,i.x,i.y))[0],n=n[1];f.$S.push(i.Sa[0]+t,i.Sa[1]+n)}):(e=[],yt.forEach(t,function(t){t instanceof yt.LngLat&&(t=t.toArray());var i=yt.lcs.getLocalByLnglat(t),t=(n=r.DS(s,o,i.x,i.y))[0],n=n[1];e.push(i.Sa[0]+t,i.Sa[1]+n)}),f.BM.push(e))})):e&&"MultiPolygon"===e&&(f.type="MultiPolygon",i[0][0][0]instanceof yt.LngLat?f.LS=yt.lcs.getLocalByLnglat(i[0][0][0].toArray()):f.LS=yt.lcs.getLocalByLnglat(i[0][0][0]),e=f.LS,a=e.x,h=e.y,yt.forEach(i,function(t){var s=[],n=[];yt.forEach(t,function(t,i){var e;0===i?yt.forEach(t,function(t){t instanceof yt.LngLat&&(t=t.toArray());var i=yt.lcs.getLocalByLnglat(t),t=(n=r.DS(a,h,i.x,i.y))[0],n=n[1];s.push(i.Sa[0]+t,i.Sa[1]+n)}):(e=[],yt.forEach(t,function(t){t instanceof yt.LngLat&&(t=t.toArray());var i=yt.lcs.getLocalByLnglat(t),t=(n=r.DS(a,h,i.x,i.y))[0],n=n[1];e.push(i.Sa[0]+t,i.Sa[1]+n)}),n.push(e))}),f.BM.push(n),f.polygons.push(s)})),this.AS=this.zw(f),this.AS}return!0},Yn.prototype.zw=function(t){if(t.Oc=new yt._w,!t.Dc){t.Dc=new yt.K_;var i=[],n=[];"Polygon"===t.type?(i=[t.$S],n=[t.BM]):"MultiPolygon"===t.type&&(i=t.polygons,n=t.BM);for(var e=0;e<i.length;e++){for(var s=i[e],r=[],o=0;o<n[e].length;o++){var a=n[e][o];r.push(s.length/2),s.push.apply(s,a)}var h=t.Dc.Nx(s,r);0<h&&t.Oc.add(99,99,h,2,22)}return t}},Yn.prototype.DS=function(t,i,n,e){return e-=i,[(t=n-t)*(i=yt.lcs.getSize())[0],e*i[1]]},Yn);function Yn(t,i,n,e){return(n=Vn.call(this,t,i,n,e)||this).gs=e,n}var Jn,qi=(Jn=yt.BE,yt.Ei(Xn,Jn),Xn.prototype.oa=function(t,i,n,e,s){var r=s.getSource("nebula");if(!r)return!this.gs||(s=this.gs.VR.showId)&&this.GR([s]),!1;for(var o=r.getData(t).tiles,a=o.length,h=[],f=0;f<a;f++)for(var u=0,c=o[f].data||[];u<c.length;u++){var l=c[u];if(l.indoorInfo)for(var v=l.indoorInfo,d=v.length,p=0;p<d;p++){for(var m=v[p],y=!1,_=0;_<h.length;_++)m===h[_]&&(y=!0);y||h.push(m)}}return this.GR(h),!0},Xn.prototype.getData=function(){return this._indoorData},Xn.prototype.lo=function(){return!0},Xn.prototype.GR=function(t,i){if(!t||t.length<1)return null;for(var e=(n=this.gs).VR,s=(n._map,[]),n=this._config.server+"/v3/indoor/indoormaps?",r=t,o=r.length,a=[],h=[],t=[],f=!1,u=0;u<o;u++){var c=r[u],l=1;this._indoorData.data[c]||(this._indoorData.data[c]={}),e.floorInfo&&e.floorInfo[c]&&(v=e.floorInfo[c])&&(l=v);var v=this._indoorData.data[c];v&&v.data&&v.data[l]||(f=!0,a.push(l),h.push(0),s.push(c))}this.LL=s,t.push("poiid="+s.join(";")),t.push("floor="+a.join(";")),t.push("version="+h.join(";")),t.push("s=rsv3"),t.push("from=indoorH5Map"),t.push("servicetype=unify"),t.push("key="+this._config.key),t=n+t.join("&"),f&&this.ZR.url!==t?(this.ZR.url=t,this.YR(t,this.jF)):(this.jF(),i&&i())},Xn.prototype.JR=function(t,i,n){var e=this;if(!t||!i)return!1;t=[t],this.GR(t,function(){e.gs&&e.gs._map&&e.gs._map.setNeedUpdate(!0),n&&n()})},Xn.prototype.YR=function(t,f){var u=this,i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&200===i.status&&u.map.gn.JB(i.response,function(t,i){if(t)console.log(t),f();else{for(var n=0,e=Object.keys(i);n<e.length;n++){var s=e[n];u._indoorData.data[s]&&u._indoorData.data[s].data||(u._indoorData.data[s].data={}),u._indoorData.data[s].building=i[s].building;for(var r=i[s].data,o=0,a=Object.keys(r);o<a.length;o++){var h=a[o];u._indoorData.data[s].data[h]=r[h]}}f()}})},i.open("GET",t,!0),i.responseType="arraybuffer",i.send()},Xn);function Xn(t,i,n,e){var s=Jn.call(this,t,i,n,e)||this;return s.jF=function(){var t;!s.gs||(t=s.gs.getRender())&&t.render(s._indoorData)},s.gs=e,s._config=AMap.getConfig(),s._indoorData={extData:{},data:{}},s.LL=[],s.ZR={url:null,status:!1},s}var Kn,Ut=(Kn=Ui,yt.Ei(Qn,Kn),Qn.prototype.YE=function(t){var i=this;t(null,{GW:"worker",cb:function(t){i.dynamicTextVerticeLoadedByTile(t)}})},Qn.prototype.dynamicTextVerticeLoadedByTile=function(t){for(var i=0,n=t.data;i<n.length;i++){var e=n[i];this.dynamicTextVerticeLoaded({data:e.data,tag:e.tag,XE:e.XE})}},Qn.prototype.dynamicTextVerticeLoaded=function(t){var i=t.data,n=t.XE;if(i instanceof yt.ca)this.ua.getTile(i);else if(t=i[Object.keys(i)[0]],(t=this.ua.getTile(t.zo,!0))&&t.data){var e,s,r={};for(e in i)i.hasOwnProperty(e)&&(s=i[e],r[e]=new yt.La(s.zo,s));t.data.labels=r,t.data.XE=n,this.Eo()}},Qn.prototype.Aa=function(t){!t.zo||(t=this.ua.getTile(t.zo))&&(t.data.Ta=!0)},Qn.prototype.Ia=function(){this.map.on("tileSdfInfoFinished",this.Aa.bind(this))},Qn);function Qn(t,i,n,e){return(e=Kn.call(this,t,i,n,e)||this).type="mapbox",e.Ia(),e}var qn={ielt9:"ActiveXObject"in window&&!document.addEventListener,opts:{callback:"callback",type:"json",charset:"utf-8"},setOptions:function(t){this.opts=yt.assign(this.opts,t)},bv:function(){},gv:function(){this.emit("error",{info:"TIME_OUT_A"})},JSONP:function(i,n,t){void 0===t&&(t={}),i=encodeURI(i);var e=yt.Util.getGuid("jsonp_",6)+"_",s=document.createElement("script");function r(){window[e]=null,s.onerror=null,s.parentNode&&s.parentNode.removeChild(s)}s.type="text/javascript",s.charset="utf-8",s.async=!0,t=yt.assign({},this.opts,t),s.onerror=function(t){r(),n&&n("error",{url:i,info:"Request Error"})},window[e]=function(t){r(),n&&n("complete",{info:"ok",url:i,data:t})};var o="?";-1!==i.indexOf("?")&&(o="&"),t=i+o+t.callback+"="+e,s.src=t,(document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]).appendChild(s)},Ajax:function(i,t,n){if(void 0===window.XMLHttpRequest&&window.wv){var e=this._v=new window.wv;return e.onerror=function(t){n("error",{info:"Request Error",url:i,data:""})},e.onload=function(){n("complete",{url:i,data:e.responseText})},e.open(t.type||"GET",i),setTimeout(function(){e.send(t.content||null)},0),e}if(window.XMLHttpRequest){var s=new XMLHttpRequest;return s.onreadystatechange=function(){var t;4===s.readyState&&(200===s.status?(t="arraybuffer"===s.responseType?s.response:s.responseText,n("complete",{info:"ok",url:i,data:t})):(s.abort(),n("error",{info:s.status,url:i,data:""})))},s.onerror=function(t){s.abort(),n("error",{info:"Request Error",url:i,data:""})},s.open(t.type||"GET",i),"POST"===t.type&&s.setRequestHeader("Content-Type",t.requestContentType||"application/x-www-form-urlencoded"),s.responseType=t.responseType||"text",s.send(t.content||null),s}n("error",{info:"Not Support Ajax",url:i,data:""})}},te=(ie.prototype.add=function(t,i,n,e,s){ne.getKey(t,i,s,e)!==(this.WM?this.WM.getKey():"-1")&&(this.XR=t,this.qR=i,this.VM+=this.WM?this.WM.length:0,this.WM=new ne(t,i,this.VM,e,s),this.jc.push(this.WM)),this.WM.add(n)},ie);function ie(){this.jc=[],this.XR=[],this.qR=0,this.VM=0}var ne=(ee.getKey=function(t,i,n,e){return t+":"+i+":"+n+":"+e},ee.prototype.add=function(t){this.length+=t},ee.prototype.getKey=function(){return this.color+":"+this.width+":"+this.maxzoom+":"+this.minzoom},ee);function ee(t,i,n,e,s){this.color=t,this.width=i,this.offset=n,this.minzoom=e,this.maxzoom=s,this.length=0}var se,Ci=(se=Ii,yt.Ei(re,se),re.prototype.oa=function(t,i,n,e){var r=this;this.aa=t,this.ze=i,this.Zs=[],this.sa=[];var s=t.projectionId,o=[],a=t.boundsCoord,h=t.optimalZoom,f=t.optimalResolution,u=this.ha(a,h,f);this.ua.forEach(function(t){var i=t.zo,n=!1;if(t.status!==yt.Mo.LOADED){for(var e=u.ja;e<=u.Oa;e+=1)for(var s=u.Fa;s<=u.Ea;s+=1)i.z===u.z&&i.y===s&&e===i.x&&(n=!0);n||(t.request&&t.request.abort&&t.request.abort(),r.ua.ea(t))}}),f=this.qs(t,this.Zs,o),this.Ys(f,i,s,n),this.da(t,this.sa,o,e),this.sa=this.sa.concat(this.Zs)},re.prototype.Ys=function(a,A,S,I){if(!(this.aa.optimalZoom<this.xt[0]||this.aa.optimalZoom>this.xt[1])){this.Da(a);var t,z={0:"fff93a43",1:"fffcac19",2:"ff20a962",3:"ff83171c",4:"ffadadad"};this.map.QR&&this.map.QR.traffic&&(t=this.map.QR.traffic.multiFillColors)&&(t.congested&&(z[0]=t.congested),t.slow&&(z[1]=t.slow),t.smooth&&(z[2]=t.smooth),t.seriousCongested&&(z[3]=t.seriousCongested),t.unknown&&(z[4]=t.unknown));for(var T=this.To.getOptions().rZ,h=this,i=0,n=a.length;i<n;i+=1)!function(t){var i=a[t],x=yt.Util.Rg(i.x,i.y,i.z),n=h.ll(x),k=new yt.Sw(i);h.ua.Qo(k);var w=yt.at.getProjection(S).getResolution(i.z),e=(r=i.x*h.Xa*w)+h.Xa*w,s=(o=i.y*h.Xa*w)+h.Xa*w,t=yt.V[S].Xs(r,o),i=yt.V[S].Xs(e,s),r=t[0],e=i[0],o=i[1],s=t[1];k.Ro=[r,o,e,s],k.status=yt.Mo.LOADING;var M=yt.lcs.getLocalByCoord([k.Ro[0],k.Ro[1]]),C=k.zo.z>yt.za;C&&(k.Ro[0]-=M.center[0],k.Ro[1]-=M.center[1],k.Ro[2]-=M.center[0],k.Ro[3]-=M.center[1]),k.request=qn.Ajax(n,{},function(t,i){if(k.data={},A){try{i=JSON.parse(i.data)}catch(t){return k.status=yt.Mo.LOADED,void I()}if(i=i.data[x.join("_")],"complete"===t&&i){for(var n=new te,e=new yt.J_,s=0,r=i.length;s<r;s++)for(var o=i[s],a=yt.Util.qg(z[s]),h=0,f=o.length;h<f;h++)for(var u=o[h],c=.6*u[0]*T,l=0,v=u[1].length;l<v;l++){for(var d=[],p=yt.Util.Eg(u[1][l]),m=0,y=p.length;m<y;m+=2){var _=w*(256*k.zo.x+p[m]),g=w*(256*k.zo.y+p[m+1]),g=yt.V[S].Xs(_,g);C&&(g[0]-=M.center[0],g[1]-=M.center[1]),d.push(yt.Bu(g[0],g[1]))}var b=e.hb(d).Iw;n.add(a,c,b,8,20)}k.data={$c:e,Uc:n,Hs:M}}}k.status=yt.Mo.LOADED,I()})}(i)}},re);function re(t,i,n,e){return(e=se.call(this,t,i,n,e)||this).Qs=[3,17],e.Xa=256,e.Za=e.qa=!1,e.ll=function(t){return AMap.getConfig().protocol+"://vdata.amap.com/traffic?key="+AMap.getConfig().key+"&v="+AMap.getConfig().version+"&t="+t+"&w="+(new Date).getTime()},e}var oe,ae=yt._.scale;function he(t,i,n,e){var s=oe.call(this,t,i,n,e)||this;return s.Ya=!1,s.Va=!1,s.Xa=t.tileSize,s.Be=t.tileUrl,t=yt._.$e?50:200,s.ua=new yt.TD(t),n.gn.Ha({scale:ae,showLabel:n.showLabel,DD:-1!==location.search.indexOf("forceAll")}),s.R_=n.R_,s.z_=n.z_,n.gn.Ja(AMap.getConfig().protocol),s.mapStyle=n.mapStyle,s.mapStyle.pn(function(){n.gn.Ka(s.mapStyle.vn)}),s.Ia(),s.sD(),s}var fe={nebula:Hi,building:(oe=Hi,yt.Ei(he,oe),he.prototype.oa=function(t,i,n,e){var s=this;if(e.gn.dE){this.aa=t,this.sa=[];for(var r=t.bounds,o=this.ra(t.optimalZoom),a=this.ha(r,o),h=yt.map(a,function(t){var i=s.fa(t.x,t.z);return t.z+","+i+","+t.y}),f=this.QH.qH(h).yB,u=[],c=0;c<a.length;c++){var l,v,d=a[c],p=new yt.ca(d.z,this.fa(d.x,d.z),d.y),m=new yt.ca(d.z,d.x,d.y),y=yt.zB.ALL,_=this.ua.getTile(p,!0);_?(l=this.ua.MD(_.tag,y))&&(_.tag=y,v=d.key+","+yt.Util.SD(l),f.indexOf(v)<0&&u.push(v)):(v=p.key+","+yt.Util.SD(y),f.indexOf(v)<0&&((p=new yt.pa(p)).status=yt.Mo.LOADING,this.ua.Jo(p),p.tag=y,u.push(v))),!_||_.status!==yt.Mo.LOADED&&_.status!==yt.Mo.RELOADING||this.sa.push(m)}var r=(g=this.OE(u)).overseaTile,h=g.chinaTile,g=g.mapboxTile;this.PE(r,"oversea"),this.PE(h,"china"),this.PE(g,"mapbox"),this.da(t,this.sa,[],e),this.zD(u,t,o,e,n,"building")}},he),sky:Ki,mask:Qi,inner:yt.hG,image:Ri,custom:Li,gl_custom:Ji,raster:Ii,overlay:ji,labelsLayer:Bi,vectorTile:Ui,districtVectorTile:Zi,indoor:qi,mapbox:Ut,vectortraffic:Ci},ue=(ce.prototype.qh=function(t,i,n){return("nebula"===t.id||"indoor"===t.id)&&this.Yh[t.id]||(this.Yh[t.id]||(this.Yh[t.id]=new fe[t.type](t,i,this.map,n),n.source=this.Yh[t.id])),this.Yh[t.id]},ce.prototype.getSource=function(t){return this.Yh[t]},ce.prototype.Xh=function(t){delete this.Yh[t]},ce.prototype.getData=function(t,i,n){return this.Yh[t].getData(i,n)},ce.prototype.oa=function(t,i,n){for(var e=0,s=i.getLayers()||[];e<s.length;e++){var r=s[e],o=r.getOptions();(r=r.getSource())&&o.visible&&0<o.opacity&&yt.Util.dS(i.getZoom(),o.zooms)&&r.oa(t,n,function(){i.setNeedUpdate(!0)},i,this)}},ce.prototype.destroy=function(){for(var t in this.Yh)this.Yh[t]&&this.Yh[t].destroy();this.Yh={}},ce.prototype.UH=function(t){for(var i in this.Yh)this.Yh[i]&&this.Yh[i].UH&&this.Yh[i].UH(t)},ce);function ce(t){this.map=t,this.Yh={}}var le,ve=(le=yt.lw,yt.Ei(de,le),de.prototype.getState=function(){return{ol:!0,al:!0,visible:this._visible,opacity:this.tl,To:this,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF,cacheSize:this.wl}},de.prototype.eo=function(){var t=le.prototype.eo.call(this);return t.mapNumber="GS(2019)6379",t},de.prototype.Lo=function(){return{id:"nebula",type:"nebula",tileUrl:AMap.getConfig().protocol+(yt._.wasm?"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v3":"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v2"),tileSize:0,zooms:[2,22]}},de.prototype.co=function(){return"nebula"},de.prototype.destroy=function(){this.Jh&&this.Jh.destroy&&(this.Jh.destroy(),delete this.Jh)},de.prototype.show=function(){le.prototype.show.call(this);var t=this.iP();t&&t.show(),(t=this.map&&this.map.getLayerByClass("AMap.Inner.LabelsLayer"))&&t.oP()&&t.show()},de.prototype.hide=function(){le.prototype.hide.call(this);var t=this.iP();t&&t.hide(),this.rP()},de.prototype.v$=function(){le.prototype.v$.call(this);var t=this.iP();t&&this.map.removeLayer(t),this.rP()},de.prototype.Hh=function(t){this.uo=t,this.uo.getSource(this.co()).Ks(this.wl)},de.prototype.rP=function(){var t=this.map&&this.map.getLayerByClass("AMap.Inner.LabelsLayer");t&&t.aP()&&t.hide()},de.prototype.iP=function(){var t;if(this.map)for(var i=null===(t=this.map)||void 0===t?void 0:t.getLayers(),n=0;n<i.length;n++){var e=i[n];if("AMap.Buildings"===e.CLASS_NAME&&e.getState().u$)return e}},de);function de(){var t=null!==le&&le.apply(this,arguments)||this;return t.CLASS_NAME="AMap.NebulaLayer",t}var pe,me="inner.labelsLayer",_e="inner",ge=(pe=yt.lw,yt.Ei(be,pe),be.prototype.getState=function(){return yt.assign({},{To:this,rejectMapMask:this.lz},pe.prototype.eo.call(this))},be.prototype.Lo=function(){return{id:_e,type:_e,tileUrl:AMap.getConfig().protocol+(yt._.wasm?"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v3":"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v2"),tileSize:0,zooms:[2,22]}},be.prototype.co=function(){return _e},be.prototype.sl=function(){this.source.destroy(),this.Jh&&this.Jh.reset()},be.prototype.vi=function(t){return this.fz?this.fz.vi(t,this.hS):null},be.prototype.Do=function(t){return t=pe.prototype.Do.call(this,t),this.map&&this.uz(this.map),t},be.prototype.aP=function(){if(t=this.map){var i=t&&t.getLayerByClass("AMap.TileLayer.RoadNet"),t=t&&t.getLayerByClass("AMap.NebulaLayer"),i=i&&i.getVisible(),t=t&&t.getVisible();return!i&&!t}return!1},be.prototype.oP=function(){var t=this.map;if(t){var i=t&&t.getLayerByClass("AMap.TileLayer.RoadNet"),n=t&&t.getLayerByClass("AMap.NebulaLayer"),i=i&&i.getVisible(),n=n&&n.getVisible();return t.showLabel&&(i||n)}return!1},be.prototype.uz=function(t){(this.fz=t.fS()).add(this)},be);function be(t){void 0===t&&(t={});var i=pe.call(this,t)||this;return i.CLASS_NAME="AMap.Inner.LabelsLayer",i._opts={id:me,type:me,opacity:1,visible:1,collision:!0,allowCollision:!1},i._opts=yt.assign({},i._opts,t),i.Qh=t.labelzIndex||100,i._visible=!1!==t.showLabel,i.tl=void 0===t.opacity?1:t.opacity,i}var xe,ji=(xe=yt.lw,yt.Ei(ke,xe),ke.prototype.getState=function(){return{ol:!0,al:!0,visible:this._visible,opacity:this.tl,To:this,zooms:this.xt,zIndex:this.Qh,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},ke.prototype.eo=function(){var t=xe.prototype.eo.call(this);return t.mapNumber="",t},ke.prototype.Lo=function(){return{id:"vectortraffic",type:"vectortraffic",tileUrl:"",tileSize:256,zooms:this.xt}},ke.prototype.co=function(){return"vectortraffic"},ke.prototype.destroy=function(){this.Jh&&this.Jh.destroy&&(this.Jh.destroy(),delete this.Jh)},ke.prototype.onAdd=function(){var t=this;this.map.on("styleChanged",this.reload,this),this.dl&&(this.iT=setInterval(function(){t.reload()},1e3*this.vl))},ke.prototype.v$=function(){this.map.off("styleChanged",this.reload,this),clearInterval(this.iT),delete this.iT},ke.prototype.reload=function(){var t=this.getSource();t&&this.map&&(t.reload(),this.map.setNeedUpdate(!0))},ke);function ke(){var t=null!==xe&&xe.apply(this,arguments)||this;return t.vl=60,t.dl=!0,t}var we,Me={opacity:1,visible:!0,zIndex:4,zooms:[7,22],dataZooms:[7,18],interval:60,ml:!0,depthTest:!1,rZ:1},Bi=(we=ji,yt.Ei(Ce,we),Ce);function Ce(t){void 0===t&&(t=Me);var i=this;return t.id=yt.Util.uuid(),t.opacity=(void 0===t.opacity?Me:t).opacity,t.visible=(void 0===t.visible?Me:t).visible,t.zIndex=(void 0===t.zIndex?Me:t).zIndex,t.zooms=(void 0===t.zooms?Me:t).zooms,t.interval=(void 0===t.interval?Me:t).interval,t.ml=(void 0===t.ml?Me:t).ml,t.depthTest=(void 0===t.depthTest?Me:t).depthTest,t.rZ=(void 0===t.rZ?Me:t).rZ,(i=we.call(this,t)||this).vl=Math.max(30,t.interval||i.vl),i.dl=void 0!==t.ml&&i.dl,i.CLASS_NAME="AMap.TileLayer.Traffic",i.onCreated(),i}var Ae,Ui=(Ae=yt.lw,yt.Ei(Se,Ae),Se.prototype.Lo=function(){return{id:this.No||"tile",tileUrl:this.Be||"",type:"raster",tileSize:this.Xa||256,zooms:this.xt,dataZooms:this.Qs||[2,20],projection:this.hl||"EPS3857"}},Se.prototype.co=function(){return this.No},Se.prototype.getState=function(){return{visible:this._visible,opacity:this.tl,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF,detectRetina:this.yl}},Se.prototype.Hh=function(t){this.uo=t,this.uo.getSource(this.co()).Ks(this.wl)},Se);function Se(t){var i=Ae.call(this,t)||this;return i.CLASS_NAME="AMap.RasterLayer",i.Be=t.tileUrl,i.xt=t.zooms||[2,22],i.Qs=t.dataZooms,i.tl=void 0===t.opacity?1:t.opacity,i.Qh=t.zIndex||1,i._visible=void 0===t.visible||t.visible,i.Xa=t.tileSize||256,i.hl=t.projection,i.AF=void 0!==t.depthTest&&Boolean(t.depthTest),i.yl=void 0===t.detectRetina||Boolean(t.detectRetina),i.wl=t.cacheSize,i}var Ie,ze={id:"tile_"+yt.Util.uuid(),tileUrl:void 0,zooms:[2,22],dataZooms:[3,18],opacity:1,tileSize:256,visible:!0,projection:"EPSG:3857",zIndex:2},Te={id:"satellite"+yt.Util.uuid(),tileUrl:"http://webst0{1,2,3,4}.is.autonavi.com/appmaptile?style=6&x=[x]&y=[y]&z=[z]",zooms:[2,22],dataZooms:[3,18],opacity:1,tileSize:256,visible:!0,projection:"EPSG:3857",zIndex:2},Le={id:"traffic"+yt.Util.uuid(),tileUrl:"http://tm.amap.com/trafficengine/mapabc/traffictile?v=1.0&t=1&zoom=[z]&x=[x]&y=[y]",zooms:[7,22],dataZooms:[7,20],opacity:1,tileSize:256,visible:!0,projection:"EPSG:3857",zIndex:4,getTileUrl:function(t,i,n){return AMap.getConfig().protocol+"://tm.amap.com/trafficengine/mapabc/traffictile?v=1.0\n&t=1&zoom="+(17-n)+"&x="+t+"&y="+i}},De={id:"roadnet"+yt.Util.uuid(),tileUrl:"http://wprd0{1,2,3,4}.is.autonavi.com/appmaptile?x=[x]&y=[y]&z=[z]&lang=zh_cn&size=1&scl=1&style=8&ltype=11",zooms:[2,22],dataZooms:[3,18],opacity:1,tileSize:256,visible:!0,projection:"EPSG:3857",zIndex:3},Fe={id:"flexible"+yt.Util.uuid(),zooms:[2,22],dataZooms:[2,22],opacity:1,tileSize:256,visible:!0,projection:"EPSG:3857",zIndex:3},He={id:"wms"+yt.Util.uuid(),url:"",zooms:[2,22],dataZooms:[2,22],opacity:1,tileSize:512,visible:!0,projection:"EPSG:3857",zIndex:3},$e=(Ie=Ui,yt.Ei(Ee,Ie),Ee.prototype.setTileUrl=function(t){t=0===(t=t.replace(/^\/\//,"").replace("http://","")).indexOf("http")?t:AMap.getConfig().protocol+"://"+t,this.Be=t,this.reload()},Ee.prototype.getTileUrl=function(){return this.Be},Ee.prototype.eo=function(){var t="";return this.Be!==AMap.getConfig().qT&&this.Be!==AMap.getConfig().YT||(t="GS(2019)6379"),{id:this.No,tileUrl:this.Be,zooms:this.xt,zIndex:this.Qh,opacity:this.tl,visible:this._visible,getTileUrl:this.ll,mapNumber:t}},Ee.prototype.reload=function(){var t=this.getSource();t&&(t.setTileUrl(this.Be),t.reload(),t.Fo(!1),this.map&&this.map.setNeedUpdate(!0))},Ee);function Ee(t){void 0===t&&(t=ze);var i=this,n={};return t.getTileUrl&&"string"==typeof t.getTileUrl&&(t.tileUrl=t.getTileUrl,delete t.getTileUrl),n.tileUrl=void 0===t.tileUrl?AMap.getConfig().y_:t.tileUrl,n.tileUrl&&(n.tileUrl=n.tileUrl.replace(/^\/\//,"").replace("http://","")),n.tileUrl=n.tileUrl&&0===n.tileUrl.indexOf("http")?n.tileUrl:AMap.getConfig().protocol+"://"+n.tileUrl,n.id=t.id||"tile_"+yt.Util.uuid(),n.tileSize=t.tileSize||ze.tileSize,"d"===yt._.baseRender&&yt._.$e&&(ze.dataZooms=[2,20]),n.dataZooms=t.dataZooms||ze.dataZooms,n.zooms=t.zooms||ze.zooms,n.projection=t.projection||ze.projection,n.opacity=(void 0===t.opacity?ze:t).opacity,n.visible=(void 0===t.visible?ze:t).visible,n.zIndex=(void 0===t.zIndex?ze:t).zIndex,n.rejectMapMask=t.rejectMapMask,n.depthTest=void 0!==t.depthTest&&Boolean(t.depthTest),n.map=t.map,n.detectRetina=void 0===t.detectRetina||t.detectRetina,n.cacheSize=t.cacheSize,(i=Ie.call(this,n)||this).type=t.type||"base",i.ll=t.getTileUrl,i.CLASS_NAME="AMap.TileLayer",i.onCreated(),i}var Be,Zi=(Be=$e,yt.Ei(Oe,Be),Oe.prototype.eo=function(){var t=Be.prototype.eo.call(this);return t.mapNumber="GS(2020)617",t},Oe);function Oe(t){void 0===t&&(t=Te);var i=this;return t.id="satellite_"+yt.Util.uuid(),t.tileUrl=Te.tileUrl,t.zooms=(void 0===t.zooms?Te:t).zooms,t.opacity=(void 0===t.opacity?Te:t).opacity,t.visible=(void 0===t.visible?Te:t).visible,t.zIndex=(void 0===t.zIndex?Te:t).zIndex,(i=Be.call(this,t)||this).CLASS_NAME="AMap.TileLayer.Satellite",i.type=t.type||"base",i.onCreated(),i}var Pe,qi=(Pe=$e,yt.Ei(Re,Pe),Re.prototype.ul=function(){clearInterval(this.cl)},Re.prototype.pl=function(){var t=this;this.dl&&0<this.vl&&(this.cl=setInterval(function(){t.reload()},1e3*this.vl))},Re);function Re(t){void 0===t&&(t=Le);var i=this;return t.id="traffic_"+yt.Util.uuid(),t.tileUrl=Le.tileUrl,t.zooms=(void 0===t.zooms?Le:t).zooms,t.opacity=(void 0===t.opacity?Le:t).opacity,t.visible=(void 0===t.visible?Le:t).visible,t.zIndex=(void 0===t.zIndex?Le:t).zIndex,t.getTileUrl=t.getTileUrl||Le.getTileUrl,(i=Pe.call(this,t)||this).vl=Math.max(30,t.interval||60),i.dl=void 0===t.ml||t.ml,i.CLASS_NAME="AMap.TileLayer.Traffic",i.type=t.type||"overlay",i.onCreated(),i.pl(),i}var Ne,Ut=(Ne=$e,yt.Ei(We,Ne),We.prototype.show=function(){Ne.prototype.show.call(this);var t=this.map&&this.map.getLayerByClass("AMap.Inner.LabelsLayer");t&&t.oP()&&t.show()},We.prototype.hide=function(){Ne.prototype.hide.call(this);var t=this.map&&this.map.getLayerByClass("AMap.Inner.LabelsLayer");t&&t.aP()&&t.hide()},We.prototype.v$=function(){Ne.prototype.v$.call(this);var t=this.map&&this.map.getLayerByClass("AMap.Inner.LabelsLayer");t&&t.aP()&&t.hide()},We);function We(t){var i;void 0===t&&(t=De);var n=this;return t.id="roadNet_"+yt.Util.uuid(),t.tileUrl=De.tileUrl,"d"===yt._.baseRender&&(t.tileUrl=null===(i=t.tileUrl)||void 0===i?void 0:i.replace("&ltype=11","")),t.zooms=(void 0===t.zooms?De:t).zooms,t.opacity=(void 0===t.opacity?De:t).opacity,t.visible=(void 0===t.visible?De:t).visible,t.zIndex=(void 0===t.zIndex?De:t).zIndex,(n=Ne.call(this,t)||this).CLASS_NAME="AMap.TileLayer.RoadNet",n.type=t.type||"overlay",n.onCreated(),n}var je,Ci=(je=$e,yt.Ei(Ge,je),Ge.prototype.eo=function(){return{id:this.No,zooms:this.xt,zIndex:this.Qh,opacity:this.tl,visible:this._visible,createTile:this.bl,cacheSize:this.wl,getTileUrl:this.ll,rejectMapMask:this.lz}},Ge.prototype.Hh=function(t){this.uo=t,this.uo.getSource(this.co()).Ks(this.wl)},Ge);function Ge(t){void 0===t&&(t=Fe);var i=this;return t.id=Fe.id,t.id="flexible_"+yt.Util.uuid(),t.zooms=(void 0===t.zooms?Fe:t).zooms,t.opacity=(void 0===t.opacity?Fe:t).opacity,t.visible=(void 0===t.visible?Fe:t).visible,t.zIndex=(void 0===t.zIndex?Fe:t).zIndex,(i=je.call(this,t)||this).bl=t.createTile,i.CLASS_NAME="AMap.TileLayer.Flexible",i.type=t.type||"base",i.onCreated(),i}var Ue,ji=(Ue=$e,yt.Ei(Ze,Ue),Ze.prototype._l=function(){this.kl.TileMatrixSet=this.kl.TileMatrixSet||"EPSG:3857",this.kl.Request="GetTile",this.kl.Service="WMTS",this.kl.Format=this.kl.Format||"image/png",this.Be=this.Ml+"?"+yt.Util.join(this.kl,"&"),this.map&&this.map.setNeedUpdate(!0)},Ze.prototype.Rl=function(t){this.kl=yt.assign({},t),this._l()},Ze.prototype.zl=function(){return this.kl},Ze.prototype.Sl=function(){return this.Ml},Ze.prototype.Cl=function(t){this.Ml=t,this._l()},Ze.prototype.eo=function(){return{id:this.No,zooms:this.xt,zIndex:this.Qh,opacity:this.tl,visible:this._visible,Ll:this.kl,createTile:this.bl,getTileUrl:this.ll}},Ze);function Ze(t){void 0===t&&(t=Fe);var a=this;return t.id="wmts_"+yt.Util.uuid(),t.cacheSize=Fe.cacheSize,t.zooms=(void 0===t.zooms?Fe:t).zooms,t.opacity=(void 0===t.opacity?Fe:t).opacity,t.visible=(void 0===t.visible?Fe:t).visible,t.zIndex=(void 0===t.zIndex?Fe:t).zIndex,(a=Ue.call(this,t)||this).kl=t.params||{},a.CLASS_NAME="AMap.TileLayer.WMTS",a.type=t.type||"base",a.Be=t.url,a.Ml=t.url,a.bl=function(t,i,n,e,s){var r,o=document.createElement("img");"w"===(null===(r=a.map)||void 0===r?void 0:r.baseRender)&&(o.crossOrigin="anonymous"),o.onload=function(){e(o)},o.onerror=function(){s(o)},o.src=a.Be+"&TileMatrix="+n+"&TileRow="+i+"&TileCol="+t},a._l(),a.onCreated(),a}var Ve,Ui=(Ve=$e,yt.Ei(Ye,Ve),Ye.prototype._l=function(){this.kl.WIDTH=this.Xa,this.kl.HEIGHT=this.Xa,this.kl.CRS=this.kl.CRS||"EPSG:3857",this.kl.REQUEST="GetMap",this.kl.SERVICE="WMS",this.kl.FORMAT=this.kl.FORMAT||"image/png",this.kl.TRANSPARENT=void 0===this.kl.TRANSPARENT?"true":this.kl.TRANSPARENT,delete this.kl.BBOX,this.Be=this.Ml+"?"+yt.Util.join(this.kl,"&")},Ye.prototype.Rl=function(t){this.kl=yt.assign({},t),this._l()},Ye.prototype.zl=function(){return this.kl},Ye.prototype.Sl=function(){return this.Ml},Ye.prototype.Cl=function(t){this.Ml=t,this._l()},Ye.prototype.eo=function(){return{id:this.No,zooms:this.xt,zIndex:this.Qh,opacity:this.tl,visible:this._visible,Ll:this.kl,createTile:this.bl,getTileUrl:this.ll}},Ye);function Ye(t){void 0===t&&(t=He);var a=this;return t.id="wms_"+yt.Util.uuid(),t.cacheSize=Fe.cacheSize,t.zooms=(void 0===t.zooms?Fe:t).zooms,t.opacity=(void 0===t.opacity?Fe:t).opacity,t.visible=(void 0===t.visible?Fe:t).visible,t.zIndex=(void 0===t.zIndex?Fe:t).zIndex,(a=Ve.call(this,t)||this).Be=t.url,a.Ml=t.url,a.kl=t.params||{},a.CLASS_NAME="AMap.TileLayer.WMS",a.type=t.type||"base",a.bl=function(t,i,n,e,s){var n=[(r=2*yt.x_/256/Math.pow(2,n)*a.Xa)*t-yt.x_,yt.x_-r*(i+1)],r=[r*(t+1)-yt.x_,yt.x_-r*i],o=document.createElement("img");"w"===(null===(i=a.map)||void 0===i?void 0:i.baseRender)&&(o.crossOrigin="anonymous"),o.onload=function(){e(o)},o.onerror=function(){s(o)},a._l(),o.src=a.Be+"&BBOX="+n+","+r},a.bl=a.bl.bind(a),a.onCreated(),a}function Je(){this.Wl=!0,this._position=yt.Dl(),yt.Pl(this._position,0,0,10),this.Gl=yt.Dl(),yt.Pl(this.Gl,0,0,-1),this.jl=yt.Dl(),yt.Pl(this.jl,0,0,-1),this.El=yt.Dl(),yt.Pl(this.El,0,1,0),this.Nl=yt.Zl(),this.Fl=yt.Il(),this.Bl=yt.Il(),this.ql=yt.Il(),this.Yl=yt.Il()}$e.RoadNet=Ut,$e.Satellite=Zi,$e.Traffic="d"===yt._.baseRender?qi:Bi,$e.Flexible=Ci,$e.WMTS=ji,$e.WMS=Ui,yt.Module.TileLayer=$e,Je.prototype.lookAt=function(t){var i,n,e,s,r,o,a,h,f,u=yt.Il(),c=yt.Dl();yt.Pl(this.jl,t[0],t[0],t[2]),c=yt.Ol(c,this.Fl),u=yt.lookAt(u,c,t,this.El),i=this.Nl,s=(n=u)[0],r=n[4],o=n[8],a=n[1],h=n[5],f=n[9],c=n[2],t=n[6],0<(n=s+h+(u=n[10]))?(e=.5/Math.sqrt(n+1),i[3]=.25/e,i[0]=(t-f)*e,i[1]=(o-c)*e,i[2]=(a-r)*e):h<s&&u<s?(e=2*Math.sqrt(1+s-h-u),i[3]=(t-f)/e,i[0]=.25*e,i[1]=(r+a)/e,i[2]=(o+c)/e):u<h?(e=2*Math.sqrt(1+h-s-u),i[3]=(o-c)/e,i[0]=(r+a)/e,i[1]=.25*e,i[2]=(f+t)/e):(e=2*Math.sqrt(1+u-s-h),i[3]=(a-r)/e,i[0]=(o+c)/e,i[1]=(f+t)/e,i[2]=.25*e),this.$l()},Je.prototype.setPosition=function(t){yt.Pl(this._position,t[0],t[1],t[2]),this.$l()},Je.prototype.getPosition=function(){return this._position},Je.prototype.$l=function(){var f,u,c=this.Fl,t=this._position,i=this.Nl,n=c,e=i[0],s=i[1],r=i[2],o=i[3],a=e*(f=e+e),h=e*(u=s+s);i=e*(c=r+r),e=s*u,s*=c,r*=c,f*=o,u*=o,c*=o,n[0]=1-(e+r),n[1]=h+c,n[2]=i-u,n[3]=0,n[4]=h-c,n[5]=1-(a+r),n[6]=s+f,n[7]=0,n[8]=i+u,n[9]=s-f,n[10]=1-(a+e),n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,yt.Ul(this.Bl,this.Fl)};var Xe,Ke=(Xe=Zi=Je,yt.Ei(Qe,Xe),Qe.prototype.Vl=function(){var t=yt.Il();return yt.multiply(t,this.ql,this.Xl),yt.multiply(t,t,this.Bl),t},Qe.prototype.setOptions=function(t,i,n,e,s,r){this.Hl=void 0!==t?t:-1,this.Jl=void 0!==i?i:1,this.Kl=void 0!==n?n:1,this.Ql=void 0!==e?e:-1,this.tu=void 0!==s?s:.1,this.iu=void 0!==r?r:1,this.eu()},Qe.prototype.scale=function(t){void 0===t&&(t=1);var i=yt.Il();i.set([t,0,0,0,0,t,0,0,0,0,1,0,0,0,0,1]),yt.multiply(this.Xl,this.Xl,i)},Qe.prototype.setRotation=function(t){var i=yt.Il(),n=(t-this.nu)/180*Math.PI;0!==(this.nu=t)&&(i.set([Math.cos(n),-Math.sin(n),0,0,Math.sin(n),Math.cos(n),0,0,0,0,1,0,0,0,0,1]),yt.multiply(this.Xl,this.Xl,i))},Qe.prototype.kt=function(t,i,n){var e,s,r,o,a,h;void 0!==t&&(h=t.Rt,e=t.zt,a=t.center,s=t.scale,r=yt.Il(),o=yt.Il(),t=yt.Il(),r.set([1,0,0,0,0,1,0,0,0,0,1,0,e[0],e[1],0,1]),o.set([s,0,0,0,0,s,0,0,0,0,1,0,0,0,0,1]),t.set([1,0,0,0,0,1,0,0,0,0,1,0,-h[0],-h[1],0,1]),yt.multiply(r,r,o),yt.multiply(r,r,t),yt.multiply(this.Xl,this.Xl,r),h=[(a=yt.at.getProjection(i).project(a[0],a[1]))[0]-e[0]+h[0],a[1]-e[1]+h[1]],n(yt.at.getProjection(i).unproject(h[0],h[1])))},Qe.prototype.Cu=function(){return this.Yl},Qe.prototype.lB=function(){return{left:this.Hl,right:this.Jl,top:this.Kl,bottom:this.Ql,rotation:this.nu,far:this.iu,near:this.tu,position:this._position}},Qe.prototype.eu=function(){var t=(this.Jl-this.Hl)/(2*this.bt),i=(this.Kl-this.Ql)/(2*this.bt),n=(this.Jl+this.Hl)/2,e=(this.Kl+this.Ql)/2,s=n-t,n=n+t,t=e+i,i=e-i;yt.ou(this.ql,s,n,i,t,this.tu,this.iu),yt.Ul(this.Yl,this.ql)},Qe);function Qe(t,i,n,e,s,r){var o=Xe.call(this)||this;return o.type="OthoCamera",o.bt=1,o.nu=0,o.Xl=yt.Il(),o.Hl=void 0!==t?t:-1,o.Jl=void 0!==i?i:1,o.Kl=void 0!==n?n:1,o.Ql=void 0!==e?e:-1,o.tu=void 0!==s?s:.1,o.iu=void 0!==r?r:1,o.eu(),o}var qe,ts=(qe=yt.Event,yt.Ei(is,qe),is.prototype.au=function(){return this.su},is.prototype.ru=function(){return yt.at.getProjection(this.su)},is.prototype.setOptions=function(t){t.projectionId&&(this.su=t.projectionId);var i=yt.at.getProjection(this.su);if(t.center&&(this.hu=t.center,n=this.lu(i),e=i.unproject(n[0],n[1]),this.hu=e,yt.Pl(this.uu,n[0],n[1],0),this.cu.setPosition(this.fu())),void 0!==t.zoom&&(t.zoom=Math.min(Math.max(t.zoom,this.map.getZooms()[0]),this.map.getZooms()[1]),this.pu=Math.pow(2,t.zoom-this.bt),this.bt=t.zoom,this.du=i.getResolution(this.bt),this.vu(),this.cu.setPosition(this.fu())),t.size&&(this.map.emit("resize"),this._size=t.size,this.vu()),void 0!==t.rotation&&"w"===yt._.baseRender&&(360<t.rotation?t.rotation-=360:t.rotation<-360&&(t.rotation+=360),this.cu.setRotation(t.rotation),this.nu=t.rotation),t.kt){if(!this.map.getStatus().zoomEnable)return;var n,e,s=t.kt.Mt;this.mu=t.kt,s<=this.map.getZooms()[1]&&s>=this.map.getZooms()[0]&&(this.bt=s,this.du=i.getResolution(this.bt),s=(t=this.mu).Rt,t=t.zt,(n=this.lu(i))[0]=n[0]-t[0]+s[0],n[1]=n[1]-t[1]+s[1],e=i.unproject(n[0],n[1]),this.hu=e,yt.Pl(this.uu,n[0],n[1],0),this.vu(),this.cu.setPosition(this.fu()),this.mu=void 0)}this.h_()||this.map.setNeedUpdate(!0)},is.prototype.getOptions=function(){return{zoom:this.bt,center:this.hu,rotation:this.nu,projectionId:this.su,pitch:0}},is.prototype.getStatus=function(){var t=yt.Zl(),i=yt.Zl(),n=yt.Zl();this.xu(t,i,n);var e=yt.Util.getOptimalZoom(this.bt);return{pitch:this.Pu,size:this._size,rotation:this.nu,zoom:this.bt,optimalZoom:e,resolution:this.du,optimalResolution:yt.at.getProjection(this.su).getResolution(e),center:this.hu,bounds:t,boundsCoord:i,transformedBoundsCoord:n,centerCoord:this.uu,projectionId:this.su,mvpMatrix:this.cu.Vl(),viewMode:this.type,skyHeight:this.EF(),fov:60}},is.prototype.bu=function(t){this.hu=[t[0],t[1]],t=yt.at.getProjection(this.su).project(this.hu[0],this.hu[1]),yt.Pl(this.uu,t[0],t[1],0)},is.prototype.containerTolnglat=function(t,i,n){var e=this.getStatus(),s=e.centerCoord,r=e.rotation,o=yt.V[this.su].transform(s[0],s[1],n),o=0!==r?(e=r/180*Math.PI,s=t-this._size[0]/2,n=-(i-this._size[1]/2),r=Math.sqrt(s*s+n*n),e=Math.atan(s/n)-e,n<0&&(e+=Math.PI),n=r*Math.sin(e),e=r*Math.cos(e),[o[0]+n*this.du,o[1]-e*this.du]):[o[0]+(t-this._size[0]/2)*this.du,o[1]+(i-this._size[1]/2)*this.du];return o=yt.V[this.su].Xs(o[0],o[1]),(o=yt.at.getProjection(this.su).unproject(o[0],o[1]))[0]=180<o[0]?o[0]-360:o[0]<-180?o[0]+360:o[0],o},is.prototype.lnglatToContainer=function(t,i,n,e){e=e||this.bt;var r=(s=this.getStatus()).rotation,s=s.centerCoord,i=[(i=yt.at.getProjection(this.su).project(t,i))[0],i[1]],r={center:s,rotation:r,size:this._size};return yt.V[this.su].wu(i[0],i[1],e,r)},is.prototype._u=function(t,i){var n=this.getStatus(),e=(n.optimalZoom,n.zoom),s=n.rotation,s={center:n.centerCoord,rotation:s,size:this._size};return yt.V[this.su].wu(t,i,e,s)},is.prototype.ku=function(t,i){var n=this.getStatus(),t=(n.optimalZoom,n.centerCoord,n.zoom,n.rotation,this.containerTolnglat(t,i));return(i=yt.at.getProjection(this.su)).project.apply(i,t)},is.prototype.h_=function(){return yt.Ru(this.Xl,this.cu.Vl())},is.prototype.aD=function(){return this.Xl=this.cu.Vl(),this.Xl},is.prototype.EF=function(){return 1},is.prototype.pz=function(){return this.cu},is.prototype.xu=function(t,i,n){var e=this.nu/180*Math.PI,s=this._size,r=[(Math.abs(s[0]*Math.cos(e))+Math.abs(s[1]*Math.sin(e)))/2*this.du,(Math.abs(s[0]*Math.sin(e))+Math.abs(s[1]*Math.cos(e)))/2*this.du],o=yt.at.getProjection(this.su),a=this.uu[0]-r[0],h=this.uu[0]+r[0],s=this.uu[1]-r[1],e=this.uu[1]+r[1],r=o.unproject(a,s),o=o.unproject(h,e);return i[0]=a,i[1]=s,i[2]=h,i[3]=e,t[0]=r[0],t[1]=r[1],t[2]=o[0],t[3]=o[1],o=yt.V[this.su].transform(i[0],i[3]),i=yt.V[this.su].transform(i[2],i[1]),n[0]=o[0],n[1]=o[1],n[2]=i[0],n[3]=i[1],t},is.prototype.vu=function(){var i=(t=this._size)[0]*this.du,t=t[1]*this.du;this.cu.setOptions(-i/2,i/2,t/2,-t/2,0,1)},is.prototype.fu=function(){if(yt.Util.getOptimalZoom(this.bt)<yt.Ra)return this.uu;var t=yt.lcs.getDeltaCoord([this.uu[0],this.uu[1]]),i=yt.Dl();return yt.Pl(i,t[0],t[1],this.uu[2]),i},is.prototype.lu=function(t){return this.hu[0]=180<this.hu[0]?this.hu[0]-360:this.hu[0]<-180?this.hu[0]+360:this.hu[0],t.project(this.hu[0],this.hu[1])},is);function is(t,i){var n=qe.call(this)||this;return n.type="2D",n.Pu=0,n.hu=[0,0],n.bt=12,n._size=[0,0],n.pu=1,n.nu=0,n.cu=new Ke(-1,1,1,-1,0,1e3),n.su="EPSG:3857",n.uu=yt.Dl(),n.du=yt.at.getProjection(n.su).getResolution(12),n.Xl=yt.Il(),n.bt=void 0!==t.zoom?t.zoom:12,n.map=i,n.setOptions(t),n.vu(),n.Xl=n.cu.Vl(),n}var ns,es=(ns=Zi,yt.Ei(ss,ns),ss.prototype.Vl=function(){var t=yt.Il();return yt.multiply(t,this.ql,this.zu),t},ss.prototype.Su=function(){return this.ql},ss.prototype.Cu=function(){return this.Yl},ss.prototype.Lu=function(){return this.zu},ss.prototype.Au=function(){return this.cu},ss.prototype.setOptions=function(t,i,n,e,s){void 0===t&&(t=[1,1]),void 0===i&&(i=60),void 0===n&&(n=1),void 0===e&&(e=1),void 0===s&&(s=10),this.Tu=this.Iu(i),this.tu=e,this.iu=s,this.Du=n,this._size=t,this.eu()},ss.prototype.setSize=function(t){this._size=t},ss.prototype.setPitch=function(t){this.Pu=void 0!==t?t:this.Pu;var i=this._size[1]/2/Math.tan(this.Tu/2),n=this.Iu(this.Pu),e=this.Iu(this.nu),s=i*Math.sin(n),t=this.jl[0]-s*Math.sin(e),e=this.jl[1]-s*Math.cos(e),n=i*Math.cos(n);yt.Pl(this._position,t,e,n),this.ju()},ss.prototype.setRotation=function(t){this.nu=void 0!==t?-t:this.nu;var i=this.Iu(this.nu),t=Math.sin(i),i=Math.cos(i);yt.Pl(this.El,t,i,0),this.Ou()},ss.prototype.Fu=function(t,i,n){yt.Pl(this.jl,t,i,n),this.ju()},ss.prototype.Ou=function(t,i,n){void 0!==t&&void 0!==i?(yt.Pl(this._position,t,i,void 0===n?this._position[2]:n),this.ju()):(n=this._size[1]/2/Math.tan(this.Tu/2),yt.Pl(this._position,this.jl[0],this.jl[1],n),this.setPitch())},ss.prototype.Eu=function(t){var i=this._size;this.cz=t||i[1]/2/Math.tan(this.Tu/2)||0,yt.Pl(this._position,this._position[0],this._position[1],this.cz),this.setPitch()},ss.prototype.Nu=function(t,i,n){void 0===t&&(t=0),void 0===i&&(i=1),void 0===n&&(n=0),yt.Pl(this.El,t,i,n),this.ju()},ss.prototype.dz=function(){return this.cz},ss.prototype.lB=function(){return{fov:this.Tu,target:this.jl,up:this.El,position:this._position,far:this.iu,near:this.tu}},ss.prototype.eu=function(){yt.perspective(this.ql,this.Tu,this.Du,this.tu,this.iu),yt.Ul(this.Yl,this.ql)},ss.prototype.ju=function(){yt.lookAt(this.zu,this._position,this.jl,this.El),yt.Ul(this.cu,this.zu)},ss.prototype.Iu=function(t){return t*Math.PI/180},ss);function ss(t,i,n,e,s){void 0===t&&(t=[1,1]),void 0===i&&(i=60),void 0===n&&(n=1),void 0===e&&(e=10),void 0===s&&(s=2e4);var r=ns.call(this)||this;return r.Wt="PerspectiveCamera",r.Pu=0,r.nu=0,r.cu=yt.Il(),r.zu=yt.Il(),r.cz=0,r.Tu=r.Iu(i),r.tu=e,r.iu=s,r.Du=n,yt.Pl(r.El,0,1,0),r._size=t,r.eu(),r}var rs,os=(rs=yt.Event,yt.Ei(as,rs),as.prototype.setOptions=function(t){var i,n=yt.at.getProjection(this.su);if(t.projectionId&&(this.su=t.projectionId),t.size&&(this.map.emit("resize"),this._size=t.size,this.vu(),this.cu.Ou()),void 0!==t.rotation&&"w"===yt._.baseRender&&(360<t.rotation?t.rotation-=360:t.rotation<-360&&(t.rotation+=360),this.cu.setRotation(t.rotation),this.nu=t.rotation),void 0!==t.zoom&&(t.zoom=Math.min(Math.max(t.zoom,this.map.getZooms()[0]),this.map.getZooms()[1]),e=this.bt,this.bt=t.zoom,this.du=n.getResolution(this.bt),r=this.fu(),(yt.Util.getOptimalZoom(t.zoom)<yt.Ra&&yt.Util.getOptimalZoom(e)>=yt.Ra||yt.Util.getOptimalZoom(t.zoom)>=yt.Ra&&yt.Util.getOptimalZoom(e)<yt.Ra)&&(i=this.fu(),this.cu.Fu(i[0],i[1],0),this.cu.Ou(),this.vu()),this.cu.Fu(r[0],r[1],0),this.cu.Ou(),this.vu()),void 0!==t.pitch&&"w"===yt._.baseRender&&(t.pitch>this.$u()||this.Pu>this.$u()?t.pitch=this.$u():(t.pitch<0||this.Pu<0)&&(t.pitch=0),this.Pu=Math.min(t.pitch,this.$u()),this.cu.setPitch(t.pitch)),t.center&&(this.hu=t.center,o=this.lu(n),yt.Pl(this.uu,o[0],o[1],0),r=this.fu(),i=n.unproject(o[0],o[1]),this.hu=i,this.cu.Fu(r[0],r[1],0),this.cu.Ou()),t.kt){if(!this.map.getStatus().zoomEnable)return;var e=this.bt;this.bt=Math.min(Math.max(t.kt.Mt,this.map.getZooms()[0]),this.map.getZooms()[1]),this.du=n.getResolution(this.bt),(yt.Util.getOptimalZoom(t.kt.Mt)<yt.Ra&&yt.Util.getOptimalZoom(e)>=yt.Ra||yt.Util.getOptimalZoom(t.kt.Mt)>=yt.Ra&&yt.Util.getOptimalZoom(e)<yt.Ra)&&(s=this.fu(),this.cu.Fu(s[0],s[1],0),this.cu.Ou());var e=this.lu(n),s=t.kt.pos,n=this.X(s[0],s[1]),t=yt.lcs.getLocalByCoord([e[0],e[1]]);this.vu();var r=this.fu();this.cu.Fu(r[0],r[1],0),this.cu.Ou();var n=[(s=this.X(s[0],s[1]))[0]-n[0],s[1]-n[1]],r=[r[0]-n[0],r[1]-n[1]],o=[e[0]-n[0],e[1]-n[1]],e=yt.lcs.getLocalByCoord(o);this.bt>=yt.Ra&&(e.x!==t.x||t.y!==e.y)&&(n=e.x-t.x,t=e.y-t.y,r[0]-=n*yt.lcs.getSize()[0],r[1]-=t*yt.lcs.getSize()[1]),this.cu.Fu(r[0],r[1],0),this.cu.Ou(),this.bu(o)}this.h_()||this.map.setNeedUpdate(!0)},as.prototype.bu=function(t){var i=yt.at.getProjection(this.su);yt.Pl(this.uu,t[0],t[1],0),t=i.unproject(t[0],t[1]),this.hu=t},as.prototype.getOptions=function(){return{size:this._size,zoom:this.bt,center:this.hu,rotation:this.nu,projectionId:this.su,pitch:this.Pu,resolution:this.du}},as.prototype.au=function(){return this.su},as.prototype.ru=function(){return yt.at.getProjection(this.su)},as.prototype.getStatus=function(){var t=yt.Zl(),i=yt.Zl(),n=yt.Zl();this.xu(t,i,n);var e=yt.Util.getOptimalZoom(this.bt);return{size:this._size,pitch:this.Pu,rotation:this.nu,zoom:this.bt,optimalZoom:e,resolution:this.du,optimalResolution:yt.at.getProjection(this.su).getResolution(e),center:this.hu,bounds:t,boundsCoord:i,transformedBoundsCoord:n,centerCoord:this.uu,projectionId:this.su,mvpMatrix:this.cu.Vl(),modelMatrix:this.cu.Au(),viewMode:this.type,skyHeight:this.EF(),fov:this.cu.Tu}},as.prototype.$u=function(t){return 65},as.prototype.Uu=function(t){var i=void 0!==t?t:this.Pu,t=this.bt,i=Math.max(i/100-.4,0),t=Math.max(4*(t-16),0)/100;return this._size[1]*(i-t)-10},as.prototype.EF=function(){var t=1;return 0<(t=this.Uu())?1-t/this._size[1]*2:1},as.prototype.X=function(t,i){var n=this.cu.Cu(),e=this.cu.Au(),s=this._size;if(t=t/s[0]*2-1,i=1-i/s[1]*2,!n)return[0,0];var r=yt.xd(t,i,-1,1);return this.Wu(r,this.tu),s=yt.Zl(),yt.Gu(s,r,n),t=yt.xd(t,i,1,1),this.Wu(t,this.iu),i=yt.Zl(),yt.Gu(i,t,n),n=yt.Zl(),yt.Gu(n,s,e),s=yt.Zl(),yt.Gu(s,i,e),e=+n[2]/(n[2]-s[2]),[n[0]-e*(n[0]-s[0]),n[1]-e*(n[1]-s[1])]},as.prototype.ku=function(t,i){var n=yt.Util.getOptimalZoom(this.bt),e=this.uu,s=this.X(t,i);return t=s[0],i=s[1],n>=yt.Ra&&(t+=(e=yt.lcs.getLocalByCoord([e[0],e[1]])).center[0],i+=e.center[1]),[t,i]},as.prototype.H=function(t,i,n){void 0===n&&(n=0);var e=this.cu.Su(),s=this.cu.Lu(),r=this.fG;return r[0]=t,r[1]=i,r[2]=n,i=this.uG,n=this.cG,yt.Gu(i,r,s),yt.Gu(n,i,e),yt.scale(n,n,1/n[3]),s=(n[0]+1)/2*this._size[0],e=(1-n[1])/2*this._size[1],this.lG(n),this.lG(i),[s,e]},as.prototype._u=function(t,i){var n=yt.Util.getOptimalZoom(this.bt),e=this.uu;return n>=yt.Ra&&(t-=(e=yt.lcs.getLocalByCoord([e[0],e[1]])).center[0],i-=e.center[1]),this.H(t,i)},as.prototype.containerTolnglat=function(t,i){var n=this.X(t,i),e=0,t=0;return yt.Util.getOptimalZoom(this.bt)>=yt.Ra&&(e=(i=yt.lcs.getLocalByCoord([this.uu[0],this.uu[1]]).center)[0],t=i[1]),n[0]+=e,n[1]+=t,(n=yt.at.getProjection(this.su).unproject(n[0],n[1]))[0]=180<n[0]?n[0]-360:n[0]<-180?n[0]+360:n[0],n},as.prototype.lnglatToContainer=function(t,i,n,e){return void 0===n&&(n=0),t=yt.at.getProjection(this.su).project(t,i),yt.Util.getOptimalZoom(this.bt)>=yt.Ra&&(i=yt.lcs.getLocalByCoord([this.uu[0],this.uu[1]]),t[0]-=i.center[0],t[1]-=i.center[1]),this.H(t[0],t[1],n)},as.prototype.pz=function(){return this.cu},as.prototype.h_=function(){return yt.Ru(this.Xl,this.cu.Vl())},as.prototype.aD=function(){return this.Xl=this.cu.Vl(),this.Xl},as.prototype.xu=function(t,i,n){var e=0,s=0,r=this.Uu();yt.Util.getOptimalZoom(this.bt)>=yt.Ra&&(e=(c=yt.lcs.getLocalByCoord([this.uu[0],this.uu[1]]).center)[0],s=c[1]);var o=yt.at.getProjection(this.su),a=this.X(0,r),h=this.X.apply(this,this._size),f=this.X(this._size[0],r),u=this.X(0,this._size[1]),c=Math.min(a[0],u[0],f[0],h[0])+e,r=Math.max(a[0],u[0],f[0],h[0])+e,e=Math.min(a[1],u[1],f[1],h[1])+s,h=Math.max(a[1],u[1],f[1],h[1])+s,s=o.unproject(c,e),o=o.unproject(r,h);return i[0]=c,i[1]=e,i[2]=r,i[3]=h,t[0]=s[0],t[1]=s[1],t[2]=o[0],t[3]=o[1],o=yt.V[this.su].transform(i[0],i[3]),i=yt.V[this.su].transform(i[2],i[1]),n[0]=o[0],n[1]=o[1],n[2]=i[0],n[3]=i[1],t},as.prototype.vu=function(){var t=this._size,i=t[0]*this.du,n=t[1]*this.du;this.cu.setSize([i,n]),this.cu.Eu();var e=this.cu.dz();this.tu=e/10,this.iu=50*e,e=56-this.bt,this.cu.setOptions([i,n],e,t[0]/t[1],this.tu,this.iu),this.cu.Eu()},as.prototype.fu=function(){if(yt.Util.getOptimalZoom(this.bt)<yt.Ra)return[this.uu[0],this.uu[1]];var t=yt.lcs.getDeltaCoord([this.uu[0],this.uu[1]]);return[t[0],t[1]]},as.prototype.lu=function(t){return this.hu[0]=180<this.hu[0]?this.hu[0]-360:this.hu[0]<-180?this.hu[0]+360:this.hu[0],t.project(this.hu[0],this.hu[1])},as.prototype.Wu=function(t,i){t[0]*=i,t[1]*=i,t[2]*=i,t[3]*=i},as.prototype.lG=function(t){for(var i=t.length,n=0;n<i;n++)t[n]=0},as);function as(t,i){var n=rs.call(this)||this;return n.type="3D",n.Pu=0,n.hu=[116.397128,39.916527],n.bt=12,n.tu=1e3,n.iu=1<<30,n._size=[0,0],n.nu=0,n.cu=new es,n.su="EPSG:3857",n.uu=yt.Dl(),n.du=yt.at.getProjection(n.su).getResolution(12),n.Xl=yt.Il(),n.fG=[0,0,0,1],n.uG=[0,0,0,0],n.cG=[0,0,0,0],n.map=i,n.setOptions(t),n.cu.Ou(n.uu[0],n.uu[1]),n.Xl=n.cu.Vl(),n}var hs={Fe:["water","buildings","sky","atmosphere","bg","traffic"],Ee:{regions:{name:"区域面",subType:{land:{name:"陆地",styleMap:[{mainkey:30001,subkey:[1,4,5]}]},green:{name:"绿地",styleMap:[{mainkey:30001,subkey:[3,7,8,9,10,12]}]},edu:{name:"教育体育",styleMap:[{mainkey:30002,subkey:[3,31]}]},public:{name:"公共设施",styleMap:[{mainkey:30002,subkey:[4,12,22,32]}]},traffic:{name:"交通枢纽",styleMap:[{mainkey:30002,subkey:[6,14,40]},{mainkey:30004,subkey:[6,14,40]}]},scenicSpot:{name:"景区",styleMap:[{mainkey:30002,subkey:[5,33]}]},culture:{name:"文化",styleMap:[{mainkey:30002,subkey:[7,35]}]},health:{name:"医疗卫生",styleMap:[{mainkey:30002,subkey:[8,36]}]},sports:{name:"运动场所",styleMap:[{mainkey:30002,subkey:[9,10,13,19,20,21,34,37,39]}]},business:{name:"商业场所",styleMap:[{mainkey:30002,subkey:[11,23,24,25,26,27,28,29,30,38]}]},parkingLot:{name:"停车场",styleMap:[{mainkey:30002,subkey:[1]}]},subway:{name:"地铁设施",styleMap:[{mainkey:30003,allSubKey:!0}]}}},water:{name:"水系",styleMap:[{mainkey:30001,subkey:[2,6,11,13]},{mainkey:20014,subkey:[1,2]},{mainkey:10002,subkey:[13,38]}]},buildings:{name:"建筑物",styleMap:[{mainkey:50001,subkey:[1,2]},{mainkey:50002,subkey:[1,2,3,4]},{mainkey:50003,subkey:[1]},{mainkey:50004,subkey:[1]},{mainkey:30002,subkey:[2,15,16,17,18]}]},roads:{name:"道路",subType:{highWay:{name:"高速公路",styleMap:[{mainkey:20001,subkey:[1,2,3,5,6]}]},ringRoad:{name:"城市环线",styleMap:[{mainkey:20002,subkey:[1,2,3]}]},nationalRoad:{name:"国道",styleMap:[{mainkey:20003,subkey:[1,2,3,5]}]},provincialRoad:{name:"省道",styleMap:[{mainkey:20004,subkey:[1,2,3]}]},secondaryRoad:{name:"二级公路",styleMap:[{mainkey:20007,subkey:[1,2,3]}]},levelThreeRoad:{name:"三级公路",styleMap:[{mainkey:20008,subkey:[1,2,4,5]}]},levelFourRoad:{name:"四级道路",styleMap:[{mainkey:20009,subkey:[1,2,3,5,6,7]}]},roadsBeingBuilt:{name:"在建道路",styleMap:[{mainkey:20018,subkey:[2,3,4,5,6,7,8,9,10,11]}]},railway:{name:"铁路",styleMap:[{mainkey:20010,subkey:[1]}]},highSpeedRailway:{name:"高铁",styleMap:[{mainkey:20010,subkey:[2]}]},subway:{name:"地铁",styleMap:[{mainkey:20015,allSubKey:!0,subkey0:[1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,31,32,33,34,35,36,37,38,39,40,41,42,44,45,46,47,48,50,51,52,54,55,56,57,58,59,60,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,86,87,89,90,91,92,93,94,95,96,97,98,99,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,131,132,133,143]}]},subwayBeingBuilt:{name:"在建地铁",styleMap:[{mainkey:20015,subkey:[1,2]},{mainkey:20019,subkey:[1]}]},overPass:{name:"天桥",styleMap:[{mainkey:20012,subkey:[1,2,3]}]},underPass:{name:"地道",styleMap:[{mainkey:20013,subkey:[1,2,3]}]},other:{name:"其他线条",styleMap:[{mainkey:20011,subkey:[1]},{mainkey:20017,subkey:[1,2,3,4,8]},{mainkey:20020,subkey:[1,2,3]},{mainkey:20024,subkey:[1,2]},{mainkey:20028,subkey:[1]}]},guideBoards:{name:"道路路牌",styleMap:[{mainkey:40001,subkey:[2800,110100,110101,110102,110103,110104,110105]}]}}},labels:{name:"标注",subType:{pois:{name:"兴趣点",subType:{hotel:{name:"住宿",isDetailedType:!0,detailedCode:0,styleMap:[{mainkey:10001,subkey:[9,133,134,135,136,155,156,157,158,159,160,161,162,186]},{mainkey:10007,subkey:[31,32,33,34,35,36,37,38,39,164,165]}]},restaurant:{name:"餐饮",isDetailedType:!0,detailedCode:1,styleMap:[{mainkey:10001,subkey:[19,20,21,22,114,115,116,117,118,119,183,187]},{mainkey:10007,subkey:[1,2,3,4,166,167,168,179,180,181,203,205,206,215]}]},shop:{name:"购物",isDetailedType:!0,detailedCode:2,styleMap:[{mainkey:10001,subkey:[7,8,68,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99]},{mainkey:10007,subkey:[5,6,7,8,9,10,11,12,13,175,200,201,202,204]}]},scenicSpot:{name:"风景名胜",isDetailedType:!0,detailedCode:3,styleMap:[{mainkey:10001,subkey:[4,12,14,38,69,100,101,102,103,104,105,106,107,108,109,110,111,112,120,167,171,188,189,190,191,192]},{mainkey:10008,allSubKey:!0},{mainkey:10007,subkey:[48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,187,188,190,192,193,194,195,196,198,216,217,218,219,220,221,223,224,225]}]},traffic:{name:"交通设施",isDetailedType:!0,detailedCode:4,styleMap:[{mainkey:10001,subkey:[23,24,25,26,31,36,148,154,168,172,175,176,177,178]},{mainkey:10002,subkey:[11,16]},{mainkey:10009,allSubKey:!0}]},bank:{name:"金融保险",isDetailedType:!0,detailedCode:5,styleMap:[{mainkey:10001,subkey:[42,44,45,46,47,48,49,50,51,52,53,54,55,144,145,146,147]},{mainkey:10007,subkey:[14,15,16,17,18,19,20,21,22,23,24,25,26,27]}]},edu:{name:"科教文化",isDetailedType:!0,detailedCode:6,styleMap:[{mainkey:10001,subkey:[10,11,13,35,138,139,140,141,142,143,163,164,165,166,170]},{mainkey:10007,subkey:[43,44,45,46,47,176,177]}]},live:{name:"生活服务",isDetailedType:!0,detailedCode:7,styleMap:[{mainkey:10001,subkey:[58,63,64,65,66,67,121,122,123]},{mainkey:10007,subkey:[28,29,30]}]},hospital:{name:"医疗保健",isDetailedType:!0,detailedCode:8,styleMap:[{mainkey:10001,subkey:[32,33,57,70,131,132,169,193,206,207,208,209,210]},{mainkey:10007,subkey:[170,209]}]},pe:{name:"休闲体育",isDetailedType:!0,detailedCode:9,styleMap:[{mainkey:10001,subkey:[15,16,17,37,60,61,62,73,124,125,126,127,128,129,130,180,181,182,184,185,194,195,196,197,198,199,200,201,202,203,204,205,213,214]},{mainkey:10007,subkey:[169,171,172,173,174,178,197,207]}]},public:{name:"公共设施",isDetailedType:!0,detailedCode:10,styleMap:[{mainkey:10001,subkey:[59,173,215]}]},buidling:{name:"商务住宅",isDetailedType:!0,detailedCode:11,styleMap:[{mainkey:10001,subkey:[5,6,74,75,76,77,78,79,80,81,179]},{mainkey:10007,subkey:[189,191]}]},gov:{name:"政府机构及社会团体",isDetailedType:!0,detailedCode:12,styleMap:[{mainkey:10001,subkey:[3,34,43,137]}]},moto:{name:"摩托车服务",isDetailedType:!0,detailedCode:13,styleMap:[{mainkey:10001,subkey:[113]}]},vehicle:{name:"汽车服务",isDetailedType:!0,detailedCode:14,styleMap:[{mainkey:10001,subkey:[39,40,41,71,72,151,152,153]},{mainkey:10007,subkey:[40,41,42,182,183,184,185,186]}]},pass:{name:"通行设施",isDetailedType:!0,detailedCode:15,styleMap:[{mainkey:10001,subkey:[27,28,149,150,174]},{mainkey:10002,subkey:[21]}]},subway:{name:"地铁站",isDetailedType:!0,detailedCode:16,styleMap:[{mainkey:10005,subkey:[1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,54,55,56,57,59,86,87,88,89,90,91,92,93,94,95,96,97,98,99,103,104,105]},{mainkey:10006,subkey:[1,2]}]},roadFacilities:{name:"道路附属设施",isDetailedType:!0,detailedCode:17,styleMap:[{mainkey:10001,subkey:[2,29,30]},{mainkey:10017,allSubKey:!0}]},address:{name:"地名",isDetailedType:!0,detailedCode:18,styleMap:[{mainkey:10001,subkey:[18]},{mainkey:10002,subkey:[10,12,14,15,23,36]}]},other:{name:"其他",isDetailedType:!0,detailedCode:19,styleMap:[{mainkey:10001,subkey:[1,211,212]},{mainkey:10002,subkey:[28]},{mainkey:10007,subkey:[208,210,211,212,213,214]},{mainkey:10010},{mainkey:10011},{mainkey:10012},{mainkey:10013},{mainkey:10014},{mainkey:10015},{mainkey:10016,allSubKey:!0}]}}},aois:{name:"区域标注",styleMap:[{mainkey:10004,allSubKey:!0,subkey:[1,3,4,5,6,7,8,11,12,13,14,15,16,17,18,21,22,23]}]},continent:{name:"大洲",styleMap:[{mainkey:10002,subkey:[20]}]},country:{name:"国家",styleMap:[{mainkey:10002,subkey:[18,19,29]}]},province:{name:"省/直辖市/自治区/特别行政区",styleMap:[{mainkey:10002,subkey:[22,26,33]}]},city:{name:"城市",styleMap:[{mainkey:10002,subkey:[1,2,3,4,5,7,24,25,27,30,31,32,34,35]}]},district:{name:"区县",styleMap:[{mainkey:10002,subkey:[6,8,37]}]},town:{name:"乡镇",styleMap:[{mainkey:10002,subkey:[9]}]},village:{name:"村庄",styleMap:[{mainkey:10002,subkey:[17]}]}}},borders:{name:"行政区边界",subType:{China:{name:"中国国界",styleMap:[{mainkey:20016,subkey:[1,2,9]}]},foreign:{name:"外国国界/停火线/主张线",styleMap:[{mainkey:20016,subkey:[3,4,8,10,11,14,16]}]},provincial:{name:"省界线",styleMap:[{mainkey:20016,subkey:[5,6,7,12]}]}}}}},fs=(us.prototype.pn=function(t){this.qe?t():this.Ye.push(t)},us.prototype.dn=function(t,i,n){return this.vn.dn(t,i,n)},us.prototype.mn=function(t,i){return this.vn.mn(t,i)},us.prototype.setStyle=function(t,i){var n=this.xn(t);this.vn.setStyle(n),this.vn.kF(t),i.gn.bn(n,function(){i.emit("styleChanged")})},us.prototype.w_=function(t){if(!this.Ze||!this.Ze[t])return null;var i=[];return Object.keys(this.Ze[t]).forEach(function(t){t=parseFloat(t),i.push(t)}),i},us.prototype.xn=function(t){for(var i={},n=Object.keys(t),e=0;e<n.length;e++){var s=n[e],r=t[s];if(hs.Ee[s]){var o=hs.Ee[s];if(o.styleMap){for(var a=o.styleMap,h=0;h<a.length;h++)if(i[k=a[h].mainkey]||(i[k]={}),a[h].subkey)for(var f=0;f<a[h].subkey.length;f++){var u=a[h].subkey[f],c=yt.yn(r);if(r.styles)for(var l=Object.keys(r.styles),v=0;v<l.length;v++){var d=l[v],p=r.styles[d].transitional;c.styles[d]={nodes:{},transitional:p||void 0};for(var m=r.styles[d].nodes,y=0;y<m.length;y++){var _=m[y].zoom,g=m[y].value;c.styles[d].nodes[_]=g}}i[k][u]=c}}else if(o.subType&&r.subType)for(var b=Object.keys(r.subType),h=0;h<b.length;h++){var x=b[h];if(o.subType[x]&&o.subType[x].styleMap){for(var k,a=o.subType[x].styleMap,f=0;f<a.length;f++)if(a[f].mainkey){i[k=a[f].mainkey]||(i[k]={});var w=a[f].subkey;if(a[f].allSubKey&&(w=this.w_(k)),w)for(var M=0;M<w.length;M++){var u=w[M],C=r.subType[x];if((c=yt.yn(C)).styles)for(l=Object.keys(C.styles),v=0;v<l.length;v++)for(d=l[v],p=C.styles[d].transitional,c.styles[d]={nodes:{},transitional:p||void 0},m=C.styles[d].nodes,y=0;y<m.length;y++)_=m[y].zoom,g=m[y].value,c.styles[d].nodes[_]=g;i[k][u]=c}}}else if(o.subType[x]&&o.subType[x].subType)for(var A=o.subType[x].subType,S=Object.keys(A),C=r.subType[x],c=yt.yn(C),I=0;I<S.length;I++){var z=S[I];if(A[z].styleMap)for(var T=0;T<A[z].styleMap.length;T++){var L=A[z].styleMap[T];if(L.mainkey&&L.subkey){i[L.mainkey]||(i[L.mainkey]={});for(var D=0;D<L.subkey.length;D++){var F=L.subkey[D];if(c.detailedType&&c.detailedType[z]){var H=c.detailedType[z],$=yt.yn(H);if(H.styles)for(l=Object.keys(H.styles),v=0;v<l.length;v++)for(d=l[v],$.styles[d]={nodes:{}},m=H.styles[d].nodes,y=0;y<m.length;y++)_=m[y].zoom,g=m[y].value,$.styles[d].nodes[_]=g;i[L.mainkey][F]=$}else i[L.mainkey][F]=c}}}}}}}return i},us.prototype.wn=function(){for(var t=0,i=this.Ye.length;t<i;t+=1)(0,this.Ye[t])();this.Ye=[]},us.prototype.Je=function(t){return t&&"0"!==t?(8!==t.length||(t=t.slice(2)+t.slice(0,2)),yt._n.create(t)):null},us.prototype.fn=function(t){var i=this,n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&200===n.status?i.kn(n.responseText):404===n.status&&n.abort()},n.open("GET",t),n.send()},us.prototype.kn=function(t){for(var i={},n=[],e=0,s=(t=t.replace(/\?/g,":").replace(/\//g,"&")).split(""),r=0,o=s.length;r<o;r++)void 0===i[s[r]]&&(i[s[r]]=e++,n.push(s[r]));for(n.reverse(),r=0,o=s.length;r<o;r++)s[r]=n[i[s[r]]];t=s.join(""),t=JSON.parse(t),this.Ze=this.Mn(t.stylemaps),this.Ze.Rn=yt._n.create("fcf9f2"),this.Ze.zn=24,this.qe=!0,this.wn()},us.prototype.Mn=function(t){var i,n={};for(i in t)if(t.hasOwnProperty(i)){var e=t[i],s=void 0;switch(i[0]){case"1":s=this.Xe;break;case"2":s=this.rn,e.type="road";break;case"3":s=this.cn;break;case"4":s=this.un;break;case"5":s=this.ln,e.type="building"}if(s){var o=(r=i.split(":"))[0],r=r[1];void 0===n[o]&&(n[o]={});for(var a=(n[o][r]=e).browserStyle,h=0,f=a.length;h<f;h+=1){var u=a[h];if(a[h]=s(u),void 0===e.z)switch(i[0]){case"2":e.z=(a[h]?a[h][0]:e).z;break;case"1":case"3":case"4":case"5":e.z=a[h].z;break;default:e.z=-1}}this.Sn(e)}else delete t[i]}return this.vn=new yt.Cn(n),n},us.prototype.Sn=function(t){if(void 0!==t.levelStyleMapping[3]&&(t.levelStyleMapping[2]=t.levelStyleMapping[3]),void 0!==t.levelStyleMapping[20]&&(t.levelStyleMapping[21]=t.levelStyleMapping[20],t.levelStyleMapping[22]=t.levelStyleMapping[20]),"building"===t.type&&t.levelStyleMapping&&(delete t.levelStyleMapping[15],delete t.levelStyleMapping[16]),"road"===t.type&&void 0!==t.levelStyleMapping[18]&&void 0===t.levelStyleMapping[19]){var i=t.browserStyle,n=t.levelStyleMapping[18],e=i[n];if(e)for(var s=1;s<=4;s++){var r=[];r.push(yt.Ln({},e[0])),r.push(yt.Ln({},e[1])),r[0].roadWidth=r[0].roadWidth*Math.pow(2,s),r[0].borderWidth=r[0].borderWidth*Math.pow(2,s),t.browserStyle.push(r),t.levelStyleMapping[s+18]=n+s}}},us);function us(){var s=this;this.vz=null,this.Ne=yt._.$e&&!yt._.Ue,this.Be=window.__AMapStyleSource||yt.Ge||"https://vdata.amap.com/style/2.0",this.Ze={},this.qe=!1,this.Ye=[],this.Ve=null,this.Xe=function(t){var i=t.split("&");return(t={}).He=i[0],t.fontSize=parseInt(i[1],10),t.faceColor=s.Je(i[2]),t.borderColor=s.Je(i[3]),t.Ke=s.Je(i[4]),t.Qe=parseInt(i[6],10),t.tn=2===t.Qe?0:1,t.in=parseInt(i[7],10),t.en=parseInt(i[8],10),t.nn=parseInt(i[9],10),t.an=parseInt(i[10],10),t.sn=i[5],t},this.rn=function(t){var i=t[0].split("&");if(i.length<=2)return null;var n={};n.roadWidth=parseInt(i[0],10),n.roadColor=s.Je(i[1]),n.hn=i[2],n.borderWidth=parseInt(i[3],10),n.borderColor=s.Je(i[4]),n.borderStyle=i[5],n.z=parseInt(i[6],10),n.hn&&n.hn.indexOf&&(0===n.hn.indexOf("dash")?(n.roadDash=n.hn.substring(4).slice(1,-1).split(","),n.roadDash=yt.map(n.roadDash,function(t){return parseInt(t,10)}),2===n.roadDash.length&&(i=n.roadDash).push.apply(i,n.roadDash)):0<n.hn.indexOf("railway")||n.hn.indexOf("dash_crewel")),n.borderStyle&&n.borderStyle.indexOf&&(0===n.borderStyle.indexOf("dash")?(n.borderDash=n.borderStyle.substring(4).slice(1,-1).split(","),n.borderDash=yt.map(n.borderDash,function(t){return parseInt(t,10)}),2===n.borderDash.length&&(e=n.borderDash).push.apply(e,n.borderDash)):0<n.borderStyle.indexOf("railway")||n.borderStyle.indexOf("dash_crewel"));var e=t[1].split("&");return(t={He:""}).fontSize=parseInt(e[1],10),t.faceColor=s.Je(e[2]),t.borderColor=s.Je(e[3]),t.z=parseInt(e[4],10),[n,t]},this.ln=function(t){var i=t.split("&");return(t={}).faceColor=s.Je(i[0]),t.borderWidth=parseInt(i[1],10),t.borderColor=s.Je(i[2]),t.wallColor1=s.Je(i[3]),t.wallColor2=s.Je(i[4]),t.opacity=parseFloat(i[5]),t.z=parseInt(i[6],10),t},this.un=function(t){var i=t.split("&");return(t={}).He=i[0],t.fontSize=parseInt(i[1],10),t.faceColor=s.Je(i[2]),t.borderColor=s.Je(i[3]),t.Ke=null,t.z=parseInt(i[5],10),t},this.cn=function(t){var i=t.split("&");return(t={}).faceColor=s.Je(i[0]),t.borderWidth=0,t.borderColor=null,t.z=parseInt(i[3],10),t},this.fn(this.Be)}function cs(t,i,n,e){if(e){if(e instanceof Uint8ClampedArray)e=new Uint8Array(e.buffer);else if(e.length!==i.width*i.height*n)throw new RangeError("mismatched image size")}else e=new Uint8Array(i.width*i.height*n);return t.width=i.width,t.height=i.height,t.data=e,t}function ls(t,i,n,e,s,r){if(0===s.width||0===s.height)return i;if(s.width>t.width||s.height>t.height||n.x>t.width-s.width||n.y>t.height-s.height)throw new RangeError("out of range source coordinates for image copy");if(s.width>i.width||s.height>i.height||e.x>i.width-s.width||e.y>i.height-s.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=t.data,a=i.data,h=0;h<s.height;h++)for(var f=((n.y+h)*t.width+n.x)*r,u=((e.y+h)*i.width+e.x)*r,c=0;c<s.width*r;c++)a[u+c]=o[f+c];return i}var vs,ds=(ps.eg=function(t,i,n,e,s){ls(t,i,n,e,s,1)},ps.prototype.resize=function(t){var n,i=this,s=(n=t).width;t=n.height,s===i.width&&t===i.height||(ls(i,n=cs({},{width:s,height:t},1),{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,s),height:Math.min(i.height,t)},1),i.width=s,i.height=t,i.data=n.data)},ps.prototype.clone=function(){return new ps({width:this.width,height:this.height},new Uint8Array(this.data))},ps);function ps(t,i){cs(this,t,1,i)}(qi=vs={}).TEXTUREFINISH="TEXTUREFINISH",qi.UNLOAD="unload",qi.LOADING="loading",qi.LOADED="loaded",qi.FAIL="fail";var ms,ys=(ms=yt.vG,yt.Ei(_s,ms),_s.prototype.getData=function(t,i){for(var n=this,e=[],s=0,r=t;s<r.length;s++){var o=r[s];e.push(o.charCodeAt(0).toString())}var a=this.Zu(e),t=this._map.gn;switch(a.status){case yt.qu.AllLoaded:i();break;case yt.qu.AllUnLoaded:var h=this.Yu(i);t.getSDFData(a.Vu,function(t,i){void 0===i&&(i={}),n.Xu[h]=i,n.Hu()});break;case yt.qu.SomeLoading:var f=this.Yu(i);t.getSDFData(a.Vu,function(t,i){void 0===i&&(i={}),n.Xu[f]=i,n.Hu()});break;case yt.qu.AllLoading:i=this.Yu(i),this.Xu[i]=[],this.Hu()}},_s.prototype.Ju=function(t){for(var i={},n=0,e=t;n<e.length;n++){var s=e[n],r=s.range,o=s.info,a=s.pos;(s=this.info)[r]||(s[r]={}),s[r].info=o.info,s[r].pos=a,this.range.push(r),i[r]=1}return i},_s.prototype.mz=function(t,i){void 0===i&&(i=!1);for(var n=this.Ku,e=this.info||[],s=this.SF,r=0,o=this.Ku;r<o.length;r++){var a=o[r];if(s.hasOwnProperty(a)){var h=s[a];if(h.info[t])return{key:a,index:n.indexOf(a),char:h.info[t],pos:h.pos}}}if(!i)for(var a in e)if(e.hasOwnProperty(a)&&n.indexOf(a)<0&&(h=e[a]).pos&&h.info[t])return{key:a,index:yt.tc.Qu,char:h.info[t],pos:h.pos};return null},_s.prototype.measureText=function(t,i){for(var n=yt.tc.ic,e=yt.tc.ec,s=0,r=this.info,o=this.SF,a=i/this._size,h=this.nc,f=0,u=t;f<u.length;f++){var c,l=u[f],v=void 0,d=l;if(!(v=13312<=d&&d<=40959?e:h[d]))for(var p in o)if(o.hasOwnProperty(p)&&(c=o[p].info[d])){this.nc[l]=v=c[4];break}if(!v)for(var p in r)if(r.hasOwnProperty(p)&&(c=r[p].info[d])){this.nc[l]=v=c[4];break}s+=(v+n)*a}return s},_s.prototype.oc=function(){for(var t,i=this.ac,n=this.Ku,e=this.sc,s=0;s<4;)e[s]||(t=n[s],(t=i.getImage(t))&&t.img&&(e[s]=t)),s++;return e},_s.prototype.rc=function(s,r){var o=this,a=s.Ku.length,h=0;this.Ku=s.Ku;for(var t=0,i=s.jm;t<i.length;t++){var n=i[t],e=n.range,f=n.info,u=n.pos;(n=this.SF)[e]||(n[e]={}),n[e].info=f.info,n[e].pos=u}this.kc=vs.LOADED;for(var c=0,l=s.hc.length;c<l;c++)!function(){var i=s.hc[c],n=s.Ku[c],e=new Image;e.src=i.lc,e.crossOrigin="",e.onload=function(){o.ac.addImageData(n,{ext:i.ext,type:"common",img:e,width:e.width,height:e.height,status:yt.uc.LOADED}),yt.cc.revokeObjectURL(i.lc),(h+=1)===a&&r&&r()}}()},_s.prototype.destroy=function(){this.range=[],this.Ku=[],this.info={},this.SF={},this.sc=[]},_s.prototype.Qd=function(){this.kc=vs.TEXTUREFINISH},_s.prototype.pH=function(){return this.kc===vs.TEXTUREFINISH||this.kc===vs.LOADED},_s.prototype._bindEvents=function(){this.dG.on("loadWordsByFront",this.pG.bind(this))},_s.prototype.fc=function(){var t=yt.tc.pc,i=t[this.dc];return this.dc=(this.dc+1)%t.length,i},_s.prototype.vc=function(t){void 0===t&&(t={});var i=(Object.keys(t)||[]).sort(function(t,i){return t-i});return i=2<=(t=i.length)?i[0]+"-"+i[t-1]:1===t?i[0]:""},_s.prototype.mc=function(){},_s.prototype.Yu=function(t,i){void 0===i&&(i={});var n=this.yc+=1;return this.xc.push(n),this.bc[n]=t,this.bc[n]={cb:t,params:i},n},_s.prototype.Hu=function(){var t,i,n=this.xc[0];!n||(t=this.Xu[n])&&(this.xc.shift(),(i=this.bc[n])?i.cb(t):console.error("sdf task error"),delete this.Xu[n],delete this.bc[n],this.Hu())},_s.prototype.gc=function(t){var i=this.range||[],n=this.info||{},e=parseInt(t,10),s=this.SF;if(this.kc===vs.TEXTUREFINISH||this.kc===vs.LOADED)for(var r=0,o=this.Ku;r<o.length;r++){var a=o[r];if(s.hasOwnProperty(a)){var h=a.split("-"),f=parseInt(h[0]||"",10),u=parseInt(h[1]||"",10);if(f<=e&&e<=u&&(s[a]&&s[a].info||{})[t])return!0}}for(var c=0,l=i;c<l.length;c++)if((a=l[c]).indexOf("-")<0){if(e===+a&&(n[a]&&n[a].info||{})[t])return!0}else if(h=a.split("-"),f=parseInt(h[0]||"",10),u=parseInt(h[1]||"",10),f<=e&&e<=u&&(n[a]&&n[a].info||{})[t])return!0;return!1},_s.prototype.pG=function(t){for(var i=t.mG,t=t.cb,n=[],e=this.ac,s=this.yG,r=0,o=i;r<o.length;r++){var a,h=o[r],f={},u=this._G(h),c=yt.bG.gG(h),l=(a=s.D$(c)).Ce(u),c=l.xG,u=l.info;c&&(l={width:a.width,height:a.height},a=new ds(l,c),f.range=h,f.info={info:((c={})[h]=u,c),url:h},e.addImageData(h,{ext:null,type:"alphaImage",img:a,width:l.width,height:l.height,status:yt.uc.LOADED}),n.push(f))}t(n)},_s.prototype._G=function(t){for(var i="",n=0,e=t.split("|");n<e.length;n++){var s=e[n];i+=String.fromCharCode(parseInt(s,10))}return i},_s.prototype.wc=function(t){return-1!==this._c.indexOf(t)},_s.prototype.Zu=function(t){for(var i=[],n=(this.range,0),e=0,s=0,r=t;s<r.length;s++){var o=r[s];this.gc(o)||(this.wc(o)?e+=1:(n+=1,i.push(o)))}return 0===e&&0===n?{status:yt.qu.AllLoaded,Vu:i}:0<n&&0===e?{status:yt.qu.AllUnLoaded,Vu:i}:0===n&&0<e?{status:yt.qu.AllLoading,Vu:i}:{status:yt.qu.SomeLoading,Vu:i}},_s);function _s(t,i){var n=ms.call(this)||this;return n._map=i,n.CLASS_NAME="SDFManager",n.range=[],n.Ku=[],n.info={},n.SF={},n.sc=[],n.dc=0,n.kc=vs.UNLOAD,n._c=[],n._size=24,n.nc={},n.xc=[],n.bc={},n.Xu={},n.yc=1,n.ac=t,n.yG=new yt.bG,n.dG=n._map.gn,n._bindEvents(),n}var gs=(bs.prototype.loadImage=function(t,i){var n=i.name,e=(i.type,i.cb),s=n||t;(n=this.Fs[s])&&n.status===yt.uc.LOADED?e(n,i):n&&n.status===yt.uc.LOADING?(this.Mc[s]||(this.Mc[s]=[]),this.Mc[s].push({cb:e,opts:i})):t?this.Rc(t,i):e(null,i)},bs.prototype.loadImages=function(t,i){var n=t.length,e=i.cb,s=0;if(t.length)for(var r=function(){(s+=1)===n&&e()},o=0,a=t;o<a.length;o++){var h=a[o];this.loadImage(h,{cb:r})}else e()},bs.prototype.imageLoaded=function(t,i){var n=i.data,e=i.cb;(i=this.zc[e])&&(i(n),delete this.zc[e])},bs.prototype.addImageData=function(t,i){this.Fs[t]||(this.Fs[t]=i)},bs.prototype.getImage=function(t){return void 0===t&&(t=""),this.Fs[t]||{}},bs.prototype.Bi=function(){this.Fs={}},bs.prototype.Rc=function(t,e){var s=this,i=e.name,r=e.ext,n=e.type,o=void 0===n?"other":n,a=e.cb,h=this.Fs,f=new Image,u=i||t;h[u]={type:o,img:f,ext:r,width:f.width,height:f.height,status:yt.uc.LOADING},f.crossOrigin="anonymous",f.onload=function(){if(h[u]={type:o,img:f,ext:r,width:f.width,height:f.height,status:yt.uc.LOADED},a(h[u],e),s.Mc[u])for(var t=0,i=s.Mc[u];t<i.length;t++){var n=i[t];n.cb(h[u],n.opts)}f.onload=null,f.onerror=null},f.onerror=function(){a(null,e),f.onload=null,f.onerror=null},f.src=t},bs.prototype.Sc=function(t){var i;void 0===t&&(t={});var n=t.img,t=n&&n.context?(i=n.width||0,n.height||0):(i=t.width||0,t.height||0);return[i,t]},bs);function bs(){this.Fs={},this.Cc=16,this.zc={},this.Mc={}}var xs,ks=(xs=C,yt.Ei(ws,xs),ws.prototype.Kn=function(t,i,n,e,s){if(this.kG=e.rejectMapMask||!n.map.getMask()?void 0:T.writeWithStencil,n.map.getOutseaState()&&10<=n.$n.optimalZoom&&(this.kG=T.nbStencil,(l=i&&i.outseaData)&&this.wG(t,n,e,s,l)),i.s_){for(var r={},o=0,a=i.tiles;o<a.length;o++){var h,f=a[o];yt.Gh.YH(f)&&(r[h=f.zo.z]||(r[h]=[]),r[h].push(f))}var u=e.To,c=n.map.getStatus().features,l=u.uo.getSource(u.co()).ra(n.$n.optimalZoom);(i=yt.map(Object.keys(r),function(t){return parseInt(t,10)})).sort(function(t,i){return t-i}),0<=(u=i.indexOf(l))&&(i.splice(u,1),i.push(l)),"3D"===n.$n.viewMode&&(this.yz=n.map.getView().EF());for(var v=0,d=i;v<d.length;v++){var p=r[d[v]];if(!c||-1!==c.indexOf("bg"))for(var m=0,y=p;m<y.length;m++)f=y[m],yt.Gh.YH(f)&&this.Lc(t,f,n,e,s);if(!c||-1!==c.indexOf("building"))for(var _=0,g=p;_<g.length;_++)f=g[_],yt.Gh.YH(f)&&this.PD(t,f,n,e,s);if(!c||-1!==c.indexOf("building"))for(var b=0,x=p;b<x.length;b++)f=x[b],yt.Gh.YH(f)&&this.Ac(t,f,n,e,s);if(!c||-1!==c.indexOf("road"))for(var k=0,w=p;k<w.length;k++)f=w[k],yt.Gh.YH(f)&&this.Tc(t,f,n,e,s);if(!c||-1!==c.indexOf("road"))for(var M=0,C=p;M<C.length;M++)f=C[M],yt.Gh.YH(f)&&this.Ic(t,f,n,e,s)}}},ws.prototype.destroy=function(){},ws.prototype.wG=function(t,i,n,e,s){var r,o,a,h;s&&s.LS&&(o=(r=t.aS()).context,t=(a=i.$n).centerCoord,h={outseaData:s,$i:r,$n:a,Sa:i.$n.optimalZoom<yt.Ra?s.LS.center:(h=yt.lcs.getLocalByCoord([t[0],t[1]]).center,[s.LS.center[0]-h[0],s.LS.center[1]-h[1]])},this.zC(o,h))},ws.prototype.zC=function(t,i){i.outseaData.Dc.upload(t,!0);for(var n=i.outseaData.Dc.zs,e=i.outseaData.Dc.Pc,s=i.outseaData.Oc.jc,r=0,o=s.length;r<o;r++){var a=s[r];i.$i.Ce({u_color:[0,0,0,0],u_deltaCenter:i.Sa,u_mvpMatrix:i.$n.mvpMatrix},{a_pos:{type:"vec2",buffer:n,Re:n.size,offset:0}},a.length,e,"TRIANGLES",void 0,E.zi,T.outseaStencil,void 0,a.offset)}},ws.prototype.Lc=function(t,i,n,e,s){for(var o,a,h,f,u,c,l,v,d,p=t.Wn(),m=!0,y=0,_=i.data;y<_.length;y++){var b=(g=_[y]).Dc;if(b){b.upload(p.context,!0);for(var x=b.zs,k=b.Pc,w=g.Oc,g=m?0:1,m=!1,M={a_pos:{type:"vec2",Re:x.size,offset:0,buffer:x}},C=g,A=w.jc.length;C<A;C++){var S,I,z=w.jc[C];Gi.texture.An(s.map.mapStyle,z.mainkey,z.subkey,n.$n.zoom,z.minzoom)?(I=function(t,i,n,e,s){void 0===n&&(n=[0,0]),void 0===s&&(s=1);var r=t.$n.zoom;if(!(i.minzoom-.2>t.$n.zoom&&3<i.minzoom)){var o=i.mainkey,a=i.subkey,h=i.minzoom,f=Gi.faceColor.An(e,o,a,r,h),i=t.map.JF(t.$n.optimalZoom);if(f)return{u_matrix:t.$n.mvpMatrix,u_color:f,u_offset:[0,0],u_skyHeight:s,u_viewHeight:t.$n.size[1],u_skyColor:i||[1,1,1,0],u_image:Gi.texture.An(e,o,a,r,h),u_imageSize:[1,1],u_localDeltaCenter:n,u_resolution:t.$n.optimalResolution}}}(n,z,i.Sa,s.map.mapStyle,this.yz))&&((S=s.map.getImage(I.u_image))&&I.u_image?(I.u_image=S,I.u_imageSize=S.size,o=I,a=M,h=z.length,f=k,c=!(u="TRIANGLES"),l=E.Si,v=this.kG,d=void 0,S=z.offset,void 0===u&&(u="TRIANGLES"),void 0===c&&(c=!1),void 0===l&&(l=E.Mi),void 0===v&&(v=T.disable),void 0===d&&(d=mi.we),void 0===S&&(S=0),t.aH().Ce(o,a,h,f,u,c,l,v,d,S)):I.u_image&&s.map.I_&&!s.map.I_.MH(I.u_image)&&s.map.I_.addImage(I.u_image,{url:I.u_image,filter:"LINEAR",wrap:"REPEAT",cb:function(){return s.map.setNeedUpdate(!0)}})):(I=Wi(n,z,i.Sa,s.map.mapStyle,this.yz))&&p.Ce(I,M,z.length,k,"TRIANGLES",!1,E.Si,this.kG,void 0,z.offset)}}}},ws.prototype.PD=function(t,i,n,e,s){var r,o=t.Wn(),t=i.data,a=yt.find(n.map.getLayers(),function(t){return"AMap.IndoorMap"===t.CLASS_NAME});a&&(r=a.yD().show);for(var h=!0,f=0,u=t;f<u.length;f++){var l=(c=u[f]).FD;if(l){l.upload(o.context,!0);var v=l.zs,d=l.Pc,p=c.BD;if(p)for(var c=h?0:1,h=!1,m={a_pos:{type:"vec2",Re:v.size,offset:0,buffer:v}},y=c,_=p.jc.length;y<_;y++){var g,b=p.jc[y];a&&b.bz&&"indoor_out_building"!==b.bz&&r||(g=Wi(n,b,i.Sa,s.map.mapStyle,this.yz))&&o.Ce(g,m,b.length,d,"TRIANGLES",!1,E.Si,this.kG,void 0,b.offset)}}}},ws.prototype.Ac=function(t,i,n,e,s){var r,o=t.Yn(),t=i.data,a=yt.find(n.map.getLayers(),function(t){return"AMap.IndoorMap"===t.CLASS_NAME});a&&(r=a.yD().show);for(var h=0,f=t;h<f.length;h++){var c=(u=f[h]).Dc;if(c){c.upload(o.context,!0);for(var l=u.Fc,u=c.Ec,v=c.Nc,d={a_pos:{type:"vec2",Re:0,offset:0,buffer:u}},p=0,m=l.jc.length;p<m;p++){var y=l.jc[p],_=function(t,i,n,e){var s=t.$n.zoom;if(!(i.minzoom-.5>t.$n.zoom&&3<i.minzoom)){var r=i.mainkey,o=i.subkey,i=i.minzoom;if(i=tn.borderColor.An(e,r,o,s,i))return{u_color:i,u_normal:[0,0,-.1],u_matrix:t.$n.mvpMatrix,u_localDeltaCenter:n}}}(n,y,i.Sa,s.map.mapStyle);a&&y.bz&&"indoor_out_building"!==y.bz&&r||_&&o.Ce(_,d,y.length,v,"LINES",!1,E.Si,this.kG,void 0,y.offset)}}}},ws.prototype.Ic=function(t,i,n,e,s){var r=t.Vn();if(i.data)for(var o=0,a=i.data;o<a.length;o++)if(f=(h=a[o]).$c){r.context.getExtension("OES_element_index_uint"),f.upload(r.context,!0);for(var h,f=h.$c.zs.buffer,u=h.$c.Pc.buffer,c=h.Uc.jc,l={a_pos:{type:"vec2",buffer:f,Re:h=f.size,offset:0},a_normal:{type:"vec2",buffer:f,Re:h,offset:8},a_distance:{type:"float",buffer:f,Re:h,offset:16},a_dir:{type:"vec2",buffer:f,Re:h,offset:20}},v=0,d=c.length;v<d;v++){var p=c[v],m=Yi(n,p,!1,i.Sa,s.map.mapStyle,this.yz);-2===p.mainkey&&s.map.debug&&(m={u_matrix:n.$n.mvpMatrix,u_meter_per_pixel:n.$n.resolution,u_width:2,u_color:[1,0,0,1],u_dash:0,u_border:0,u_localDeltaCenter:i.Sa,u_skyHeight:1,u_viewHeight:1}),m&&m&&r.Ce(m,l,p.length,u,"TRIANGLES",!1,E.Si,this.kG,void 0,p.offset)}}},ws.prototype.Tc=function(t,i,n,e,s){var r=t.Vn();if(i.data)for(var o=0,a=i.data;o<a.length;o++)if(f=(h=a[o]).$c){r.context.getExtension("OES_element_index_uint"),f.upload(r.context,!0);for(var h,f=h.$c.zs.buffer,u=h.$c.Pc.buffer,c=h.Uc.jc,l={a_pos:{type:"vec2",buffer:f,Re:h=f.size,offset:0},a_normal:{type:"vec2",buffer:f,Re:h,offset:8},a_distance:{type:"float",buffer:f,Re:h,offset:16},a_dir:{type:"vec2",buffer:f,Re:h,offset:20}},v=0,d=c.length;v<d;v++){var p=c[v],m=Yi(n,p,!0,i.Sa,s.map.mapStyle,this.yz);m&&r.Ce(m,l,p.length,u,"TRIANGLES",!1,E.Si,this.kG,void 0,p.offset)}}},ws);function ws(){var t=xs.call(this)||this;return t.yz=1,t}var Ms,Cs=(Ms=C,yt.Ei(As,Ms),As.prototype.Kn=function(t,i,n,e,s){if(i.s_){for(var r,o={},a=0,h=i.tiles;a<h.length;a++)(m=h[a]).status===yt.Mo.LOADED&&(o[r=m.zo.z]||(o[r]=[]),o[r].push(m));var f=e.To,u=f.uo.getSource(f.co()).ra(n.$n.optimalZoom);(i=yt.map(Object.keys(o),function(t){return parseInt(t,10)})).sort(function(t,i){return t-i}),0<=(f=i.indexOf(u))&&(i.splice(f,1),i.push(u)),e.ce&&t.context.clear({depth:!0});for(var c=0,l=i;c<l.length;c++){for(var v=o[l[c]],d=0,p=v;d<p.length;d++)(m=p[d]).status===yt.Mo.LOADED&&this.S_(t,m,n,e,s,!0);for(var m,y=0,_=v;y<_.length;y++)(m=_[y]).status===yt.Mo.LOADED&&this.S_(t,m,n,e,s)}}},As.prototype.S_=function(t,i,n,e,s,r){void 0===r&&(r=!1);var v,o=i.data,a=n.map,h=n.$n,f=n.$n.size,u=a.getView(),c={roofColor:e.roofColor,wallColor:e.wallColor},l=a.getBuildingColor();if("3D"===n.$n.viewMode){v=u.EF();for(var d=u.X(f[0]/2,u.Uu()+5),p=u.X(f[0]/2,u.Uu()-5),m=u.pz().getPosition(),f=d[0]-m[0],u=d[1]-m[1],d=p[0]-m[0],m=p[1]-m[1],y=[Math.sqrt(f*f+u*u),Math.sqrt(d*d+m*m)],_=0,g=o;_<g.length;_++){var b=g[_],x=b.A_;if(x){b=b.C_,x.upload(t.context,!0);var k=x.zs,w=yt.find(n.map.getLayers(),function(t){return"AMap.IndoorMap"===t.CLASS_NAME}),M=void 0;w&&(M=w.yD().show);for(var C=0,A=b.jc;C<A.length;C++){var S=A[C],I=a.mapStyle.vn.dn(S.mainkey,S.subkey,h.zoom),z={};if(z.roofColor=S.roofColor||c.roofColor||l.roofColor||I&&I.faceColor&&yt.Sp.Up(I.faceColor.rgba,255),z.wallColor=S.wallColor||c.wallColor||l.wallColor||I&&I.faceColor&&yt.Sp.Up(I.borderColor.rgba,255),!z.wallColor||!z.roofColor)return;var T,I=Xi.texture.An(s.map.mapStyle,S.mainkey,S.subkey,n.$n.zoom,S.minzoom);w&&S.bz&&M||(I?(T=function(t,i,n,e,s,r,o,a){void 0===n&&(n=[0,0]);var h=t.$n.zoom,f=t.$n.pitch,u=t.$n.size[1],c=[16,22],l=1,v=1;if("AMap.Buildings"===e.To.CLASS_NAME&&(c=e.zooms,l=e.opacity,v=e.heightFactor),!(c[0]>h||c[1]<h)&&(e=i.mainkey,c=i.subkey,i=i.minzoom,i=Xi.texture.An(a,e,c,h,i)))return{u_skyBMRange:o,u_skyHeight:r,u_viewHeight:u,u_heightFactor:v,u_roofColor:s.roofColor,u_wallColor:s.wallColor,u_lightDir:Vi(t.$n.center),u_opacity:l,u_pitch:f,u_matrix:t.$n.mvpMatrix,u_offset:[0,0],u_normalMatrix:t.$n.modelMatrix,u_localDeltaCenter:n,u_image:i,u_imageSize:[1,1],u_resolution:t.$n.optimalResolution}}(n,S,i.Sa,e,z,v,y,s.map.mapStyle))&&((I=s.map.getImage(T.u_image))?(T.u_image=I,T.u_imageSize=I.size,t.sH().Ce(T,{a_pos:{type:"vec4",Re:k.size,offset:0,buffer:k},a_normal:{type:"vec3",Re:k.size,offset:16,buffer:k},a_textureCoord:{type:"vec2",Re:k.size,offset:28,buffer:k}},S.length,void 0,"TRIANGLES",e.depthTest,r?E.disabled:E.Si,void 0,mi.back,S.offset)):T.u_image&&s.map.I_&&!s.map.I_.MH(T.u_image)&&s.map.addImage(T.u_image,{url:T.u_image,filter:"LINEAR",wrap:"REPEAT",cb:function(){return s.map.setNeedUpdate(!0)}})):(T=function(t,i,n){void 0===i&&(i=[0,0]);var o=t.$n.zoom,a=t.$n.pitch,h=t.$n.size[1],f=[16,22],u=1,c=1;if("AMap.Buildings"===n.To.CLASS_NAME&&(f=n.zooms,u=n.opacity,c=n.heightFactor),!(f[0]>o||f[1]<o))return{u_skyBMRange:y,u_skyHeight:v,u_viewHeight:h,u_heightFactor:c,u_roofColor:z.roofColor,u_wallColor:z.wallColor,u_lightDir:Vi(t.$n.center),u_opacity:u,u_pitch:a,u_matrix:t.$n.mvpMatrix,u_offset:[0,0],u_normalMatrix:t.$n.modelMatrix,u_localDeltaCenter:i}}(n,i.Sa,e))&&t.k_().Ce(T,{a_pos:{type:"vec4",Re:k.size,offset:0,buffer:k},a_normal:{type:"vec3",Re:k.size,offset:16,buffer:k}},S.length,void 0,"TRIANGLES",e.depthTest,r?E.disabled:E.Si,void 0,mi.back,S.offset))}}}}},As.prototype.cP=function(t){for(var i,n=t.getLayers(),e=0;e<n.length;e++){var s=n[e];if("AMap.Buildings"===s.CLASS_NAME&&!s.getState().u$){i=s;break}}return i},As);function As(){return Ms.call(this)||this}var Ss,Is=(Ss=C,yt.Ei(zs,Ss),zs.prototype.Kn=function(t,i,n,e){t.context;var s,r,o=t.Gn(),a=e.To.eo().zooms;n.$n.zoom<a[0]||n.$n.zoom>a[1]||(s=n.$n,r=n.map,a=1,"3D"===s.viewMode&&(a=r.getView().EF()),r=r.JF(n.$n.optimalZoom)||[1,1,1,0],e.ce&&t.context.clear({depth:!0}),o.Ce({u_skyColor:r,u_skyHeight:a,u_viewHeight:s.size[1],u_opacity:e.opacity,u_texture:i.texture,u_mvpMatrix:s.mvpMatrix,u_localDeltaCenter:i.Sa},{a_Position:{type:"vec4",buffer:i.zs,Re:0,offset:0}},6,void 0,void 0,e.depthTest,E.Si,e.rejectMapMask||!n.map.getMask()?void 0:T.writeWithStencil))},zs);function zs(){return Ss.call(this)||this}var Ts,Ls=(Ts=C,yt.Ei(Ds,Ts),Ds.prototype.Kn=function(t,i,n,e,s,r){var o=n.$n,a=r.eo(),r=a.zooms;if(o.size,o.pitch,o.optimalZoom,!(o.optimalZoom<r[0]||o.optimalZoom>r[1])){var h=t.Gn(),f=n.map.JF(n.$n.optimalZoom)||[1,1,1,0],u=i.tiles,c=1;"3D"===n.$n.viewMode&&(c=n.map.getView().EF()),e.ce&&t.context.clear({depth:!0});for(var l=0,v=u.length;l<v;l+=1){for(var d=u[l],p=0,m=d.length;p<m;p+=1)(y=d[p]).status===yt.Mo.LOADED&&h.Ce({u_skyColor:f,u_viewHeight:o.size[1],u_skyHeight:c,u_opacity:a.opacity||1,u_texture:y.data.texture,u_mvpMatrix:o.mvpMatrix,u_localDeltaCenter:y.data.Sa},{a_Position:{type:"vec4",buffer:y.data.zs,Re:0,offset:0}},6,void 0,void 0,e.depthTest,E.Si,e.rejectMapMask||!n.map.getMask()?void 0:T.writeWithStencil);for(var y,p=0,m=d.length;p<m;p+=1)(y=d[p]).status===yt.Mo.LOADED&&n.debug&&h.Ce({u_skyColor:f,u_viewHeight:o.size[1],u_skyHeight:c,u_opacity:a.opacity||1,u_texture:y.data.Js,u_mvpMatrix:o.mvpMatrix,u_localDeltaCenter:y.data.Sa},{a_Position:{type:"vec4",buffer:y.data.zs,Re:0,offset:0}},6,void 0,"TRIANGLES",void 0,void 0,void 0)}}},Ds);function Ds(){return Ts.call(this)||this}var Fs,Hs=(Fs=C,yt.Ei($s,Fs),$s.prototype.Kn=function(t,i,n,e){var s,r;!e.JD&&this.OF&&this.EI&&this.BF&&this.NF&&(yt.Ru(this.NF,n.$n.mvpMatrix)||n.map.TL())?(r=Math.pow(2,n.$n.zoom-this.EI),yt.subtract(this.VM,n.$n.centerCoord,this.OF),yt.Pl(this.VM,-(this.VM[0]/this.BF)*r,this.VM[1]/this.BF*r,0),1!==r&&(e.kv.style[k.kL]="scale3d("+r+","+r+",1)"),e.kv.style.top=this.VM[1]+"px",e.kv.style.left=this.VM[0]+"px"):(s=e.To,yt.eg(this.OF,n.$n.centerCoord),this.EI=n.$n.zoom,this.NF=n.$n.mvpMatrix,this.BF=n.$n.resolution,s.render&&(r=s.eo().zooms,n.$n.zoom>=r[0]&&n.$n.zoom<=r[1]?(s.canvas.style.visibility="visible",s.render()):s&&s.canvas&&s.canvas&&(s.canvas.style.visibility="hidden")),e.kv.style[k.kL]="",e.kv.style.top="",e.kv.style.left="",e.kv.style.height="",e.kv.style.visibility="")},$s);function $s(){var t=Fs.call(this)||this;return t.type="customLayer",t.OF=yt.Dl(),t.VM=yt.Dl(),t}var Es=yt._.scale,Bs={getBounds:function(t,i){void 0===i&&(i={});var n=i.zoom,e=i.centerCoord,s=(i.view,[150*Es,150*Es,150*Es,150*Es]),o=(r=t.boundsCoord)[0],a=r[1],h=r[2],f=r[3],t=this.nt(0,0,n,i),r=yt.Sp.Ip(this.nt(s[0],s[1],n,i),t),t=yt.Sp.Ip(this.nt(s[2],s[3],n,i),t),e=(n=n>=yt.Ra?e:[0,0])[0],n=n[1];return[[o-e-Math.abs(t[1]),a-n-Math.abs(t[0])],[h-e+Math.abs(r[1]),f-n+Math.abs(r[0])]]},gz:function(t,i){var n=i[0],e=i[1],s=t[0],i=t[1],t=s-n[0],n=i-n[1],s=e[0]-s,i=e[1]-i;return 0<=t&&0<=n&&0<=s&&0<=i},getRank:function(t,i){void 0===i&&(i={});var n=void 0===(n=i.in)?0:n,i=void 0===(i=i._z)?0:i,t=(t.data||{}).rank||1;return n?t-1e5:i/100*2e5+t},wu:function(t,i,n,e){if(void 0===t&&(t=0),void 0===i&&(i=0),e){var s=e.$n,r=e.size,o=e.transform,a=e.view,h=e.viewMode,f=e.centerCoord,e=e.positionType;return"2D"!==h?"relative"===(void 0===e?"relative":e)?a.H(t,i):a._u(t,i):(r={center:s.centerCoord,rotation:s.rotation,size:r},f=(s=s.optimalZoom>=yt.Ra?f:[0,0])[0],s=s[1],o.wu(t+f,i+s,n,r))}},kz:function(t,i,n,e){if(void 0===t&&(t=[]),void 0===e&&(e={}),e=e.centerCoord,i<yt.Ra&&n>=yt.Ra){for(var s=e[0],r=e[1],o=[],a=0,h=t;a<h.length;a++){var f=h[a];o.push([f[0]-s,f[1]-r])}return o}return t},nt:function(t,i,n,e){void 0===t&&(t=0),void 0===i&&(i=0);var s=e.view,r=e.transform;return"2D"===e.viewMode?r.nt(t,i,n):s.X(t,i)},MG:function(t,i){return t<yt.Ra-1&&(i=[0,0]),i}},Os=yt._.scale,Ps=(Rs.prototype.Mz=function(t){var i=t.map,n=t.R_,e=t.z_,t=t.$i;this._map=i,this.Mf=n,this.ac=e,this._f=t},Rs.prototype.Ce=function(t,n,i,e){var s=this;void 0===i&&(i={}),void 0===e&&(e={});var r=yt.tc.ud,o=yt.tc.sp,a=this._f,h=t.$n,f=t.size;if(!h)return e.iterator;var u=h.mvpMatrix,c=h.zoom,l=h.viewMode,v=f[0],d=f[1],p=e.Sa,m=void 0===(h=e.from)?"inner":h,y=void 0===(f=e.opacity)?1:f,_=void 0===(h=e.offset)?[0,0]:h,g=void 0===(f=(e.Sz,e.LF))?{}:f,b=e.iterator,x=1;"3D"===l&&(x=t.map.getView().EF()),window.BO=function(t){var i=s.fd(n);s.gp(e.oo,i.De[t])},h=i.Rz,f=i.buffer,l=i.od,t=i.zz,n.bindFramebuffer.set(null),n.be.set([0,0,v*Os,d*Os]);var k=h.pp,i=f,w=void 0===(f=(h=this.fd(n,{from:m})).De)?[]:f,M=void 0===(h=h.sizes)?[]:h;e.CH&&(w.push(e.CH),M.push(e.CH.size[0],e.CH.size[1]));var h=r*o,C=k.length;if(!i||!l)return b;if(C){n.ge.set(a),a.Ae({a_vertex:{type:"vec2",buffer:i,Re:h,offset:0},a_texcoord:{type:"vec2",buffer:i,Re:h,offset:2*o},a_origin:{type:"vec2",buffer:i,Re:h,offset:4*o},a_texIndex:{type:"float",buffer:i,Re:h,offset:6*o},a_type:{type:"float",buffer:i,Re:h,offset:7*o},a_zooms:{type:"vec2",buffer:i,Re:h,offset:8*o},a_height:{type:"float",buffer:i,Re:h,offset:10*o},a_visible:{type:"float",buffer:l,Re:0,offset:t[b]&&t[b].start}});for(var A="inner"===this.l_?E.Ri:E.Si,S=0;S<C;S++){var I,z,T,L,D=k[S],H=void 0===(F=D.start)?0:F,$=D.end,F=void 0===$?0:$;D.dp,b++,F-H&&($=void 0,"labelsLayer"!==m||!D.pd||(I=this.ac.getImage(D.pd)).img&&(T=(z=this.dd(n,I)).texture,L=z.size,T&&T.context&&(w[yt.tc._j]=T,($=M.slice(0))[2*yt.tc._j]=L[0],$[2*yt.tc._j+1]=L[1])),I=D.vd.slice(0,4),z=D.vd.slice(4,8),T=D.vd.slice(11,15),L=D.vd.slice(15,19),a.Le({u_matrix:u,u_texture:{De:w,count:4},u_gl_size:[v,d],u_texsize:$||M,u_color:I,u_strokeColor:z,u_borderColor:L,u_gamma:D.vd[8],u_borderBuffer:D.vd[9],u_buffer:D.vd[10],u_backgroundColor:T,u_opacity:D.opacity*y,u_zoom:c,u_event:0,u_delta_center:p,u_offset:_,u_transform:[0,0,1,0],u_skyHeight:x}),a.Pe((F-H)/r,H/r,void 0,void 0,g.depthTest,A))}}return b},Rs.prototype.Cz=function(t,i,n,e,s){var r=this._f,o=yt.tc.sp,a=t.$n,h=t.size,f=a.zoom||20,u=a.mvpMatrix||null,c=h[0],l=h[1],v=s.Az,d=s.Iz,p=(s.centerCoord,1);if("3D"===a.viewMode&&(p=t.map.getView().EF()),u){var m=(t=e.$z||{}).pp,e=t.zs,t=t.od,e=e&&e.buffer,y=Math.pow(2,f-d);i.be.set([0,0,c*Os,l*Os]);var _,g=void 0===(l=(c=this.fd(i)).De)?[]:l,b=void 0===(c=c.sizes)?[]:c,x=m.length,c=12*o,k=[0,0,f<=d?y:1,0];if(e&&t){x&&(i.ge.set(this._f),r.Ae({a_vertex:{type:"vec2",buffer:e,Re:c,offset:0},a_texcoord:{type:"vec2",buffer:e,Re:c,offset:2*o},a_origin:{type:"vec2",buffer:e,Re:c,offset:4*o},a_texIndex:{type:"float",buffer:e,Re:c,offset:6*o},a_type:{type:"float",buffer:e,Re:c,offset:7*o},a_zooms:{type:"vec2",buffer:e,Re:c,offset:8*o},a_height:{type:"float",buffer:e,Re:c,offset:10*o},a_angle:{type:"float",buffer:e,Re:c,offset:11*o},a_visible:{type:"float",buffer:t,Re:0,offset:0}}));for(var w=0;w<x;w++){var M=m[w],C=(M[0],M[1],M[11]),A=M[12],S=M[13];if(M[14],A-C){for(var I,z=0,T=v;z<T.length;z++){var L,D=T[z];(L=n[D])&&D===S&&(_=L.Sa)}!_||y<.6||L&&((I=this._map.yH.xH(L.zo.key)||(null===(I=this._map.I_)||void 0===I?void 0:I.getImage("emptyTexture")))?(g[3]=I,b[6]=I.size[0],b[7]=I.size[1],_=[0,0],r.Le({u_matrix:u,u_delta_center:_,u_transform:k,u_texture:{De:g,count:g.length},u_gl_size:h,u_texsize:b,u_color:M[3],u_strokeColor:M[4],u_gamma:M[5],u_borderBuffer:M[7],u_buffer:M[8],u_backgroundColor:M[9],u_opacity:1,u_zoom:f,u_event:0,u_skyHeight:p}),r.Pe((A-C)/12,C/12,void 0,void 0,void 0,E.Si)):console.error("no staticSDFTileTexture"))}}}}},Rs.prototype.gp=function(t,i){var n=t.context,t=t.Jn(),i=i,n=n.fe(new Uint16Array([0,0,0,0,0,1,0,1,1,1,1,1,1,0,1,0]),8);i&&t.Ce({u_texture:i},{a_pos:{type:"vec2",buffer:n,Re:8,offset:0},a_coord:{type:"vec2",buffer:n,Re:8,offset:4}},4,void 0,"TRIANGLE_FAN",void 0,E.Mi)},Rs.prototype.reset=function(){this.Df()},Rs.prototype.destroy=function(){if(this.Lz){for(var t=0,i=this.Lz.De;t<i.length;t++)i[t].destroy();delete this.Lz}},Rs.prototype.Dz=function(t,i,n){void 0===n&&(n={});for(var s=void 0===(e=n.start)?0:e,e=n.dp,r=n.style,o=s,a=0,h=0,f=e;h<f.length;h++){var u=f[h],c=u.id,l=u.kd,v=i[c];t.uf<s+a+l&&t.ff(2*t.uf);var d=t.value;if(v){var p=void 0===(v=(r[c]||{}).tn)?1:v,m=0,y=1/0,_=-1/0;for(p||(c=u.icon,v=u.bg,y=6*c,_=6*(c+u.Rd+v));m<l;)!p&&y<=m&&m<=_||(d[o+a+m]=1),m+=1}a+=l}return o+a},Rs.prototype.Df=function(){},Rs.prototype.fd=function(t,i){var n=this.Lz,e=yt.tc.Qu,s=[],r=[],o=this._map.ao;o&&(s[0]=o.texture,r[0]=o.maxWidth,r[1]=o.maxHeight),(o=this._map.so.texture)&&(s.push(o),o=o.size,r.push(o[0],o[1]));var a=[],h=[];if(n.done)a=n.De,h=n.sizes;else{for(var f,u=this.Mf.oc(),c=void 0,l=[],v=0,d=0;v<e;)u[v]?(c=(f=this.dd(t,u[v])).texture,l=f.size,d++):(c=s[0],l=r,n.done=!1),a[v]=c,h[2*v]=l[0],h[2*v+1]=l[1],v++;d===e&&(n.done=!0,n.De=a,n.sizes=h)}return{De:a.concat(s),sizes:h.concat(r)}},Rs.prototype.dd=function(t,i){var n=t.gl,e=i.img,s=i.width,r=i.height,o=e;return e&&!e.context&&((o=t.createTexture(e)).bind(n.CLAMP_TO_EDGE,n.LINEAR,n.LINEAR),i.img=o),{texture:o,size:[s,r]}},Rs);function Rs(){this.Lz={De:[],sizes:[]},this._f=null,this.CG=0}var Ns=(Ws.prototype.Ce=function(t,i,n,e,s){if(t){var r=(this.wf=t).size;this._size=r;var o=s.centerCoord,a=void 0===(r=s.Uf)?{}:r,h=void 0===(r=(s.$f,s.Sa))?[0,0]:r;this.Tz(),this.Pz();var f=(s=t.$n).zoom,r=s.viewMode;if(this.Oz(f,i.zooms)){!this._map&&e&&(t=s.projectionId,this._map=e,this.If=yt.V[t],this._view=e.getView(),this.ac=e.z_);var u=(n=n&&n.other).coords,c=n.style,l=n.Nf,n=void 0===(n=n.Fz)?[]:n,v={$n:s,size:this.wf.size,transform:this.If,view:this._view,viewMode:r,centerCoord:o};this.Bz(i);for(var d=0,p=n;d<p.length;d++)for(var m=p[d],y=0;y<m.length;y++)if(a[_=m[y]]){var g=l[_]||{},b=u[_]||{},x=c[_]||{},k=(g.data.extData||{}).Sa||h||[0,0],w=(g.data||{}).txt,M=g.opts||{},C=(x.icon||[])[0]||{},A=C.image,_=yt.jz(x.opacity)?1:M.opacity,S=x.text;if(A&&C&&this.Oz(f,x.icon&&x.icon.zooms)&&(M=(g=this.ac.getImage(A)).img,A={size:[g.width,g.height],opacity:_},z=b.icon.origin,T=b.icon.anchorOffset,g=[(g=Bs.wu(z[0]+k[0],z[1]+k[1],f,v))[0]+T[0],g[1]+T[1]],this.drawImage(M,C,g,A)),w&&S&&this.Oz(f,x.text&&x.text.zooms)){var I={opacity:_,padding:b.padding},z=b.text.origin,T=b.text.offset,b=Bs.wu(z[0]+k[0],z[1]+k[1],f,v),L=(k=S.style).fontSize||12,D=[b[0]+T[0],b[1]+T[1]+L];this.Ez(x.text,b,I);for(var F=w.length,k=!1===k.fold?100:6,H=Math.ceil(F/k),$=Math.floor(F/H),E=0;E<H;E++){var B=E===H-1?F-E*$:$,B=w.substr(E*$,B);this.gp(B,S,D,I),B=5*L/4+3,D[1]=D[1]+B}}}}}},Ws.prototype.Ez=function(t,i,n){var e=this.Nz,r=void 0===(s=yt._.scale)?1:s,o=t.style.backgroundColor,s=(a=n.padding).offsetX,t=a.offsetY,n=a.w,a=a.h,s=i[0]+s,t=i[1]+t;e&&o&&(e.fillStyle=o,e.fillRect(s*r,t*r,n*r,a*r))},Ws.prototype.drawImage=function(t,i,n,e){var s,r,o,a,h,f,u,c=yt._.scale,l=this.Nz;l&&i&&(i.image,h=i.size,u=i.clipOrigin,i.angel,f=i.clipSize,s=void 0===(a=e.opacity)?1:a,r=h[0],o=h[1],i=t.width||r,e=t.height||o,a=f[0],h=f[1],f=u[0],u=u[1],yt.jz(a)&&(a=r),yt.jz(h)&&(h=o),i<a&&(a=i),e<h&&(h=e),l.globalAlpha=s*this.Wz,l.drawImage(t,f,u,a,h,n[0]*c,n[1]*c,r*c,o*c))},Ws.prototype.gp=function(t,i,n,e){var s,r,o,a,h,f,u=yt._.scale,c=void 0===u?1:u,l=this.Nz;l&&(f=void 0===(a=i.style)?{}:a,s=void 0===(h=e.opacity)?1:h,r=f.fontWeight,o=f.fontSize,i=void 0===(u=f.fontFamily)?"sans-serif":u,a=f.fillColor,e=f.strokeColor,u=void 0===(h=f.strokeWidth)?1:h,h=void 0===(h=f.textAlign)?"center":h,f=void 0===(f=f.Gz)?"Alphabetic":f,l.globalAlpha=s,l.globalAlpha=1,l.font=r+" "+o*c+"px "+i,l.textAlign=h,l.textBaseline=f,f=n[0],n=n[1],l.lineJoin="round",e&&u&&(l.strokeStyle=e,l.lineWidth=u,l.strokeText(t,f*c,n*c)),l.fillStyle=a,l.fillText(t,f*c,n*c))},Ws.prototype.Pz=function(){this.canvas,yt._.scale,this._size},Ws.prototype.Tz=function(){this.canvas.width=this.canvas.width},Ws.prototype.reset=function(){this.Pz()},Ws.prototype.destroy=function(){this.Pz()},Ws.prototype.Oz=function(t,i){void 0===i&&(i=[]);var n=i[0]||3,i=i[1]||20;return n<=t&&t<=i},Ws.prototype.Bz=function(t){var i=(i=this._container)||(this._container=this._createContainer(this._map)),n=yt._.scale,s=void 0===(e=t.zIndex)?100:e,r=t.opacity,o=t.visible,t=void 0===(e=t.zooms)?[2,20]:e,e=this.wf.$n.zoom,t=this.Oz(e,t);i.style.display=o&&t&&0!==r?"block":"none",this.Wz=r,r=this._size,i.setAttribute("width",r[0]*n+"px"),i.setAttribute("height",r[1]*n+"px"),i.style.width=r[0]+"px",i.style.height=r[1]+"px",i.style.zIndex=s+""},Ws.prototype._createContainer=function(t){return(t=t.getContainer().querySelector(".amap-layers"))&&t.appendChild(this.canvas),AMap.DomUtil.addClass(this.canvas,"amap-labellayers"),this.canvas},Ws);function Ws(){this._size=[0,0],this.Wz=1;var t=this.canvas=document.createElement("canvas");this.Nz=t.getContext("2d")}var js,Bi=(js=C,yt.Ei(Gs,js),Gs.prototype.Hz=function(t,i,n,e,s,r){this.ac||(this._map=s,this._view=s.getView(),this.ac=s.z_,this.Mf=s.R_,this._viewMode=i.$n.viewMode,this.fz=s.fS(),this._map.isDOMMode()?this.Vz||(this.Vz=new Ns):this.Zz||(this.Zz=new Ps),this.Zz&&this.Zz.Mz({map:s,z_:s.z_,R_:s.R_,$i:t.Zn()}))},Gs.prototype.Kn=function(t,i,n,e,s){this._map.isDOMMode()?this.Yz(n,e,i,this._map,{centerCoord:this.uu}):this.Jh(t,n,{},{})},Gs.prototype.Jz=function(){return{centerCoord:this.uu}},Gs.prototype.vi=function(t){return this.fz?this.fz.vi(t,""):null},Gs.prototype.destroy=function(){this.Zz&&(this.Zz.destroy(),delete this.Zz),this.Vz&&(this.Vz.destroy(),delete this.Vz),this.AG()},Gs.prototype.reset=function(){this.Zz&&this.Zz.reset(),this.Vz&&this.Vz.reset()},Gs.prototype.Jh=function(t,i,n,e){this.Zz.Ce(i,t.context,n,e)},Gs.prototype.Yz=function(t,i,n,e,s){this.Vz.Ce(t,i,n,e,s)},Gs.prototype.SG=function(){var t;return"undefined"!=typeof Int8Array&&(t=new yt.IG("int8",5e5)).value.fill(0),t},Gs.prototype.zG=function(t){this.TG[t]||(this.TG[t]={iterator:0});var i=this.TG[t];return i.LG||(i.LG=this.SG()),i.zz||(i.zz=[]),this.TG[t]},Gs.prototype.AG=function(){var t,i,n=this.TG||{};for(t in n)n.hasOwnProperty(t)&&(delete(i=n[t]).zz,i.od&&(i.od.destroy(),delete i.od),i.iterator=0,i.LG&&i.LG.value.fill(0))},Gs);function Gs(){var t=js.call(this)||this;return t.type="labelsLayer",t.wf=null,t.Ps={},t._viewMode="2D",t.Wf={},t.Bf={},t.TG={},t.uu=[0,0],t}function Zs(t,i,n){var e=t[i];t[i]=t[n],t[n]=e}function Vs(t,i){return t<i?-1:i<t?1:0}var Ys=Js,Ci=Js;function Js(t,i){if(!(this instanceof Js))return new Js(t,i);this.Bc=Math.max(4,t||9),this.Wc=Math.max(2,Math.ceil(.4*this.Bc)),i&&this.Gc(i),this.clear()}function Xs(t,i){Ks(t,0,t.children.length,i,t)}function Ks(t,i,n,e,s){(s=s||rr(null)).ja=1/0,s.Fa=1/0,s.Oa=-1/0,s.Ea=-1/0;for(var r,o=i;o<n;o++)r=t.children[o],Qs(s,t.Zc?e(r):r);return s}function Qs(t,i){return t.ja=Math.min(t.ja,i.ja),t.Fa=Math.min(t.Fa,i.Fa),t.Oa=Math.max(t.Oa,i.Oa),t.Ea=Math.max(t.Ea,i.Ea),t}function qs(t,i){return t.ja-i.ja}function tr(t,i){return t.Fa-i.Fa}function ir(t){return(t.Oa-t.ja)*(t.Ea-t.Fa)}function nr(t){return t.Oa-t.ja+(t.Ea-t.Fa)}function er(t,i){return t.ja<=i.ja&&t.Fa<=i.Fa&&i.Oa<=t.Oa&&i.Ea<=t.Ea}function sr(t,i){return i.ja<=t.Oa&&i.Fa<=t.Ea&&i.Oa>=t.ja&&i.Ea>=t.Fa}function rr(t){return{children:t,height:1,Zc:!0,ja:1/0,Fa:1/0,Oa:-1/0,Ea:-1/0}}function or(t,i,n,e,s){for(var r,o=[i,n];o.length;)(n=o.pop())-(i=o.pop())<=e||(function(t,i,n,e,s){!function t(i,n,e,s,r){for(;e<s;){var o,a,h,f,u;600<s-e&&(o=s-e+1,a=n-e+1,f=Math.log(o),h=.5*Math.exp(2*f/3),u=.5*Math.sqrt(f*h*(o-h)/o)*(a-o/2<0?-1:1),t(i,n,Math.max(e,Math.floor(n-a*h/o+u)),Math.min(s,Math.floor(n+(o-a)*h/o+u)),r));var c=i[n],l=e,v=s;for(Zs(i,e,n),0<r(i[s],c)&&Zs(i,e,s);l<v;){for(Zs(i,l,v),l++,v--;r(i[l],c)<0;)l++;for(;0<r(i[v],c);)v--}0===r(i[e],c)?Zs(i,e,v):Zs(i,++v,s),v<=n&&(e=v+1),n<=v&&(s=v-1)}}(t,i,n||0,e||t.length-1,s||Vs)}(t,r=i+Math.ceil((n-i)/e/2)*e,i,n,s),o.push(i,r,r,n))}Js.prototype={all:function(){return this.qc(this.data,[])},search:function(t){var i=this.data,n=[],e=this.Yc;if(!sr(t,i))return n;for(var s,r,o,a,h=[];i;){for(s=0,r=i.children.length;s<r;s++)o=i.children[s],sr(t,a=i.Zc?e(o):o)&&(i.Zc?n.push(o):er(t,a)?this.qc(o,n):h.push(o));i=h.pop()}return n},Vc:function(t){var i=this.data,n=this.Yc;if(!sr(t,i))return!1;for(var e,s,r,o,a=[];i;){for(e=0,s=i.children.length;e<s;e++)if(r=i.children[e],sr(t,o=i.Zc?n(r):r)){if(i.Zc||er(t,o))return!0;a.push(r)}i=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this.Wc){for(var i=0,n=t.length;i<n;i++)this.Xc(t[i]);return this}var e,s=this.Hc(t.slice(),0,t.length-1,0);return this.data.children.length?this.data.height===s.height?this.Jc(this.data,s):(this.data.height<s.height&&(e=this.data,this.data=s,s=e),this.Kc(s,this.data.height-s.height-1,!0)):this.data=s,this},Xc:function(t){return t&&this.Kc(t,this.data.height-1),this},clear:function(){return this.data=rr([]),this},remove:function(t,i){if(!t)return this;for(var n,e,s,r,o=this.data,a=this.Yc(t),h=[],f=[];o||h.length;){if(o||(o=h.pop(),e=h[h.length-1],n=f.pop(),r=!0),o.Zc&&-1!==(s=function(t,i,n){if(!n)return i.indexOf(t);for(var e=0;e<i.length;e++)if(n(t,i[e]))return e;return-1}(t,o.children,i)))return o.children.splice(s,1),h.push(o),this.Qc(h),this;r||o.Zc||!er(o,a)?e?(n++,o=e.children[n],r=!1):o=null:(h.push(o),f.push(n),n=0,o=(e=o).children[0])}return this},Yc:function(t){return t},tf:qs,if:tr,toJSON:function(){return this.data},ef:function(t){return this.data=t,this},qc:function(t,i){for(var n=[];t;)t.Zc?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},Hc:function(t,i,n,e){var s,r=n-i+1,o=this.Bc;if(r<=o)return Xs(s=rr(t.slice(i,n+1)),this.Yc),s;e||(e=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,e-1))),(s=rr([])).Zc=!1,s.height=e;var a,h,f,u,c=Math.ceil(r/o),l=c*Math.ceil(Math.sqrt(o));for(or(t,i,n,l,this.tf),a=i;a<=n;a+=l)for(or(t,a,f=Math.min(a+l-1,n),c,this.if),h=a;h<=f;h+=c)u=Math.min(h+c-1,f),s.children.push(this.Hc(t,h,u,e-1));return Xs(s,this.Yc),s},nf:function(t,i,n,e){for(var s,r,o,a,h,f,u,c,l;e.push(i),!i.Zc&&e.length-1!==n;){for(f=u=1/0,s=0,r=i.children.length;s<r;s++)h=ir(o=i.children[s]),c=t,l=o,(c=(Math.max(l.Oa,c.Oa)-Math.min(l.ja,c.ja))*(Math.max(l.Ea,c.Ea)-Math.min(l.Fa,c.Fa))-h)<u?(u=c,f=h<f?h:f,a=o):c===u&&h<f&&(f=h,a=o);i=a||i.children[0]}return i},Kc:function(t,i,n){var e=this.Yc,n=n?t:e(t),s=[];for((e=this.nf(n,this.data,i,s)).children.push(t),Qs(e,n);0<=i&&s[i].children.length>this.Bc;)this.af(s,i),i--;this.sf(n,s,i)},af:function(t,i){var n=t[i],e=n.children.length,s=this.Wc;this.rf(n,s,e),e=this.hf(n,s,e),(e=rr(n.children.splice(e,n.children.length-e))).height=n.height,e.Zc=n.Zc,Xs(n,this.Yc),Xs(e,this.Yc),i?t[i-1].children.push(e):this.Jc(n,e)},Jc:function(t,i){this.data=rr([t,i]),this.data.height=t.height+1,this.data.Zc=!1,Xs(this.data,this.Yc)},hf:function(t,i,n){for(var e,s,r,o,a,h,f,u,c,l=r=1/0,v=i;v<=n-i;v++)a=e=Ks(t,0,v,this.Yc),h=s=Ks(t,v,n,this.Yc),0,f=Math.max(a.ja,h.ja),u=Math.max(a.Fa,h.Fa),c=Math.min(a.Oa,h.Oa),h=Math.min(a.Ea,h.Ea),u=Math.max(0,c-f)*Math.max(0,h-u),s=ir(e)+ir(s),u<l?(l=u,o=v,r=s<r?s:r):u===l&&s<r&&(r=s,o=v);return o},rf:function(t,i,n){var e=t.Zc?this.tf:qs,s=t.Zc?this.if:tr;this.lf(t,i,n,e)<this.lf(t,i,n,s)&&t.children.sort(e)},lf:function(t,i,n,e){t.children.sort(e);for(var s,r=this.Yc,o=Ks(t,0,i,r),a=Ks(t,n-i,n,r),h=nr(o)+nr(a),f=i;f<n-i;f++)s=t.children[f],Qs(o,t.Zc?r(s):s),h+=nr(o);for(f=n-i-1;i<=f;f--)s=t.children[f],Qs(a,t.Zc?r(s):s),h+=nr(a);return h},sf:function(t,i,n){for(var e=n;0<=e;e--)Qs(i[e],t)},Qc:function(t){for(var i,n=t.length-1;0<=n;n--)0===t[n].children.length?0<n?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():Xs(t[n],this.Yc)},Gc:function(t){var i=["return a"," - b",";"];this.tf=new Function("a","b",i.join(t[0])),this.if=new Function("a","b",i.join(t[1])),this.Yc=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},Ys.default=Ci;var ar=(hr.prototype.Ns=function(t,i){void 0===i&&(i={});var n=i.DG,e=i.transform,s=i.view,r=i.centerCoord,o=i.FG,a=i.context,h=i.Uf,f=i.bounds,u=i.Iz;return this._map||(this._map=i.map,this.b$=i.fz,this.Mf=i.R_),this.wf=n,this.aa=n.$n,this.If=e,this._view=s,this._viewMode=n.$n.viewMode,this.uu=r,this.ir=f,this.HG=o,this.Wf=h,this.bo=u,this.Kz(),this.Cf||(this.Cf=a.fe(this.Lf,1)),this.Xf=i.tZ,this.Kf(t,i),this.Qf(this.Xf,i),this.ip(a)},hr.prototype.destroy=function(){this.Kz(),delete this.Xf,this.Cf&&(this.Cf.context.deleteBuffer(this.Cf),delete this.Cf)},hr.prototype.Kf=function(t,i){void 0===i&&(i={});var n=this.aa,e=(n||{}).zoom,s=void 0===e?20:e,r=this.If,o=this.Xf,a=yt.tc._n,h=i.bounds;if(n){for(var f={},u=n.rotation||0,c=0,l=t;c<l.length;c++){var v=l[c],d=v.rank;f[d]||(f[d]=[]),f[d].push(v)}for(var g,b=Object.keys(f),t=b.length,x=0,k=this._map.getMapState().panning,w=t-1;0<=w;w--)for(var M=0,C=f[b[w]];M<C.length;M++)for(var A=C[M],S=A.name,I=A.$G,z=A.CO,T=A.EG,L=A.BG,D=A.path,F=A.positionType||"absolute",H=A.zooms,$=A.rank,E=A.style,B=A.Bp,O=Bs.kz([[-A.Sa[0],-A.Sa[1]]],B,s,{centerCoord:this.uu})[0],P=A.key,O=Bs.MG(B,O),p=E.fontSize,m=E.fillColor,y=E.strokeColor||a.Gp,_=1.3*p,R=x=0,N=this.Zp(D,_,{zoom:s,transform:r,bounds:h,Bp:B,BG:L,positionType:F});R<N.length;R++){var W=N[R];(W.length||0)<2||(g={transform:r,fontSize:p,qp:_,zoom:s,name:S,CO:z,EG:T,BG:L,Sa:O,bounds:h,panning:k,nF:u},(!(W=this.Yp(W,g,x++<1)).Id||W.pos.length&&W.pos[0].length)&&(g={name:S,$G:I,CO:z,rank:$,fontSize:p,fillColor:m,strokeColor:y,zooms:H,Sa:O,key:P,Bp:B},this.Vp(W,o,g)))}return o}},hr.prototype.Zp=function(t,i,n){void 0===t&&(t=[]),void 0===i&&(i=20),void 0===n&&(n={});var e,s,l,r=yt.tc.Dp,o=r.Ad,a=r.Bd,h=n.zoom,f=n.Bp,u=n.BG,n=n.positionType,c=0,v=t.length-1,d=[[]],p=h<12?10:o;if(!(o=this.aa))return d;for(var m={$n:o,size:this.HG,transform:this.If,view:this._view,viewMode:this._viewMode,centerCoord:this.uu,positionType:n},y=0;y<v-3;y+=2){var g=(_=Bs.kz([[t[y],t[y+1]],[t[y+2],t[y+3]]],f,h,{centerCoord:this.uu}))[0],b=_[1],x=k,k=0===y?"2D"===this._viewMode?this.If.transform(g[0],g[1],h):Bs.wu(g[0],g[1],h,m):w,w="2D"===this._viewMode?this.If.transform(b[0],b[1],h):Bs.wu(b[0],b[1],h,m),M=c,_=(l=yt.bf.Sd(k,w))/i,g=void 0;p<(c+=l)&&(M/p<.3&&2<=l/p&&(k=yt.bf.OG(k,w,p/l)),g=x?(b=yt.Sp.Ip(k,x),x=yt.Sp.Ip(w,k),yt.Sp.Qj(b,x)):0,e?e=yt.bf.Ed([k,w],u):s=e=yt.bf.Ed([k,w],u),g<=a&&e===s&&(1<_||h<12&&.6<=_)?d[d.length-1].push(k):(e=s=void 0)!==d[d.length-1][0]&&d.push([]))}for(y=0;y<d.length;y++){var C=d[y];yt.bf.Ed(C,u)&&d[y].reverse()}return d},hr.prototype.Yp=function(t,i,n){void 0===t&&(t=[]),void 0===i&&(i={}),void 0===n&&(n=!1);for(var e,s,r=yt.tc.Dp.Td,o=(i.name,i.transform),a=i.fontSize,h=void 0===a?12:a,f=void 0===(a=i.zoom)?20:a,u=void 0===(a=i.BG)?0:a,c=void 0===(a=i.CO)?[]:a,l=i.EG,v={index:0,Id:0,pos:[],Dd:[],Pd:[],points:[],EG:[]},d=(i.qp,0),p=t.length,m=c.length,y=!1,_=0,g=0,b=!1,x={viewMode:this._viewMode,transform:o,view:this._view};_<p-1&&g<30;){g++;var k=v.index;v.pos[k]||(v.pos[k]=[],v.Pd[k]=[],v.points[k]=[],v.Dd[k]=[]);var M=b?z:t[_],C=t[_+1],w=l[c[v.Id]],S=h/24,I="ch"===u,d=I?1.3*h:w&&w.char[4]*S*1.3,z=y?yt.bf.jd(z,t[_],t[_+1],d):(s=yt.bf.getAngle(M,C),yt.bf.Od(M,s,d)),S=v.index;if(!(v.Id<m&&n)){n=!0,v.index++,v.Id=0,_=this.zd(t,_+1,r),y=b=!1;break}s="2D"===this._viewMode?(e=o.Xs(M[0],M[1],f),o.Xs(z[0],z[1],f)):(e=Bs.nt(M[0],M[1],f,x),Bs.nt(z[0],z[1],f,x)),s=yt.bf.Fd(e,s,1)[0],w=yt.bf.Fd(M,z,1)[0],I=yt.bf.Nd(M,z,I?"":"x"),v.pos[S].push(s),v.points[S].push(w),v.Pd[k].push(I),v.Id++,v.Id===m-1&&(v.pos[S].$d=!1,v.EG[S]=l),yt.bf.Sd(z,C)<d?(_++,b=y=!0):y=!(b=!0)}return v},hr.prototype.Vp=function(t,i,n){void 0===t&&(t={}),void 0===n&&(n={});for(var e,s,r,o,a,h=n.name,f=void 0===h?"":h,u=void 0===(h=n.$G)?[]:h,c=void 0===(h=n.CO)?[]:h,l=void 0===(h=n.rank)?1:h,v=void 0===(h=n.fontSize)?12:h,d=n.fillColor,p=n.strokeColor,m=n.zooms,y=n.Sa,_=n.key,g=n.Bp,b=c.length,x=t.pos.length,k=[],w=!1,M=0,C=0;C<x;C++)if(e=t.pos[C]||[],t.points[C],o=t.Pd[C]||[],a=t.EG[C]||[],s=e.$d,e.length===b){for(t.Dd[C],M=0;M<b;M++){if(!(r=e[S=s?b-1-M:M])||!this.Ud(o,M)){w=!0;break}A=u&&u.length?f.substring.apply(f,u.slice(M,M+2)):f.substr(M,1);var A={data:{id:yt.Util.stamp(this),position:r,name:f,extData:{Sa:y,key:_,Bp:g,CO:c.slice(M,M+1)},txt:A,rank:l},opts:{type:"normal",angle:o[S]||0,zooms:m,text:{direction:"center",offset:[0,0],EG:a,style:{fontSize:v,fillColor:d,strokeColor:p,strokeWidth:2}}}},S=this._map.getLayerByClass("AMap.MaskLayer");if((S=S&&S.getRender())&&!S.EH(A.data.position,this.wf))return!1;k.push(A)}w||(i[_]||(i[_]=[]),i[_].push(k))}},hr.prototype.zd=function(t,i,n){void 0===t&&(t=[]),void 0===i&&(i=0),void 0===n&&(n=0);for(var e=0,s=t.length-1,r=i;r<s;r++){var o=t[r],a=t[r+1];if(n<=(e+=yt.bf.Sd(o,a)))break}return r},hr.prototype.Ud=function(t,i){void 0===t&&(t=[]),void 0===i&&(i=0);var n=yt.tc.Dp.Bd,e=i-1;return e<0||(i=t[i],e=t[e],!(Math.abs(i-e)>=n))},hr.prototype.Qf=function(t,i){void 0===i&&(i={});var n=this.aa;if(n){var e,s=this.b$,r=n.zoom,o=void 0===r?20:r,a=i.bounds,h=this.Gf,f=!1,u=0,c=[];for(e in t)if(t.hasOwnProperty(e))for(var l=0,v=t[e];l<v.length;l++){for(var d=v[l],p=0,m=d;p<m.length;p++){var y,g=m[p],b=g.data,x=g.opts,k=b.txt,w=b.position,b=(g=b.extData).Bp,b=Bs.kz([yt.Sp.multiply(g.Sa,-1)],b,o,{centerCoord:this.uu})[0],x=(x=x.text.style)&&x.fontSize,_=[];if((b=(yt.Sp.add(w,b),Bs.gz(w,a)))&&(y=Bs.wu(w[0],w[1],o,{$n:n,size:this.HG,transform:this.If,view:this._view,viewMode:this._viewMode,centerCoord:this.uu,positionType:"relative"}),y=this.Xp(y,x),y=this.b$.iC(y,{padding:5,id:k,type:"road"}),(_=s.search(y)).length||(_=h.search(y))),!b){f=!0;break}for(var M=0,C=_.length;M<C;){if(this.Wf[_[M].id]||"road"===_[M].type){f=!0;break}M++}y&&c.push(y)}if(!f){u+=d.length;for(var A=0,S=c;A<S.length;A++){var I=S[A];h.Xc(I)}c=[]}d.hide=f,f=!1}this.Jp=u}},hr.prototype.ip=function(t){var i=yt.tc.Qu,n=yt.tc.sp,e=yt.tc.Kp,s=this.Xf||{},o=0;if((r=this.aa)&&this._map){var h,u,p,y,_,g,b,x,k,w,M,C,A,r,D,F,H,$,E,B,O,P,R,S=r.zoom,I=this.bo,z=this._map.getMapState().zooming,T=void 0,T=(1e5<72*(r=this.Jp)&&this.Qp.ff(72*r),this.Qp.value),L=[],N=void 0,W=void 0,j=void 0,G=void 0,U=0;for(A in s)if(s.hasOwnProperty(A))for(var Z=s[A],V=Z.length,Y=0;Y<V;Y++)if(!(C=Z[Y]).hide)for(var J=0,X=C;J<X.length;J++)for(var K,ut=X[J],q=ut.data,ut=ut.opts,it=(q.txt,q.position),nt=(D=q.extData).CO,et=D.Bp,st=ut.angle||0,rt=ut.zooms,ot=(F=ut.text).EG||{},at=(H=F.style).fontSize,ht=H.fillColor,ft=H.strokeColor,ut=H.strokeWidth||0,ct=($=this.td(at,ut)).gamma,lt=$.ed,vt=$.backgroundColor,dt=$.strokeWidth,pt=$.nd,mt=0;mt<1;mt++)(E=ot[g=nt]||{index:yt.tc.IB,char:null===(K=this._map.yH)||void 0===K?void 0:K.LB(A)[g],pos:{startX:0,startY:0}})&&E.char&&(B=E.index,O=E.char,P=it[mt],R=it[mt+1],P&&R&&O&&(h=rt[0],M=rt[1],N=at/e.size,z&&S<I&&(N/=Math.pow(2,I-S)),u=O[0],W=O[1],b=O[2],x=O[3],k=O[5],w=O[6],p=e.buffer,K={x:-(at/24*(O[4]+yt.tc.ic))/2,y:-at/2},0<u&&0<W&&(_=+((y=K.x)+(b-p)*N),g=+(y+(b-p+(u+=2*p))*N),b=(y=K.y)-x*N,x=+(y+((W+=2*p)-x)*N),G=j=0,i<=B&&(j+=E.pos.startX,G+=E.pos.startY),k=j+k,w=G+w,T.set([_,b,k,w,P,R,B,2,h,M,0,st,g,b,k+u,w,P,R,B,2,h,M,0,st,_,x,k,w+W,P,R,B,2,h,M,0,st,_,x,k,w+W,P,R,B,2,h,M,0,st,g,b,k+u,w,P,R,B,2,h,M,0,st,g,x,k+u,w+W,P,R,B,2,h,M,0,st],U),U+=72,M=12*o*6,L.push([at,[P,R],st,ht,ft,ct,p,pt,lt,vt,dt,M,72+M,D.key,et]),o++)));return(r=this.u_)?r.update(T):r=this.u_=new yt.yp(t,T,n),{pp:L,zs:r,od:this.Cf}}return{pp:[],od:null,zs:null}},hr.prototype.Xp=function(t,i){void 0===i&&(i=12);var n=1.3*i,i=1.3*i;return{x:(t=[t[0]-n/2,t[1]-i/2])[0],y:t[1],width:n,height:i}},hr.prototype.td=function(t,i){void 0===t&&(t=12),void 0===i&&(i=0);var n=yt.tc.ec,e=yt.tc.Cd,s=yt.tc.Ld,r=yt.tc._n,o=0,s=t<12?e:s;return i&&(o=s*(1-(i=10<i*yt._.scale?10:i)/10.1)),{gamma:1.4142*(n<t||1<yt._.scale?1.7:1.5)/t,nd:o,ed:s-1/256*(yt._.scale-1),backgroundColor:r.Gp,strokeWidth:i}},hr.prototype.Kz=function(){this.Gf&&this.Gf.clear()},hr);function hr(){this._viewMode="2D",this.Gf=Ys(),this.Cf=null,this.u_=null,this.Jp=0,this.bo=20,this.Xf={},this.Lf=new Uint8Array(1e5).fill(1),this.Qp=new yt.IG("float32",1e5)}(ji={})[yt.PG.id]=yt.PG,ji[yt.RG.id]=yt.RG;var fr,ur=(fr=Bi,yt.Ei(cr,fr),cr.prototype.Hz=function(t,i,n,e,s,r){if(e&&i){if(fr.prototype.Hz.call(this,t,i,n,e,s,r),s=i.$n.zoom,e&&i&&r.visible&&r.opacity&&yt.Util.dS(s,r.zooms)){var o=[],a=!0,h=void 0;this.NG={};for(var f=0;f<e.length;f++){for(var u=e[f],c=u.tiles||[],l=0;l<c.length;l++){var v=c[l];o.push(v)}c.length&&(a=a&&u.fo),h=u.Ca}for(var d={},p=0,m=o;p<m.length;p++){var y=m[p];d[y.zo.key]=y}if((this.Xz=a)&&(this.vf=Object.keys(d),this.mf=d,this.mf.yf=h||[]),!(r=this.vf))return;for(var _,g=void 0,b=0,x=r;b<x.length;b++)for(var w=x[b],w=this.mf[w],M=0,C=Array.isArray(w.data)?w.data:[w.data];M<C.length;M++)if((g=C[M])&&g.labels){if(_=yt.bf.xf(g.labels,this.mf.yf),!this._map.isDOMMode())for(var A=0,S=_;A<S.length;A++)S[A].upload(t.context);g.gf=_}return i=(r=i.$n).projectionId,r=r.centerCoord,this.If=yt.V[i],this.uu=yt.lcs.getLocalByCoord([r[0],r[1]]).center,this.Ps=this.Pf(this.mf)}return null}},cr.prototype.Kn=function(t,i,n,e,s){var r,o,a,h,f,u=(this.wf=n).$n,c=this.vf,l=this.Zz;c&&u&&(r=t.context,o=this.fz,(f=this._map)&&(a=f.qz(),h=f.Qz(),f=this._map.isDOMMode(),a&&(this.Bf=o.$f,this.Wf=o.Uf,f?this.Yz(n,e,i,this._map,{centerCoord:this.uu,Uf:this.Wf,$f:this.Bf}):this.Jh(t,n,c)),f||(c=(t=this._map.getMapState()).panning,f=t.zooming,t=this.Ps,h&&(t.Vf&&!f&&(c||(this.Xf={}),c=Bs.getBounds(u,{zoom:u.zoom,centerCoord:this.uu,view:this._view,transform:this.If,viewMode:this._viewMode}),this.bo=n.$n.zoom,u={map:this._map,fz:this.fz,R_:this.Mf,DG:n,transform:this.If,view:this._view,centerCoord:this.uu,FG:n.size,context:r,Uf:this.Wf,bounds:c,Iz:this.bo,tZ:this.Xf},c=this.Jf(this.mf),this.tp=this.WG.Ns(c,u)),l.Cz(n,r,this.mf,{$z:this.tp},{Az:this.vf,Iz:this.bo,centerCoord:this.uu})),i.fo&&this.Xz&&this._map.np(),l.Lz.done&&this._map.commonWordTextureLoaded())))},cr.prototype.destroy=function(){delete this.tp,delete this.kp,delete this.vf,delete this.mf,fr.prototype.destroy.call(this)},cr.prototype.reset=function(){this.Xf={},this.tp.zs&&(this.tp.pp=[]),fr.prototype.reset.call(this)},cr.prototype.Jh=function(t,i,n){var e,s=this.Zz,r=t.context;if(this.Ps.lp){this.qf(r,this.mf);for(var o=0;o<n.length;o++){var a,h=n[o];if((a=this.mf[h])&&a.data){h=Array.isArray(a.data)?a.data:[a.data];var f=this._map.yH.xH(a.zo.key)||(null===(u=this._map.I_)||void 0===u?void 0:u.getImage("emptyTexture")),u=a.type,c=(u=this.zG(u)).od,l=u.zz,v=u.iterator;if(c)if(f){for(var d=0,p=h;d<p.length;d++){e=p[d],y=a.Sa;var m=e.gf,y=Bs.MG(a.zo.z,y);if(m)for(var _=0;_<m.length;_++)var g=m[_],v=s.Ce(i,t.context,{Rz:g.rp,buffer:g.buffer,od:c.buffer,zz:l},{iterator:v,Sa:y,oo:t,CH:f})}u.iterator=v}else console.error("no staticSDFTileTexture")}}}},cr.prototype.Pf=function(t){var n=(i=this.wf)&&i.$n;if(!n)return{};for(var e,s,r,o,a,h,f,c,l=n&&n.optimalZoom||20,v=n&&n.zoom||20,d=!1,p=0,m=Bs.getBounds(n,{zoom:l,centerCoord:this.uu,view:this._view,transform:this.If,viewMode:this._viewMode}),y=yt.tc.Mp,i=yt.tc.Rp,_=20<l?20:l<3?3:l,g=this.vf,b=g.length,x=[y,i],k={},w={},M={},C={},A=n.zoom,S=!0,I=0;I<b;I++){r=t[g[I]];for(var z=0,T=Array.isArray(r.data)?r.data:[r.data];z<T.length;z++)if((c=T[z])&&c.gf)for(var L=0,D=c.gf;L<D.length;L++)if(a=(o=D[L]).coords){h=o.Nf,f=o.zp[_]||[],p+=o.rp.up;for(var F=0,H=f;F<H.length;F++){var $=H[F],S=!1,E=h[$],B=a[$],O=r.Sa,O=Bs.MG(r.zo.z,O),u=yt.Sp.add(B.origin,O);Bs.gz(u,m)||k[$]?(s=(e=h[$].data.extData).Lp?this._map.mapStyle.dn(e.Lp,e.Ap,v):null,u=(E.opts||{}).zooms||x,k[$]||!(A<u[0]||u[1]<A||e.Lp&&!s)?(C[$]&&delete this.Bf[$],u=o.style,k[$]=E,w[$]=B,M[$]=u[$],e.Sa=O,M[$].tn=!s||s.tn,M[$].in=!!s&&s.in,d=!0):(this.Bf[$]||(C[$]=1),this.Bf[$]=1)):(this.Bf[$]||(C[$]=1),this.Bf[$]=1)}}}return S&&(d=!0),{Vf:d,lp:p,Nf:k,coords:w,style:M}},cr.prototype.qf=function(t,i){var n,e=this.Zz,s=this.vf,r=(this.Ps.lp||0)/12,o={};if(r){this.AG();for(var a=0,h=s;a<h.length;a++){var f,u=(f=i[h[a]]).type,c=this.zG(u);c.LG.ff(r);var l=(l=o[u])||(o[u]={start:0,end:0});if(f)for(var v=0,d=Array.isArray(f.data)?f.data:[f.data];v<d.length;v++){var p=d[v].gf,m=this.Ps.style||{};if(p)for(var y=0,_=p;y<_.length;y++)for(var g,b,x=(b=(g=_[y].rp)&&g.pp).length,k=0;k<x;k++)n=b[k].dp,l.start=l.end,l.end=e.Dz(c.LG,this.Wf,{dp:n,style:m,start:l.start}),c.zz.push({start:l.start,end:l.end})}}var w,M,C,A,S=this.TG;for(w in S)S.hasOwnProperty(w)&&(C=(M=S[w]).od,A=M.LG.value,C?C.update(A):C=new yt.yp(t,A,1),M.od=C)}},cr.prototype.Jf=function(t){var i=yt.tc.Op,n=this.wf;if(n){for(var e,s,r,o,a,h=n.$n,f=h&&h.zoom,u=[],c=this.vf,l=c.length,v=this.Xf,d=0;d<l;d++)for(var p=t[c[d]],m=0,y=Array.isArray(p.data)?p.data:[p.data];m<y.length;m++)if(o=y[m],f&&o&&o.XE&&(o.road||o.Dh,a=o.XE,e=p.Sa,s=p.zo.key,r=p.zo.z,!v[s]))for(var _=0,g=a;_<g.length;_++){var b=g[_],x=Bs.wu(b.distance,0,f,{$n:h,size:n.size,transform:this.If,view:this._view,viewMode:this._viewMode,centerCoord:this.uu});Math.abs(x[0]-x[1])<i||(b.Sa=e,b.key=s,b.Bp=r,u.push(b))}return u}},cr);function cr(){var t=fr.call(this)||this;return t.type="nebula-labelslayer",t.Xz=!1,t.l_="inner",t.vf=[],t.mf={},t.bo=20,t.Xf={},t.tp={pp:[],od:null,zs:null},t.kp={},t.NG={},t.WG=new ar,t}var lr=(vr.prototype.render=function(t,i,n){t._map&&(this.Wx(t,i,n),this.Gx(t,i,n))},vr.prototype.qx=function(t,i,n){var e=t._getDetalLocal(i);if((s=t._opts).fillColor&&(r="function"==typeof s.fillColor?yt.Util.color2RgbaArray(s.fillColor(n)):yt.Util.color2RgbaArray(s.fillColor))){var r=r.slice(0,3),s="function"==typeof s.fillOpacity?s.fillOpacity(n):s.fillOpacity;return r.push(s),{u_offset:t.zx,u_color:r,u_matrix:i.$n.mvpMatrix,u_localDeltaCenter:e,u_skyHeight:i.$n.skyHeight,u_viewHeight:i.$n.size[1]}}},vr.prototype.Vx=function(t,i,n){var e=t._getDetalLocal(i),s=t._opts;if(s.strokeColor){var r="function"==typeof s.strokeColor?yt.Util.color2RgbaArray(s.strokeColor(n)):yt.Util.color2RgbaArray(s.strokeColor);if(r)return(r=r.slice(0,3)).push(s.strokeOpacity),n=this.Xx(t),{u_color:r,u_matrix:i.$n.mvpMatrix,u_localDeltaCenter:e,u_width:s.strokeWeight,u_offset:t.zx,u_meter_per_pixel:i.$n.resolution,u_dash:n.dash,u_dashType:n.Jx,u_border:!1,u_skyHeight:i.$n.skyHeight,u_viewHeight:i.$n.size[1]}}},vr.prototype.Wx=function(t,i,n){if(t.Dx){var e=t.Dx,s=t.XB;if(e.upload(n.context),e.uploaded&&e.zs&&t.visible){var r=e.zs,o=n.Wn();o.context.getExtension("OES_element_index_uint");for(var a=0,h=s.jc.length;a<h;a++){var f,u=this.qx(t,i,a);u&&(f=s.jc[a],o.Ce(u,{a_pos:{buffer:r,type:"vec2",Re:r.size,offset:0}},f.length,e.Pc,void 0,void 0,E.Si,void 0,void 0,f.offset))}}}},vr.prototype.Gx=function(t,i,n){if(t.Px){var e=t.Px,s=t.qB;if(e.upload(n.context),e.uploaded||e.zs){var r=e.zs.buffer;if(t.visible){var o=n.Xn();o.context.getExtension("OES_element_index_uint");for(var a=0,h=s.jc.length;a<h;a++){var f,u=this.Vx(t,i,a);u&&(f=s.jc[a],o.Ce(u,{a_pos:{buffer:r,type:"vec2",Re:r.size,offset:0},a_normal:{type:"vec2",buffer:r,Re:r.size,offset:8},a_distance:{type:"float",buffer:r,Re:r.size,offset:16},a_dir:{type:"vec2",buffer:r,Re:r.size,offset:20}},f.length,e.Pc.buffer,void 0,void 0,E.Si,void 0,void 0,f.offset))}}}}},vr.prototype.Xx=function(t){var i=t._opts,n=2,t=[1,0,0];return"dashed"===i.strokeStyle&&i.strokeDasharray&&(t=3<=i.strokeDasharray.length?(n=3,i.strokeDasharray.slice(0,3)):(n=2,yt.Pt(i.strokeDasharray.slice(0),[0]))),{Jx:n,dash:t}},vr);function vr(){}var dr=(pr.prototype.render=function(t,i,n){var e;t._map&&(e=t._opts,this.Tc(t,i,n),this.Ic(t,i,n),e.lineGradient&&this.nC(t,i,n),e.showDir&&this.N_(t,i,n))},pr.prototype.fb=function(t,i){var n=t._getDetalLocal(i),e=t._opts,s=e.strokeWeight||-1;if(!(s<=0)&&!(e.strokeOpacity<=0)&&e.strokeColor){var r=yt.Util.color2RgbaArray(e.strokeColor);if(r){r=r.slice(0,3);var o=this.Xx(t);return r.push(e.strokeOpacity),{u_color:r,u_matrix:i.$n.mvpMatrix,u_meter_per_pixel:i.$n.resolution,u_width:s,u_offset:t.zx,u_localDeltaCenter:n,u_dash:o.dash,u_dashType:o.Jx,u_skyHeight:i.$n.skyHeight,u_viewHeight:i.$n.size[1]}}}},pr.prototype.pb=function(t,i){var n=t._getDetalLocal(i),e=t._opts;if(e.outlineColor){var s=yt.Util.color2RgbaArray(e.outlineColor);if(s){(s=s.slice(0,3)).push(e.strokeOpacity);var r=e.strokeWeight+2*e.borderWeight;if(!(r<=0||e.strokeOpacity<=0))return e=this.Xx(t),{u_color:s,u_matrix:i.$n.mvpMatrix,u_localDeltaCenter:n,u_width:r,u_offset:t.zx,u_meter_per_pixel:i.$n.resolution,u_dash:e.dash,u_dashType:e.Jx,u_skyHeight:i.$n.skyHeight,u_viewHeight:i.$n.size[1]}}}},pr.prototype.B_=function(t,i,n){if(t._map){var e=t._getDetalLocal(i),s=t._opts,r=s.strokeWeight;if(!(r<=0)){var o=Boolean(s.dirImg);if(n=o?(t.U_(n),t.E_):t._map.getImage("AMapArrow"))return s=yt.Util.color2RgbaArray(s.dirColor).slice(0,3),{u_matrix:i.$n.mvpMatrix,u_meter_per_pixel:i.$n.resolution,u_meter_per_pixel_optimal:i.$n.optimalResolution,u_width:r,u_offset:t.zx,u_localDeltaCenter:e,u_texture:n,u_iconsize:n.size,u_custom_img_flag:o,u_dir_color:s,u_skyHeight:i.$n.skyHeight,u_viewHeight:i.$n.size[1]}}}},pr.prototype.oC=function(t,i,n){if(t._map){var e=t._getDetalLocal(i),s=t._opts;if(s.lineGradient){var r=s.strokeWeight;if(!(r<=0))return t.rC||t.aC(n,s.lineGradient),{u_matrix:i.$n.mvpMatrix,u_meter_per_pixel:i.$n.resolution,u_width:r,u_offset:t.zx,u_localDeltaCenter:e,u_texture:t.rC,u_total_distance:t.sC,u_skyHeight:i.$n.skyHeight,u_viewHeight:i.$n.size[1]}}}},pr.prototype.U_=function(t,i){t.F_&&(t.E_||(t.E_=i.createTexture(t.F_,{Zi:!0}),t.E_.bind(i.gl.CLAMP_TO_EDGE,i.gl.LINEAR,i.gl.LINEAR)))},pr.prototype.aC=function(t,i,n){t.rC||(n=function(t){var i=document.createElement("canvas");i.height=1,i.width=4096;for(var n=i.getContext("2d"),e=n.createImageData(4096,1),s=0,r=0;r<4096;r++){for(var o=void 0;s<t.length;s++){if(s===t.length-1){o=t[s][1];break}if(!(4096*t[s+1][0]<r)){o=t[s][1];break}}o=t[s][1];var a=yt.Util.color2RgbaArray(o);e.data[4*r]=255*a[0],e.data[4*r+1]=255*a[1],e.data[4*r+2]=255*a[2],e.data[4*r+3]=255*a[3]}return n.putImageData(e,0,0),i}(n.values),t.rC=i.createTexture(n,{Zi:!0}),i=i.gl,t.rC.bind(i.CLAMP_TO_EDGE,i.NEAREST,i.NEAREST_MIPMAP_NEAREST))},pr.prototype.Xx=function(t){var i=t._opts,n=2,t=[1,0,0];return"dashed"===i.strokeStyle&&i.strokeDasharray&&(t=3<=i.strokeDasharray.length?(n=3,i.strokeDasharray.slice(0,3)):(n=2,yt.Pt(i.strokeDasharray.slice(0),[0]))),{Jx:n,dash:t}},pr.prototype.N_=function(t,i,n){var e,s;t.Px&&((e=t.Px).upload(n.context),e.uploaded&&e.zs&&t.visible&&(s=e.zs.buffer,(i=this.B_(t,i,n.context))&&((n=n.M_()).context.getExtension("OES_element_index_uint"),n.Ce(i,{a_pos:{buffer:s,type:"vec2",Re:s.size,offset:0},a_normal:{type:"vec2",buffer:s,Re:s.size,offset:8},a_distance:{type:"float",buffer:s,Re:s.size,offset:16},a_dir:{type:"vec2",buffer:s,Re:s.size,offset:20}},3*e.Qx.length,e.Pc.buffer,void 0,void 0,E.Si,void 0,void 0,0),n.Ni())))},pr.prototype.Ic=function(t,i,n){var e,s;t.Px&&((e=t.Px).upload(n.context),e.uploaded&&e.zs&&t.visible&&(s=e.zs.buffer,(i=this.fb(t,i))&&((n=n.Xn()).context.getExtension("OES_element_index_uint"),n.Ce(i,{a_pos:{buffer:s,type:"vec2",Re:s.size,offset:0},a_normal:{type:"vec2",buffer:s,Re:s.size,offset:8},a_distance:{type:"float",buffer:s,Re:s.size,offset:16},a_dir:{type:"vec2",buffer:s,Re:s.size,offset:20}},3*e.Qx.length,e.Pc.buffer,void 0,void 0,E.Si,void 0,void 0,0),n.Ni())))},pr.prototype.nC=function(t,i,n){var e,s;t.Px&&((e=t.Px).upload(n.context),e.uploaded&&e.zs&&t.visible&&(s=e.zs.buffer,(i=this.oC(t,i,n.context))&&((n=n.sS()).context.getExtension("OES_element_index_uint"),n.Ce(i,{a_pos:{buffer:s,type:"vec2",Re:s.size,offset:0},a_normal:{type:"vec2",buffer:s,Re:s.size,offset:8},a_distance:{type:"float",buffer:s,Re:s.size,offset:16},a_dir:{type:"vec2",buffer:s,Re:s.size,offset:20}},3*e.Qx.length,e.Pc.buffer,void 0,void 0,E.Si,void 0,void 0,0),n.Ni())))},pr.prototype.Tc=function(t,i,n){var e,s=t._opts;s&&s.isOutline&&t.Px&&((e=t.Px).upload(n.context),(e.uploaded||e.zs)&&(s=e.zs.buffer,!t.visible||(i=this.pb(t,i))&&((n=n.Xn()).context.getExtension("OES_element_index_uint"),n.Ce(i,{a_pos:{buffer:s,type:"vec2",Re:s.size,offset:0},a_normal:{type:"vec2",buffer:s,Re:s.size,offset:8},a_distance:{type:"float",buffer:s,Re:s.size,offset:16},a_dir:{type:"vec2",buffer:s,Re:s.size,offset:20}},3*e.Qx.length,e.Pc.buffer,void 0,void 0,E.Si,void 0,void 0,0),n.Ni())))},pr);function pr(){}var mr=(yr.prototype.render=function(t,i,n){t._map&&t.getRadius()&&this.Cb(t,i,n)},yr.prototype.Cb=function(t,i,n){!t.visible||(i=this.Ab(t,i))&&n.Un().Ce(i,{},1,void 0,"POINTS",!1,E.Si,void 0,void 0,0)},yr.prototype.Lb=function(t,i,n){!t.visible||(i=this.Tb(t,i))&&n.Un().Ce(i,{},1,void 0,"POINTS",!1,E.Si,void 0,void 0,0)},yr.prototype.Ab=function(t,i){var n=t.KB;if(n){var e=t._getDetalLocal(i),s=t._opts;if(s.fillColor){var r=yt.Util.color2RgbaArray(s.fillColor).slice(0,3);r.push(s.fillOpacity);var o=s.radius+(s.strokeWeight||0),a=[0,s.radius/o],o=[0,0,0,0];return s.strokeColor&&s.strokeWeight&&s.strokeOpacity&&(o=yt.Util.color2RgbaArray(s.strokeColor).slice(0,3)).push(s.strokeOpacity),{u_pos:n,u_color:r,u_borderColor:o,u_offset:t.zx,u_matrix:i.$n.mvpMatrix,u_localDeltaCenter:e,u_radius:this.Ib(t),u_range:a,u_retinaRatio:yt._.Ue?2:1,u_skyHeight:i.$n.skyHeight,u_viewHeight:i.$n.size[1]}}}},yr.prototype.Tb=function(t,i){var n=t.KB;if(n){var e=t._getDetalLocal(i);if((s=t._opts).strokeWeight&&s.strokeColor){var r=yt.Util.color2RgbaArray(s.strokeColor).slice(0,3);r.push(s.strokeOpacity);var o=s.radius+s.strokeWeight,s=[s.radius/o,1];return(o=r.slice(0,3)).push(0),{u_pos:n,u_color:r,u_borderColor:o,u_offset:t.zx,u_matrix:i.$n.mvpMatrix,u_localDeltaCenter:e,u_radius:this.Ib(t),u_range:s,u_retinaRatio:yt._.Ue?2:1,u_skyHeight:i.$n.skyHeight,u_viewHeight:i.$n.size[1]}}}},yr.prototype.Ib=function(t){return t=(t=t._opts).radius+(t.strokeWeight||0),Math.min(t,64)},yr);function yr(){}var _r,gr=(_r=C,yt.Ei(br,_r),br.prototype.Kn=function(t,i,n,e,s){var r=n.$n.zoom;if(i.sr)for(var o=0,a=i.sr;o<a.length;o++){var h=a[o];if(!(r<h._opts.zooms[0]||r>h._opts.zooms[1]))switch(h.CLASS_NAME){case"Overlay.Polygon":case"Overlay.Rectangle":case"Overlay.Circle":case"Overlay.Ellipse":this.hC(h,n,t);break;case"Overlay.Polyline":case"Overlay.BezierCurve":this.lC(h,n,t);break;case"Overlay.CircleMarker":this.fC(h,n,t)}}},br.prototype.hC=function(t,i,n){this.uC.render(t,i,n)},br.prototype.lC=function(t,i,n){this.cC.render(t,i,n)},br.prototype.fC=function(t,i,n){this.dC.render(t,i,n)},br);function br(){var t=null!==_r&&_r.apply(this,arguments)||this;return t.uC=new lr,t.cC=new dr,t.dC=new mr,t}var xr,kr=0,Ui=(xr=yt.lw,yt.Ei(wr,xr),wr.prototype.add=function(t){Array.isArray(t)||(t=[t]);for(var i=0,n=t;i<n.length;i++){var e=n[i];this.source.add(e)}},wr.prototype.remove=function(t){Array.isArray(t)||(t=[t]);for(var i=0,n=t;i<n.length;i++){var e=n[i];this.source.remove(e)}},wr.prototype.Lo=function(){return{id:this.zF,type:"overlay",url:""}},wr.prototype.co=function(){return this.zF},wr.prototype.getState=function(){return{visible:this._visible,opacity:1,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},wr.prototype.vi=function(t){return this.source.rr(t)||null},wr.prototype.getAllOverlays=function(i){return this.source.getAllOverlays().filter(function(t){return!i||-1<t.className.toLocaleLowerCase().indexOf(i)})},wr.prototype.getRender=function(){return this.pC||("d"===this.map.baseRender?(this.pC=!0,this.vC()):(this.pC=!0,this.mC())),this.Jh},wr.prototype.mC=function(){this.Jh=new gr},wr.prototype.vC=function(){var t=this,i=this.map.kv;this._parent=i.querySelector(".amap-layers"),this._container=this._createContainer(this._parent),yt.Module.module("DomRender",function(){t.Jh=new yt.Module.yC(t.map,t)})},wr.prototype._createContainer=function(t){var i=document.createElement("div");return t.appendChild(i),i},wr);function wr(t){void 0===t&&(t={});var i=xr.call(this,t)||this;return i.CLASS_NAME="AMap.VectorLayer",i.zF="AMap.VectorLayer"+kr++,i.pC=!1,i.Qh=t.zIndex||110,i}var Mr,Cr=(Mr=Ui,yt.Ei(Ar,Mr),Ar.prototype.has=function(t){return!!this.source&&-1<this.source.getAllOverlays().indexOf(t)},Ar.prototype.clear=function(){var t;this.source&&(t=this.source.getAllOverlays(),this.remove(t.slice(0)))},Ar.prototype.setOptions=function(t){if(this.source)for(var i=0,n=this.source.getAllOverlays();i<n.length;i++)n[i].setOptions(t)},Ar.prototype.query=function(t){if(this.source)return this.source.rr({lnglat:t})},Ar.prototype.getBounds=function(){if(this.source){var t=this.getAllOverlays();if(0<t.length){for(var i,n=void 0,e=0;e<t.length;e++)n?(i=t[e].getBounds())&&n.union(i):n=(n=t[e].getBounds())&&n.clone();return n}}},Ar);function Ar(){return null!==Mr&&Mr.apply(this,arguments)||this}var Sr,Ir=(Sr=C,yt.Ei(zr,Sr),zr.prototype.Kn=function(t,i,n,e){t.context.gl},zr);function zr(){return Sr.call(this)||this}var Tr,Lr=(Tr=C,yt.Ei(Dr,Tr),Dr.prototype.Kn=function(t,i,n,e,s){if(i.s_){for(var r,o=n.$n.optimalZoom,a=n.map.getMask(),h={},f=0,u=i.tiles;f<u.length;f++)(m=u[f]).status===yt.Mo.LOADED&&(h[r=m.zo.z]||(h[r]=[]),h[r].push(m));var c=yt.map(Object.keys(h),function(t){return parseInt(t,10)});c.sort(function(t,i){return i-t}),0<=(i=c.indexOf(o-1))&&(c.splice(i,1),c.push(o-1));var l=(o=e.To.SS()).styles,v=o.adcode;e.ce&&t.context.clear({depth:!0});for(var d=0,p=c;d<p.length;d++)for(var m,y=0,_=h[p[d]];y<_.length;y++)(m=_[y]).status===yt.Mo.LOADED&&(this.Lc(t,m,n,e,l,v),this.Ic(t,m,n,e,l,v),this.lH(t,m,n,e));this.PB(t,n,e,a)}},Dr.prototype.destroy=function(){},Dr.prototype.clearStyleCache=function(){this.xC={}},Dr.prototype.Lc=function(t,i,n,e,s,r){var o=t.Wn();if(t=(a=i.data).Dc){t.upload(o.context,!0);var h=t.zs,f=t.Pc,a=a.Oc,u=e.opacity,c=[i.Sa[0],i.Sa[1]],l=1;"3D"===n.$n.viewMode&&(l=n.map.getView().EF()),i.zo.z<yt.Ra&&(i=i.Ma.center,c[0]+=i[0],c[1]+=i[1]);for(var v=0,d=a.jc;v<d.length;v++){var p=d[v],m=JSON.parse(""+p.mainkey),y=this.Mn(s,m,"polygon").fill;y&&4===y.length&&(!r||r[m.adcode]||r[m.SOC]||r[m.adcode_pro]||r[m.adcode_cit])&&(y={u_matrix:n.$n.mvpMatrix,u_color:[y[0],y[1],y[2],y[3]*u],u_offset:[0,0],u_localDeltaCenter:c,u_viewHeight:n.$n.size[1],u_skyHeight:l},o.context.getExtension("OES_element_index_uint"),o.Ce(y,{a_pos:{type:"vec2",Re:h.size,offset:0,buffer:h}},p.length,f,"TRIANGLES",e.depthTest,E.Si,this.OH(e.rejectMapMask,!!n.map.getMask()),void 0,p.offset))}}},Dr.prototype.Ic=function(t,i,n,e,s,r){var o=this,a=t.Vn();if(i.data){var h=i.data;if(t=h.$c){t.upload(a.context,!0);var f=t.zs.buffer,u=t.Pc.buffer,c=h.Uc.jc,l=(n.$n.optimalZoom,[i.Sa[0],i.Sa[1]]),v=e.opacity,d=1;"3D"===n.$n.viewMode&&(d=n.map.getView().EF()),i.zo.z<yt.Ra&&(i=i.Ma.center,l[0]+=i[0],l[1]+=i[1]);var p={},m={};1===c.length&&(k=c[0].mainkey,g=JSON.parse(k,void 0),b=this.Mn(s,g,"line"),p[k]=b,m[k]=g),c.sort(function(t,i){var n=t.mainkey,e=JSON.parse(n,void 0),t=o.Mn(s,e,"line");return p[n]||(p[n]=t),m[n]||(m[n]=e),n=i.mainkey,e=JSON.parse(n,void 0),i=o.Mn(s,e,"line"),p[n]||(p[n]=i),m[n]||(m[n]=e),t.zIndex-i.zIndex});for(var y=0,_=c.length;y<_;y++){var g,b,x=c[y],k=x.mainkey,w=+(g=m[k]).bC,M=[1,0,1,0];(b=p[k]).dash&&(M=yt.Pt(b.dash)),1==w||8==w?M=[3,2,3,2]:10==w?M=[1,2,1,2]:11==w?M=[5,5,5,5]:4==w&&(M=[2,2,6,2]),(w=b[this.gC[g.type]])&&4===w.length&&(!r||r[g.adcode]||r[g.SOC]||r[g.adcode_pro]||r[g.adcode_cit])&&(w={u_matrix:n.$n.mvpMatrix,u_meter_per_pixel:n.$n.resolution,u_width:b["stroke-width"],u_color:[w[0],w[1],w[2],w[3]*v],u_dash:M,u_border:0,u_localDeltaCenter:l,u_viewHeight:n.$n.size[1],u_skyHeight:d},M=f.size,a.context.getExtension("OES_element_index_uint"),a.Ce(w,{a_pos:{type:"vec2",buffer:f,Re:M,offset:0},a_normal:{type:"vec2",buffer:f,Re:M,offset:8},a_distance:{type:"float",buffer:f,Re:M,offset:16},a_dir:{type:"vec2",buffer:f,Re:M,offset:20}},x.length,u,"TRIANGLES",e.depthTest,E.Si,this.OH(e.rejectMapMask,!!n.map.getMask()),void 0,x.offset))}}}},Dr.prototype.lH=function(t,i,n,e){var s=t.Wn(),r=s.context,o=new Float32Array(this.fH(i)),t=i.Sa,r=r.fe(o,8);(o=i.zo.z)<yt.Ra&&(a=i.Ma.center,t[0]+=a[0],t[1]+=a[1]);var a=[0,1,0,0];o===n.$n.optimalZoom-1&&(a=[1,0,0,0]),t={u_matrix:n.$n.mvpMatrix,u_color:a,u_offset:[0,0],u_localDeltaCenter:t,u_viewHeight:n.$n.size[1],u_skyHeight:1},s.Ce(t,{a_pos:{type:"vec2",buffer:r,Re:0,offset:0}},6,void 0,"TRIANGLES",!1,E.Si,this.BH(e.rejectMapMask,!!n.map.getMask()),void 0,0)},Dr.prototype.OH=function(t,i){return void 0===t&&(t=!1),i?i&&!t?T.DH:i&&t?T.HH:void 0:T.nH},Dr.prototype.BH=function(t,i){return void 0===t&&(t=!1),i?i&&!t?T.FH:i&&t?T.PH:void 0:T.$H},Dr.prototype.Mn=function(t,i,n){var e=JSON.stringify(i);if(this.xC[e])return this.xC[e];var s=["nation-stroke","coastline-stroke","province-stroke","city-stroke","county-stroke"],r={};if(!i)return r;if("line"===n){for(var o=0,a=s.length;o<a;o++){var h=s[o];t[h]&&(yt.Util.isFunction(t[h])?r[h]=yt.Util.color2RgbaArray(t[h](i)):r[h]=yt.Util.color2RgbaArray(t[h]))}yt.Util.isFunction(t["stroke-width"])?r["stroke-width"]=t["stroke-width"](i):r["stroke-width"]=t["stroke-width"],i&&(i.adcode_pro||i.adcode_city)&&(r.dash=yt.Util.isFunction(t.dash)?t.dash(i):t.dash),i&&void 0!==t.zIndex&&(r.zIndex=yt.Util.isFunction(t.zIndex)?t.zIndex(i):t.zIndex)}else"polygon"===n&&(yt.Util.isFunction(t.fill)?r.fill=yt.Util.color2RgbaArray(t.fill(i)):r.fill=yt.Util.color2RgbaArray(t.fill),r["stroke-width"]=t["stroke-width"]);return this.xC[e]=r},Dr.prototype.fH=function(t){var i=t.Ro,n=t.Ma.center,e=[i[0]-n[0],i[1]-n[1]],s=[i[0]-n[0],i[3]-n[1]],t=[i[2]-n[0],i[1]-n[1]],n=[i[2]-n[0],i[3]-n[1]];return yt.Pt(e,t,s,t,n,s)},Dr.prototype.PB=function(t,i,n,e){var s;t.context.clear({stencil:!0}),!e||(s=i.map.getLayerByClass("AMap.MaskLayer"))&&(e=i.uo.getData(s.co(),i.$n,t.context),s=s.getRender(),e&&s&&s.Kn(t,e,i,n))},Dr);function Dr(){var t=Tr.call(this)||this;return t.gC={Nation_Border_China:"nation-stroke",Nation_Border_Foreign:"nation-stroke",Coastline_China:"coastline-stroke",Coastline_Foreign:"coastline-stroke",Province_Border_China:"province-stroke",Province_Border_Foreign:"province-stroke",City_Border_China:"city-stroke",County_Border_China:"county-stroke"},t.xC={},t}var Fr,Hr=!1,$r=(Fr=yt.Event,yt.Ei(Er,Fr),Er.prototype.va=function(t,n,i){return this.jD().send("loadNebulaSourceTile",t,function(t,i){i&&n(i)})},Er.prototype.RD=function(t,i){return this.Uh.send("loadNebulaSourceTileSdf",t,i)},Er.prototype.wC=function(t,i,n){t.request=this.Uh.send("loadMVTSourceTile",i,function(t,i){i&&n(i)})},Er.prototype.RS=function(t,i,n){t.request=this.Uh.send("loadDistrictSourceTile",i,function(t,i){i&&n(i)})},Er.prototype.aG=function(t,i,n){t.request=this.Uh.send("loadMapboxSourceTile",i,function(t,i){i&&n(i)})},Er.prototype._C=function(t){this.Uh.send("processLabels",{id:t})},Er.prototype.np=function(t){this.Uh.send("loadCommonWords",t)},Er.prototype.deleteTileStaticSDF=function(t){this.Uh.send("deleteTileStaticSDF",t)},Er.prototype.Ha=function(i){this.Uh.send("updateParams",i),yt.forEach(this.ED,function(t){t.send("updateParams",i)})},Er.prototype.Ka=function(i){this.Uh.send("updateMapStyle",{vn:i}),yt.forEach(this.ED,function(t){t.send("updateMapStyle",{vn:i})})},Er.prototype.bn=function(i,t){var n=this;function e(){++s===n.ND&&t()}this.Uh.send("updateUserStyle",{Kd:i},t);var s=0;yt.forEach(this.ED,function(t){t.send("updateUserStyle",{Kd:i},e)})},Er.prototype.Ja=function(i){this.Uh.send("sendHttp",{protocol:i}),yt.forEach(this.ED,function(t){t.send("sendHttp",{protocol:i})})},Er.prototype.Qd=function(){this.Uh.send("commonWordImageLoaded",!0)},Er.prototype.innerLabelsLoadData=function(t,i){this.Uh.send("innerLabelsLoadData",{id:t},i)},Er.prototype.signal=function(t,i){},Er.prototype.dynamicTextTextureInfoLoaded=function(t,i){this.emit("dynamicTextTextureInfoLoaded",i)},Er.prototype.dynamicTextSDFInfoLoaded=function(t,i){this.emit("dynamicTextSDFInfoLoaded",{data:i})},Er.prototype.dynamicTextVerticeLoaded=function(t,i){this.emit("dynamicTextVerticeLoaded",i)},Er.prototype.dynamicTextVerticeLoadedByTile=function(t,i){this.emit("dynamicTextVerticeLoadedByTile",i)},Er.prototype.commonWordLoaded=function(t,i){this.emit("commonWordLoaded",i)},Er.prototype.iconImageLoaded=function(t,i){this.emit("iconImageLoaded",i)},Er.prototype.getSDFData=function(t,i){this.Uh.send("getSDFData",t,function(t){i&&i(t)})},Er.prototype.loadWordsByFront=function(t,i,n){this.emit("loadWordsByFront",{mG:i,cb:n})},Er.prototype.QB=function(t,i){this.jD().send("setPathWebgl",t,i)},Er.prototype.JB=function(t,i){this.jD().send("sendIndoorRequest",t,i)},Er.prototype.destroy=function(){this.Wh&&this.Wh.terminate();for(var t=0,i=this.HD;t<i.length;t++){var n=i[t];n&&n.terminate()}},Er.prototype.request=function(t,i,n){var e=new XMLHttpRequest;return e.onreadystatechange=function(){var t,i;4===e.readyState&&200===e.status&&(t=e.getResponseHeader("content-type"),i=e.response,"application/x-protobuf"===t?n(null,i):Hr||(Hr=!0,console.log("<AMap JSAPI> KEY异常。")))},e.onerror=function(t){n("error")},e.responseType="arraybuffer",e.open("GET",i,!0),e.send(),{cancel:function(){e.abort()}}},Er.prototype.updateDataVersion=function(t,i){this.emit("updateDataVersion",{version:i})},Er.prototype.tv=function(){var t=this;this._map.on("movestart",function(){t.iv=!0,t.ev()}),this._map.on("moveend",function(){t.iv=!1,t.ev()}),this._map.on("dragstart",function(){t._dragging=!0,t.ev()}),this._map.on("dragend",function(){t._dragging=!1,t.ev()}),this._map.on("zoomstart",function(){t.lt=!0,t.ev()}),this._map.on("zoomend",function(){t.lt=!1,t.ev()})},Er.prototype.ev=function(){var i=!1;(this._dragging||this.lt||this.iv)&&(i=!0),this.nv!==i&&(this.Uh.send("setMainThreadBusy",i),yt.forEach(this.ED,function(t){t.send("setMainThreadBusy",i)})),this.nv=i},Er.prototype.jD=function(){return this.ED[0]},Er.prototype.WD=function(){for(var t=0;t<this.ND;t++)if(!this.ED[t].UD)return!1;return!0},Er);function Er(t){var i=Fr.call(this)||this;i._map=t,i.dE=!1,i._dragging=!1,i.lt=!1,i.nv=!1,i.iv=!1,i.GD=0,i.ND=1,i.HD=[],i.ED=[],i.VD=[],i.ZD=[],i.YD=0,i.pE=function(){i.YD+=1,i.YD===i.ED.length+1&&(i.dE=!0,i._map.setNeedUpdate(!0))},i.Wh=new Worker(AMap.getConfig().workerUrl),i.Uh=new yt.Bh(i.Wh,i,"AMap.SDF");for(var n=0;n<i.ND;n++){var e=new Worker(AMap.getConfig().workerUrl),s=new yt.Bh(e,i,"AMap.nebula");i.HD.push(e),i.ED.push(s)}i.Uh.send("initCryptWorker",!0,i.pE);for(var r=0,o=i.ED;r<o.length;r++)(s=o[r]).send("initCryptWorker",!0,i.pE);return i.tv(),i}var Br=(Or.prototype.ov=function(t){var i=t.gl;if(this.buffer||(this.buffer=new yt.yp(t,new Uint16Array(0),8)),this.texture||(this.texture=t.createTexture({height:1024,width:1024,data:null},{Yi:!0}),this.texture.bind(i.CLAMP_TO_EDGE,i.NEAREST,i.LINEAR)),this.av||(this.av=t.createFramebuffer(1024,1024)),!this.Pc){for(var n=new Uint16Array(192),e=0;e<32;e++){var s=6*e,r=4*e;n[s]=r,n[1+s]=1+r,n[2+s]=2+r,n[3+s]=r,n[4+s]=2+r,n[5+s]=3+r}this.Pc=t.ve(n)}},Or.prototype.sv=function(t){for(var i=0,n=t;i<n.length;i++){var e=n[i];this.rv[e.hv]=e.name,this.images[e.name]=e.img,this.lv.push(e.name),this.jG[e.name]={width:e.width,height:e.height}}},Or.prototype.update=function(t){this.ov(t.context),this.uv(t,this.lv),this.lv=[]},Or.prototype.uv=function(t,i){if(0!==i.length){for(var n=t.context,e=n.gl,s=0,r=i;s<r.length;s++){var o,a=r[s];this.De[a]||((o=n.createTexture(this.images[a],{Yi:!0})).bind(e.CLAMP_TO_EDGE,e.LINEAR,e.LINEAR),this.De[a]=o)}for(var h=[],f=0,u=this.rv.length;f<u;f++){var c=this.rv[f],v=void 0===(c=(l=this.jG[c]||{}).width)?512:c,d=void 0===(c=l.height)?1024:c,l=4*f*4,c=this.cv(f);h[l]=0,h[1+l]=0,h[2+l]=c[0],h[3+l]=c[1],h[4+l]=0,h[5+l]=d,h[6+l]=c[0],h[7+l]=c[1]+d,h[8+l]=v,h[9+l]=d,h[10+l]=c[0]+v,h[11+l]=c[1]+d,h[12+l]=v,h[13+l]=0,h[14+l]=c[0]+v,h[15+l]=c[1]}var p=n.fe(new Uint16Array(h),8),m=t.Hn();this.fv(),this.av.Wi.set(this.texture.texture);var y=this.getSize();for(n.bindFramebuffer.set(this.av.framebuffer),t=n.be.current,n.be.set([0,0,y[0],y[1]]),f=0,u=this.rv.length;f<u;f++){var _=this.rv[f],g=this.jG[_]||{},b=g.width,v=void 0===b?512:b,d=void 0===(g=g.height)?1024:g;_&&m.Ce({u_sourceTexture:this.De[_],u_sourceTextureSize:[v,d],u_targetTextureSize:y},{a_sourceTexturePos:{buffer:p,type:"vec2",Re:8,offset:0},a_targetTexturePos:{buffer:p,type:"vec2",Re:8,offset:4}},6,this.Pc,void 0,void 0,E.Mi,void 0,void 0,6*f)}n.bindTexture.set(null),this.texture.bind(e.CLAMP_TO_EDGE,e.NEAREST,e.LINEAR),n.be.set(t),n.bindFramebuffer.set(null)}},Or.prototype.getSize=function(){return[1024,1024*this.rv.length]},Or.prototype.destroy=function(){this.buffer&&(this.buffer.destroy(),delete this.buffer),this.texture&&(this.texture.destroy(),delete this.texture);for(var t=0,i=this.De;t<i.length;t++)i[t].destroy();this.av&&(this.av.destroy(),delete this.av),this.Pc&&(this.Pc.context.deleteBuffer(this.Pc),delete this.Pc),this.images={},this.lv=[],this.rv=[],this.De={}},Or.prototype.fv=function(){var t=this.getSize();this.texture.update({width:t[0],height:t[1],data:null},{resize:!0})},Or.prototype.cv=function(t){return[0,1024*t]},Or);function Or(){this.pv=0,this.lv=[],this.rv=[],this.images={},this.jG={},this.De={},this.dv=[256,256]}var Pr,Rr="labelsLayer",Wr={visible:!0,zIndex:120,opacity:1,collision:!0,animation:!0,allowCollision:!1,zooms:[2,22],VT:!1},Zi=(Pr=yt.lw,yt.Ei(jr,Pr),jr.prototype.Lo=function(){return{id:this.hS,type:Rr}},jr.prototype.getState=function(){return Pr.prototype.eo.call(this)},jr.prototype.co=function(){return this.hS},jr.prototype.vi=function(t){var i=this.fz;return(t=i&&i.vi(t,this.hS)||"")?this.getSource().Ds(t):null},jr.prototype.Do=function(t){return t=Pr.prototype.Do.call(this,t),this.map&&this.uz(this.map),t},jr.prototype.v$=function(){this.fz&&this.fz.remove(this)},jr.prototype.IL=function(t){var i=this.fz,n=this.source;return!!(t&&i&&n&&(i=i.$f||{},t=n.zL(t)))&&!!i[t]},jr.prototype.uz=function(t){(this.fz=t.fS()).add(this)},jr);function jr(t){void 0===t&&(t={});var i=Pr.call(this,t)||this;return i.CLASS_NAME="AMap.LabelsLayer",i._opts={id:Rr,type:Rr,opacity:1,visible:1},i._opts=yt.assign({},Wr,t),i.xt=i._opts.zooms,i.Qh=void 0===t.zIndex?120:t.zIndex,i._visible=void 0===t.visible||t.visible,i.tl=void 0===t.opacity?1:t.opacity,i}var Gr,Ur=(Gr=Zi,yt.Ei(Zr,Gr),Zr.prototype.getCollision=function(){return this._opts.collision},Zr.prototype.setCollision=function(t){void 0===t&&(t=!0),this._opts.collision=t,this.to({vv:!1})},Zr.prototype.getAllowCollision=function(){return this._opts.allowCollision},Zr.prototype.setAllowCollision=function(t){void 0===t&&(t=!0),this._opts.allowCollision=t,this.to({vv:!1})},Zr.prototype.getOpacity=function(){return this._opts.opacity},Zr.prototype.setOpacity=function(t){void 0!==t&&(this._opts.opacity=t,this.tl=t,this.to({vv:!0}))},Zr.prototype.getZooms=function(){return this._opts.zooms},Zr.prototype.setZooms=function(t){void 0!==t&&(this._opts.zooms=t,this.xt=t,this.to({vv:!0}))},Zr.prototype.getzIndex=function(){return this._opts.zIndex},Zr.prototype.setzIndex=function(t){void 0!==t&&(this._opts.zIndex=t,this.Qh=t,this.to({vv:!0}))},Zr.prototype.add=function(t){Array.isArray(t)||(t=[t]),this._add(t),(t=this.getSource())&&t.add(this.mv,this._opts,this.to.bind(this))},Zr.prototype.remove=function(t){Array.isArray(t)||(t=[t]),this._remove(t),(t=this.getSource())&&t.remove(this.mv,this._opts,this.to.bind(this))},Zr.prototype.clear=function(){this.mv={};var t=this.getSource();t&&(t.clear(),this.to({vv:!1}))},Zr.prototype.show=function(){Gr.prototype.show.call(this)},Zr.prototype.hide=function(){Gr.prototype.hide.call(this)},Zr.prototype.getAllOverlays=function(){var t,i,n=this.mv,e=[];for(t in n)!n.hasOwnProperty(t)||(i=n[t])&&e.push(i);return e},Zr.prototype.getState=function(){var t=this._opts;return{zIndex:this.Qh,zooms:this.xt,visible:this._visible,opacity:this.tl,collision:t.collision,animation:t.animation,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},Zr.prototype.setTop=function(t,i){var n=this.Kl;t&&(i?(n&&n.hS!==t.hS&&n.setTop(!1),this.Kl=t):this.Kl=null)},Zr.prototype.Kh=function(t){Gr.prototype.Kh.call(this,t);var i=this.mv;Object.keys(i).length&&t.add(i,this._opts,this.to.bind(this,{vv:!1}))},Zr.prototype.to=function(t){var i=this;void 0===t&&(t={}),t=void 0===(t=t.vv)||t,this.map&&(t?(t=this.getSource())&&t.update(this._opts,function(){i.map&&i.map.setNeedUpdate(!0)}):this.map.setNeedUpdate(!0))},Zr.prototype.onAdd=function(){var t,i=this.mv;for(t in i)i.hasOwnProperty(t)&&i[t].Cs(this)},Zr.prototype.v$=function(){Gr.prototype.v$.call(this);var t,i=this.mv;for(t in i)i.hasOwnProperty(t)&&i[t].Cs(null)},Zr.prototype._add=function(t){for(var i=0,n=t;i<n.length;i++){var e=n[i];(this.mv[e.hS]=e).Cs(this)}},Zr.prototype._remove=function(t){for(var i=0,n=t;i<n.length;i++){var e=n[i];delete this.mv[e.hS],e.Cs(null)}},Zr);function Zr(t){return void 0===t&&(t={}),(t=Gr.call(this,t)||this).mv={},t}var Vr,Yr=(Vr=Bi,yt.Ei(Jr,Vr),Jr.prototype.Hz=function(t,i,n,e,s,r){if(e&&i){if(Vr.prototype.Hz.call(this,t,i,n,e,s,r),s=(n=(this.wf=i).$n).projectionId,this.If=yt.V[s],s=n.zoom,i&&r.visible&&r.opacity&&yt.Util.dS(s,r.zooms)){if(!e.Nf)return;if(this._map.isDOMMode()||(o=t.context,e.upload(o)),!e)return;var o=e.rp,n=(e.buffer,e.zo,n.centerCoord);return this.uu=yt.lcs.getLocalByCoord([n[0],n[1]]).center||[0,0],e=this.Ps=e,this.Ps.lp=o.up,e}return null}},Jr.prototype.Kn=function(t,i,n,e,s){var r=this.fz;r&&(this.Wf=r.Uf,this.Bf=r.$f),this._map&&(this._map.isDOMMode()?(r=this.Ps.zo,r=yt.Util.hp(r,this.wf),this.Yz(n,e,i,this._map,{Sa:r,centerCoord:this.uu,Uf:this.Wf,$f:this.Bf})):this.Jh(t,n,i,e))},Jr.prototype.Jz=function(){var t=this.Ps.zo;return{Sa:yt.Util.hp(t,this.wf),from:"labelsLayer",opacity:1,offset:[0,0],centerCoord:this.uu}},Jr.prototype.Jh=function(t,i,n,e){var s=this.Zz,r=t.context;if(n&&n.other){var a=(o=n.other).rp,h=o.buffer,f=o.zo,u=yt.Util.hp(f,i);if(a&&a.up){this.AG();for(var c=(n=this.zG(this.l_)).LG,o=n.od,f=yt.tc.sp,l=a&&a.pp,v=l.length,d=0,p=[],m=this.Ps.style||{},y=0;y<v;y++){var _=l[y].dp||[],g=d,d=s.Dz(c,this.Wf,{start:g,dp:_,style:m});p.push({start:g,end:d})}o?o.update(c.value):n.od=new yt.yp(r,c.value,f),n.zz=p,e.ce&&t.context.clear({depth:!0}),s.Ce(i,r,{Rz:a,buffer:h,od:n.od.buffer,zz:n.zz},{from:this.type,Sz:!0,Sa:u,oo:t,LF:e})}}},Jr);function Jr(){var t=Vr.call(this)||this;return t.type="labelsLayer",t.l_="labelsLayer",t}var Xr=(Kr.prototype.addImage=function(s,r){var o=this;this.getImage(s)?console.log("there is already a image named "+s):(this.zH.SH(s,function(t,i){r.cb&&r.cb(t,i)}),this.zH.has(s)||this.zH.nS(s,function(e){o.map.z_.loadImage(r.url,{name:s,type:"userImage",cb:function(t){var i,n;t&&t.img?(i=(n=o.map.getContext()).createTexture(t.img,{Zi:!0}),t=r.filter?n.gl[r.filter]:n.gl.LINEAR,n=r.wrap?n.gl[r.wrap]:n.gl.CLAMP_TO_EDGE,i.bind(n,t,t),o.De[s]=i,e(null,i)):e(new Error("no img"))}})}))},Kr.prototype.getImage=function(t){return this.De[t]},Kr.prototype.RH=function(t){var i=this.De[t];i&&(delete this.De[t],i.destroy())},Kr.prototype.MH=function(t){return this.zH.has(t)},Kr.prototype.L_=function(){var t=k.create("canvas",null);t.getContext||console.error("createArrowTexture error"),t.height=64,t.width=64;var i=t.getContext("2d");i?(i.fillStyle="white",i.beginPath(),i.moveTo(8,56),i.lineTo(32,36),i.lineTo(58,56),i.lineTo(58,36),i.lineTo(32,14),i.lineTo(8,36),i.fill(),(t=(i=this.map.getContext()).createTexture(t,{Zi:!0})).bind(i.gl.CLAMP_TO_EDGE,i.gl.LINEAR,i.gl.LINEAR),this.De.AMapArrow=t):console.error("createArrowTexture error")},Kr.prototype.AH=function(){this.addImage("emptyTexture",{url:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"})},Kr);function Kr(t){this.map=t,this.De={},this.zH=new yt.IH,this.L_(),this.AH()}var Qr,qr=(Qr=C,yt.Ei(to,Qr),to.prototype.Kn=function(t,i,n,e){var s,r;t&&(r=(s=t.context).gl,t=e.To,this.kC&&(this.kC=!1,t.init(r)),t.render&&(e=t.eo().zooms,n.$n.zoom>=e[0]&&n.$n.zoom<=e[1]&&(t.render(r,n,n.$n,s),s.setDirty())))},to);function to(){var t=Qr.call(this)||this;return t.kC=!0,t}var io,no=(io=C,yt.Ei(eo,io),eo.prototype.Kn=function(t,i,n,e,s,r){var o=(a=s.map.mapStyle).vn.bN&&a.vn.bN.atmosphere&&a.vn.bN.atmosphere.texture?"https://"+a.vn.bN.atmosphere.texture:"",a=o?s.map.getImage(o):void 0;a?this.jB(t,n,s,o,n.$n.zoom<12?1:0):o&&s.map.I_&&!s.map.I_.MH(o)&&s.map.addImage(o,{url:o,filter:"LINEAR",wrap:"REPEAT",cb:function(){return s.map.setNeedUpdate(!0)}}),o&&a||this.NB(t,n,n.$n.zoom<12?1:0),(o=(a=(o=s.map.mapStyle).vn.bN&&o.vn.bN.sky&&o.vn.bN.sky.texture?"https://"+o.vn.bN.sky.texture:"")?s.map.getImage(a):void 0)?this.jB(t,n,s,a,so(n.$n.zoom-11,1,0)):a&&s.map.I_&&!s.map.I_.MH(a)&&s.map.addImage(a,{url:a,filter:"LINEAR",wrap:"REPEAT",cb:function(){return s.map.setNeedUpdate(!0)}}),a&&o||this.NB(t,n,so(n.$n.zoom-11,1,0))},eo.prototype.NB=function(t,i,n){var e=t.rS(),s=i.$n,r=t.context,o=i.map.getView(),a=(s.size,s.pitch),h=s.optimalZoom;"2D"!==o.type&&(t=o.Uu(),(t=this.yz(o.getStatus().pitch,t,o.getStatus().size[1],h))<=0||a<=0||(i=i.map.JF(i.$n.optimalZoom),o=this.WF(t,i,s,o),this.zs?this.zs.update(o):this.zs=new yt.yp(r,o,32,"ARRAY_BUFFER"),o=this.zs.buffer,e.Ce({u_opacity:n,u_mvpMatrix:s.mvpMatrix,u_skyline:[0,0]},{a_pos:{type:"vec4",buffer:o,Re:o.size,offset:0},a_color:{type:"vec4",buffer:o,Re:o.size,offset:16}},o.length,void 0,"TRIANGLES",void 0,E.Si,void 0)))},eo.prototype.jB=function(t,i,n,e,s){var r,o,a,h,f,u,c;0!==s&&(r=t.EB(),o=t.rS(),a=i.$n,h=t.context,c=i.map.getView(),a.size,f=a.pitch,u=a.optimalZoom,"2D"!==c.type&&(t=c.Uu(),(t=this.yz(c.getStatus().pitch,t,c.getStatus().size[1],u))<=0||f<=0||(i.map.JF(i.$n.optimalZoom),i=(360-i.$n.rotation)/360,c=this.WB(t,a,c),this.zs?this.zs.update(c):this.zs=new yt.yp(h,c,32,"ARRAY_BUFFER"),c=this.zs.buffer,(e=n.map.getImage(e))&&(r.Ce({u_opacity:s,u_mvpMatrix:a.mvpMatrix,u_skyline:[0,0],u_texture:e,u_rotation:i},{a_pos:{type:"vec4",buffer:c,Re:c.size,offset:0},a_opacity:{type:"float",buffer:c,Re:c.size,offset:16},a_coord:{type:"vec2",buffer:c,Re:c.size,offset:24}},c.length/2,void 0,"TRIANGLES",void 0,E.Si,void 0),o.Ce({u_opacity:1,u_mvpMatrix:a.mvpMatrix,u_skyline:[0,0]},{a_pos:{type:"vec4",buffer:c,Re:c.size,offset:0},a_color:{type:"vec4",buffer:c,Re:c.size,offset:16}},c.length/2,void 0,"TRIANGLES",void 0,E.Si,void 0,void 0,c.length/2)))))},eo.prototype.WF=function(t,i,n,e){n.size[1],n.pitch;var s=n.zoom,r=e.X(0,t),o=e.X(n.size[0],t),a=e.X(0,t+0),h=e.X(n.size[0],t+0),f=.5*e.pz().dz();return t=[.988,.976,.949,i[3]=1],(n=e.map.mapStyle.dn(30001,1,s))&&n.faceColor&&(t=n.faceColor.normalize()),(e=yt.Pt(t))[3]=1,(n=yt.Pt(t)||[1,1,1,0])[3]=0,(t=yt.Pt(t)||[1,1,1,Math.min(.1,1/s)])[3]=Math.min(.1,5/s),(yt.Pt(i)||[1,1,1,1])[3]=-.7,new Float32Array(yt.Pt([r[0],r[1],0,0],e,[r[0],r[1],f,0],i,[o[0],o[1],0,0],e,[o[0],o[1],0,0],e,[o[0],o[1],f,0],i,[r[0],r[1],f,0],i,[a[0],a[1],0,0],t,[a[0],a[1],f/3,0],n,[h[0],h[1],0,0],t,[h[0],h[1],0,0],t,[h[0],h[1],f/3,0],n,[a[0],a[1],f/3,0],n))},eo.prototype.WB=function(t,i,n){i.size[1],i.pitch;var e=i.zoom,s=(i.rotation,n.X(0,t)),r=n.X(i.size[0],t),o=n.X(0,t+0),a=n.X(i.size[0],t+0),h=.5*n.pz().dz(),t=0-(f=i.fov/Math.PI/2/2),i=0+f,f=n.map.mapStyle.dn(30001,1,e),n=[.988,.976,.949,1];return f&&f.faceColor&&(n=f.faceColor.normalize()),(f=yt.Pt(n)||[1,1,1,0])[3]=0,(n=yt.Pt(n)||[1,1,1,Math.min(.1,1/e)])[3]=Math.min(.1,5/e),new Float32Array(yt.Pt([s[0],s[1],0,0,1,0,t,1,s[0],s[1],h,0,1,0,t,-0,r[0],r[1],0,0,1,0,i,1,r[0],r[1],0,0,1,0,i,1,r[0],r[1],h,0,1,0,i,-0,s[0],s[1],h,0,1,0,t,-0,o[0],o[1],0,0],n,[o[0],o[1],h/3,0],f,[a[0],a[1],0,0],n,[a[0],a[1],0,0],n,[a[0],a[1],h/3,0],f,[o[0],o[1],h/3,0],f))},eo.prototype.yz=function(t,i,n,e){return n*(Math.max(t/100-.4,0)-Math.max(4*(e-16),0)/100)},eo);function eo(){return io.call(this)||this}function so(t,i,n){return Math.max(Math.min(t,i),n)}var ro,oo=(ro=C,yt.Ei(ao,ro),ao.prototype.EH=function(t,i){var n=i.map.coordToContainer([t[0],t[1]]),e=Math.round(n[0]),s=Math.round(n[1]),t=i.size[0],i=4*(((n=i.size[1])-s)*t+e)+3;return!(e<0||s<0||t<=e||n<=s||!this.SC[i])},ao.prototype.Kn=function(t,i,n,e,s,r){var o=t.aS(),a=n.$n,h=a.centerCoord,f=o.context,t=[0,0];t=n.$n.optimalZoom<yt.Ra?i.LS.center:(h=yt.lcs.getLocalByCoord([h[0],h[1]]).center,[i.LS.center[0]-h[0],i.LS.center[1]-h[1]]),i.Dc.upload(o.context,!0),t={data:i,$i:o,$n:a,Sa:t},this.RC(f,n,t),this.zC(f,t)},ao.prototype.zC=function(t,i){t.gl;for(var n=i.data.Dc.zs,e=i.data.Dc.Pc,s=i.data.Oc.jc,r=0,o=s.length;r<o;r++){var a=s[r];i.$i.Ce({u_color:[0,0,0,0],u_deltaCenter:i.Sa,u_mvpMatrix:i.$n.mvpMatrix},{a_pos:{type:"vec2",buffer:n,Re:n.size,offset:0}},a.length,e,"TRIANGLES",void 0,E.zi,T.Ai,void 0,a.offset)}},ao.prototype.RC=function(t,i,n){var e=t.gl,s=i.size[0],t=i.size[1];this.CC||(this.CC=this.IC(e,i)),e.bindFramebuffer(e.FRAMEBUFFER,this.CC),e.viewport(0,0,s,t),e.clear(e.COLOR_BUFFER_BIT);for(var r=n.data.Dc.zs,o=n.data.Dc.Pc,a=n.data.Oc.jc,h=0,f=a.length;h<f;h++){var u=a[h];n.$i.Ce({u_color:[1,0,0,1],u_deltaCenter:n.Sa,u_mvpMatrix:n.$n.mvpMatrix},{a_pos:{type:"vec2",buffer:r,Re:r.size,offset:0}},u.length,o,"TRIANGLES",void 0,E.zi,void 0,u.offset)}i=s*t*4,this.SC&&i===this.SC.length||(this.SC=new Uint8Array(i)),e.readPixels(0,0,s,t,e.RGBA,e.UNSIGNED_BYTE,this.SC),e.bindFramebuffer(e.FRAMEBUFFER,null),i=yt._.Ue?2:1,e.viewport(0,0,s*i,t*i)},ao.prototype.IC=function(t,i){var n=t.createFramebuffer(),e=i.size[0],s=i.size[1],i=t.createRenderbuffer();if((n.AC=i).w=e,i.h=s,t.bindRenderbuffer(t.RENDERBUFFER,i),t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,e,s),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,i),i=t.checkFramebufferStatus(t.FRAMEBUFFER),t.FRAMEBUFFER_COMPLETE===i)return t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),n;console.log("Frame buffer object is incomplete: "+i.toString())},ao);function ao(){var t=ro.call(this)||this;return t.SC=new Uint8Array(0),t}var ho,fo=(ho=yt.lw,yt.Ei(uo,ho),uo.prototype.Lo=function(){return{id:this.No,type:"sky"}},uo.prototype.co=function(){return this.No},uo.prototype.getState=function(){return{visible:this._visible,opacity:1,skyColor:this.$C,To:this,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},uo.prototype.lo=function(){return!0},uo);function uo(t){void 0===t&&(t={visible:!0});var i=ho.call(this,t)||this;return i.CLASS_NAME="AMap.SkyLayer",i.No="sky_"+yt.Util.uuid(),i._visible=void 0===t.visible||t.visible,i.$C=t.skyColor,i.$C=i.$C&&yt.Util.color2RgbaArray(i.$C),i.Qh=t.zIndex||500,i.lz=!0,i}var co,lo=(co=C,yt.Ei(vo,co),vo.prototype.Kn=function(t,i,n,e){var s=n.$n.optimalZoom;if(!(s<e.zooms[0]||s>e.zooms[1])&&(e.ce&&t.context.clear({depth:!0}),(i=i.tiles[0])&&i.length))for(var r=0,o=i;r<o.length;r++){var a=o[r];a.status===yt.Mo.LOADED&&this.Ic(t,a,n,e)}},vo.prototype.destroy=function(){},vo.prototype.Ic=function(t,i,n,e){var s=t.Vn();if(i.data&&(i=(t=i.data).$c)){i.upload(s.context,!0);var r=i.zs.buffer,o=i.Pc.buffer;if(i=t.Uc){var a=i.jc,h=(n.$n.optimalZoom,t.Sa),f=e.opacity,u=1;"3D"===n.$n.viewMode&&(u=n.map.getView().EF());for(var c=0,l=a.length;c<l;c++){var v=a[c],d=v.color,p={u_matrix:n.$n.mvpMatrix,u_meter_per_pixel:n.$n.resolution,u_width:v.width,u_color:[d[0],d[1],d[2],d[3]*f],u_border:0,u_dash:void 0,u_localDeltaCenter:h,u_skyHeight:u,u_viewHeight:n.$n.size[1]},d=r.size;s.context.getExtension("OES_element_index_uint"),s.Ce(p,{a_pos:{type:"vec2",buffer:r,Re:d,offset:0},a_normal:{type:"vec2",buffer:r,Re:d,offset:8},a_distance:{type:"float",buffer:r,Re:d,offset:16},a_dir:{type:"vec2",buffer:r,Re:d,offset:20}},v.length,o,"TRIANGLES",e.depthTest,E.Si,e.rejectMapMask||!n.map.getMask()?void 0:T.writeWithStencil,void 0,v.offset)}}}},vo);function vo(){return co.call(this)||this}var po=(mo.prototype.cS=function(t,i,n){var e=(this.wf=i).$n,s=e.projectionId,r=e.viewMode;e.zoom,this.If=yt.V[s],this._viewMode=r,this.reset(),this.Of();for(var o=this._map,a={},h=0,f=this.Tw();h<f.length;h++){var u,c=f[h],l=c.eo(),v=c._opts,d=c.hS,p=c.getRender(),m=n[d];if(m)for(var y in m)m.hasOwnProperty(y)&&(u=m[y],"AMap.Inner.LabelsLayer"===c.CLASS_NAME&&"other"===y||"AMap.LabelsLayer"===c.CLASS_NAME&&"tile"===y||!u||(u=p.Hz(t,i,this,u,o,l))&&(a[d]=u,(v.collision||v.allowCollision)&&(this.YL=!1),v.allowCollision&&(this.UT=!1)))}this.Ps=a,s=(e=this._map.getMapState()).rotating,r=e.zooming,e=e.panning,r||e||this.reset(),this.YL&&this.UT&&(s||r||e)||this.Ff(),e=void 0===(e=(r=this.Ef()).Uf)?{}:e,r=void 0===(r=r.$f)?{}:r,this.$f=r,this.Uf=e},mo.prototype.uS=function(){return this.LC},mo.prototype.add=function(t){this.LC[t.hS]=t},mo.prototype.remove=function(t){t&&delete this.LC[t.hS]},mo.prototype.vi=function(t,i){if(!this._map)return null;if(!this._map.getStatus().pickWhenMoving&&this._map.TL())return null;if(t&&this._p){var n=this._map.getMapsContainer(),t={ja:(t=(n=k.mousePos(n,t,this._map))[0])-1,Fa:(n=n[1])-1,Oa:t+1,Ea:n+1};if((n=this._p.search(t)).length){if(t=this.NL(n,i),!(n=this.sP(t)))return null;if(i=n.id,t=this.DC(i),t&&t.Nf&&(t=(n=t.Nf[i])&&n.data.extData||{},this.Uf[i])){if("poi"===t.type)return{type:t.type,id:t.id,lnglat:n.data.position,name:n.data.name};if(!t.type)return t.id}}}return null},mo.prototype.search=function(t){for(var i=[],n=0,e=this._p.search(t);n<e.length;n++){var s,r=e[n],o=r.id;(s=this.FC(o))&&"AMap.Inner.LabelsLayer"===s.CLASS_NAME&&this.TC(o)&&i.push(r)}return i},mo.prototype.reset=function(){this.Uf={},this.$f={}},mo.prototype.tC=function(){return this._p},mo.prototype.iC=function(t,i){void 0===t&&(t={}),void 0===i&&(i={});var e=void 0===(n=t.x)?0:n,r=void 0===(s=t.y)?0:s,a=void 0===(o=t.width)?0:o,f=void 0===(h=t.height)?0:h,n=i.id,s=i.rank,o=i.padding,h=void 0===(t=i.type)?"":t,t=i.name,i=yt.tc._d;return{id:n,name:t,type:h,rank:s||1,ja:e-(i=o||i||0),Fa:r-i,Oa:e+a+i,Ea:r+f+i}},mo.prototype.NL=function(t,i){void 0===t&&(t=[]);for(var n=[],e=0,s=t;e<s.length;e++){var r,o=s[e];!o.id||(r=this.FC(o.id))&&r.hS===i&&n.push(o)}return n},mo.prototype.sP=function(t){for(var i=this.Uf||{},n=[],e=0,s=t;e<s.length;e++){var r=s[e];i[r.id]&&n.push(r)}for(var o=-1/0,a=null,h=0,f=n;h<f.length;h++){var u=f[h],c=u.rank;o<c&&(o=c,a=u)}return a},mo.prototype.Tw=function(){var t,i,n=this.LC,e=[];for(t in n)n.hasOwnProperty(t)&&(i=n[t],e.push(i));return e.sort(function(t,i){return i.Qh-t.Qh}),e},mo.prototype.rd=function(t,i){var n=i.anchorOffset,i=void 0===(i=i.size)?[0,0]:i;return{x:(n=yt.Sp.add(t,n))[0],y:n[1],width:i[0],height:i[1]}},mo.prototype.hd=function(t,i){var e=void 0===(n=i.offsetX)?0:n,n=void 0===(s=i.offsetY)?0:s,s=void 0===(s=i.w)?0:s,i=void 0===(i=i.h)?0:i;return{x:t[0]+e,y:t[1]+n,width:s,height:i}},mo.prototype.Ff=function(){var t=this.Ps,i=this.wf&&this.wf.$n,n=this.ad,e=this.$f;if(i){var s,r={$n:i,size:this.wf.size,transform:this.If,view:this._view,viewMode:this._viewMode,positionType:"relative"},o=i.zoom;for(s in t)if(t.hasOwnProperty(s)&&t[s]){var a=t[s],h=a.coords,f=a.style,u=a.Nf;if(a=this.LC[s]){var c,l,v,d,p,m,y,_,g=a.getRender().Jz(),b=g.Sa,x=a.Qh;for(c in h)h.hasOwnProperty(c)&&(m=(v=h[c]).origin,d=v.icon,y=v.padding,(l=f[c]).in,this.TC(c)||(e[c]=1),e[c]||(v=(p=(_=u[c]).data.extData||{}).Sa||b||[0,0],v=(m=yt.Sp.add(m,v))[0],m=m[1],r.centerCoord=g.centerCoord,m=Bs.wu(v,m,o,r),_={id:c,rank:Bs.getRank(_,{in:l.in,_z:x}),name:_.data.name,type:p.type||""},p=this.rd(m,d),d=this.PC(l)||[2,20],yt.Util.dS(o,d)&&p.width&&p.height&&(p=this.iC(p,_),n.push(p)),m=this.hd(m,y),y=this.OC(l)||[2,20],y=yt.Util.dS(o,y),l.tn&&y&&m.width&&m.height&&(_=this.iC(m,_),n.push(_))))}}this.ld(n)}},mo.prototype.Ef=function(){var t={},i=this.$f;if(!this.wf)return{};var n=(this.wf&&this.wf.$n).zoom,e=this.Ps,s={};if(this.YL){for(var r in e)if(e.hasOwnProperty(r)&&e[r]){var o,a=e[r],h=a.Nf,f=void 0===h?{}:h;for(o in a.coords,a.style,f)f.hasOwnProperty(o)&&(t[o]=1)}return{Uf:t,$f:i}}for(r in e)if(e.hasOwnProperty(r)&&e[r]){var u,c,l=e[r],v=l.Nf,d=void 0===v?{}:v,p=void 0===(l=(l.coords,l.style))?{}:l,m=(z=this.LC[r]).Qh;for(u in d)d.hasOwnProperty(u)&&(c=p[u],s[c=Bs.getRank(d[u],{in:c.in,_z:m})]||(s[c]={}),s[c][u]=d[u])}for(var y,_,g,b,x,k,w=yt.bf.rank(Object.keys(s)),M=w.length,C=this.wf,A={$n:C.$n,size:C.size,transform:this.If,view:this._view,viewMode:this._viewMode,positionType:"relative"},S=M-1;0<=S;S--){y=s[w[S]];for(var I=(_=Object.keys(y)).length-1;0<=I;I--){var z,T=_[I];if(!i[T]&&(z=this.FC(T)))if(!(L=z._opts||{}).collision&&this.UT||L.VT)t[T]=1;else{var D,F=z.getRender().Jz(),H=F.Sa,$=(D=this.DC(T)).style,E=D.coords,L=D.Nf;if((D=$[T])&&D.in)t[T]=1;else{if(D=($=E[T]).icon||{},E=$.padding||{},$=$.origin||{},H=(L[T].data.extData||{}).Sa||H||[0,0],H=($=yt.Sp.add($,H))[0],$=$[1],A.centerCoord=F.centerCoord,H=Bs.wu(H,$,n,A),($=D.size)[0]&&$[1]){D=this.rd(H,D),D=this.iC(D),b=(g=this._p.search(D)).length;for(var B=0;B<b;B++){var O=g[B];O.id===T?t[O.id]=1:this.BC(T,O.id)&&(i[O.id]=1)}}if((E=this.hd(H,E)).width&&E.height)for(E=this.iC(E),k=(x=this._p.search(E)).length,B=0;B<k;B++){var P=x[B];P.id===T?t[P.id]=1:this.BC(T,P.id)&&(i[P.id]=1)}}}}}return{Uf:t,$f:i}},mo.prototype.ld=function(t){this._p&&(this._p.clear(),this._p.load(t))},mo.prototype.Of=function(){this._p&&(this._p.clear(),this.ad=[])},mo.prototype.DC=function(t){var i,n,e=this.Ps;for(n in e)if(e.hasOwnProperty(n)){var s=e[n];if(s&&s.Nf&&s.Nf[t]){i=s;break}}return i||{}},mo.prototype.jC=function(t){var i,n=this.Ps,e="";for(i in n)if(n.hasOwnProperty(i)){var s=n[i]||{};if(s.Nf&&s.Nf[t]){e=i;break}}return e},mo.prototype.FC=function(t){return(t=this.jC(t))?this.LC[t]:null},mo.prototype.TC=function(t){var i=this.DC(t),n=this._map.qz(),e=this._map.getLayerByClass("AMap.MaskLayer"),s=this._map.jH();if(i){var r=i.Nf,o=i.style[t];if(!o)return!1;if("poi"===(i=r[t].data.extData||{}).type&&!1===n)return!1;if(!o.visible)return!1;if(n=this.EC(o),o=this.wf.$n.zoom,!yt.Util.dS(o,n))return!1;if(n=this._map.getLayerByClass("AMap.IndoorMap"),r[t]&&i.bz&&n&&n.yD().show)return!1;if(e){if(e=e.getRender(),s)return!0;if(e&&!e.EH(r[t].data.position,this.wf))return!1}return!0}return!1},mo.prototype.BC=function(t,i,n){if(void 0===n&&(n=!1),e=this.DC(i)){var e,s=e.style,r=this.FC(t),o=r&&r._opts||{},t=(e=this.FC(i))&&e._opts||{};if(s[i].in)return n&&console.log("","   -1- ",1),!1;if(r&&e){if(r.hS!==e.hS&&!o.allowCollision&&!t.allowCollision)return n&&console.log("","   -2- ",1),!1;if(r.hS===e.hS&&!t.collision)return n&&console.log("","   -3- ",1),!1}}return n&&console.log("","   -4- ",1),!0},mo.prototype.EC=function(t){var n=(i=this.PC(t)||[])[0],e=i[1],s=this.OC(t)||[],i=s[0],t=s[1];return[s=n&&i?n<=i?n:i:n||i||2,t=n&&i?e<=t?t:e:e||t||20]},mo.prototype.PC=function(t){return t.icon&&t.icon[0]&&t.icon[0].zooms},mo.prototype.OC=function(t){return t.text&&t.text.zooms},mo);function mo(t){this.LC={},this.Uf={},this.$f={},this.Ps={},this._p=Ys(),this.ad=[],this.Gf=Ys(),this._viewMode="2D",this.YL=!0,this.UT=!0,this._map=t,this._view=t.getView()}var yo,_o={PoiStyle:[{$:{mainkey:"10001",subkey:"1"},StyleItem:[{$:{level:"18,19,20",desc:"50,2,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,7,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"3"},StyleItem:[{$:{level:"19,20",desc:"50,8,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"4"},StyleItem:[{$:{level:"18",desc:"50,25,2,1,0,0xff84638E,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,25,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,59,2,1,0,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"6"},StyleItem:[{$:{level:"18,19,20",desc:"50,3,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"7"},StyleItem:[{$:{level:"18,19,20",desc:"50,4,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"8"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,9,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"9"},StyleItem:[{$:{level:"18,19,20",desc:"50,10,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"10"},StyleItem:[{$:{level:"18,19,20",desc:"50,14,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"11"},StyleItem:[{$:{level:"18,19,20",desc:"50,15,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"12"},StyleItem:[{$:{level:"18,19,20",desc:"50,17,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"13"},StyleItem:[{$:{level:"18,19,20",desc:"50,18,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"14"},StyleItem:[{$:{level:"18,19,20",desc:"50,19,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"15"},StyleItem:[{$:{level:"18,19,20",desc:"50,22,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"16"},StyleItem:[{$:{level:"20",desc:"50,24,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"17"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"18"},StyleItem:[{$:{level:"18,19,20",desc:"50,27,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"19"},StyleItem:[{$:{level:"18,19,20",desc:"50,36,1,1,12,0xff8E3A3D,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"20"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,39,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"21"},StyleItem:[{$:{level:"18,19",desc:"50,44,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,44,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"22"},StyleItem:[{$:{level:"18,19",desc:"50,45,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,45,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"23"},StyleItem:[{$:{level:"18,19",desc:"50,46,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,46,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"24"},StyleItem:[{$:{level:"18,19",desc:"50,47,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,47,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"25"},StyleItem:[{$:{level:"18,19",desc:"50,48,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,48,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"26"},StyleItem:[{$:{level:"18,19",desc:"50,49,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,49,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"27"},StyleItem:[{$:{level:"18,19",desc:"50,50,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,50,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"28"},StyleItem:[{$:{level:"18,19",desc:"50,51,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,51,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"29"},StyleItem:[{$:{level:"18,19",desc:"50,52,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,52,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"30"},StyleItem:[{$:{level:"18,19",desc:"50,53,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,53,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"31"},StyleItem:[{$:{level:"18,19",desc:"50,54,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,54,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"32"},StyleItem:[{$:{level:"18,19",desc:"50,55,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,55,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"33"},StyleItem:[{$:{level:"18,19",desc:"50,56,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,56,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"34"},StyleItem:[{$:{level:"18,19",desc:"50,57,2,1,0,0xff696F71,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,57,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"35"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,6,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"36"},StyleItem:[{$:{level:"18,19,20",desc:"50,12,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"37"},StyleItem:[{$:{level:"19,20",desc:"50,13,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"38"},StyleItem:[{$:{level:"18,19,20",desc:"50,16,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"39"},StyleItem:[{$:{level:"17",desc:"50,20,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,20,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"40"},StyleItem:[{$:{level:"17",desc:"50,5,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,5,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"41"},StyleItem:[{$:{level:"20",desc:"50,28,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"42"},StyleItem:[{$:{level:"18,19,20",desc:"50,29,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"43"},StyleItem:[{$:{level:"18,19,20",desc:"50,31,1,1,12,0xff000000,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"44"},StyleItem:[{$:{level:"18,19,20",desc:"50,32,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"45"},StyleItem:[{$:{level:"18,19,20",desc:"50,33,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"46"},StyleItem:[{$:{level:"18",desc:"50,34,2,1,0,0xff935676,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,34,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"47"},StyleItem:[{$:{level:"18,19,20",desc:"50,35,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"48"},StyleItem:[{$:{level:"19,20",desc:"50,37,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"49"},StyleItem:[{$:{level:"18,19,20",desc:"50,38,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"50"},StyleItem:[{$:{level:"18,19,20",desc:"50,42,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"51"},StyleItem:[{$:{level:"18,19,20",desc:"50,41,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"52"},StyleItem:[{$:{level:"20",desc:"50,43,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"53"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,58,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"54"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,21,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"55"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,30,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"56"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff000000,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"57"},StyleItem:[{$:{level:"18,19,20",desc:"50,23,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"58"},StyleItem:[{$:{level:"18,19,20",desc:"50,40,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"59"},StyleItem:[{$:{level:"18,19,20",desc:"50,11,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"60"},StyleItem:[{$:{level:"16,17",desc:"50,1,0,1,20,0xff6590a6,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"62"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,61,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"63"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,60,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"64"},StyleItem:[{$:{level:"17",desc:"50,62,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,62,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"65"},StyleItem:[{$:{level:"17",desc:"50,63,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,63,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"66"},StyleItem:[{$:{level:"17",desc:"50,64,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,64,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"67"},StyleItem:[{$:{level:"17",desc:"50,65,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,65,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"68"},StyleItem:[{$:{level:"17",desc:"50,66,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,66,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"69"},StyleItem:[{$:{level:"17",desc:"50,67,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,67,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"70"},StyleItem:[{$:{level:"17",desc:"50,68,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,68,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"71"},StyleItem:[{$:{level:"17",desc:"50,69,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,69,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"72"},StyleItem:[{$:{level:"17",desc:"50,70,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,70,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"73"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,71,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"74"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,72,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"75"},StyleItem:[{$:{level:"18,19",desc:"50,73,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,73,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"76"},StyleItem:[{$:{level:"18,19",desc:"50,74,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,74,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"77"},StyleItem:[{$:{level:"18,19",desc:"50,75,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,75,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"78"},StyleItem:[{$:{level:"18,19",desc:"50,76,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,76,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"79"},StyleItem:[{$:{level:"19,20",desc:"50,81,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"80"},StyleItem:[{$:{level:"19,20",desc:"50,89,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"81"},StyleItem:[{$:{level:"19,20",desc:"50,85,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"82"},StyleItem:[{$:{level:"19,20",desc:"50,90,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"83"},StyleItem:[{$:{level:"19,20",desc:"50,83,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"84"},StyleItem:[{$:{level:"19,20",desc:"50,103,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"85"},StyleItem:[{$:{level:"19,20",desc:"50,98,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"86"},StyleItem:[{$:{level:"19,20",desc:"50,86,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"87"},StyleItem:[{$:{level:"19,20",desc:"50,87,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"88"},StyleItem:[{$:{level:"19,20",desc:"50,111,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"89"},StyleItem:[{$:{level:"19,20",desc:"50,88,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"90"},StyleItem:[{$:{level:"19,20",desc:"50,91,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"91"},StyleItem:[{$:{level:"19,20",desc:"50,93,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"92"},StyleItem:[{$:{level:"19,20",desc:"50,113,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"93"},StyleItem:[{$:{level:"19,20",desc:"50,95,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"94"},StyleItem:[{$:{level:"19,20",desc:"50,100,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"95"},StyleItem:[{$:{level:"19,20",desc:"50,97,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"96"},StyleItem:[{$:{level:"19,20",desc:"50,94,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"97"},StyleItem:[{$:{level:"18,19,20",desc:"50,108,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"98"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"99"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,1"}}]},{$:{mainkey:"10001",subkey:"105"},StyleItem:[{$:{level:"16,17,18",desc:"50,1,0,1,14,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"106"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"107"},StyleItem:[{$:{level:"16,17,18,19,20",desc:"50,109,1,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]}],LineStyle:[{$:{mainkey:"20001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,10,0,0,0,0xffe68e00,0xffe68e00,0xffe68e00,0xffe68e00"}}]},{$:{mainkey:"20001",subkey:"2"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,8,0,0,0,0xffababab,0xffababab,0xff5e492f,0xffffe080"}}]}],RegionStyle:[{$:{mainkey:"30001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"90,1,0xfffcfbed"}}]},{$:{mainkey:"30001",subkey:"99"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x1a151b2b"}}]},{$:{mainkey:"30001",subkey:"98"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x8c151b2b"}}]}],BuildingStyle:[{$:{mainkey:"30001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"3"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"4"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd6e9 ,0xff6f7c87,0xffacc0d1,0xff99abba,255"}}]},{$:{mainkey:"30001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffcce3e8 ,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"6"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffcce3e8,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"7"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffe5dae8,0xff857f87,0xffcec4d0,0xffb7aeba,255"}}]},{$:{mainkey:"30001",subkey:"8"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfffaeccd,0xff948c79,0xffe1d4b8,0xffc8bda4,255"}}]},{$:{mainkey:"30001",subkey:"9"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff90bae8,0xff546d87,0xff81a7d0,0xff7395ba,255"}}]},{$:{mainkey:"30001",subkey:"10"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff0e3df,0xff8f8d8c,0xffd8ccc8,0xffc0b6b2,255"}}]},{$:{mainkey:"30001",subkey:"11"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd3e9,0xff6f7b87,0xffacbdd1,0xff99a9ba,255"}}]},{$:{mainkey:"30001",subkey:"12"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdae2f4,0xff7f848f,0xffc4cbdb,0xffaeb5c3,255"}}]},{$:{mainkey:"30001",subkey:"13"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff95e3f5,0xff598791,0xff86ccdc,0xff77b6c4,255"}}]},{$:{mainkey:"30001",subkey:"14"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffc9edf5,0xff778d91,0xffb5d5dc,0xffa1bec4,255"}}]},{$:{mainkey:"30001",subkey:"15"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff4c4ba,0xff8f726d,0xffdbb0a7,0xffc39d95,255"}}]},{$:{mainkey:"30001",subkey:"16"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdbe8b3,0xff7f8768,0xffc5d0a1,0xffafba8f,255"}}]},{$:{mainkey:"30001",subkey:"17"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff5cedc,0xff917a82,0xffdcb9c6,0xffc4a5b0,255"}}]}]},go=["strokeColor","strokeOpacity","strokeWeight","fillColor","fillOpacity","strokeStyle","strokeDasharray","fontSize"],bo={setOptions:function(t){},init:function(){return this.NC={},this.UC(_o),this.WC=[],this.NC},GC:function(t){return AMap.getConfig().protocol+"://webapi.amap.com/images/indoor_icon/36/"+t+"@2x.png"},HC:function(t){for(var i=!0,n=13;n<=22;n++){var e=this.VC(t,n);if(e&&(0<e.fontSize||e.iconId)){i=!1;break}}return i},VC:function(t,i){return this.Tn(t,i)},ZC:function(t,i){return this.Tn(t,i)},Pr:function(t,i){return this.Tn(t,i)},YC:function(t,i){var n=go;if(i)for(var e in i)i.hasOwnProperty(e)&&0<=n.indexOf(e)&&void 0===t[e]&&(t[e]=i[e]);return t},JC:function(t,i){if(!t)return null;for(var n=go,e={},s=0,r=n.length;s<r;s++){var o=n[s];t.hasOwnProperty(o)&&void 0!==t[o]&&(e[o]=t[o])}return this.YC(e,i),e},Tn:function(t,i){t=t[0]+"_"+t[1],i=Math.round(i);var n=this.NC[t];if(!n)return this.WC.indexOf(t)<0&&this.WC.push(t),null;for(var e=0,s=n.length;e<s;e++)if(0<=n[e].levels.indexOf(""+i))return n[e].styleOpts;return 20<i&&0<=(t=n[n.length-1]).levels.indexOf("20")?(t.levels.push(""+i),t.styleOpts):null},UC:function(t){for(var i in t)t.hasOwnProperty(i)&&this.XC(t[i],i)},XC:function(t,i){for(var n=0,e=t.length;n<e;n++)this.qC(t[n],i)},qC:function(t,i){var n,e=t.$;e&&(n=e.mainkey,e=e.subkey,t=t.StyleItem,e=n+"_"+e,this.NC[e],this.NC[e]=this.QC(t,i))},QC:function(t,i){for(var n=[],e=0,s=t.length;e<s;e++){var r=this.KC(t[e],i);r&&n.push(r)}return n},KC:function(t,i){var n=t.$;if(n)return(t={}).levels=n.level.split(","),t.desc=n.desc.split(","),t.styleOpts=this.$I(t,t.desc,i),t.styleOpts.levels=t.levels,t},BI:function(t){for(var i=[],n=0,e=t.length;n<e;n+=2)i.push(parseInt(t.substr(n,2),16));return i.push(i.shift()),"rgb("+(i=i.slice(0,3)).join(",")+")"},WI:function(t){return t.trim&&(t=t.trim()),this.BI(t.substr(2,8))},GI:function(){return this.HI++},$I:function(t,i,n){var e;switch(n){case"PoiStyle":1===(e={iconId:parseInt(i[1],10),fontSize:Math.min(15,parseInt(i[4],10)||0),fillColor:this.WI(i[5]),strokeColor:this.WI(i[6]),VI:0===parseInt(i[8],10)}).iconId&&(e.iconId=0);break;case"LineStyle":e={fillColor:"rgb(252, 249, 242)",strokeColor:this.WI(i[7]),strokeWeight:Math.max(2,Math.round(parseInt(i[2],10)/3))};break;case"RegionStyle":e={fillColor:this.WI(i[2])};break;case"BuildingStyle":e={fillColor:this.WI(i[1]),strokeColor:this.WI(i[2])};break;default:return null}return e._uid=this.GI(),e}},xo_strokeColor="rgb(230,142,0)",ko_fillColor="rgb(252, 249, 242)",ko_strokeColor="rgb(171,171,171)",wo=(yo=C,yt.Ei(Mo,yo),Mo.prototype.getContainer=function(){return document.createElement("div")},Mo.prototype.Kn=function(t,i,n,e,s){},Mo.prototype.render=function(t){var i=this,n=t.data;if(!n||n.length<1||!this.gs)return!1;this._map=this.gs.map,this.sZ||(this.sZ=!0,this._map.on("click",function(t){i.e$&&i.e$.hide(),i.gs.oZ()}));var e=this.gs.ZI(),s=e.indoor,r=e.floorInfo;if(e&&!1===e.visible)return!1;if(t=this.qI(n),this.UL=n,!t)return!1;e.changeFloor||(t={centerId:t},this.gs.setRenderData(t));for(var o=Object.keys(n),a=0;a<o.length;a++){var h,f=o[a],u=n[f],c=u.building;c&&c.properties&&this.gs.getIntersect(c.properties.outside_outline)&&(s[f]?s[f].curFloor!==(h=r[f])&&this.gS(u,h):(h="1",r[f]&&(h=r[f]),this.gS(u,h)))}},Mo.prototype.HF=function(t){this.gs=t},Mo.prototype.t$=function(){var t=this;this.i$||(yt.Module&&yt.Module.module?yt.Module.module("AMap.IndoorMapFloorBar",function(){t.i$=!0}):M&&M.module)},Mo.prototype.QI=function(t,i){var e=this,s=(n=this.gs.ZI()).floorInfo,r=(n.showId,n.centerId),o=n.hideFloorBar,a=null,n=null,i=Number(s[i])||1;if((t=t.properties)&&t.floor_nonas&&(a=t.floor_nonas,n=t.floor_indexs),!a||!n)return!1;if(1<n.length&&n[0]>n[1]&&(a=a.reverse(),n=n.reverse()),!this.e$&&this.i$){if(yt.Module&&yt.Module.module&&(this.e$=new yt.Module.IndoorMapFloorBar({floors:a,floorIndexs:n,currentFloor:i}),this.WL=r,this.gs.setBar(this.e$),this.gs.setRenderData({barCenterId:this.WL})),!this.e$)return!1;this._map.addControl(this.e$),this.e$.on("floorchange",function(t){e.pD=!0;var i=t.currentIndex,n=e.gs.ZI().centerId;e.gs.n$(n,i),t=e._map.Mv.getSource(e.gs.co()),n&&(e.gs.setRenderData({changeFloor:!0}),t.JR(n,i))})}else this.e$&&(this.WL=r,this.e$.setOption({floors:a,floorIndexs:n,currentFloor:i}),this.gs.setRenderData({barCenterId:this.WL}));o&&this.e$&&this.e$.hide(),!this.GL&&this._map&&(this.GL=!0,this._map.on("moveend",function(){var t=e.vD();t&&(t={centerId:t},e.gs.setRenderData(t)),e.gs.setRenderData({changeFloor:!1}),e.setBarOpt(),e.gs.uD()}))},Mo.prototype.setBarOpt=function(){var t=1,n=(i=this.gs.ZI()).centerId;if(n===this.WL)return!1;if(i.floorInfo[n]&&(t=i.floorInfo[n]),this.UL&&this.UL[n]&&this.UL[n].building){var e=this.UL[n].building.properties,s=null,i=null;if(e&&e.floor_nonas&&(s=e.floor_nonas,i=e.floor_indexs),!s||!i)return!1;1<i.length&&i[0]>i[1]&&(s=s.reverse(),i=i.reverse()),this.e$&&(this.e$.setOption({floors:s,floorIndexs:i,currentFloor:Number(t)}),this.WL=n,this.gs.setRenderData({barCenterId:this.WL}))}},Mo.prototype.qI=function(t){for(var i=this._map.getCenter().toJSON(),n=null,e="",s=Object.keys(t),r=0;r<s.length;r++){var o=s[r],a=t[o];a.building&&a.building.properties&&a.building.properties.centerPoint&&(a=a.building.properties.centerPoint,a=new AMap.LngLat(a[0],a[1]),a=AMap.GeometryUtil.distance(i,a),(!n||a<n)&&(n=a,e=o))}return e},Mo.prototype.vD=function(){for(var t=this._map.getCenter().toJSON(),i=null,n="",e=this.gs.ZI().indoor,s=Object.keys(e),r=0;r<s.length;r++){var o=s[r],a=e[o];a.buildingCenter&&(a=a.buildingCenter,a=new AMap.LngLat(a[0],a[1]),a=AMap.GeometryUtil.distance(t,a),(!i||a<i)&&(i=a,n=o))}return n},Mo.prototype.fD=function(t,i){var n=this.gs.ZI();n.floorInfo||(n.floorInfo={}),n.floorInfo[t]=i,this.gs.setRenderData(n)},Mo.prototype.gS=function(t,i){var n=Object.keys(t.data)[0];if(i&&(n=i),!t.data[n])return!1;var e=t.data[n].floor,s=t.data[n].id;if(!e||!s)return!1;n=this.gs.ZI(),this.fD(s,i),n.centerId===s&&this.QI(t.building,s),this.o$(e,s,t.building,i),this.gs.mD(!0)},Mo.prototype.ar=function(t){var i=this.gs.ZI().indoor;i&&i[t]&&(i[t].polygons&&this.gs.$F.remove(i[t].polygons),i[t]&&i[t].markers&&0<i[t].markers.length&&this.a$.remove(i[t].markers))},Mo.prototype.h$=function(t){var i=this;if(!t||!t.properties)return null;var n=t.properties.poitype,e=t.position,s=n.join("_"),r=this.l$[s]&&this.l$[s][0],n=this.gs.ZI();return r&&r.styleOpts&&r.styleOpts.iconId?(s=r.styleOpts.iconId,s=bo.GC(s),n={position:e,zooms:t.zooms,opacity:n.opacity,rank:3e5,icon:{size:[18,18],image:s,anchor:"center"},extData:t.properties,innerOverlay:!0},t.text&&(s=r.styleOpts.fillColor||"rgb(132,99,142)",r=r.styleOpts.strokeColor||"#FFFFFF",n=yt.assign(n,{text:{content:t.text,direction:"bottom",style:{fillColor:s,strokeColor:r,fontSize:12}}})),(n=new AMap.LabelMarker(n)).on("click",function(t){i._map&&i._map.getStatus().isHotspot&&i.bi("click",t)}),n.on("mousemove",function(t){i._map&&i._map.getStatus().isHotspot&&i.bi("mousemove",t)}),n.on("mouseout",function(t){i._map&&i._map.getStatus().isHotspot&&i.bi("mousemove",t)}),n):null},Mo.prototype.bi=function(t,i){var n,e="hotspot",s=i.target.getExtData();switch(t){case"click":n=e+t;break;case"mouseover":n=e+"over";break;case"mouseout":n=e+"out"}n&&((e=this._map.getProjection().unproject(i.lnglat.lng,i.lnglat.lat))[0],e[1],i={type:n,id:s.pid,name:s.name,lnglat:i.lnglat,originEvent:i.originEvent},this._map.emit(n,i))},Mo.prototype.o$=function(t,i,n,e){var o=this;if(!this._map||!i)return!1;var s=this.gs.ZI();this.ar(i),this._map.getZoom();for(var r=[],a=[],h=t.shops,f=t.floor,u=t.cons,c={building_id:i,floor:f},l=h.length,v=[],d=[],p=[],m=[],y=[],_=0;_<l;_++){var g=h[_],b=g.properties,x=g.geometry,k=yt.assign({shop:{id:b.cpid,name:b.name}},c),w="#FFFFFF",M="#FE9A2E";b&&b.regiontype&&(g=b.regiontype.join("_"),(g=this.l$[g]&&this.l$[g][0])&&g.styleOpts&&(w=g.styleOpts.fillColor,M=g.styleOpts.strokeColor)),d.push(w),p.push(M),y.push(s.opacity),m.push({indoorPolygon:!0,indoorData:k,id:i}),v.push(x.coordinates),b.zoom_min&&b.zoom_max&&b.font_anthor_point&&(O={position:[(k=b.font_anthor_point)[0],k[1]],text:b.name,properties:b,zooms:[b.zoom_min,b.zoom_max]},($=this.h$(O))&&a.push($))}var C=new AMap.Polygon({path:v,innerOverlay:!0,cursor:s.cursor,zooms:this.YI,async:!0,fillColor:function(t){return d[t]},strokeColor:function(t){return p[t]},fillOpacity:function(t){return y[t]},strokeOpacity:s.opacity,strokeWeight:1,zIndex:s.zIndex+2});C.on("click",function(t){var i=m[t.vectorIndex],n=i.id;o.e$&&o.e$.show(),n&&(n={centerId:n,changeFloor:!0},o.gs.setRenderData(n),o.setBarOpt(),o.gs.uD()),i.indoorData.ext={type:"polygon",data:t},o.gs._emit("click",i.indoorData)}),C.on("mouseover",function(t){for(var i=0,n=m.length;i<n;i++){var e=m[i];e.originFillOpacity&&e.originFillColor&&(d[i]=e.originFillColor,y[i]=e.originFillOpacity)}var s=m[t.vectorIndex],r=t.lnglat;s.originFillOpacity=y[t.vectorIndex],s.originFillColor=d[t.vectorIndex],d[t.vectorIndex]="#B45F04",y[t.vectorIndex]=.4,s.indoorData&&s.indoorData.shop&&s.indoorData.shop.name&&(s='<div style="padding: 5px; border: 1px solid rgba(41,38,36,0.87);; white-space:nowrap; border-radius: 2px;color: #000000; background: #FBF5EF; font-size:12px;">'+s.indoorData.shop.name+"</div>",o.JT=new AMap.Marker({position:r,content:s,anchor:"bottom-left",map:o._map,noSelect:!0})),C.to()}),C.on("mouseout",function(t){for(var i=0,n=m.length;i<n;i++){var e=m[i];e.originFillOpacity&&e.originFillColor&&(d[i]=e.originFillColor,y[i]=e.originFillOpacity)}o.JT&&o._map.remove(o.JT),C.to()}),r.push(C);var A=null,S=[];if(f.geometry&&f.geometry.coordinates){w=ko_fillColor,M=ko_strokeColor,s.centerId===i&&(M=xo_strokeColor);var I=f.geometry.coordinates;if(f.geometry.type&&"MultiPolygon"===f.geometry.type&&I[0]&&1<I[0].length){for(var z=[],T=0;T<I[0].length;T++)z.push(I[0][T]);I=z}for(var L=0;L<I.length;L++){var D=new AMap.Polygon({async:!0,strokeWeight:3,innerOverlay:!0,zooms:this.YI,path:I[L],fillColor:w,strokeColor:M,zIndex:s.zIndex+1,fillOpacity:s.opacity,strokeOpacity:s.opacity,extData:{indoorPolygon:!0,id:i}}),A=!0;D.on("click",function(t){t=t.target.getExtData().id,o.e$&&o.e$.show(),t&&(t={centerId:t,changeFloor:!0},o.gs.setRenderData(t)),o.setBarOpt(),o.gs.uD()}),S.push(D),r.push(D)}}s.showId&&this.gs.setRenderData({centerId:s.showId}),this.gs.uD(),this.gs.$F.add(r),s.indoor[i]||(s.indoor[i]={}),s.indoor[i].curFloor=e,s.indoor[i].polygons=r,s.indoor[i].outline=S,n&&n.properties&&n.properties.centerPoint&&(s.indoor[i].buildingCenter=n.properties.centerPoint),s&&s.showId===i&&A&&"undefined"!==s.animateState&&this._map.setStatus({animateEnable:s.animateState});for(var F=u.length,H=0;H<F;H++){var $,x=(E=u[H]).geometry,B=(b=E.properties).zoom_min,E=b.zoom_max,O={properties:b,position:[x.coordinates[0],x.coordinates[1]],zooms:[B,E]};($=this.h$(O))&&a.push($)}this.f$||(this._map.add(this.a$),this.gs.setRenderData({labelsLayer:this.a$}),this.f$=!0),s.indoor[i].markers=a,void 0!==s.zIndex&&this.a$.setzIndex(s.zIndex+9),this.a$.add(a),f=this._map&&this._map.showLabel,s.showLabels&&f&&this.a$.show(),this.gs.KI(s),f={status:0,id:i,building:{id:i}},n.properties&&(n=n.properties,f.building.name=n.name_cn,f.building.lnglat=n.centerPoint,f.building.floor=e||1,f.building.floor_details={floor_indexs:n.floor_indexs,floor_nonas:n.floor_nonas,floor_names:n.floor_names},this.gs.setRenderData(f)),s.complete||(s.complete={}),s.complete[i]||(s.complete[i]={}),s.complete[i][e]?this.pD&&(this.gs._emit("floor_complete",f),this.pD=!1):(this.gs._emit("floor_complete",f),s.complete[i][e]=!0),this.gs.setRenderData(s.complete)},Mo);function Mo(){var t=yo.call(this)||this;return t._config=AMap.getConfig(),t.YI=[17,22],t.l$=bo.init(),t.a$=new Ur({opacity:1,collision:!0,allowCollision:!0,zIndex:9,zooms:[17,22],visible:!1}),t.GL=!1,t.i$=!1,t.WL="",t._map=null,t.f$=!1,t.UL=null,t.pD=!1,t.t$(),t.sZ=!1,t}var Co,Ao=(Co=C,yt.Ei(So,Co),So.prototype.Kn=function(t,i,n,e,s){if(i.s_&&i&&!(i.tiles.length<1))for(var r=0;r<i.tiles.length;r++){var o=i.tiles[r];this.GG(t,o,n,e),o&&(this.Lc(t,o,n,e),this.sT(t,o,n,e),this.Ic(t,o,n,e),this.UG(t,o,n,e))}},So.prototype.GG=function(t,i,n,e){var s=t.Wn();if(r=i.stencil){var o=r.Dc;if(o){o.upload(s.context);var a=o.zs,h=o.Pc,t=r.Oc,r=n.$n.optimalZoom,f=(e.opacity,[i.Sa[0],i.Sa[1]]),u=1;"3D"===n.$n.viewMode&&(u=n.map.getView().EF()),r<yt.Ra&&(f=[0,0]);for(var c=0,l=t.jc;c<l.length;c++){var v=l[c],d={u_matrix:n.$n.mvpMatrix,u_color:[0,0,0,0],u_offset:[0,0],u_localDeltaCenter:f,u_viewHeight:n.$n.size[1],u_skyHeight:u};o.Qx&&(s.context.getExtension("OES_element_index_uint"),s.Ce(d,{a_pos:{type:"vec2",Re:a.size,offset:0,buffer:a}},v.length,h,"TRIANGLES",void 0,E.Si,T.TE,void 0,v.offset))}}}},So.prototype.UG=function(t,i,n,e){var s=t.Wn();if(r=i.stencil){var o=r.Dc;if(o){o.upload(s.context);var a=o.zs,h=o.Pc,t=r.Oc,r=n.$n.optimalZoom,f=(e.opacity,[i.Sa[0],i.Sa[1]]),u=1;"3D"===n.$n.viewMode&&(u=n.map.getView().EF()),r<yt.Ra&&(f=[0,0]);for(var c=0,l=t.jc;c<l.length;c++){var v=l[c],d={u_matrix:n.$n.mvpMatrix,u_color:[0,0,0,0],u_offset:[0,0],u_localDeltaCenter:f,u_viewHeight:n.$n.size[1],u_skyHeight:u};o.Qx&&(s.context.getExtension("OES_element_index_uint"),s.Ce(d,{a_pos:{type:"vec2",Re:a.size,offset:0,buffer:a}},v.length,h,"TRIANGLES",void 0,E.Si,T.FE,void 0,v.offset))}}}},So.prototype.Lc=function(t,i,n,e){var s=t.Wn(),r=i.data;if(r){var o=r.Dc;if(o){o.upload(s.context);var a=o.zs,h=o.Pc,f=r.Oc,t=n.$n.optimalZoom,u=(e.opacity,[i.Sa[0],i.Sa[1]]),c=1;"3D"===n.$n.viewMode&&(c=n.map.getView().EF()),t<yt.Ra&&(u=[0,0]);for(var l=0,v=f.jc;l<v.length;l++){var d,p=v[l],m={u_matrix:n.$n.mvpMatrix,u_color:r.bgColor,u_offset:[0,0],u_localDeltaCenter:u,u_viewHeight:n.$n.size[1],u_skyHeight:c};!p.style||(d=p.style).fillColor&&(d=d.fillColor,m.u_color=d),m&&o.Qx&&(s.context.getExtension("OES_element_index_uint"),s.Ce(m,{a_pos:{type:"vec2",Re:a.size,offset:0,buffer:a}},p.length,h,"TRIANGLES",void 0,E.Si,this.ZG,void 0,p.offset))}}}},So.prototype.Ic=function(t,i,n,e){var s=i.data;if(s&&s.$c){var r=s.Uc,o=n.$n.optimalZoom,a=[i.Sa[0],i.Sa[1]];o<yt.Ra&&(a=[0,0]);var h=s.$c;if(h.upload(t.context),h.uploaded&&h.zs){r.jc.sort(function(t,i){return t.style&&t.style[0]&&t.style[0].jr&&i.style&&i.style[0]&&i.style[0].jr?i.style[0].jr<t.style[0].jr?1:-1:0});for(var f=0,u=r.jc;f<u.length;f++){var c=u[f],l=h.zs.buffer;if(c.style&&!(c.style.length<1)){var v={u_color:[0,0,0,.5],u_matrix:n.$n.mvpMatrix,u_meter_per_pixel:n.$n.resolution,u_width:1,u_offset:[0,0],u_localDeltaCenter:a,u_dash:"vec3",u_dashType:"int",u_skyHeight:1,u_viewHeight:1},d=c.style[0];if(d&&d.faceColor&&d.$r&&d.type&&"line"===d.type){var p=c.style[0].faceColor;if(v.u_color=p,v.u_width=d.$r,!v)return;(d=t.Xn()).context.getExtension("OES_element_index_uint"),d.Ce(v,{a_pos:{buffer:l,type:"vec2",Re:l.size,offset:0},a_normal:{type:"vec2",buffer:l,Re:l.size,offset:8},a_distance:{type:"float",buffer:l,Re:l.size,offset:16},a_dir:{type:"vec2",buffer:l,Re:l.size,offset:20}},c.length,h.Pc.buffer,void 0,void 0,E.Si,this.ZG,void 0,c.offset)}}}}}},So.prototype.sT=function(t,i,n,e){var s=i.data;if(s&&s.$c){var r=s.Uc,o=n.$n.optimalZoom,a=[i.Sa[0],i.Sa[1]];o<yt.Ra&&(a=[0,0]);var h=s.$c;if(h.upload(t.context),h.uploaded&&h.zs){r.jc.sort(function(t,i){return t.style&&t.style[0]&&t.style[0].Or&&i.style&&i.style[0]&&i.style[0].Or?i.style[0].Or<t.style[0].Or?1:-1:0});for(var f=0,u=r.jc;f<u.length;f++){var c=u[f],l=h.zs.buffer;if(c.style&&!(c.style.length<1)){var v={u_color:[0,0,0,.5],u_matrix:n.$n.mvpMatrix,u_meter_per_pixel:n.$n.resolution,u_width:1,u_offset:[0,0],u_localDeltaCenter:a,u_dash:"vec3",u_dashType:"int",u_skyHeight:1,u_viewHeight:1},d=c.style[0];if(d&&d.borderColor&&d.borderWidth&&d.type&&"line"===d.type){var p=c.style[0].borderColor;if(v.u_color=p,v.u_width=d.borderWidth,!v)return;(d=t.Xn()).context.getExtension("OES_element_index_uint"),d.Ce(v,{a_pos:{buffer:l,type:"vec2",Re:l.size,offset:0},a_normal:{type:"vec2",buffer:l,Re:l.size,offset:8},a_distance:{type:"float",buffer:l,Re:l.size,offset:16},a_dir:{type:"vec2",buffer:l,Re:l.size,offset:20}},c.length,h.Pc.buffer,void 0,void 0,E.Si,this.ZG,void 0,c.offset)}}}}}},So.prototype.fb=function(t,i){var e="rgb(0,0,0)";if(e=yt.Util.color2RgbaArray(e))return(e=e.slice(0,3)).push(1),{u_color:e,u_matrix:i.$n.mvpMatrix,u_meter_per_pixel:i.$n.resolution,u_width:2,u_offset:t.zx}},So);function So(){var t=Co.call(this)||this;return t.yz=1,t.VG=1,t.VG=1,t.ZG=T.HE,t}var Io,zo=(Io=yt.lw,yt.Ei(To,Io),To.prototype.getState=function(){return{visible:this._visible,opacity:this.tl,zIndex:this.Qh,To:this,path:this.$x,depthTest:this.AF,ce:this.IF}},To.prototype.setMask=function(t){t&&(this.$x=t,this.getSource().CS(),null!==(t=this.map)&&void 0!==t&&t.setNeedUpdate(!1))},To.prototype.Lo=function(){return{id:this.No,type:"mask",zooms:[2,22]}},To.prototype.co=function(){return this.No},To.prototype.lo=function(){return!0},To);function To(t){var i=Io.call(this,t)||this;return i.CLASS_NAME="AMap.MaskLayer",i.$x=t.path,i.Qh=t.zIndex||-100,i.tl=void 0===t.opacity?1:t.opacity,i._visible=void 0===t.visible||t.visible,i.xt=t.zooms||[2,22],i}function Lo(){}Lo.prototype.destroy=function(){this.wo&&this.wo.parentNode&&this.wo.parentNode.removeChild(this.wo)};var Do,Fo=(Do=qi=Lo,yt.Ei(Ho,Do),Ho.prototype.getContainer=function(){return this.wo},Ho.prototype.Kn=function(){},Ho);function Ho(){var t=Do.call(this)||this;return t.wo=document.createElement("div"),t}var $o,Eo=($o=qi,yt.Ei(Bo,$o),Bo.prototype.Kn=function(t,i,n,e,s,r){s.map;var o=n.$n,a=r.eo(),s=a.zooms||[2,22],r=o.boundsCoord,h=[0,0];if(this.wo.style.zIndex=a.zIndex+"",this.wo.style.opacity=a.opacity+"",this.wo.style.visibility=a.visible?"visible":"hidden",this.bo!==o.zoom&&this.xo(),!(i.tiles.length<=0||o.optimalZoom<s[0]||o.optimalZoom>s[1])){this.mo=[r[0],r[3]];var f=i.tiles||[];this.ko(f);for(var u=0,c=f.length;u<c;u+=1)for(var l=f[u],v=0,d=l.length;v<d;v+=1){var p,m,y,_,g,b=l[v];"loaded"===b.status&&(y=b.Ro,h[0]=y[0]-this.mo[0],h[1]=y[3]-this.mo[1],_={center:o.centerCoord,rotation:o.rotation,size:n.size,$n:o},p=yt.V[o.projectionId].yo(h[0],h[1],b.zo.z,_),b.data&&(m=Math.pow(2,o.zoom-b.zo.z),y=Math.ceil(256*m)+"px",_=b.data,this.So.contains?this.So.contains(b.data)&&((g=new Image).src=b.data.src,_=g):b.data.parentNode===this.So&&((g=new Image).src=b.data.src,_=g),"CANVAS"===b.data.tagName&&((_=new Image).src=b.data.toDataURL()),this.Co[b.zo.key]=b,_.className="xyz-"+b.zo.x+"-"+b.zo.y+"-"+b.zo.z,_.style.width=_.style.height=y,_.width=_.height=Math.ceil(256*m),_.style.left=Math.ceil(p[0]*m)+"px",_.style.top=Math.ceil(p[1]*m)+"px",this.Co[b.zo.key]&&this.bo===o.zoom&&(this.Co[b.zo.key].data=b.data,(g=this.wo.querySelector(".xyz-"+b.zo.x+"-"+b.zo.y+"-"+b.zo.z))&&this.wo.removeChild(g)),this.So.appendChild(_)))}this.wo.appendChild(this.So),this.bo=o.zoom}},Bo.prototype.getContainer=function(){return this.wo},Bo.prototype.destroy=function(){this.wo&&this.wo.parentNode&&this.wo.parentNode.removeChild(this.wo)},Bo.prototype.GT=function(t,i){this.wo=document.createElement("div"),this.wo.className="amap-layer amap-layer-tile amap-"+i.co(),this.wo.style.zIndex=i.eo().zIndex+"",this.wo.style.opacity=i.eo().opacity+"",this.wo.style.visibility=i.eo().visible?"visible":"hidden",this.So=document.createDocumentFragment(),t.do.appendChild(this.wo)},Bo.prototype.xo=function(){this.wo.innerHTML="",this.Co={}},Bo.prototype.ko=function(t){for(var i=Object.keys(this.Co),n=0,e=i.length;n<e;n++){for(var s,r=i[n],o=!1,a=0,h=t.length;a<h;a++)for(var f=t[a],u=0,c=f.length;u<c;u++)if(f[u].zo.key===r){o=!0;break}o||(s=this.Co[r].zo,s=this.wo.querySelector(".xyz-"+s.x+"-"+s.y+"-"+s.z),delete this.Co[r],s&&this.wo.removeChild(s))}},Bo);function Bo(t,i){var n=$o.call(this)||this;return n.Co={},n.bo=0,n.GT(t,i),n}var Oo,Po=(Oo=qi,yt.Ei(Ro,Oo),Ro.prototype.Kn=function(t,i,n,e,s,r){var o=s.map,s=i.Ro,r=r.eo();this.wo.style.zIndex=r.zIndex+"",this.wo.style.opacity=r.opacity+"",this.wo.style.visibility=r.visible?"visible":"hidden",r=o.coordToContainer([s[0],s[3]]),s=o.coordToContainer([s[2],s[1]]),i.image.style.top=r[1]+"px",i.image.style.left=r[0]+"px",i.image.style.width=s[0]-r[0]+"px",i.image.style.height=s[1]-r[1]+"px",this.wo.appendChild(i.image)},Ro.prototype.getContainer=function(){return this.wo},Ro.prototype.GT=function(t,i){this.wo=document.createElement("div"),this.wo.className="amap-layer amap-layer-image amap-"+i.co(),this.wo.style.zIndex=i.eo().zIndex+"",this.wo.style.opacity=i.eo().opacity+"",this.wo.style.visibility=i.eo().visible?"visible":"hidden",t.do.appendChild(this.wo)},Ro.prototype.xo=function(){this.wo.innerHTML=""},Ro);function Ro(t,i){var n=Oo.call(this)||this;return n.GT(t,i),n}var No,Wo="Nebula.labelsLayer",Go="nebula",Uo=(No=yt.lw,yt.Ei(Zo,No),Zo.prototype.getState=function(){return yt.assign({},{To:this,rejectMapMask:this.lz},No.prototype.eo.call(this))},Zo.prototype.Lo=function(){var t=AMap.getConfig().protocol;return{id:Go,type:Go,tileUrl:t+(yt._.wasm?"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v3":"://{vdata,vdata01,vdata02,vdata03,vdata04}.amap.com/nebula/v2"),tileSize:0,zooms:[2,22]}},Zo.prototype.co=function(){return Go},Zo.prototype.vi=function(t){return null},Zo.prototype.Do=function(t){return No.prototype.Do.call(this,t)},Zo);function Zo(t){void 0===t&&(t={});var i=No.call(this,t)||this;return i.CLASS_NAME="AMap.Nebula.LabelsLayer",i._opts={id:Wo,type:Wo,opacity:1,visible:1,collision:!0,allowCollision:!1},i._opts=yt.assign({},i._opts,t),i.Qh=t.labelzIndex||100,i._visible=!1!==t.showLabel,i.tl=void 0===t.opacity?1:t.opacity,i}var Vo,Yo=(Vo=yt.Event,yt.Ei(Jo,Vo),Jo.prototype.TL=function(){return this.gm||this.Lv||this.lt||this.Cv},Jo.prototype.getContext=function(){return this.mm.context},Jo.prototype.getView=function(){return this._view},Jo.prototype.getContainer=function(){return this.kv},Jo.prototype.getSize=function(){var t=this._view.getStatus().size;return new yt.Size(t[0],t[1])},Jo.prototype.addLayer=function(t){var i,n,e,s;"d"===yt._.baseRender&&/^AMap\.DistrictLayer$/g.test(t.CLASS_NAME)?console.log("浏览器版本过低，请升级最新版本的浏览器，或使用高版本火狐、谷歌等浏览器。"):(t.map=this,i=t.Lo(),n=this.Mv.qh(i,this._view.au(),t),t.Hh(this.Mv),t.Kh(n),e=this.Rv(t,{}),t.Do(e),this.zv.push(t),this.zv.sort(function(t,i){return t.getOptions().zIndex-i.getOptions().zIndex}),"AMap.NebulaLayer"!==t.CLASS_NAME&&"AMap.TileLayer.RoadNet"!==t.CLASS_NAME||!1===this.showLabel||"w"!==this.baseRender||(s=this.getLayerByClass("AMap.Nebula.LabelsLayer"))||(s=new Uo(yt.Ln(yt.Ln({},this.options),{rejectMapMask:!0})),this.addLayer(s)),"AMap.Nebula.LabelsLayer"!==t.CLASS_NAME&&"AMap.MapboxLayer"!==t.CLASS_NAME||!1===this.showLabel||"w"!==this.baseRender||((s=this.getLayerByClass("AMap.Inner.LabelsLayer"))?s.oP()&&s.show():(s=new ge(yt.Ln(yt.Ln({},this.options),{rejectMapMask:!0})),this.addLayer(s)),s.getSource().qh(i.id,n)),"AMap.NebulaLayer"===t.CLASS_NAME&&this.yS()&&(yt.some(this.zv,function(t){return"AMap.Buildings"===t.CLASS_NAME})||this.addLayer(new AMap.Buildings({zooms:[16.8,22],rejectMapMask:!0,zIndex:10,visible:!0,u$:!0}))),this.c$&&(yt.some(this.zv,function(t){return"AMap.MaskLayer"===t.CLASS_NAME})||this.d$||(this.d$=new zo({zIndex:-10,visible:!0,path:this.c$}),this.addLayer(this.d$))),"3D"===this.getView().type&&(yt.some(this.zv,function(t){return"AMap.SkyLayer"===t.CLASS_NAME})||this.addLayer(new fo({zIndex:-1,visible:!0,skyColor:this.$C}))),t.onAdd&&t.onAdd(),this.d_(),this.setNeedUpdate(!0))},Jo.prototype.removeLayer=function(t){for(var i,n=0;n<this.zv.length;n++)this.zv[n]===t&&(this.zv.splice(n,1),t.v$&&(t.v$(),"d"===yt._.baseRender&&null!==(i=t.getRender())&&void 0!==i&&i.destroy()),t.map=null,--n);this.d_(),this.setNeedUpdate(!0)},Jo.prototype.setLayers=function(t){for(var i=0;i<this.zv.length;i++)"AMap.VectorLayer"!==(n=this.zv[i]).CLASS_NAME&&this.removeLayer(n);for(var n,i=0;i<t.length;i++)(n=t[i]).setMap(this)},Jo.prototype.getLayers=function(){return this.zv.filter(function(t){return!t._opts||!t._opts.TF})},Jo.prototype.DF=function(){return this.zv},Jo.prototype.getDefaultLayer=function(){for(var t=this.getLayers(),i=0;i<t.length;i++){var n=t[i];if(n instanceof ve||"_defaultLayer"===n.eo().id)return n}},Jo.prototype.getLayerByClass=function(t){for(var i=this.getLayers(),n=0;n<i.length;n++){var e=i[n];if(e.CLASS_NAME===t)return e}},Jo.prototype.isDOMRender=function(){return!yt._.isWebGL||"d"===this.baseRender},Jo.prototype.isDOMMode=function(){return!yt._.isWebGL||"d"===this.baseRender},Jo.prototype.getMapState=function(){return{zooming:this.lt,panning:this.Cv,rotating:this.Lv,pitching:this.gm}},Jo.prototype.getControlContainer=function(){return this.Tv},Jo.prototype.getMapsContainer=function(){return this.Iv},Jo.prototype.getStatus=function(){return{dragEnable:this.Dv,zoomEnable:this.Pv,doubleClickZoom:this.fi,keyboardEnable:this.jv,jogEnable:this.Ov,scrollWheel:this.Fv,zoomSpeed:this.fZ,animateEnable:this.Ev,touchZoomCenter:this.Nv,touchZoom:this.$v,pitchEnable:this.Uv,rotateEnable:this.Bv,showBuildingBlock:this.m$,isHotspot:this.Wv,mapstyleUrl:this.c_,features:this.Cw,allBubble:this.HL,pickWhenMoving:this.UB}},Jo.prototype.setStatus=function(t){this.Dv=void 0!==t.dragEnable?t.dragEnable:this.Dv,this.Pv=void 0!==t.zoomEnable?t.zoomEnable:this.Pv,this.fi=void 0!==t.doubleClickZoom?t.doubleClickZoom:this.fi,this.jv=void 0!==t.keyboardEnable?t.keyboardEnable:this.jv,this.Ov=void 0!==t.jogEnable?t.jogEnable:this.Ov,this.Fv=void 0!==t.scrollWheel?t.scrollWheel:this.Fv,this.Ev=void 0===t.animateEnable?this.Ev:t.animateEnable,this.Uv=void 0===t.pitchEnable?this.Uv:t.pitchEnable,this.$v=void 0===t.touchZoom?this.$v:t.touchZoom,this.Wv=void 0===t.isHotspot?this.Wv:t.isHotspot,this.Bv=void 0===t.rotateEnable?this.Bv:t.rotateEnable,this.HL=void 0===t.allBubble?this.HL:t.allBubble},Jo.prototype.getBuildingColor=function(){return{buildingColor:this.az,roofColor:this.rz,wallColor:this.sz}},Jo.prototype.getMask=function(){return this.c$},Jo.prototype.getOutseaState=function(){return this.YG},Jo.prototype.getMapboxStyle=function(){return this.JG},Jo.prototype._setStyle=function(t){this.mapStyle.setStyle(t,this)},Jo.prototype.f_=function(t){var i=this;if(!t)return!1;"d"!==this.baseRender?(this.c_=t,this.mapStyle.pn(function(){i._getUserStyle(t),i.d_(),i.setNeedUpdate(!0)})):console.log("浏览器版本过低，请升级最新版本的浏览器，或使用高版本火狐、谷歌等浏览器。")},Jo.prototype.getProjection=function(){return yt.at.getProjection(this._view.au())},Jo.prototype.getDefaultCursor=function(){return this.Zv},Jo.prototype.setDefaultCursor=function(t){this.Zv=t,this.setCursor()},Jo.prototype.setCursor=function(t){this.kv&&(t=t||this.getDefaultCursor())!==this.qv&&(yt._.$e||(this.kv.style.cursor=t),this.qv=t)},Jo.prototype.destroy=function(){this.G("beforeDestroy"),this.y$=!0,this.x$&&this.x$.destroy(),this.gn&&this.gn.destroy(),this.Vv(),this.Xv(),this.Hv(),this.G("afterDestroy")},Jo.prototype.getLimitBounds=function(){return this.it},Jo.prototype.setLimitBounds=function(t){this.it=t instanceof Cn?t:new Cn(t)},Jo.prototype.clearLimitBounds=function(){this.it=void 0},Jo.prototype.getZooms=function(){return[Math.max(this.xt[0],2),Math.min(20,this.xt[1])]},Jo.prototype.setZooms=function(t){this.xt=t},Jo.prototype.setNeedUpdate=function(t){this.Jv=5,t&&!this.Kv&&(this.Kv=t,yt.Util.cancelAnimFrame(this.Qv),this.Qv=0,this.Eo()),this.Kv=t},Jo.prototype.render=function(){this.setNeedUpdate(!0)},Jo.prototype.np=function(){this.x$.np()},Jo.prototype.commonWordTextureLoaded=function(){this.x$.commonWordTextureLoaded()},Jo.prototype.qz=function(){return!1!==this.showLabel&&(!this.Cw||-1<this.Cw.indexOf("point"))},Jo.prototype.Qz=function(){return!1!==this.showLabel&&(!this.Cw||-1<this.Cw.indexOf("road"))},Jo.prototype.yS=function(){return!!this.m$||void 0===this.m$&&(!this.Cw||-1<this.Cw.indexOf("building"))},Jo.prototype.getViewMode_=function(){return this._view.type},Jo.prototype.fS=function(){return this.b$},Jo.prototype.XT=function(t){this.QT=t},Jo.prototype.JF=function(t){return t=(t=this.mapStyle.vn.MF("sky",t))&&yt.Sp.Up(t,255),this.$C||t||[.329,.549,.839,1]},Jo.prototype.qF=function(){return this.tB},Jo.prototype.jH=function(){return this.NH},Jo.prototype.UH=function(t){this.Mv.UH(t)},Jo.prototype.im=function(){return this.Mv},Jo.prototype.em=function(t,i,n){if(void 0===i&&(i=[0,0,0,0]),void 0===n&&(n=Jo.t_[1]),!t)return[116.39708007097433,39.874529056682476,12];var e=yt.at.getProjection(this._view.au()),s=yt.V[this._view.au()],r=e.project(t[0],t[1]),o=e.project(t[2],t[3]),a=[o[0]-r[0],o[1]-r[1]],h=this.getSize().toArray(),f=this._view.getStatus().pitch,u=this._view.getStatus().rotation;u*=Math.PI/180;var c=(i[2]-i[3])/2,e=(i[0]-i[1])/2,t=c*Math.cos(u)+Math.sin(u)*e,c=-Math.sin(u)*c+Math.cos(u)*e,e=a[0];return 0!=u&&(a[0]=Math.abs(a[0]*Math.cos(u))+Math.abs(a[1]*Math.sin(u)),a[1]=Math.abs(a[1]*Math.cos(u))+Math.abs(e*Math.sin(u))),u=Math.max(10,h[0]-i[2]-i[3]),i=Math.max(10,h[1]-i[0]-i[1]),u=Math.log(156543.03392804097/a[0]*u)/Math.log(2),i=Math.log(156543.03392804097/a[1]*i)/Math.log(2),i=Math.min(u,i),0<f&&(i-=f/60),i=Math.min(i,n),o=[(r[0]+o[0])/2,(r[1]+o[1])/2],(o=s.transform(o[0],o[1],i))[0]-=t,o[1]-=c,o=s.unproject(o[0],o[1],i),yt.Pt(o,[i])},Jo.prototype.nm=function(t){if(0<t.length){for(var i,n=void 0,e=0;e<t.length;e++)n?(i=t[e].getBounds())&&n.union(i):n=(n=t[e].getBounds())&&n.clone();return n}},Jo.prototype.om=function(t){this._view.setOptions(t)},Jo.prototype.Eo=function(){this.Qv||(this.Qv=yt.Util.requestAnimFrame(this.Yf.bind(this)))},Jo.prototype.rm=function(){return this.hm||(this.hm=new Ur,this.addLayer(this.hm)),this.hm},Jo.prototype.sm=function(){return this.$F.source},Jo.prototype._getUserStyle=function(t){t&&this._changeStyle(t)},Jo.prototype._changeStyle=function(t){var n=this,i=t.split("amap://styles/")[1],s=(e=AMap.getConfig()).protocol,r=e.key,e=-1!==t.indexOf("?isPublic=true"),t=null,t=i.length<32?s+"://webapi.amap.com/style?name="+i+"&key="+r:s+"://webapi.amap.com/v4/map/styles?styleid="+i+"&s=rsv3&key="+r+(e?"&ispublic=1":"");qn.JSONP(t,function(t,i){"complete"===t&&(i=i.data)&&i.data&&i.data.content?(i=JSON.parse(i.data.content),n.QR=i,n._setStyle(i)):n.emit("styleChanged")})},Jo.prototype._getMapboxStyle=function(n){var e=this,t=AMap.getConfig(),i=t.protocol,i=(t.key,i+"://a.amap.com/jsapi/static/json/web_v8_2.0_"+n+".json");qn.Ajax(i,{type:"GET",requestContentType:"application/json"},function(t,i){"complete"===t?(i=i.data,new yt.XG({KG:i}),e.JG={styles:i,vectorMapForeign:n},e.gn&&e.gn.Ha({QG:e.JG}),e.Eo()):e.JG=null})},Jo.prototype.um=function(t){for(var i=0,n=t.length;i<n;i+=1)this.addLayer(t[i])},Jo.prototype.cm=function(){var n=this;k.addClass(this.kv,"amap-container"),k.watchSize(this.kv,function(t,i){n.om({size:[t,i]})},this),this.Iv=k.create("div",this.kv,"amap-maps"),this.do=k.create("div",this.Iv,"amap-layers"),this.fm=k.create("div",this.Iv,"amap-overlays"),this.Tv=k.create("div",this.kv,"amap-controls"),this.Iv.tabIndex=0;var t=this.kv,i={};i.p_=k.create("a",t,"amap-logo"),k.create("img",i.p_).src=yt._.Ue?AMap.getConfig().client+"/theme/v2.0/logo@2x.png":AMap.getConfig().client+"/theme/v2.0/logo@1x.png",i.v_=k.create("div",t,"amap-copyright"),i.v_.style.display="none",350<k.getViewport(this.kv)[0]&&(i.v_.innerHTML=AMap.getConfig().v_,i.v_.mapNumber=k.create("span",i.v_,"amap-mcode")),this.m_=i},Jo.prototype.d_=function(){var t=this.getLayers();if(t){for(var i=-1,n="",e=0;e<t.length;e+=1){var s=t[e].get("mapNumber"),r=t[e].get("zIndex");s&&i<r&&t[e].get("visible")&&(n=s,i=r)}var o=this.c_;return(!this.g$||"GS(2019)6379"===n&&o&&"normal"!==o&&"amap://styles/normal"!==o)&&(n=""),n&&this.tE!==n&&this.m_&&this.m_.v_&&this.m_.v_.mapNumber&&(this.m_.v_.mapNumber.innerHTML="- "+n+"号"),this.tE=n}},Jo.prototype.pm=function(t){var i={size:k.getViewport(this.kv),zoom:t.zoom,center:t.center,rotation:t.rotation,projectionId:t.projection,pitch:t.pitch};return new(t.viewMode&&"3D"===t.viewMode?os:ts)(i,this)},Jo.prototype.dm=function(){},Jo.prototype.Hv=function(){for(k.remove(this.Iv);this.kv.firstChild;)this.kv.removeChild(this.kv.firstChild)},Jo.prototype.Vv=function(){this.pi&&(this.pi.destroy(),delete this.pi),this.di&&(this.di.destroy(),delete this.di),this.vm&&(this.vm.destroy(),delete this.vm)},Jo.prototype.Xv=function(){var t;null!==(t=this.mm)&&void 0!==t&&t.destroy();for(var i=0,n=this.getLayers();i<n.length;i++)n[i].destroy();this.ao&&(this.ao.destroy(),delete this.ao),this.so&&(this.so.destroy(),delete this.ao),this.R_&&(this.R_.destroy(),delete this.R_),this.zv=[],this.Mv.destroy()},Jo.prototype.ym=function(){var t=this._view.getStatus();return{debug:this.debug,layers:this.zv,uo:this.Mv,size:t.size,do:this.do,$n:t,map:this}},Jo.prototype.Yf=function(){if(this.w$(),!this.y$){if(!this.xm)return yt.Util.cancelAnimFrame(this.Qv),void(this.Qv=0);this.pi&&this.pi.iy({}),this.di&&this.di.iy({});var t=this.ym();if(this.bm(t),this.mm&&(this.tB=(new Date).getTime(),this.Mv.oa(t.$n,this,this.mm.context),this.mm.Kn(t)),this.Jv&&this.Kv)this.Qv=yt.Util.requestAnimFrame(this.Yf.bind(this));else if((this.Jv<=0||!this.Kv)&&(this.Kv=!1,yt.Util.cancelAnimFrame(this.Qv),this.Qv=0,this.gm||this.Lv||this.lt||this.Cv)){if(this.lt&&-1!==this.k$){if("d"===yt._.baseRender&&0<=this.k$){if(this.KT(),!this.tD)return void(this.tD=!0);this.tD=!1}this.G("zoomend")}this.Cv&&-1!==this._$&&this.G("moveend"),this.Lv&&-1!==this.M$&&this.G("rotateend"),this.gm&&-1!==this.S$&&this.G("pitchend"),this.Lv=!1,this.gm=!1,this.lt=!1,this.Cv=!1,this.Qv||this.mm&&(this.Mv.oa(t.$n,this,this.mm.context),this.mm.Kn(t))}this.Jv--}},Jo.prototype.bm=function(t){var i=t.$n,e=(n=this.wm).center,s=n.rotation,r=n.zoom,o=n.pitch,a=i.center,h=i.zoom,f=i.rotation,n=i.pitch;if(e[0]!==a[0]||e[1]!==a[1]?(this._$=1,this.Cv||this.G("movestart"),this.Cv=!0,this.G("mapmove")):1<=this._$&&this._$++,r!==h?(this.lt||this.G("zoomstart"),this.G("zoomchange"),this.lt=!0,this.k$=1):1<=this.k$&&this.k$++,s!==f?(this.Lv||this.G("rotatestart"),this.G("rotatechange"),this.Lv=!0,this.M$=1):1<=this.M$&&this.M$++,o!==n?(this.gm||this.G("pitchstart"),this.G("pitchchange"),this.gm=!0,this.S$=1):1<=this.S$&&this.S$++,5<=this._$&&(this.Cv=!1,this._$=-1,this.G("moveend")),5<=this.k$&&(this.lt=!1,this.k$=-1,this.G("zoomend")),5<=this.M$&&(this.Lv=!1,this.M$=-1,this.G("rotateend")),5<=this.S$&&(this.gm=!1,this.S$=-1,this.G("pitchend")),"d"===yt._.baseRender&&4<=this.k$){if(this.KT(),!this.tD)return void(this.tD=!0);this.tD=!1}this.Qv||this.mm&&(this.Mv.oa(t.$n,this,this.mm.context),this.mm.Kn(t)),this.wm=i},Jo.prototype.G=function(t){this.emit(t,{})},Jo.prototype.Rm=function(){var r=this;this.on("styleChanged",function(){if(r.kv){var t,i=void 0,i=r.options.backgroundColor||(r.mapStyle&&(t=r.mapStyle.dn(30001,1,r.getZoom()))&&t.faceColor?((i=t.faceColor.rgba.slice(0))[3]=i[3]/255,"rgba( "+i.join(",")+")"):"#f7f7f7");r.kv.style.backgroundColor=i;for(var n=0,e=r.zv;n<e.length;n++){var s=e[n];yt.qG(s)&&s.sl()}}r.xm=!0,r.Eo()}),this.on("repaint",function(){r.Eo()})},Jo.prototype.w$=function(){var t=this;this.R$||("d"===this.baseRender?(this.R$=!0,yt.Module.module("DomRender",function(){t.mm=new yt.Module.z$(t),t.Eo()})):(this.R$=!0,this.mm=new vn(this),this.I_=new Xr(this),this.yH=new yt.LH(this,this.I_,this.gn)))},Jo.prototype.Rv=function(t,i){if(this.isDOMMode())switch(t.CLASS_NAME){case"AMap.NebulaLayer":case"AMap.ImageLayer":case"AMap.CanvasLayer":return new Po(this,t);case"AMap.VectorLayer":case"AMap.VectorSvgLayer":return t.getRender();case"AMap.RasterLayer":case"AMap.TileLayer":case"AMap.TileLayer.Flexible":case"AMap.TileLayer.RoadNet":case"AMap.TileLayer.Satellite":case"AMap.TileLayer.Traffic":case"AMap.TileLayer.WMS":case"AMap.TileLayer.WMTS":return new Eo(this,t);case"AMap.SkyLayer":return new Fo;case"AMap.IndoorMap":return new wo;case"AMap.LabelsLayer":return new Yr;case"AMap.CustomLayer":return new Hs;default:return new Eo(this,t)}else switch(t.CLASS_NAME){case"AMap.NebulaLayer":return new ks;case"AMap.Buildings":return new Cs;case"AMap.Inner.LabelsLayer":return new ur;case"AMap.LabelsLayer":return new Yr;case"AMap.ImageLayer":case"AMap.CanvasLayer":return new Is;case"AMap.RasterLayer":case"AMap.TileLayer.Flexible":case"AMap.TileLayer.RoadNet":case"AMap.TileLayer":case"AMap.TileLayer.Satellite":return new Ls;case"AMap.TileLayer.Traffic":return new lo;case"AMap.WMTSLayer":case"AMap.TileLayer.WMS":case"AMap.TileLayer.WMTS":return new Ls;case"AMap.CustomLayer":return new Hs;case"AMap.GLCustomLayer":return new qr;case"AMap.VTLayer":return new Ir;case"AMap.DistrictLayer":case"AMap.DistrictLayer.World":case"AMap.DistrictLayer.Country":case"AMap.DistrictLayer.Province":return new Lr;case"AMap.SkyLayer":return new no;case"AMap.MaskLayer":return new oo;case"AMap.IndoorMap":return new wo;case"AMap.MapboxLayer":return new Ao;case"AMap.VectorLayer":case"AMap.VectorSvgLayer":return t.getRender()}},Jo.prototype.KT=function(){var s,r,o,a,h,f,v,d,u=this,t=this._view.getStatus(),c=t.zoom,l=t.centerCoord;0!=(d=(v=this.bo>c?Math.floor(c):Math.ceil(c))-c)&&(this.bo=v,s=yt.V[this._view.au()],r=200*Math.abs(d)+100,o=new I(0,.6,.15,1),f=a=0,h=function(){a+=16;var t=u._view.getStatus().zoom,i=c+d*o.h(a/r);r<a&&(i=v);var n=s.nt(u.QT[0],u.QT[1],t),e=s.nt(u.QT[0],u.QT[1],i),t=e[0]-n[0]+l[0],n=e[1]-n[1]+l[1],n=u.getProjection().unproject(t,n);if(u.setZoomAndCenter(i,n,!0),v<=i&&0<d||d<0&&i<=v)return u.setZoom(v,!0),void yt.Util.cancelAnimFrame(f);a<r&&(f=yt.Util.requestAnimFrame(h))},f=yt.Util.requestAnimFrame(h))},Jo.prototype.iB=function(){window.onbeforeload=this.destroy,window.onunload=this.destroy,window.onbeforeunload=this.destroy},Jo.t_=[2,20],Jo);function Jo(t,i){var n=Vo.call(this)||this;n.className="AMap.Map",n.so=new Br,n.lcs=yt.lcs,n.debug=!1,n.complete=!1,n.Kv=!1,n.controls=[],n.langForeign="zh_cn",n.fE=!0,n.az=[.92,.92,.9,.9],n.sz=[.94,.94,.94,.9],n.rz=[.94,.94,.94,.9],n.$C=[.329,.549,.839,1],n.Ov=!0,n.Dv=!0,n.Pv=!0,n.Fv=!0,n.fZ=2,n.fi=!0,n.jv=!0,n.Ev=!0,n.Uv=!0,n.Bv=!0,n.$v=!0,n.Nv=0,n.Sm=!1,n.c_="",n.Zv="default",n.qv="",n.xt=[2,20],n.YG=!1,n.zv=[],n.A$=!1,n.R$=!1,n.Qv=0,n.xm=!1,n.lt=!1,n.Cv=!1,n.Lv=!1,n.gm=!1,n.km=0,n.Jv=5,n.y$=!1,n.Wv=!yt._.$e,n.g$=!0,n.tB=(new Date).getTime(),n._$=-1,n.M$=-1,n.S$=-1,n.k$=-1,n.HL=!1,n.bo=10,n.tD=!1,n.QT=[0,0],n.UB=!1,n.tE="",n.Rm(),n.options=i,n.g$=void 0===i.I$?n.g$:i.I$,n.az=yt.Util.color2RgbaArray(i.buildingColor=i.buildingColor),n.sz=yt.Util.color2RgbaArray(i.wallColor),n.rz=yt.Util.color2RgbaArray(i.roofColor),n.$C=yt.Util.color2RgbaArray(i.skyColor),n.Dv=void 0===i.dragEnable?n.Dv:i.dragEnable,n.Pv=void 0===i.zoomEnable?n.Pv:i.zoomEnable,n.Fv=void 0===i.scrollWheel?n.Fv:i.scrollWheel,n.fZ=void 0===i.zoomSpeed?n.fZ:i.zoomSpeed,n.Ov=void 0===i.jogEnable?n.Ov:i.jogEnable,n.fi=void 0===i.doubleClickZoom?n.fi:i.doubleClickZoom,n.jv=void 0===i.keyboardEnable?n.jv:i.keyboardEnable,n.Ev=void 0===i.animateEnable?n.Ev:i.animateEnable,n.Uv=void 0===i.pitchEnable?n.Uv:i.pitchEnable,n.$v=void 0!==i.touchZoom?i.touchZoom:n.$v,n.Nv=void 0!==i.touchZoomCenter?i.touchZoomCenter:n.Nv,n.Zv=i.defaultCursor||n.Zv,i.limitBounds&&n.setLimitBounds(i.limitBounds),n.Sm=i.Lm||!1,n.xt=i.zooms||n.xt,n.bo=i.zoom||n.bo,n.baseRender=yt._.baseRender,i.viewMode="d"===yt._.baseRender?"2D":i.viewMode,n.Bv=!("3D"!==i.viewMode),n.Bv=void 0===i.rotateEnable?n.Bv:i.rotateEnable,n.debug=i.debug||!1,n.m$=i.showBuildingBlock,n.Wv=void 0===i.isHotspot?n.Wv:i.isHotspot,n.UB=void 0===i.pickWhenMoving?n.UB:i.pickWhenMoving,n.fE=void 0===i.asyncOverlay?n.fE:i.asyncOverlay,n.showLabel=void 0===i.showLabel||Boolean(i.showLabel),n.Cw=i.features||["bg","point","road","building"],n.c$=i.mask,n.NH=void 0!==i.labelRejectMask&&Boolean(i.labelRejectMask),"d"!==n.baseRender?(n.mapStyle=new fs,n.mapStyle.pn(function(){var t=i.mapStyle;t?n._getUserStyle(t):n.emit("styleChanged")}),s=n.z_=new gs,n.ao=new yt.Am(n.z_),n.gn=new $r(n),n.R_=new ys(s,n),n.x$=new Xo(n),n.np()):(n.z_=new gs,n.R_=new yt.vG,n.emit("styleChanged")),(e=i.vectorMapForeign)&&n._getMapboxStyle(e),i.langForeign&&(n.langForeign=i.langForeign),n.gn&&n.gn.Ha({langForeign:n.langForeign}),t&&(t.amap&&t.amap.destroy(),t.amap=n),n.kv=t,n._view=n.pm(i),n.b$=new po(n),n.Mv=new ue(n),n.c_=i.mapStyle||"normal",n.QR=null;var s=yt._.isWebGL,e=AMap.getConfig().y_,t=i.layers||[];return n.cm(),n.w$(),0===t.length?n.isDOMMode()?(n.addLayer(new $e({id:"_defaultLayer",tileUrl:e})),n.Bv=!1):s&&n.addLayer(new ve):n.um(t),n.d_(),n.$F=new Cr({map:n}),n.addLayer(n.$F),t=n._view.getStatus(),n.wm=t,n.setCursor(n.Zv),n}var Xo=(Ko.prototype.dynamicTextTextureInfoLoaded=function(t){var i=this;t.Im&&console.log("你需要更新新的纹理了");var n=t.optimalZoom,e=t.tag;if(0===t.Dm.length)t.zo&&this.map.emit("tileSdfInfoFinished",{zo:t.zo,optimalZoom:n,tag:e}),this.Eo();else for(var s=0,r=t.Dm.length,o=0,a=t.Dm.length;o<a;o++){var h=t.Dm[o];this.map.z_.loadImage(h.lc,{type:"text",cb:function(){(s+=1)===r&&i.map.ao&&(i.map.ao.Pm(t),t.zo&&i.map.emit("tileSdfInfoFinished",{zo:t.zo,optimalZoom:n,tag:e}),i.Eo())}})}},Ko.prototype.dynamicTextSDFInfoLoaded=function(t){var i=this.map.R_;i&&"SDFManagerBase"!==i.CLASS_NAME&&(i.Ju(t.data),this.Eo())},Ko.prototype.commonWordLoaded=function(t){var i=this,n=this.map.R_;n&&"SDFManagerBase"!==n.CLASS_NAME&&n.rc(t,function(){i.Eo()})},Ko.prototype.commonWordTextureLoaded=function(){var t;this.Ya||(this.map.gn.Qd(),(t=this.map.R_)&&"SDFManagerBase"!==t.CLASS_NAME&&t.Qd(),this.Ya=!0,this.Eo())},Ko.prototype.iconImageLoaded=function(t){for(var i=this,t=t.data,s=[],r={},n=0,e=t;n<e.length;n++)!function(n){r[n.url]=1;var e=n.data;s.push(new Promise(function(t){var i=new Image;i.src=n.data.lc,i.onload=function(){t({img:i,name:n.url,hv:n.data.ext.hv,width:e.width,height:e.height})}}))}(e[n]);Promise.all(s).then(function(t){i.map.so.sv(t)}),this.Eo()},Ko.prototype.np=function(){var i=this;this.Va||(yt.TH(function(t){i.map.gn.np(t)}),this.Va=!0)},Ko.prototype.updateDataVersion=function(t){this.map.UH(t.version)},Ko.prototype.destroy=function(){this.$$()},Ko.prototype.Ia=function(){this.map.gn.on("dynamicTextTextureInfoLoaded",this.dynamicTextTextureInfoLoaded.bind(this)),this.map.gn.on("dynamicTextSDFInfoLoaded",this.dynamicTextSDFInfoLoaded.bind(this)),this.map.gn.on("commonWordLoaded",this.commonWordLoaded.bind(this)),this.map.gn.on("iconImageLoaded",this.iconImageLoaded.bind(this)),this.map.gn.on("updateDataVersion",this.updateDataVersion.bind(this))},Ko.prototype.$$=function(){this.map.gn.clearEvents("dynamicTextTextureInfoLoaded"),this.map.gn.clearEvents("dynamicTextSDFInfoLoaded"),this.map.gn.clearEvents("commonWordLoaded"),this.map.gn.clearEvents("iconImageLoaded"),this.map.gn.clearEvents("updateDataVersion")},Ko.prototype.Eo=function(){this.map.setNeedUpdate(!0)},Ko);function Ko(t){this.map=t,this.Ia()}var Qo=4.000244140625,qo=2,ta=(ia.prototype.isEnabled=function(){return"disabled"!==this.R},ia.prototype.isActive=function(){return"active"===this.R},ia.prototype.enable=function(){this.isEnabled()||(this.R="enabled")},ia.prototype.disable=function(){this.isEnabled()&&(this.R="disabled",this.C(),this.G("zoomend"))},ia.prototype.Ut=function(t){var i,n,e;t.preventDefault(),this.G("zoomstart"),this.isEnabled()&&(i=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaMode===WheelEvent.DOM_DELTA_PAGE?400*t.deltaY:t.deltaY,e=(n=Date.now())-(this.Bt||0),this.Bt=n,0!==i&&i%Qo==0?this.Wt="wheel":0!==i&&Math.abs(i)<4?this.Wt="trackpad":400<e?(this.Wt=null,this.Gt=i):this.Wt||(this.Wt=Math.abs(e*i)<200?"trackpad":"wheel",this.Zt&&(i+=this.Gt)),t.shiftKey&&i&&(i/=4),this.Wt&&(this.$t-=i,this.isActive()||this.D(t)))},ia.prototype.D=function(t){var i,n,e,s,r,o,a,h,f;this.$t&&(a=(i=this._map.getView()).getStatus(),s=this._map.getStatus(),n=a.rotation,f=a.zoom,e=a.center,h=a.projectionId,r="wheel"===this.Wt&&Math.abs(this.$t)>Qo?1/450:.01,s&&s.zoomSpeed&&(qo=s.zoomSpeed),o=qo/(1+Math.exp(-Math.abs(this.$t*r))),this.$t<0&&0!==o&&(o=1/o),a=this.Yt(f),s=Math.min(Yo.t_[1],Math.max(2,this.Vt(a*o))),r=k.mousePos(this.j,t,this._map),a=[this.j.clientWidth/2,this.j.clientHeight/2],o=this._t(a,r),t=Math.atan((r[1]-a[1])/(r[0]-a[0])),t=-n/180*Math.PI+t,o=[-Math.cos(t)*o,Math.sin(t)*o],r[0]-a[0]<0&&(o[0]=-o[0],o[1]=-o[1]),a=yt.V[h].nt(o[0],o[1],f),h=yt.V[h].nt(o[0],o[1],s),f=Math.pow(2,s-f),this._map.XT(o),i.setOptions({kt:{pos:r,Mt:s,Rt:h,zt:a,scale:f,center:yt.set(yt.create(),e[0],e[1])}}),this.$t=0)},ia.prototype.Yt=function(t){return Math.pow(2,t)},ia.prototype.Vt=function(t){return Math.log(t)/Math.LN2},ia.prototype._t=function(t,i){var n=i[0]-t[0],t=i[1]-t[1];return Math.sqrt(n*n+t*t)},ia.prototype.C=function(){delete this.q,delete this.$,delete this.U,delete this.B},ia.prototype.G=function(t,i){this._map.getBindHandler().fireEvent(t,i)},ia);function ia(t,i){this._map=i,this.j=t,this.R="disabled",this.Wt="wheel",this.$t=0}var na=(ea.prototype.isEnabled=function(){return"disabled"!==this.R},ea.prototype.isActive=function(){return"active"===this.R},ea.prototype.enable=function(){this.isEnabled()||(this.R="enabled")},ea.prototype.disable=function(){if(this.isEnabled()){switch(this.R){case"active":this.S(),this.C();break;case"pending":this.S()}this.R="disabled"}},ea.prototype.L=function(t){this.A&&clearInterval(this.A),(2===t.button||t.ctrlKey&&0===t.button)&&(this.j.addEventListener("mousemove",this.T,{passive:!0}),this.j.addEventListener("mouseup",this.I),this.j.addEventListener("mouseleave",this.I),this.D(t))},ea.prototype.D=function(t){this.$=this.U=this.B=k.mousePos(this.j,t,this._map),this.W=[[Date.now(),this.$]],this.R="active"},ea.prototype.Z=function(t){var i,n,e;this.W.length<2&&"active"===this.R&&this.G("dragstart",t),this.G("dragging",t),this.isEnabled()&&(n=k.mousePos(this.j,t,this._map),this.q=t,this.B=yt.set(yt.create(),n[0],n[1]),this.Y(),this.W.push([Date.now(),this.B]),this.W.length<2||("active"===this.R&&(this.R="pending"),"disabled"!==this.R&&(t=(e=(i=this._map.getView()).getStatus()).rotation,n=e.pitch,e=[this.B[0]-this.W[this.W.length-2][1][0],this.B[1]-this.W[this.W.length-2][1][1]],(!this._map.getStatus().pitchEnable||Math.abs(e[0])>Math.abs(e[1]))&&(e[1]=0),(!this._map.getStatus().rotateEnable||Math.abs(e[0])<Math.abs(e[1]))&&(e[0]=0),15<Math.abs(this.B[0]-this.$[0])&&(this.B[1]>this.j.clientHeight/2?t-=e[0]/10:t+=e[0]/10),n-=e[1]/Yo.t_[1]*2,i.setOptions({rotation:t,pitch:n}))))},ea.prototype.tt=function(t){switch(this.R){case"active":this.R="enabled",this.C();break;case"pending":this.R="enabled",this.G("dragend",t);break;default:this.G("dragend",t)}this.S()},ea.prototype.S=function(){this.j.removeEventListener("mousemove",this.T),this.j.removeEventListener("mouseup",this.I),this.j.removeEventListener("mouseleave",this.I)},ea.prototype.C=function(){delete this.q,delete this.$,delete this.U,delete this.B},ea.prototype.Y=function(){for(var t=this.W,i=Date.now();0<t.length&&160<i-t[0][0];)t.shift()},ea.prototype.G=function(t,i){this._map.getBindHandler().fireEvent(t,i)},ea);function ea(t,i){this._map=i,this.W=[],this.j=t,this.R="disabled",this.T=this.Z.bind(this),this.I=this.tt.bind(this)}var sa=(ra.prototype.Xt=function(){this._container.addEventListener("mouseenter",this.DL.bind(this)),this._container.addEventListener("mouseover",this.OL.bind(this)),this._container.addEventListener("mouseleave",this.PL.bind(this)),this._container.addEventListener("mouseup",this.tt.bind(this)),this._container.addEventListener("mouseout",this.BL.bind(this)),this._container.addEventListener("mousemove",this.jL.bind(this)),this._container.addEventListener("mousedown",this.Jt.bind(this)),this._container.addEventListener("touchend",this.N.bind(this)),this._container.addEventListener("touchstart",this.Kt.bind(this),!1),this._container.addEventListener("touchmove",this.gt.bind(this),!1),this._container.addEventListener("wheel",this.Qt.bind(this),{passive:!1}),this._container.addEventListener("contextmenu",this.EL.bind(this)),this._container.addEventListener("keydown",this.ii.bind(this))},ra.prototype.fireEvent=function(t,i){if(i){var n=this._map.getStatus();if("scrollWheel"===t){if(!n.scrollWheel)return void this.oi.disable();this.oi.enable()}var e,s=k.mousePos(this._container,i,this._map),r=s[0],o=s[1],a=this._map.getView().containerTolnglat(r,o),h=a[0],f=a[1];if("dragstart"===t||"dragging"===t||"dragend"===t)switch(t){case"dragstart":e=!n.pickWhenMoving&&this._map.TL()?this.ri:this.si(i),this.ri=e;break;case"dragging":e=this.ri;break;case"dragend":e=this.ri,this.ri=void 0}else e=!n.pickWhenMoving&&this._map.TL()?this.ri:this.si(i);s=this.hi(e,t),f={lnglat:a=new yt.LngLat(h,f),target:e,pixel:o=new yt.Pixel(r,o),originEvent:i,pos:h=this._map.getProjection().project(h,f),vectorIndex:0},e&&(f.vectorIndex=e&&e.iE&&i.lnglat&&e.iE(i.lnglat)||0),-1!==["mouseover","mousemove","mouseout","mouseenter","mouseleave"].indexOf(t)?this.ui(t,f):e&&this.ci(e,t,f),h={lnglat:a,target:e,pixel:o,originEvent:i,pos:h},(f=f.target)&&"poi"!==f.type&&!s||(h.target=this._map),e&&"poi"===e.type||e&&s?this._map.emit(t,h):"dblclick"===t&&e?this.fi.disable():"dragstart"!==t&&"dragging"!==t&&"dragend"!==t||!e||!e.getDraggable()&&"AMap.InfoWindow"!==e.type&&"AMap.ContextMenu"!==e.type?e||(n.dragEnable||"dragging"!==t&&"dragstart"!==t&&"dragend"!==t)&&this._map.emit(t,h):"dragend"===t?this.ft.enable():this.ft.disable()}},ra.prototype.hi=function(t,i){return!(!t||"poi"===t.type||"dragstart"===i||"dragging"===i||"dragend"===i||!this._map.getStatus().allBubble&&!Boolean(t.getOptions().bubble))},ra.prototype.ti=function(t){this.fi.enable(),this.fireEvent("dblclick",t),this.fi.ut(t)},ra.prototype.Jt=function(t){this._map.cancelMapAnimate(),this.Ht="mousedown",this.fireEvent("mousedown",t),this.ft.enable(),this.ft.L(t),this.ei.L(t),this.$=k.mousePos(this._container,t,this._map)},ra.prototype.OL=function(t){this.fireEvent("mouseover",t)},ra.prototype.DL=function(t){this.fireEvent("mouseenter",t)},ra.prototype.PL=function(t){this.fireEvent("mouseleave",t)},ra.prototype.BL=function(t){this.fireEvent("mouseout",t)},ra.prototype.tt=function(t){var i=this;"mousedown"!==this.Ht||t.ctrlKey||(setTimeout(function(){i.nB=0},300),this.Ht="false",2===t.button?this.fireEvent("rightclick",t):(this.nB++,2<=this.nB?(this.fi.enable(),this.fireEvent("dblclick",t),this.fi.ut(t),this.nB=0):this.fireEvent("click",t))),this.fireEvent("mouseup",t)},ra.prototype.FL=function(t){"move"!==this.Ht&&this.fireEvent("click",t)},ra.prototype.jL=function(t){var i;"mousedown"===this.Ht&&(i=k.mousePos(this._container,t,this._map),(1<Math.abs(this.$[0]-i[0])||1<Math.abs(this.$[1]-i[1]))&&(this.Ht="move")),this.fireEvent("mousemove",t)},ra.prototype.Kt=function(t){var i=this;"infoWindow"!==t.cH&&t.preventDefault(),this.oB="touchstart",this.$=k.mousePos(this._container,t,this._map),this._map.cancelMapAnimate(),this.fireEvent("touchstart",t),this.rB=(new Date).getTime(),this.ft.enable(),this.ft.P(t),this.fi.P(t,this.ft),this.ni.P(t),clearTimeout(this.aB),1===t.touches.length&&(this.aB=setTimeout(function(){i.fireEvent("rightclick",t)},800))},ra.prototype.gt=function(t){this.$&&(t=k.mousePos(this._container,t,this._map),(1<Math.abs(t[0]-this.$[0])||1<Math.abs(t[1]-this.$[1]))&&"touchstart"===this.oB&&(this.oB="touchmove"))},ra.prototype.N=function(t){var i=this,n=(new Date).getTime();this.fireEvent("touchend",t),clearTimeout(this.aB),"touchstart"===this.oB&&n-this.rB<800&&(this.oB="false",this.fireEvent("click",t),setTimeout(function(){i.dH=0},300),this.dH++,2<=this.dH&&(this.fireEvent("dblclick",t),this.dH=0)),this.fi.vt(t)},ra.prototype.Qt=function(t){this._map.cancelMapAnimate(),this.fireEvent("mousewheel",t),this._map.getStatus().scrollWheel&&(t.preventDefault(),this.ft.disable(),this.oi.Ut(t))},ra.prototype.EL=function(t){t.ctrlKey,t.preventDefault()},ra.prototype.si=function(t){var i,e=(n=this._map).DF(),s=n.pi,r=n.di,n=n.vm,o=e.concat([s,r,n]),s=(e=k.mousePos(this._container,t,this._map))[0],r=e[1],e=(n=this._map.getView().containerTolnglat(s,r))[0],n=n[1];t.lnglat=new yt.LngLat(e,n),t.pixel=new yt.Pixel(s,r);for(var a=o.length-1;0<=a;a--){var h=o[a];if(h=h&&h.vi(t)){if(!h.getOptions){i=h;break}if(!0!==h.getOptions().noSelect){i=h;break}}}return i},ra.prototype.ui=function(t,i){var s=void 0===(e=(n=this.mi).yi)?null:e,e=void 0===(r=n.xi)?null:r,n=void 0===(r=n.vectorIndex)?-1:r,r=i.target;"mousemove"!==t&&"mouseleave"!==t||("mousemove"===t?s?r?s.hS!==r.hS||n!==i.vectorIndex?(this.ci(s,"mouseout",e),this.ci(r,"mouseover",i)):this.ci(r,"mousemove",i):this.ci(s,"mouseout",e):r&&this.ci(r,"mouseover",i):"mouseleave"===t&&s&&this.ci(s,"mouseout",e),this.mi.yi=r,this.mi.vectorIndex=i.vectorIndex,this.mi.xi=i)},ra.prototype.ci=function(t,i,n){"poi"===t.type?this._map.getStatus().isHotspot&&this.bi(t,i,n):t.emit(i,n)},ra.prototype.bi=function(t,i,n){var e,s="hotspot";switch(i){case"click":this._map.setCursor("pointer"),e=s+i;break;case"mouseover":this._map.setCursor("pointer"),e=s+"over";break;case"mouseout":this._map.setCursor(""),e=s+"out"}e&&(s=(i=this._map.getProjection().unproject(t.lnglat[0],t.lnglat[1]))[0],i=i[1],n={type:e,id:t.id,name:t.name,lnglat:new yt.LngLat(s,i),originEvent:n.originEvent},this._map.emit(e,n))},ra.prototype.ii=function(t){var i,n;this._map.getStatus().keyboardEnable&&(i=this._map.getZoom(),n=this._map.getRotation(),"="===t.key?this._map.setZoom(i+1,!0):"-"===t.key&&this._map.setZoom(i-1,!0),t.ctrlKey?"ArrowLeft"===t.key?this._map.setRotation(n-90,!0):"ArrowRight"===t.key&&this._map.setRotation(n+90,!0):"ArrowUp"===t.key?this._map.panBy(0,300):"ArrowDown"===t.key?this._map.panBy(0,-300):"ArrowLeft"===t.key?this._map.panBy(300,0):"ArrowRight"===t.key&&this._map.panBy(-300,0))},ra);function ra(t){this.Ht="false",this.oB="false",this.nB=0,this.dH=0,this.aB=0,this.rB=0,this.mi={yi:null,xi:null},this._map=t,this._container=this._map.getMapsContainer(),this.ft=new p(this._container,t),this.ft.enable(),this.oi=new ta(this._container,t),this.oi.enable(),this.fi=new y(this._container,t),this.fi.enable(),this.ni=new g(this._container,t),this.ni.enable(),this.ei=new na(this._container,t),this.ei.enable()}var oa=(aa.prototype.setImageSize=function(t){t instanceof yt.Size&&(t=t.toArray()),this._opts.imageSize=t},aa.prototype.getImageSize=function(){var t=this._opts.imageSize,i=this.Om;return t||(i.length?i:[])},aa.prototype.setSize=function(t){t instanceof yt.Size&&(t=t.toArray()),this._opts.size=t},aa.prototype.getSize=function(){return this._opts.size},aa.prototype.setImageOffset=function(t){t instanceof yt.Pixel&&(t=t.toArray()),this._opts.imageOffset=t},aa.prototype.getImageOffset=function(){return this._opts.imageOffset||[0,0]},aa.prototype.getImage=function(){return this._opts.image},aa.prototype.setImage=function(t){this._opts.image=t},aa.prototype.Fm=function(){return this.Om||[]},aa.prototype.Em=function(t){t instanceof yt.Size&&(t=t.toArray()),this.Om=t},aa);function aa(t){this.CLASS_NAME="AMap.Icon",this._opts={size:[0,0],imageOffset:new yt.Pixel(0,0),image:AMap.getConfig().protocol+"://webapi.amap./theme/v1.3/markers/0.png"},this.Om=[];var i=t.size,n=t.imageSize,e=t.image,t=t.imageOffset;i&&this.setSize(i),n&&this.setImageSize(n),t&&this.setImageOffset(t),e&&this.setImage(e)}var ha,fa="AMap.Overlay",Ci=(ha=yt.Event,yt.Ei(ua,ha),ua);function ua(){var t=null!==ha&&ha.apply(this,arguments)||this;return t.type=fa,t.className=fa,t}var ca,ji=(ca=yt.Event,yt.Ei(la,ca),la);function la(){var t=null!==ca&&ca.apply(this,arguments)||this;return t.type=fa,t.className=fa,t}var va,da="AMap.DOMOverlay",ga={top:"top",right:"right",bottom:"bottom",left:"left",Nm:"top-left",$m:"top-center",Um:"top-right",Bm:"middle-left",center:"center",Wm:"middle-right",Gm:"bottom-left",Zm:"bottom-center",qm:"bottom-right"},ba_Ym="viewchange",xa=[10,0,0,0],ka={map:null,visible:!0,offset:[0,0],anchor:"top-left",rotate:0,orientation:null,scale:1,zooms:[2,20],noSelect:!1,innerOverlay:!1,isCustom:!1},Ui=(va=ji,yt.Ei(wa,va),wa.prototype.getOptions=function(){return this._options},wa.prototype.add=function(t){void 0===t&&(t=[]);for(var i=this._map,n=0,e=t;n<e.length;n++)e[n].add(i)},wa.prototype.remove=function(t){void 0===t&&(t=[]);for(var i=0,n=t;i<n.length;i++)n[i].remove()},wa.prototype.updateOverlay=function(t){if(t)for(var i=0,n=t;i<n.length;i++)n[i].updateOverlay();else{var e=!this.aZ&&this.viewChange;this.aZ=!1;var s,r=this._overlays;for(s in r)r.hasOwnProperty(s)&&r[s].updateOverlay({viewChange:e})}},wa.prototype.iy=function(t){this.updateOverlay()},wa.prototype.addToGroup=function(t){var i=this._container,n=this._overlays,e=t.hS,s=t.dom;i.appendChild(s),n[e]=t},wa.prototype.removeFromGroup=function(t){var i=this._container,n=this._overlays,e=t.hS,t=t.dom;i.removeChild(t),delete n[e]},wa.prototype.vi=function(t){return null},wa.prototype.destroy=function(){this.ey();var t,i=this._overlays;for(t in i)i.hasOwnProperty(t)&&i[t].remove();this._overlays={},this._container&&k.remove(this._container)},wa.prototype.getAllOverlays=function(){var t,i,n=this._overlays,e=[];for(t in n)!n.hasOwnProperty(t)||(i=n[t])&&e.push(i);return e},wa.prototype.ny=function(){this._map},wa.prototype.ey=function(){this._map.off(ba_Ym,this.iy)},wa);function wa(t,i){void 0===i&&(i={});var n=va.call(this)||this;return n.type="AMap.DOMOverlayGroup",n.viewChange=!1,n.aZ=!1,n._options={zIndex:120},n._overlays={},t=(n._map=t).kv,n._parent=t.querySelector(".amap-layers"),i=i.className,n._className=i,n.iy=n.iy.bind(n),n.ny(),n}var Ma,Zi=(Ma=Ci,yt.Ei(Ca,Ma),Object.defineProperty(Ca.prototype,"CLASS_NAME",{get:function(){return this.className},eb:!1,nb:!0}),Ca.prototype.getMap=function(){return this._map||null},Ca.prototype.setMap=function(t){t instanceof vh?this.add(t):null==t&&this.remove()},Ca.prototype.addTo=function(t){this.add(t)},Ca.prototype.add=function(t){t&&(this._add(t),this._parent&&(this._parent.addToGroup(this),this.updateOverlay()))},Ca.prototype.remove=function(){this._map&&this._parent&&(this._parent.removeFromGroup(this),this._remove())},Ca.prototype.show=function(){this._opts.visible=!0,this.updateOverlay()},Ca.prototype.hide=function(){this._opts.visible=!1,this.updateOverlay()},Ca.prototype.getPosition=function(){var t=this._position;return t?yt.Bs(t)?t:new yt.LngLat(t[0],t[1]):null},Ca.prototype.setPosition=function(t){this._position=t,this.updateOverlay()},Ca.prototype.getAnchor=function(){return this._opts.anchor||ga.Nm},Ca.prototype.setAnchor=function(t){t&&(this._opts.anchor=t,this.updateOverlay())},Ca.prototype.getOffset=function(){var t=this._opts.offset||[0,0];return new yt.Pixel(t[0],t[1])},Ca.prototype.setOffset=function(t){t&&(t instanceof Array||void 0===t.x||void 0===t.y||(this._opts.offset=[t.x,t.y]),this.updateOverlay())},Ca.prototype.getAngle=function(){return this._opts.rotate||0},Ca.prototype.setAngle=function(t){this._opts.rotate=t,this.updateOverlay()},Ca.prototype.getOrientation=function(){return this._opts.orientation},Ca.prototype.setOrientation=function(t){"number"==typeof t?(this._opts.orientation=t,this._opts.rotate=this.dP(t)):(this._opts.orientation=void 0,this._opts.rotate=0),this.updateOverlay()},Ca.prototype.getSize=function(){return this._getSize()},Ca.prototype.setSize=function(t){this._opts.size=yt.ay(t)?t.toArray():t,this.updateOverlay()},Ca.prototype.getzIndex=function(){return this._opts.zIndex},Ca.prototype.setzIndex=function(t){this._opts.zIndex=t,this.updateOverlay()},Ca.prototype.getOptions=function(){return this._opts},Ca.prototype.getContent=function(){return this._opts.content||""},Ca.prototype.setContent=function(t){void 0===t&&(t=""),this._opts.content=t,this._size=[0,0],this._removeContent(),this._createDom(this.dom,t),this.updateOverlay()},Ca.prototype.getBounds=function(){var t=this._position;return new Cn(t,t)},Ca.prototype.getVisible=function(){return void 0===this._opts.visible||this._opts.visible},Ca.prototype.updateOverlay=function(t){void 0===t&&(t={}),t=void 0!==(t=t.viewChange)&&t,this._map&&this._setStyle(t)&&this._applyStyle(t)},Ca.prototype.uZ=function(t){void 0===t&&(t={}),t=void 0!==(t=t.viewChange)&&t,this._map&&(this._setStyle(t),this._applyStyle(t))},Ca.prototype.destroy=function(){this.dom&&k.remove(this.dom)},Ca.prototype.getCursor=function(){if(this._map)return this._map.getDefaultCursor()},Ca.prototype.getContentDom=function(){return this.dom},Ca.prototype._add=function(t){},Ca.prototype._remove=function(){this._map=null,this._parent=null},Ca.prototype._createContainer=function(){var t=document.createElement("div");return k.addClass(t,this._className),t},Ca.prototype._createDefaultInnerDom=function(){return document.createElement("div")},Ca.prototype._setStyle=function(t){void 0===t&&(t=!1);var i=this._position,n=this._points=this._map&&i&&this._map.lngLatToContainer(i).toArray(),e=(this._map&&this._map.getRotation(),this._style),s=this._map&&this._map.getZoom(),r=this._opts.zooms||[2,20],o=void 0===this._opts.visible||this._opts.visible,a=s&&(s<r[0]||r[1]<s),h=e.visible;void 0!==o&&(e.visible=o),o&&(e.visible=!a);var f=this.ZF(n);e.visible&&(e.visible=!f);var c=(u=this._opts).zIndex,r=void 0===(i=u.anchor)?ga.Nm:i,o=void 0===(s=u.offset)?[0,0]:s,a=u.rotate,f=u.scale,i=u.noSelect,s=u.orientation,u=[0,0];return"number"==typeof s?e.rotate=this.dP(s):void 0!==a&&(e.rotate=a),h!==e.visible&&this._map&&(this._map.render(),this._parent)?!(this._parent.aZ=!0):(t?n&&(e.left=n[0]+"px",e.top=n[1]+"px",u=e.translate):(this._getContentSize(),(c=this._getStyleZIndex(c))&&(e.zIndex=c),void 0!==f&&(e.scale=f),n&&(e.left=n[0]+"px",e.top=n[1]+"px"),(r||o)&&(u=this._getOffset(r,o),e.translate=u,e.transformOrigin=-u[0]+"px "+-u[1]+"px"),e.pointerEvents=!0===i?"none":"auto"),u="translate("+u[0]+"px, "+u[1]+"px) scale("+e.scale+") rotate("+e.rotate+"deg)",yt._.ie&&(e.msTransform=u),e.transform=u,!0)},Ca.prototype._getStyleZIndex=function(t){return t},Ca.prototype._getSize=function(){(t=this._opts.size||[])instanceof yt.Size&&(t=t.toArray());var n=void 0===(i=t[0])?0:i,i=void 0===(e=t[1])?0:e,e=void 0===(e=(t=this._size)[0])?0:e,t=t[1];return[n||e,i||(void 0===t?0:t)]},Ca.prototype._getContentSize=function(){var t=this._style,i=this._getSize(),n=0,e=0;i[0]&&i[1]?(n=i[0],e=i[1]):this.dom&&(i=this.dom,n=Math.ceil(i.offsetWidth)||0,e=Math.ceil(i.offsetHeight)||0,this._size=[n,e]),t.width=n+"px",t.height=e+"px",t.size=[n,e]},Ca.prototype._applyStyle=function(t){void 0===t&&(t=!1);var i,n,e=this._style,s=this.dom;for(i in e)e.hasOwnProperty(i)&&("visible"!==i?t?"top"!==i&&"left"!==i&&"transform"!==i&&"msTransform"!==i||(s.style[i]=e[i]):"width"!==i&&"height"!==i?"translate"!==i&&"scale"!==i&&"rotate"!==i&&(s.style[i]=e[i]):"0px"===e[i]||(n=this._opts.size)&&"AMap.InfoWindow"!==this.type&&("width"===i&&(s.style[i]=n[0]+"px"),"height"===i&&(s.style[i]=n[1]+"px")):(n=e[i]?"block":"none",s.style.display=n))},Ca.prototype._getOffset=function(t,i){var t=(n=this._getAnchorOffset(t))[0],n=n[1];return[t+i[0],n+i[1]]},Ca.prototype._getAnchorOffset=function(t){var n=(i=this._style.size)[0],e=i[1],s=ga,r=0,i=0;if(Array.isArray(t))return t;switch(t){case s.Nm:r=0;break;case s.$m:r=-n/2;break;case s.Um:r=-n;break;case s.Bm:r=0,i=-e/2;break;case s.center:r=-n/2,i=-e/2;break;case s.Wm:r=-n,i=-e/2;break;case s.Gm:i=-e;break;case s.Zm:r=-n/2,i=-e;break;case s.qm:r=-n,i=-e}return[r,i]},Ca.prototype._createDom=function(t,i){return i&&("object"==typeof i&&i instanceof HTMLElement?t.appendChild(i):t.innerHTML=i),t},Ca.prototype._removeContent=function(){this.dom.innerHTML=""},Ca.prototype._formatSize=function(t){return[t.getWidth(),t.getHeight()]},Ca.prototype.ZF=function(t){var i=this._map,n=!1;return i&&t&&"3D"===(i=i.getView()).type&&(i=i.Uu(),t&&t[1]-i-xa[0]<=0&&(n=!0)),n},Ca.prototype._getRotationByPoints=function(t,i){var n=i.y-t.y,e=i.x-t.x,s=0;return(0!=n||0!=e)&&(i.x-t.x!=0?(s=Math.atan((i.y-t.y)/(i.x-t.x)),0<=n&&e<0||n<0&&e<=0?s=Math.PI+s:n<0&&0<=e&&(s=2*Math.PI+s)):s=i.y>t.y?Math.PI/2:3*Math.PI/2,Math.round(180*s/Math.PI*10)/10)},Ca.prototype._getRotationByLngLats=function(t,i){var n=null===(n=this._map)||void 0===n?void 0:n.getProjection().project(t.KL,t.kT),i=(t=null===(t=this._map)||void 0===t?void 0:t.getProjection().project(i.KL,i.kT))[0]-n[0],t=t[1]-n[1],n=0;return(0!=i||0!=t)&&(0!=t?(n=Math.atan(i/t),0<=i&&0<t||(0<=i&&t<0||i<0&&t<0?n=Math.PI+n:i<0&&0<t&&(n=2*Math.PI+n))):n=0<i?Math.PI/2:3*Math.PI/2,Math.round(180*n/Math.PI*10)/10)},Ca.prototype.dP=function(t){var i=0,n=this._position,e=this._map;return e&&n&&(t=this.pP(n,t),n=e.lngLatToContainer(n),t=e.lngLatToContainer(t),i=!1===(t=this._getRotationByPoints(n,t))?0:t+Math.PI),i+90},Ca.prototype.pP=function(t,i){var n;return(t=null===(n=this._map)||void 0===n?void 0:n.getProjection().project(t[0],t[1]))[0]+=Math.sin(i*Math.PI/180)*Math.pow(2,18-this._map.getZoom()),t[1]+=Math.cos(i*Math.PI/180)*Math.pow(2,18-this._map.getZoom()),null===(i=this._map)||void 0===i?void 0:i.getProjection().unproject(t[0],t[1])},Ca.prototype.vP=function(t){return 10/Math.pow(2,t-2)},Ca);function Ca(t,i){void 0===t&&(t={}),void 0===i&&(i={});var n=Ma.call(this)||this;n.type=da,n.className=da,n._style={width:0,height:0,size:[0,0],position:"absolute",top:0,left:0,translate:[0,0],rotate:0,scale:1,transformOrigin:[0,0],zIndex:12,visible:!0,draggable:!1,zooms:[2,20],noSelect:!1},n._size=[0,0],n._dragObjects={sy:[0,0],hy:[0,0],ly:[0,0]},n._className="amap-overlay",n._originOpts=t,n._opts=yt.assign({},ka,t),n._opts.angle&&(n._opts.rotate=n._opts.angle),!t.offset||t.offset instanceof Array||void 0===t.offset.x||void 0===t.offset.y||(n._opts.offset=[t.offset.x,t.offset.y]),n.hS=yt.Util.stamp(n);var e=i.className,i=i.anchor;return n._className=e,!t.anchor&&i&&(n._opts.anchor=i),e=t.content,i=n._createContainer(),n.dom=n._createDom(i,e),n._position=t.position,n.updateOverlay(),n}var Aa,Sa={uy:"AMap.Marker",py:"amap-markers",vy:"amap-marker",my:"//webapi.amap.com/theme/v1.3/markers/b/mark_bs.png",yy:120,xy:12,by:2,gy:Math.pow(2,31)},Ia=yt.assign({},ka,{title:"",clickable:!0,draggable:!1,bubble:!1,topWhenClick:!1,zIndex:Sa.xy,cursor:"pointer",extData:{}}),za=(Aa=Ui,yt.Ei(Ta,Aa),Ta.prototype.vi=function(t){if(t=t.target,yt.isEmpty(this._overlays)||!t)return null;var i=k.closest(t,"amap-marker"),t=this._overlays,n=null;return i&&yt.forEach(t,function(t){t.dom===i&&(n=t)}),n},Ta.prototype.setTop=function(t){var i;t&&((i=this.Kl)&&i!==t&&i.setTop(!1),this.Kl=t)},Ta.prototype._createContainer=function(t){var i=document.createElement("div");return k.addClass(i,this._className),t.appendChild(i),i},Ta);function Ta(t){return(t=Aa.call(this,t,{className:Sa.py})||this).type=Sa.uy,t.className=Sa.uy,t._container=t._createContainer(t._parent),t}var La,Da=(La=Zi,yt.Ei(Fa,La),Fa.prototype.getTitle=function(){return this._opts.title},Fa.prototype.setTitle=function(t){this._opts.title=t,this.dom&&this.dom.setAttribute("title",t)},Fa.prototype.getIcon=function(){return this._opts.icon},Fa.prototype.setIcon=function(t){t&&(this._opts.icon=t,this._opts.content||this._removeContent(),"AMap.Icon"===t.CLASS_NAME&&(this._opts.size=t.getSize()),this.wy(),this.updateOverlay())},Fa.prototype.getLabel=function(){return this._opts.label||{}},Fa.prototype.setLabel=function(t){var i=this._opts.label||{};this._opts.label=yt.assign(i,t);var n=i.content,i=void 0===(t=i._needUpdate)||t;n?(t=void 0,t=this._y?this.ky(n,this._y):this._y=this.ky(n),this.dom&&this.dom.appendChild(t),i&&this.updateOverlay()):this._y&&(k.remove(this._y),this._y=null)},Fa.prototype.getClickable=function(){var t=this._opts.clickable;return!(void 0!==t&&!t)},Fa.prototype.setClickable=function(t){void 0===t&&(t=!0),this._opts.clickable=!!t},Fa.prototype.getDraggable=function(){var t=this._opts.draggable;return void 0!==t&&t},Fa.prototype.setDraggable=function(t){(this._opts.draggable=t)?this._bindEvents():this.T_()},Fa.prototype.getTop=function(){return this._isTop},Fa.prototype.setTop=function(t){void 0===t&&(t=!1),this._isTop=t;var i=this._parent;i&&t&&i.setTop(this),this.updateOverlay()},Fa.prototype.getCursor=function(){var t=this._opts.cursor;return!t&&this._map&&(t=this._map.getDefaultCursor()),t},Fa.prototype.setCursor=function(t){t&&(this._opts.cursor=t)},Fa.prototype.getExtData=function(){return this._opts.extData},Fa.prototype.setExtData=function(t){this._opts.extData=t},Fa.prototype.remove=function(){this.T_(),this.ZH(),La.prototype.remove.call(this)},Fa.prototype.moveTo=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];console.log("Should implement AMap.moveAnimation plugin first.")},Fa.prototype.moveAlong=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];console.log("Should implement AMap.moveAnimation plugin first.")},Fa.prototype.startMove=function(){console.log("Should implement AMap.moveAnimation plugin first.")},Fa.prototype.stopMove=function(){console.log("Should implement AMap.moveAnimation plugin first.")},Fa.prototype.pauseMove=function(){console.log("Should implement AMap.moveAnimation plugin first.")},Fa.prototype.resumeMove=function(){console.log("Should implement AMap.moveAnimation plugin first.")},Fa.prototype.setOptions=function(t){this._opts=yt.assign({},Ia,this._opts,t),t.content&&this.setContent(t.content),t.offset&&this.setOffset(t.offset),t.title&&this.setTitle(t.title),t.label&&this.setLabel(t.label),t.draggable&&this.setDraggable(!0),this.updateOverlay()},Fa.prototype.updateOverlay=function(t){void 0===t&&(t={}),La.prototype.updateOverlay.call(this,t),t=this._y,this._opts.label&&t&&(!t.parentElement&&this.dom&&this.dom.appendChild(t),this.My(),this.Ry())},Fa.prototype.emit=function(t,i){var n=this.getCursor();return this._map&&("mouseout"===t?this._map.setCursor():this._map.setCursor(n)),"click"===t?this.getClickable()&&(La.prototype.emit.call(this,t,i),void 0!==(n=this.getOptions().topWhenClick)&&n&&this.setTop(!0)):"dragstart"===t||"dragging"===t||"dragend"===t?(yt._.$e||i.originEvent.preventDefault(),this.getDraggable()&&La.prototype.emit.call(this,t,i)):La.prototype.emit.call(this,t,i),this},Fa.prototype.toGeometry=function(){var t=this.getPosition();if(t)return{type:"Point",coordinates:t&&t.toJSON()}},Fa.prototype._add=function(t){this._map=t,this._parent=t.pi,this.updateOverlay()},Fa.prototype._createDom=function(t,i){return this.dom=La.prototype._createDom.call(this,t,i),this.wy(),t},Fa.prototype._createDefaultInnerDom=function(){var t=document.createElement("img");return t.setAttribute("width","19px"),t.setAttribute("height","32px"),t.setAttribute("src",Sa.my),this._size=[19,32],t},Fa.prototype._getMarkerOffset=function(t,i){return i},Fa.prototype._getStyleZIndex=function(t){var i;return this._isTop?i=Sa.gy:void 0!==t&&(i=t),i},Fa.prototype._createIcon=function(n,e){var s=this,t=n.getImage(),i=n.getSize(),r=n.getImageSize(),o=n.getImageOffset(),a=document.createElement("div");a.className="amap-icon",a.style.overflow="hidden";var h=document.createElement("img");return h.onload=function(){var t=h.width,i=h.height;n.Em([t,i]),s._size=r&&r.length?r:[t,i],i=s._getSize(),s._setIconSize(a,h,i,r),e&&e()},h.onerror=function(){},a.appendChild(h),this._setIconStyle(a,h,{size:i,imageSize:r,imageOffset:o}),h.src=t,a},Fa.prototype._setIconStyle=function(t,i,n){var s=void 0===(e=n.size)?[0,0]:e,e=void 0===(e=n.imageSize)?[0,0]:e,n=void 0===(n=n.imageOffset)?[0,0]:n;i.style.top=n[1]+"px",i.style.left=n[0]+"px",this._setIconSize(t,i,s,e)},Fa.prototype._setIconSize=function(t,i,n,e){var s=n[0],r=n[1],n=e[0],e=e[1];s&&(t.style.width=s+"px"),r&&(t.style.height=r+"px"),n&&e&&(i.style.width=n+"px",i.style.height=e+"px")},Fa.prototype._removeContent=function(){this.dom.innerHTML="",this._opts.label&&this.setLabel(this._opts.label)},Fa.prototype._getD=function(){return this.dom},Fa.prototype.wy=function(){var t=this,i=this._opts,n=i.content,e=i.icon,s=i.text;!n&&e?(i="string"==typeof e?new oa({image:e}):e,i=this._createIcon(i,function(){t.updateOverlay()}),this.dom.appendChild(i)):n||e||s||(s=this._createDefaultInnerDom(),this._originOpts.anchor||(this._opts.anchor="bottom-center"),this.dom.appendChild(s))},Fa.prototype.ky=function(t,i){return i||((i=document.createElement("div")).className="amap-marker-label"),i.innerHTML=t,i},Fa.prototype.My=function(){var t=this._style.size,i=this._opts.label,e=void 0===(n=i.offset)?[0,0]:n;yt.oy(e)&&(e=e.toArray());var s=e[0],r=e[1],n=this._y.offsetWidth,e=this._y.offsetHeight,e=this.zy.size=[n,e],r=(e=[(e=this.Sy(i,t,e))[0]+s,e[1]+r])[0],e=e[1];this.zy.top=e,this.zy.left=r},Fa.prototype.Sy=function(t,i,n){var s=void 0===(e=t.direction)?"right":e,r=i[0],o=i[1],t=n[0],e=n[1],i=0,n=0;switch(s){case ga.Nm:i=0,n=-e;break;case ga.top:case ga.$m:i=r/2-t/2,n=-e;break;case ga.Um:i=r,n=-e;break;case ga.right:case ga.Wm:i=r,n=o/2-e/2;break;case ga.center:i=r/2-t/2,n=o/2-e/2;break;case ga.left:case ga.Bm:i=-t,n=o/2-e/2;break;case ga.Gm:i=0,n=o;break;case ga.bottom:case ga.Zm:i=r/2-t/2,n=o;break;case ga.qm:i=r,n=o;break;default:i=r/2-t/2,n=-e}return[i,n]},Fa.prototype.Ry=function(){var t=this.zy,i=t.top,n=t.left;(t=this._y).style.top=i+"px",t.style.left=n+"px"},Fa.prototype._bindEvents=function(){this.on("dragstart",this.Cy.bind(this)),this.on("dragging",this._dragging.bind(this)),this.on("dragend",this.Ly.bind(this))},Fa.prototype.XH=function(){this.dom&&(this.dom.ondragstart=function(){return!1})},Fa.prototype.T_=function(){this.off("dragstart",this.Cy.bind(this)),this.off("dragging",this._dragging.bind(this)),this.off("dragend",this.Ly.bind(this))},Fa.prototype.ZH=function(){this.dom&&(this.dom.ondragstart=null)},Fa.prototype.Cy=function(t){this.Ay(t)},Fa.prototype._dragging=function(t){var n=(i=this._dragObjects.sy).x,e=i.y,i=(s=t.pixel).x,s=s.y,e=(n=yt.Sp.Ip([i,s],[n,e]))[0],n=n[1],n=(e=yt.Sp.add([e,n],this._points))[0],e=e[1];this._map&&(e=this._map.containerToLngLat([n,e]),this.setPosition(e.toJSON()),this.Ay(t))},Fa.prototype.Ly=function(t){},Fa.prototype.Ay=function(t){this._dragObjects={sy:t.pixel,hy:t.pos,ly:t.lnglat}},Fa);function Fa(t){void 0===t&&(t={});var i=La.call(this,t,{className:Sa.vy})||this;i.type=Sa.uy,i.className=Sa.uy,i._isTop=!1,i.zy={width:0,height:0,size:[0,0],top:0,left:0,translate:[0,0],zIndex:Sa.by},i._opts=yt.assign({},Ia,i._opts);var n=i._opts.size,e=i._opts.icon;return!n&&e instanceof oa&&(n=e.getSize(),i._opts.size=n),n instanceof yt.Size&&(i._opts.size=i._formatSize(n)),t.title&&i.setTitle(t.title),t.label&&i.setLabel(t.label),t.draggable&&i.setDraggable(!0),(t=t.map)&&t instanceof vh&&i.add(t),i.XH(),i}var Ha,$a,Ea={getViewport:function(t){return t?[t.clientWidth,t.clientHeight]:[0,0]},getStyle:function(t,i){var n,e=t.style[i];return e&&"auto"!==e||!document.defaultView||(e=(n=document.defaultView.getComputedStyle(t,null))?n[i]:null),e&&"auto"!==e||"height"!==i||(e=t.clientHeight+"px"),e&&"auto"!==e||"width"!==i||(e=t.clientWidth+"px"),"auto"===e?null:e},getViewportOffset:function(t){var i,n=0,e=0,s=t,r=document.body,o=document.documentElement;do{if(n+=s.offsetTop||0,e+=s.offsetLeft||0,n+=parseInt(Ea.getStyle(s,"borderTopWidth"),10)||0,e+=parseInt(Ea.getStyle(s,"borderLeftWidth"),10)||0,i=Ea.getStyle(s,"position"),s.offsetParent===r&&"absolute"===i)break;if("fixed"===i){n+=r.scrollTop||o.scrollTop||0,e+=r.scrollLeft||o.scrollLeft||0;break}}while(s=s.offsetParent);for(s=t;s!==r&&(n-=s.scrollTop||0,e-=s.scrollLeft||0,!Ea.m()&&yt._.webkit&&(e+=s.scrollWidth-s.clientWidth),s=s.parentNode););return[e,n]},m:function(){return Ha||($a="ltr"===Ea.getStyle(document.body,"direction"),Ha=!0),$a},create:function(t,i,n,e){return t=document.createElement(t),n&&(t.className=n),i&&(e&&"before"===e?(e=i.firstChild,i.insertBefore(t,e)):i.appendChild(t)),t},toggleClass:function(t,i,n){n?this.addClass(t,i):this.removeClass(t,i)},hasClass:function(t,i){if(t&&i)return 0<t.className.length&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(t.className)},addClass:function(t,i){t&&i&&(t.classList&&t.classList.add?t.classList.add(i):this.hasClass(t,i)||(t.className+=(t.className?" ":"")+i))},setClass:function(t,i){t&&(t.className=i||"")},removeClass:function(t,n){t&&n&&(t.classList&&t.classList.remove?t.classList.remove(n):t.className=t.className.replace(/(\S+)\s*/g,function(t,i){return i===n?"":t}).replace(/(^\s+|\s+$)/,""))},watchSize:function(n,e,s){var t=document.createElement("iframe");t.style.cssText="width: 100%;height: 100%;position: absolute;pointEvents:none; opacity:0; margin: 0;padding: 0;border: none;",t.onload=function(){t.contentWindow.onresize=i},n.appendChild(t),t.src="about:blank";var r=0,o=0;function i(){s.k=n.getBoundingClientRect(),s.M=[n.clientLeft,n.clientTop];var t=n.offsetWidth,i=n.offsetHeight;t===r&&i===o||(e(t,i),r=t,o=i)}return i(),s.resize=i,window.onscroll=i,function(){t.contentWindow.onresize=null}},watchSize2:function(n,e,s){var r=document.createElement("_");r.className="expand";var o=r.appendChild(document.createElement("_"));o.className="shrink";var a=r.appendChild(document.createElement("_"));a.className="expandChild";var h,f,t=o.appendChild(document.createElement("_"));return t.className="shrinkChild",o.style.cssText=r.style.cssText="height:100%;left:0;opacity:0;overflow:hidden;pointer-events:none;position:absolute;top:0;transition:0s;width:100%;z-index:-1",t.style.cssText=a.style.cssText="display:block;height:100%;transition:0s;width:100%",t.style.width=t.style.height="200%",n.appendChild(r),u(),function(){c(),n.removeChild(r)};function u(){c(),s.k=n.getBoundingClientRect(),s.M=[n.clientLeft,n.clientTop];var t=n.offsetWidth,i=n.offsetHeight;t===h&&i===f||(h=t,f=i,a.style.width=2*t+"px",a.style.height=2*i+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight,e(t,i)),o.addEventListener("scroll",u),r.addEventListener("scroll",u)}function c(){o.removeEventListener("scroll",u),r.removeEventListener("scroll",u)}},mousePos:function(t,i,n){return t&&(n.k=t.getBoundingClientRect(),n.M=[t.clientLeft,t.clientTop]),t=n.k,i.touches&&i.changedTouches&&(i=0<i.touches.length?i.touches[0]:i.changedTouches[i.changedTouches.length-1]),[i.clientX-t.left-n.M[0],i.clientY-t.top-n.M[1]]},remove:function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},closest:function(t,i){return t?this.hasClass(t,i)?t:(t=t.parentElement)?Ea.closest(t,i):null:null},fillText:function(t,i){if(t)return void 0!==t.textContent?t.textContent=i:void 0!==t.innerText?t.innerText=i:t.innerHTML=i,t},_L:function(t){for(var i=document.documentElement.style,n=0;n<t.length;n+=1)if(t[n]in i)return t[n];return!1},rotate:function(t,i,n){var e,s=Ea.kL;n=n||{x:t.clientWidth/2,y:t.clientHeight/2},s?(e="",e+=" rotate("+i+"deg)",t.style[s]=e,t.style[Ea.ML[s]+"-origin"]=n.x+"px "+n.y+"px"):(s=Math.cos(i*Math.PI/180),i=Math.sin(i*Math.PI/180),t.style.filter="progid:DXImageTransform.Microsoft.Matrix()",0<t.filters.length&&((t=t.filters.item(0)).Dx=-n.x*s+n.y*i+n.x,t.Dy=-n.x*i-n.y*s+n.y,t.M11=t.M22=s,t.M12=-(t.M21=i)))},setCss:function(t,i){t=t instanceof Array?t:[t];for(var n=0;n<t.length;n+=1)for(var e in i)i.hasOwnProperty(e)&&(t[n].style[e]=i[e]);return this},setOpacity:function(t,i){t.style&&("opacity"in t.style?t.style.opacity=""+i:"filter"in t.style&&(i=Math.round(100*i),t.style.filter="",100!==i&&(t.style.filter=" progid:DXImageTransform.Microsoft.Alpha(opacity="+i+")")))},ML:{},kL:$a=Ha=!1};Ea.kL=Ea._L(["WebkitTransform","OTransform","MozTransform","msTransform","transform"]),Ea.ML={transform:"transform",WebkitTransform:"-webkit-transform",OTransform:"-o-transform",MozTransform:"-moz-transform",msTransform:"-ms-transform"};var Ba,Oa={uy:"AMap.InfoWindow",JP:"",XP:"amap-info",QP:121,KP:8,tF:8,iF:[20,20,20,20]},Pa=yt.assign({},ka,{isCustom:!1,closeWhenClickMap:!1,anchor:"bottom-center",autoMove:!0,avoid:Oa.iF}),Ra=(Ba=Ui,yt.Ei(Na,Ba),Na.prototype.addToGroup=function(t){this.Iy&&this._overlays[this.Iy]&&this.Iy!==t.hS&&this._overlays[this.Iy].remove(),this.Iy=t.hS,Ba.prototype.addToGroup.call(this,t)},Na.prototype.removeFromGroup=function(t){Ba.prototype.removeFromGroup.call(this,t),this.Iy=0},Na.prototype.close=function(){var t=this.Iy;(t=this._overlays[t])&&(this.Iy=0,t.close())},Na.prototype.vi=function(t){return t=t.target,this.Iy&&t&&Ea.closest(t,"amap-info")?this._overlays[this.Iy]:null},Na.prototype.destroy=function(){this.Dy(),Ba.prototype.destroy.call(this)},Na.prototype.Rm=function(){this._map.on("click",this.Py)},Na.prototype.Dy=function(){this._map.off("click",this.Py)},Na);function Na(t){var n=Ba.call(this,t,{className:Oa.JP})||this;return n.type=Oa.uy,n.Py=function(t){var i=n.Iy,i=n._overlays[i];!Ea.closest(t.originEvent.target,"amap-info")&&i&&i.getOptions().closeWhenClickMap&&(n.Iy=0,i.close())},n._container=n._parent,n.Rm(),n}var Wa,ja=(Wa=Zi,yt.Ei(Ga,Wa),Ga.prototype.open=function(t,i,n){t&&t instanceof vh&&i?(this._opts.visible=!0,this.add(t),this.setPosition(i),this.jy(),this.emit("open"),this.GF()):t&&this._position?(this._opts.visible=!0,this.add(t),this.jy(),this.emit("open"),this.GF()):this._map&&this._position&&(this._opts.visible=!0,this.updateOverlay(),this.emit("open"),this.GF())},Ga.prototype.close=function(){this._parent&&(this._opts.visible=!1,this.updateOverlay(),this.emit("close"))},Ga.prototype.getIsOpen=function(){return!(!this._map||!this._opts.visible)},Ga.prototype.setSize=function(t){t instanceof yt.Size&&(t=t.toArray()),this._opts.size=t,this.updateOverlay()},Ga.prototype.setContent=function(t){void 0===t&&(t=""),Wa.prototype.setContent.call(this,t),this.jy()},Ga.prototype.setAnchor=function(t){var i,n=this.dom&&this.dom.querySelector(".amap-info-contentContainer");t&&n&&((i=this.g_([].slice.call(n.className.split(" "))))&&Ea.removeClass(n,i),this._size=[0,0],Ea.addClass(n,t)),Wa.prototype.setAnchor.call(this,t)},Ga.prototype.getDraggable=function(){return!1},Ga.prototype.setOptions=function(t){this._opts=yt.assign({},Pa,this._opts,t)},Ga.prototype.updateOverlay=function(t){void 0===t&&(t={}),this._map&&(t=void 0!==(t=t.viewChange)&&t,this._setStyle(t),this._applyStyle(t),t=this._getSize(),this.Fy&&t[0]&&window.getComputedStyle(this.Fy).boxSizing)},Ga.prototype.getBounds=function(){return null},Ga.prototype.getExtData=function(){return this._opts.extData||null},Ga.prototype.setExtData=function(t){this._opts.extData=t},Ga.prototype._add=function(t){this._map=t,this._parent=t.di,this.updateOverlay()},Ga.prototype._remove=function(){Wa.prototype._remove.call(this),this.Ey()},Ga.prototype._createDefaultInnerDom=function(){return document.createElement("div")},Ga.prototype._createDom=function(t,i){var n=this.Ny(t);return this.$y(n,i),t},Ga.prototype._getContentSize=function(){var t,i,n=this._style,e=this._getSize();e[0]&&e[1]&&!this._opts.isCustom?(t=e[0],i=e[1]):(e=this.dom.querySelector(".amap-info-contentContainer"))&&(t=e.clientWidth,i=e.clientHeight,this._size=[t,i]),n.width=t+"px",n.height=i+"px",n.size=[t,i]},Ga.prototype._getAnchorOffset=function(t){return[(t=Wa.prototype._getAnchorOffset.call(this,t))[0],t[1]]},Ga.prototype.Ny=function(t){var i=document.createElement("div");Ea.addClass(i,"amap-info-shadowContainer");var n=document.createElement("div");return Ea.addClass(n,"amap-info-contentContainer"),n.addEventListener("touchstart",function(t){t.cH="infoWindow"}),t.style.position="absolute",i.style.position="absolute",t.appendChild(i),t.appendChild(n),n},Ga.prototype.$y=function(t,i){var e=void 0!==(e=(n=this._opts).isCustom)&&e,n=n.anchor;e?"object"==typeof i&&i instanceof HTMLElement?t.appendChild(i):t.innerHTML=i+"":(e=this.Fy=document.createElement("div"),Ea.addClass(e,"amap-info-content"),Ea.addClass(e,"amap-info-outer"),"object"==typeof i&&i instanceof HTMLElement?e.appendChild(i):e.innerHTML=i?i+"":"",i=document.createElement("a"),Ea.addClass(i,"amap-info-close"),i.innerText="×",e.appendChild(i),i=document.createElement("div"),Ea.addClass(i,"amap-info-sharp"),Ea.addClass(t,n),t.appendChild(e),t.appendChild(i))},Ga.prototype.jy=function(){var t=this.dom.querySelector(".amap-info-close");t&&t.addEventListener("click",this.close.bind(this))},Ga.prototype.Ey=function(){var t=this,i=this.dom.querySelector(".amap-info-close");i&&i.removeEventListener("click",function(){t.close()})},Ga.prototype.Oy=function(){if(this._position){var t=this._map;if(t&&this._opts.autoMove&&this.dom){for(var i=this._getSize(),n=new yt.Size(i[0],i[1]),e=t.lngLatToContainer(this._position).toArray(),s=this._getOffset(this.getAnchor(),this.getOffset().toArray()),r=yt.Sp.add(e,s),o=yt.Sp.add(r,i),a=t.getSize(),h=[this._opts.avoid||Oa.iF],f=0,u=0,c=0;c<h.length;c+=1){var l=h[c],v=0,d=0;0!==l[3]&&0<(v=l[3]-(r[0]+f))&&(f+=v),0!==l[1]&&(v=a.getWidth()-l[1]-(o[0]+f))<0&&(f+=v),0!==l[0]&&0<(d=l[0]-(r[1]+u))&&(u+=d),0!==l[2]&&(d=a.getHeight()-l[2]-(o[1]+u))<0&&(u+=d)}r=yt.Sp.add(r,[f,u]),o=yt.Sp.add(o,[f,u]),r[i=s=0]<0||n.getWidth()>a.getWidth()?s=20-r[0]:a.getWidth()<o[0]&&(s=a.getWidth()-o[0]-25),r[1]<0||n.getHeight()>a.getHeight()?i=5-r[1]:a.getHeight()<o[1]&&(i=a.getHeight()-o[1]-15),i+=u,((s+=f)||i)&&t.panBy(s,i)}}},Ga.prototype.GF=function(){var t,i,n,e,s,r,o,a,h,f,u,c;!this._position||(t=this._map)&&this._opts.autoMove&&this.dom&&(u=this._position,yt.Bs(u)&&(u=u.toArray()),i=(h=t.getSize()).getWidth()||0,n=h.getHeight()||0,e=this._getSize(),f=t.lngLatToContainer(u).toArray(),c=this._getOffset(this.getAnchor(),this.getOffset().toArray()),s=yt.Sp.add(f,c),r=yt.Sp.add(s,e),o=this._opts.avoid||Oa.iF,a=s[0],h=s[1],f=!1,s[1]-o[0]<0&&(h=o[0],f=!0),r[0]+o[1]>i&&(a=i-e[0]-o[1],f=!0),r[1]+o[2]>n&&(h=n-o[2]-e[1],f=!0),s[0]-o[3]<0&&(a=o[3],f=!0),f&&(c=yt.Sp.Ip([a,h],c),c=t.containerToLngLat(c).toArray(),c=yt.Sp.Ip(c,u),u=t.getCenter().toArray(),c=yt.Sp.Ip(u,c),t.panTo(c)))},Ga.prototype.g_=function(t){var i,n,e=ga;for(n in e)if(e.hasOwnProperty(n)){var s=e[n];if(-1!==t.indexOf(s)){i=s;break}}return i},Ga);function Ga(t){void 0===t&&(t={});var i=Wa.call(this,t,{className:Oa.XP,anchor:Pa.anchor})||this;return i.type=Oa.uy,i._opts=yt.assign({},Pa,i._opts),i._originOpts.zIndex||(i._opts.zIndex=Oa.QP),(t=i._opts.size)instanceof yt.Size&&(i._opts.size=i._formatSize(t)),i.jy(),i}var Ua,Za="AMap.ContextMenu",Ka=(Ua=Ui,yt.Ei(Qa,Ua),Qa.prototype.addToGroup=function(t){this.Iy&&this._overlays[this.Iy]&&this.Iy!==t.hS&&this._overlays[this.Iy].remove(),this.Iy=t.hS,Ua.prototype.addToGroup.call(this,t)},Qa.prototype.removeFromGroup=function(t){Ua.prototype.removeFromGroup.call(this,t),this.Iy=0},Qa.prototype.vi=function(t){return t=t.target,this.Iy&&t&&k.closest(t,"amap-menu")?this._overlays[this.Iy]:null},Qa.prototype.destroy=function(){this.Uy(),Ua.prototype.destroy.call(this)},Qa.prototype.By=function(){this._map.on("viewchange",this.Wy),this._map.on("click",this.Py)},Qa.prototype.Uy=function(){this._map.off("viewchange",this.Wy),this._map.off("click",this.Py)},Qa);function Qa(t){var n=Ua.call(this,t,{className:""})||this;return n.type=Za,n.className=Za,n.Wy=function(){n.Iy&&n.removeFromGroup(n._overlays[n.Iy])},n.Py=function(t){var i=n.Iy,i=n._overlays[i];!k.closest(t.originEvent.target,"amap-info")&&i&&(n.Iy=0,i.close())},n._container=n._parent,n.By(),n}var qa,th=(qa=Zi,yt.Ei(ih,qa),ih.prototype.open=function(t,i){t&&i?(this._opts.visible=!0,this.add(t),this.setPosition(i),this.emit("open")):this._map&&this._position&&(this._opts.visible=!0,this.updateOverlay(),this.emit("open"))},ih.prototype.close=function(){this._parent&&(this._opts.visible=!1,this.uZ(),this.emit("close"))},ih.prototype.addItem=function(t,i,n){n={content:t,fn:i,order:n},this.Zy.push(n),this.qy(this.dom),this.updateOverlay()},ih.prototype.removeItem=function(t,i){for(var n=this.Zy,e=0;e<n.length;e++){var s=n[e];s.content===t&&s.fn===i&&(n.splice(e,1),e--)}this.qy(this.dom),this.updateOverlay()},ih.prototype.getBounds=function(){return null},ih.prototype.getDraggable=function(){return!1},ih.prototype._add=function(t){this._map=t,this._parent=t.vm,this.updateOverlay()},ih.prototype._createDefaultInnerDom=function(){return document.createElement("div")},ih.prototype._createDom=function(t,i){var n=this.dom=this.Yy();return this._opts.isCustom&&this._opts.content?qa.prototype._createDom.call(this,n,this._opts.content):this.qy(n),n},ih.prototype.Yy=function(){var t=document.createElement("div");return k.addClass(t,this._className),t},ih.prototype.qy=function(t){var i=this.Vy(this.Zy),n=document.createElement("ul");k.addClass(n,"amap-menu-outer");for(var e=0,s=i;e<s.length;e++){var r=s[e],r=this.Xy(r);n.appendChild(r)}t.innerHTML="",t.appendChild(n)},ih.prototype.Vy=function(t){return void 0===t&&(t=[]),t.sort(function(t,i){return isNaN(t.order)||isNaN(i.order)?0:t.order-i.order}),t},ih.prototype.Xy=function(i){var n=this,t=document.createElement("li");return t.innerHTML=i.content,t.addEventListener("click",function(t){i.fn(t),n.hide()}),t},ih);function ih(t){void 0===t&&(t={});var i=qa.call(this,t,{className:"amap-menu"})||this;return i.type=Za,i.className=Za,i._opts={},i.Zy=[],i._opts=t,i._style.zIndex=140,i}function nh(){this.Hy=!1,this.ex=null,this.Ky=this.nx()}nh.prototype.open=function(t,i,n){var e,s,r,o,a,h,f,u,c,l=this;this.Hy||(e=this.Jy,s=AMap.getConfig().server+"/verify/",yt._.$e?(this.Ky.style.marginLeft=-Math.min(330,screen.width)/2+"px",document.body.appendChild(this.Ky)):(r=this.Qy("amap-container",document.body)[0])&&322<r.clientWidth&&346<r.clientHeight?(this.Ky.style.position="absolute",r.appendChild(this.Ky)):(a=o=0,r&&(r=k.getViewportOffset(r),o=r[0],a=r[1]),this.Ky.style.top="0%",this.Ky.style.left="0%",h=(.5-o)/5,f=(.5-a)/5,u=setInterval(function(){a+=f,.5-(o+=h)<.05&&.5-a<.05?(l.Ky.style.top="50%",l.Ky.style.left="50%",clearInterval(u)):(l.Ky.style.top=100*a+"%",l.Ky.style.left=100*o+"%")},25),document.body.appendChild(this.Ky)),c=!0,e.onload=function(){c?c=!1:l.Hy&&(l.Ky.parentNode&&l.Ky.parentNode.removeChild(l.Ky),l.Hy=!1,l.tx())},e.src=s+"jsapi.html?channel=JSAPI-"+t+"&from="+encodeURIComponent(s+"success.html")+"&th="+i+"&restUrl="+encodeURIComponent(n),this.Hy=!0)},nh.prototype.ix=function(t){this.ex=t},nh.prototype.tx=function(){this.ex&&this.ex()},nh.prototype.Qy=function(t,i){if(window.getElementsByClassName)return window.getElementsByClassName(t,i);for(var n=(i||document).getElementsByTagName("*"),e=[],s=0;s<n.length;s+=1)for(var r=n[s],o=r.className.split(" "),a=0;a<o.length;a+=1)if(o[a]===t){e.push(r);break}return e},nh.prototype.nx=function(){var t=document.createElement("div");t.className="amap-popup",t.style.zIndex="2147483647";var i=document.createElement("iframe");return i.className="amap-popup-content",t.appendChild(i),i.style.width=Math.min(330,screen.width)+"px",this.Jy=i,t};var eh={"restapi.amap.com/v3/place/text":"KEYWORD","restapi.amap.com/v3/place/polygon":"POLYGON","restapi.amap.com/v3/place/around":"NEARBY","restapi.amap.com/v3/place/detail":"ID","restapi.amap.com/v3/geocode/regeo":"REGEO"},sh=new(Bi=nh);sh.ix(function(){rh.ox=!1;for(var t=rh.ax,i=0,n=t.length;i<n;i+=1){var e=t[i];10<n-i?t[2]({status:"error",info:"TIME_OUT_A"}):rh.get(e[0],e[1],e[2])}rh.ax=[]});var rh=(oh.get=function(n,e,s,t){if(void 0===t&&(t={}),oh.ox)oh.ax.push([n,e,s]);else{var i,r=n.split("://")[1],o=eh[r],a=void 0!==o,f=(h=AMap.getConfig()).key,r=h.version,h=h.appname,u=n+"?platform=JS&s=rsv3&logversion=2.0&key="+f+"&sdkversion="+r+"&appname="+h+"&csid="+yt.Util.uuid();for(i in e)e.hasOwnProperty(i)&&(u+="&"+i+"="+e[i]);qn.JSONP(u,function(t,i){"complete"===t?(i=i.data,a&&3e4===i.errcode&&i.data?(oh.ox=!0,oh.ax.push([n,e,s]),sh.open(o,i.data.host,u)):s(t,i)):s(t,i)},t)}},oh.post=function(e,i,n){e=e+"?platform=JS&s=rsv3&logversion=2.0&key="+(e=AMap.getConfig()).key+"&sdkversion="+e.version+"&appname="+e.appname+"&csid="+yt.Util.uuid();qn.Ajax(e,{type:"POST",content:JSON.stringify(i),requestContentType:"text/plain"},function(t,i){"complete"===t?(i=i.data,n(t,JSON.parse(i))):n(t,i)})},oh.ox=!1,oh.ax=[],oh);function oh(){}function ah(t,i,r){var n=AMap.getConfig(),e=n.server+"/v3/assistant/coordinate/convert",s=AMap.Util.parseLngLatData(t),o=[];if(s instanceof Array){for(var a=0,h=s.length;a<h;a+=1)o.push(s[a]+"");o=o.join(";")}else o=s+"";i={key:n.key,s:"rsv3",locations:o,coordsys:i||"gps"},AMap.WebService.get(e,i,function(t,i){if("complete"===t&&i.status&&"1"===i.status){for(var n=i.locations.split(";"),e=0;e<n.length;e+=1){var s=n[e].split(",");n[e]=new AMap.LngLat(s[0],s[1])}r&&"function"==typeof r&&r("complete",{info:"ok",locations:n})}else r&&"function"==typeof r&&r("error",i.info);"error"===t&&r("error",i.info)})}var hh,fh=(uh.prototype.setCenter=function(t){t instanceof yt.LngLat?this.cB=t.toArray():this.cB=t,this.dB=(t=this.map.getProjection()).project.apply(t,this.cB)},uh.prototype.getCenter=function(){return this.cB},uh.prototype.lngLatToCoord=function(t){var i=this.map.getProjection().project;return t instanceof yt.LngLat&&(t=t.toArray()),this.cB||this.setCenter(t),this.pB(i(t[0],t[1]),this.dB)},uh.prototype.lngLatsToCoords=function(t){if(yt.Util.isArray(t)){var i=this.map.getProjection().project,n=[];if(yt.Util.vB(t[0]))this.cB||this.setCenter(t),n[0]=this.pB(i(t[0],t[1]),this.dB);else for(var e=0,s=t.length;e<s;e++){var r=t[e];if(yt.Util.vB(r[0]))this.cB||this.setCenter(r),n[e]=this.pB(i(r[0],r[1]),this.dB);else{for(var o=[],a=0,h=r.length;a<h;a++){var f=r[a];if(yt.Util.vB(f[0]))this.cB||this.setCenter(f),o[a]=this.pB(i(f[0],f[1]),this.dB);else{for(var u=[],c=0,l=r.length;c<l;c++){var v=f[c];yt.Util.vB(v[0])&&(this.cB||this.setCenter(v),u[c]=this.pB(i(v[0],v[1]),this.dB))}o[a]=u}}n[e]=o}}return 0<n.length?n:t}return t},uh.prototype.getCameraParams=function(){this.mB();var t=this.map.getView(),i=t.pz(),n=this.pB(this.dB,this.Us);if("3D"===t.type){var e=i.lB(),s=e.fov,r=e.near,o=e.far,a=e.position,h=e.target,f=e.up;return{fov:s/Math.PI*180,near:r,far:o,position:yt.Pt(this.pB(a,n),[a[2]]),lookAt:yt.Pt(this.pB(h,n),[h[2]]),up:f}}if("2D"===t.type)return s=(e=i.lB()).rotation,r=e.near,o=e.far,h=e.top,f=e.bottom,t=e.left,i=e.right,a=e.position,{rotation:s,near:r,far:o,top:h,bottom:f,left:t,right:i,position:yt.Pt(this.pB(a,n),[a[2]])}},uh.prototype.getMVPMatrix=function(){this.mB();var t=this.map.getView().pz(),i=this.pB(this.dB,this.Us),n=yt.Il();return this.Xl=t.Vl(),n.set([1,0,0,0,0,1,0,0,0,0,1,0,i[0],i[1],0,1]),yt.multiply(this.Xl,this.Xl,n),this.Xl},uh.prototype.mB=function(){var i=(t=this.map.getView().getStatus()).optimalZoom,t=t.centerCoord;i>=yt.Ra?(t=yt.lcs.getLocalByCoord([t[0],t[1]]),this.Us=t.center):this.Us=[0,0]},uh.prototype.pB=function(t,i){var n=[0,0];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n},uh);function uh(t){this.Us=[0,0],t||console.error("需要传入 map 实例对象。new AMap.CustomCoords(map);"),this.map=t,this.mB()}var lh,ch=[116.397128,39.916527],vh=(lh=Yo,yt.Ei(dh,lh),dh.prototype.setCenter=function(t,i,n){void 0===i&&(i=!1),t instanceof yt.LngLat&&(t=t.toJSON()),!i&&this.Ev?this.viewChange({lng:t[0],lat:t[1]},n):this.om({center:t})},dh.prototype.setZoomAndCenter=function(t,i,n,e){void 0===n&&(n=!1),this.Pv||(t=this.getZoom()),i instanceof yt.LngLat&&(i=i.toJSON()),!n&&this.Ev?this.viewChange({lng:i[0],lat:i[1],zoom:t},e):this.om({center:i,zoom:t})},dh.prototype.getBounds=function(){return new Cn(this._view.getStatus().bounds)},dh.prototype.getCenter=function(){var i=(t=this._view.getOptions().center)[0],t=t[1];return new yt.LngLat(+i.toFixed(6),+t.toFixed(6))},dh.prototype.setZoom=function(t,i,n){void 0===i&&(i=!1),this.Pv&&(!i&&this.Ev?this.viewChange({zoom:t},n):this.om({zoom:t}))},dh.prototype.getZoom=function(t){return void 0===t&&(t=2),+this._view.getOptions().zoom.toFixed(t)},dh.prototype.zoomIn=function(){this.setZoom(this.getZoom()+1)},dh.prototype.zoomOut=function(){this.setZoom(this.getZoom()-1)},dh.prototype.getPitch=function(){return this._view.getOptions().pitch},dh.prototype.setPitch=function(t,i,n){void 0===i&&(i=!1),!i&&this.Ev?this.viewChange({pitch:t},n):this.om({pitch:t})},dh.prototype.getRotation=function(){return this._view.getOptions().rotation},dh.prototype.setRotation=function(t,i,n){void 0===t&&(t=0),void 0===i&&(i=!1);var e=this.getRotation();360<t?t-=360:t<-360&&(t+=360),180<t-e?t-=360:t-e<-180&&(t+=360),!i&&this.Ev?this.viewChange({rotation:t},n):this.om({rotation:t})},dh.prototype.setBounds=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=[0,0,0,0]),n=n||[0,0,0,0],t instanceof Cn&&(t=t.toJSON()),n=this.em(t,n),this.setZoomAndCenter(n[2],[n[0],n[1]],i)},dh.prototype.panTo=function(t,i){t instanceof yt.LngLat&&(t=t.toJSON()),this.viewChange({lng:t[0],lat:t[1]},i)},dh.prototype.getBindHandler=function(){return this.hx},dh.prototype.panBy=function(t,i,n){var e,s,r,o,a,h,f,u=this.getSize(),c=u.width/2-t,l=u.height/2-i,v=this.getCenter();this.lx&&this.ux&&(e=Math.sqrt(t*t+i*i),f=this.getProjection(),s=(void 0===this.ux.lng?v:this.ux).lng,r=(void 0===this.ux.lat?v:this.ux).lat,o=void 0===this.ux.zoom?this.getZoom():this.ux.zoom,a=void 0===this.ux.rotation?this.getRotation():this.ux.rotation,h=void 0===this.ux.pitch?this.getPitch():this.ux.pitch,u=f.getResolution(o),v=f.project(s,r),f=a/180*Math.PI,f=Math.atan(t/i)-f,i<0&&(f+=Math.PI),i=e*Math.sin(f),f=e*Math.cos(f),v[0]-=u*i,v[1]+=u*f,this.setCenter([s,r],!0),this.setZoom(o,!0),this.setRotation(a,!0),this.setPitch(h,!0)),this.panTo(this.containerToLngLat([c,l]),n)},dh.prototype.viewChange=function(t,i){var n,e,s,r=new I(.4,0,.15,1),o=(new I(.67,0,1,.42),new I(.95,.25,.79,1)),a=new I(.18,.66,.55,.86),h=this.getZoom(),f=this.getPitch(),u=this.getRotation(),c=this.getCenter().toJSON(),l=0,v=0,d=0,p=0;this.lx?(yt.Util.cancelAnimFrame(this.lx),this.ux=yt.assign(this.ux,t)):this.ux=t;var m,y,_,g=this.ux,b=g.zoom,x=g.pitch,k=g.rotation,w=g.lng,M=g.lat;void 0!==b&&(n=b-h,l=r.h(Math.abs(n/10)),l=1e3*Math.max(Math.min(1,l),.1)),void 0!==x&&(e=x-f,v=Math.abs(16.7*e)),void 0!==k&&(s=k-u,d=Math.abs(16.7*s)),void 0!==w&&void 0!==M&&(m=[],t=this._view.getStatus().centerCoord,y=w-c[0],_=M-c[1],g=this.getProjection().project(w,M),m[0]=Math.abs(g[0]-t[0])/this.getResolution(),m[1]=Math.abs(g[1]-t[1])/this.getResolution(),t=0,g=r.h(Math.min(m[0]/this.getSize().width,1)),t=r.h(Math.min(m[1]/this.getSize().height,1)),p=1e3*Math.max(Math.min(1,t,g),.05,g,t));var C=Math.max(l,v,d,p),A=0;function S(){var t={};if(C<=A)return void 0!==b&&(t.zoom=b),void 0!==x&&(t.pitch=x),void 0!==k&&(t.rotation=k),void 0!==w&&void 0!==M&&(t.center=[w,M]),this.om(t),yt.Util.cancelAnimFrame(this.lx),this.lx=!1,void(this.ux={});A+=16.7;var i=Math.min(1,r.p(A/C));void 0!==x&&(t.pitch=e*i+f),void 0!==k&&(t.rotation=s*i+u),void 0!==w&&void 0!==M&&(n&&.5<n?i=a.h(A/C):n&&n<-.5&&(i=o.h(A/C)),t.center=[y*i+c[0],_*i+c[1]]),void 0!==b&&(i=(n<0?a:o).h(A/C),t.zoom=n*i+h),this.om(t),this.lx=yt.Util.requestAnimFrame(S.bind(this))}void 0!==i&&(C=i),this.Ev||(C=-1),S.call(this)},dh.prototype.getContainer=function(){return this.kv},dh.prototype.add=function(t){for(var i=[],n=[],e=[],s=[],r=0,o=t=Array.isArray(t)?t:[t];r<o.length;r++){var a=o[r];if(yt.px(a))this.addLayer(a);else if(yt.er(a))yt.RF(a)?(this.add(a.getOverlays()),a.setMap(this)):this.am(a);else switch(a.type){case"AMap.Marker":case"AMap.ElasticMarker":case"AMap.Text":i.push(a);break;case"AMap.InfoWindow":n.push(a);break;case"AMap.ContextMenu":e.push(a);break;case"AMap.LabelMarker":s.push(a)}}this.pi.add(i),this.di.add(n),this.vm.add(e),s.length&&this.rm().add(s),this.setNeedUpdate(!0)},dh.prototype.remove=function(t){Array.isArray(t)||(t=[t]);for(var i=[],n=[],e=[],s=[],r=0,o=t;r<o.length;r++){var a=o[r];if(yt.er(a))yt.RF(a)?(this.remove(a.getOverlays()),a.setMap(null)):this.$F.remove(a);else if(yt.px(a))this.removeLayer(a);else switch(a.type){case"AMap.Marker":case"AMap.ElasticMarker":case"AMap.Text":i.push(a);break;case"AMap.InfoWindow":n.push(a);break;case"AMap.ContextMenu":e.push(a);break;case"AMap.LabelMarker":s.push(a)}}s.length&&this.rm().remove(s),this.pi.remove(i),this.di.remove(n),this.vm.remove(e),this.setNeedUpdate(!0)},dh.prototype.lngLatToCoords=function(t){var i;return yt.Bs(t)&&(t=[t.lng,t.lat]),(i=this.getProjection()).project.apply(i,t)},dh.prototype.coordsToLngLat=function(t){var i,t=(i=this.getProjection()).unproject.apply(i,t);return new AMap.LngLat(t[0],t[1])},dh.prototype.lngLatToContainer=function(t){yt.Bs(t)&&(t=[t.lng,t.lat]);var i=t[0],n=t[1],s=void 0===(e=t[2])?0:e,e=(t=this._view).getOptions().zoom||Yo.t_[1],e=(s=t.lnglatToContainer(+i,+n,s,e))[0],s=s[1];return new yt.Pixel(e,s)},dh.prototype.lnglatToContainer=function(){console.log&&console.log("请使用 lngLatToContainer 方法替代。")},dh.prototype.containerTolnglat=function(){console.log&&console.log("请使用 containerToLngLat 方法替代。")},dh.prototype.containerToLngLat=function(t){var t=t instanceof Array?(i=t[0],t[1]):(i=t.x,t.y),t=(i=this._view.containerTolnglat(i,t))[0],i=i[1];return new yt.LngLat(t,i)},dh.prototype.coordToContainer=function(t){var i;return(i=this._view)._u.apply(i,t)},dh.prototype.containerToCoord=function(t){return t instanceof yt.Pixel&&(t=t.toArray()),this._view.ku(t[0],t[1])},dh.prototype.pixelToLngLat=function(t,i){var n;return void 0===i&&(i=this.getZoom()),t=t instanceof Array?(n=t[0],t[1]):(n=t.x,t.y),i=(t=yt.V[this._view.au()].unproject(n,t,i))[0],t=t[1],new yt.LngLat(i,t)},dh.prototype.pixelTolnglat=function(){console.log&&console.log("请使用 pixelToLngLat 方法替代。")},dh.prototype.unproject=function(){console.log&&console.log("请使用 pixelToLngLat 方法替代。")},dh.prototype.lngLatToPixel=function(t,i){t instanceof yt.LngLat&&(t=t.toJSON());var n=t[0],t=t[1];return void 0===i&&(i=this.getZoom()),i=(t=yt.V[this._view.au()].project(n,t,i))[0],t=t[1],new yt.Pixel(i,t)},dh.prototype.project=function(t,i){return console.log&&console.log("请使用 lngLatToPixel 方法替代。"),this.lngLatToPixel(t,i)},dh.prototype.lnglatToPixel=function(t,i){return console.log&&console.log("请使用 lngLatToPixel 方法替代。"),this.lngLatToPixel(t,i)},dh.prototype.lnglatToPixelArray=function(t,i){t instanceof yt.LngLat&&(t=t.toJSON());var n=t[0],t=t[1];return void 0===i&&(i=this.getZoom()),yt.V[this.getView().au()].project(n,t,i)},dh.prototype.getTileCoordByLngLat=function(t,i,n){t instanceof yt.LngLat&&(t=t.toJSON());var e=t[0],t=t[1],e=yt.V[this.getView().au()].project(e,t,n),t=Math.floor(e[0]/256),e=Math.floor(e[1]/256);return new yt.ca(n,t,e)},dh.prototype.addOverlay=function(t){this.am(t),this.setNeedUpdate(!0)},dh.prototype.removeOverlay=function(t){this.ar(t),this.setNeedUpdate(!0)},dh.prototype.getResolution=function(t){return t=(t||this.getCenter()).kT,this.getProjection().getResolution(this.getZoom())*Math.cos(t*Math.PI/180)},dh.prototype.getScale=function(t){return this.getResolution()*(t||96)/.0254},dh.prototype.getCity=function(n,t){rh.get(AMap.getConfig().server+"/v3/geocode/regeo",{extensions:"",output:"json",location:t||this.getCenter().toJSON()},function(t,i){"complete"===t&&i.status+""=="1"?(i=i.regeocode.addressComponent,n({province:i.province,city:i.city instanceof Array?"":i.city,citycode:i.citycode instanceof Array?"":i.citycode,district:i.district instanceof Array?"":i.district})):n({})})},dh.prototype.setCity=function(o,a){var h=this;rh.get(AMap.getConfig().server+"/v3/config/district",{output:"json",subdistrict:"0",extensions:"all",keywords:o},function(t,i){if("complete"===t&&i.status+""=="1"){if((i=i.districts)&&i.length){var n=i[0];!/[^\w]+/.test(o)||(i=yt.find(i,function(t){return t.name===o}))&&i!==n&&(n=i);try{var e=n.center.split(","),s=n.level,r=void 0;switch(s){case"city":r=10;break;case"province":r=7;break;case"district":r=12;break;case"country":r=4;break;default:r=12}-1!==n.name.indexOf("市")&&(r=10),h.setZoomAndCenter(r,e),a&&a.call(h,e,r)}catch(t){}}}else a(null,null)})},dh.prototype.setFitView=function(t,i,n,e){if(void 0===i&&(i=!1),void 0===n&&(n=[60,60,60,60]),void 0===e&&(e=Math.min(17.5,Yo.t_[1])),yt.FF(t)&&(t=t.getAllOverlays()),!(t instanceof Array&&0===t.length)){n=Boolean(n)?n:[60,60,60,60],!(t=t||[])||t instanceof Array||(t=[t]),t&&0!==t.length||(t=this.getAllOverlays());var s=this.nm(t);if(s){var r,t=s.toJSON(),e=this.em(t,n,e);return"d"===yt._.baseRender&&(e[2]=Math.floor(e[2])),i&&(r=0),this.viewChange({lng:e[0],lat:e[1],zoom:e[2]},r),s}}},dh.prototype.getFitZoomAndCenterByOverlays=function(t,i,n){if(void 0===i&&(i=[0,0,0,0]),void 0===n&&(n=20),t=this.nm(t))return t=t.toJSON(),[(n=this.em(t,i,n))[2],new yt.LngLat(n[0],n[1])]},dh.prototype.getFitZoomAndCenterByBounds=function(t,i,n){return void 0===i&&(i=[0,0,0,0]),void 0===n&&(n=20),t instanceof Cn&&(t=t.toJSON()),[(n=this.em(t,i,n))[2],new yt.LngLat(n[0],n[1])]},dh.prototype.addControl=function(t){t.addTo(this),this.controls.push(t)},dh.prototype.removeControl=function(t){t.remove?t.remove():t.removeFrom&&t.removeFrom(this,this.controls);for(var i=0;i<this.controls.length;i++)if(this.controls[i]===t)return void this.controls.splice(i-1,1)},dh.prototype.L$=function(){},dh.prototype.D$=function(){return"zh_cn"},dh.prototype.set=function(t,i){switch(t){case"layers":this.setLayers(i);break;case"projection":break;case"pitch":this.setPitch(i);break;case"debug":this.debug=i;break;case"showLabel":this.showLabel=i;break;case"zoom":this.setZoom(i);break;case"center":this.setCenter(i);break;case"rotation":this.setRotation(i);break;case"dragEnable":this.setStatus({dragEnable:i});break;case"zoomEnable":this.setStatus({zoomEnable:i});break;case"scrollWheel":this.setStatus({scrollWheel:i});break;case"jogEnable":this.setStatus({jogEnable:i});break;case"doubleClickZoom":this.setStatus({doubleClickZoom:i});break;case"keyboardEnable":this.setStatus({keyboardEnable:i});break;case"animateEnable":this.setStatus({animateEnable:i});break;case"pitchEnable":this.setStatus({pitchEnable:i});break;case"touchZoom":this.setStatus({touchZoom:i});break;case"isHotspot":this.setStatus({isHotspot:i});break;case"style":this.setStyle(i)}},dh.prototype.setMapStyle=function(t){this.f_(t),this.setStatus({mapStyle:t}),this.indoorMap&&this.indoorMap.hide()},dh.prototype.getMapStyle=function(){var t=this.getStatus();if(t&&t.mapstyleUrl){var i=t.mapstyleUrl;return"normal"===t.mapstyleUrl&&(i="amap://styles/normal"),i}return""},dh.prototype.getAllOverlays=function(i){var t=this.$F.getAllOverlays(),n=yt.Pt(t),e=this.pi.getAllOverlays(),t=this.di.getAllOverlays();yt.vx(e,function(t){n.push(t)}),t&&t.length&&yt.Util.Ig(n,t);for(var s=0,r=this.zv;s<r.length;s++){var o=r[s];o instanceof Ur&&yt.Util.Ig(n,o.getAllOverlays())}return n=n.filter(function(t){return!t._opts.innerOverlay&&((!i||-1<t.className.toLocaleLowerCase().indexOf(i))&&!0)})},dh.prototype.clearMap=function(){for(var t=this.getAllOverlays(),i=0;i<t.length;i++)t[i].remove()},dh.prototype.clearInfoWindow=function(){this.di&&this.di.close()},dh.prototype.addImage=function(t,i){this.I_&&this.I_.addImage(t,i)},dh.prototype.getImage=function(t){if(this.I_)return this.I_.getImage(t)},dh.prototype.getFeatures=function(){return this.Cw},dh.prototype.setFeatures=function(t){this.Cw=t;for(var i=this.yS(),n=this.getLayers(),e=0;e<n.length;e++){var s=n[e];"AMap.Buildings"===s.CLASS_NAME&&s.getState().u$&&(i?s.show():s.hide())}this.setNeedUpdate(!0)},dh.prototype.hasLayer=function(i){var t=this.getLayers();return-1<yt.findIndex(t,function(t){return t===i})},dh.prototype.getMapApprovalNumber=function(){var t=this.c_,i={satellite:"GS(2020)617",district:"GS(2019)6379"};return(!t||t&&"normal"!==t&&"amap://styles/normal"!==t)&&(i.base="GS(2019)6379"),i},dh.prototype.setMask=function(t){t&&(this.c$=t,this.d$||(this.d$=new zo({zIndex:-10,visible:!0,path:this.c$}),this.addLayer(this.d$)),null!==(t=this.d$)&&void 0!==t&&t.setMask(this.c$))},dh.prototype.cancelMapAnimate=function(){this.lx&&(yt.Util.cancelAnimFrame(this.lx),this.lx=-1,this.ux={})},dh.prototype.setLabelRejectMask=function(t){void 0!==t&&(this.NH=t,this.setNeedUpdate(!0))},dh.prototype.am=function(t){this.$F.add(t)},dh.prototype.ar=function(t){this.sm().remove(t)},dh.prototype.setStyle=function(t){this._setStyle(t)},dh);function dh(t,i){void 0===i&&(i={zoom:9,center:[116.397128,39.916527],rotation:0,pitch:0,viewMode:"2D"});var n=this,e=null;if(t instanceof HTMLDivElement?e=t:null!==(s=document.getElementById(t))&&(e=s),null===e)throw Error("Map container div not exist");i.zooms=i.zooms||Yo.t_;var s=!1;void 0===i.zoom&&(s=!0,i.zoom=Math.max(Math.min(i.zooms[1],12),i.zooms[0])),i.center=i.center?yt.Bs(i.center)?i.center.toJSON():i.center:ch,i.rotation=i.rotation||0,i.layers=i.layers||[],i.baseRender=yt._.isWebGL?"w":"d",i.showIndoorMap=i.showIndoorMap||!1,i.vectorMapForeign=i.vectorMapForeign||!1,n=lh.call(this,e,i)||this,s&&(s=n.em(hh)[2],n.setZoom(s,!0)),n.pi=new za(n),n.di=new Ra(n),n.vm=new Ka(n),n.hx=new sa(n),n.hx.Xt(),n.plugin=AMap.plugin;for(var r=0;r<i.layers.length;r++){var o=i.layers[r];o&&"AMap.IndoorMap"===o.CLASS_NAME&&o.setMap(n)}return!i.showIndoorMap||"normal"!==n.c_&&"amap://styles/normal"!==n.c_||n.addLayer(n.indoorMap=new AMap.IndoorMap({zIndex:8,opacity:1,map:n})),n.YG=i.vectorMapForeign,i.vectorMapForeign&&n.addLayer(new AMap.Mapbox({zIndex:8,opacity:1,visible:!0,map:n})),n.lcs.setMap(n),n.customCoords=new fh(n),n}var ph,C=(ph=yt.lw,yt.Ei(mh,ph),mh.prototype.Lo=function(){return{id:this.No,type:"image",tileUrl:this.Be,bounds:this.ir,canvas:this.canvas,zooms:this.xt}},mh.prototype.co=function(){return this.No},mh.prototype.getState=function(){return{visible:this._visible,opacity:this.tl,To:this,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},mh);function mh(t){var i=ph.call(this,t)||this;return i.CLASS_NAME="AMap.ImageLayer",i.Be=t.url||t.tileUrl,i.ir=t.bounds,i.Qh=t.zIndex||6,i.tl=void 0===t.opacity?1:t.opacity,i._visible=void 0===t.visible||t.visible,i.xt=void 0===t.zooms?[2,20]:t.zooms,i.canvas=t.canvas,i}var yh,_h={tileUrl:"",url:"",bounds:[0,0,0,0],opacity:1,visible:!0,zIndex:4,zooms:[2,22]},gh=(yh=C,yt.Ei(bh,yh),bh.prototype.getImageUrl=function(){return this.Be},bh.prototype.setImageUrl=function(t){t&&(this.Be=t,this.uo.getSource(this.No).Fo(!1),this.map.setNeedUpdate(!0))},bh.prototype.getBounds=function(){return this.ir},bh.prototype.setBounds=function(t){t&&(this.ir=t,this.map.setNeedUpdate(!0))},bh);function bh(t){void 0===t&&(t=_h);var i=this;if(!t.tileUrl&&!t.url)throw new Error("ImageLayer need an Url");return t.bounds=t.bounds||_h.bounds,t.opacity=(void 0===t.opacity?_h:t).opacity,t.visible=(void 0===t.visible?_h:t).visible,t.zIndex=(void 0===t.zIndex?_h:t).zIndex,t.canvas=void 0,(i=yh.call(this,t)||this).onCreated(),i}var xh,kh={url:"",tileUrl:"",bounds:[0,0,0,0],opacity:1,visible:!0,zooms:[2,22],zIndex:6},wh=(xh=C,yt.Ei(Mh,xh),Mh.prototype.setCanvas=function(t){this.canvas=t,this.reFresh()},Mh.prototype.getElement=function(){return this.canvas},Mh.prototype.getBounds=function(){return this.ir},Mh.prototype.setBounds=function(t){t&&(this.ir=t,this.map.setNeedUpdate(!0))},Mh.prototype.reFresh=function(){this.map.setNeedUpdate(!0)},Mh);function Mh(t){void 0===t&&(t=kh);var i=this;return t.bounds=t.bounds||kh.bounds,t.opacity=(void 0===t.opacity?kh:t).opacity,t.visible=(void 0===t.visible?kh:t).visible,t.tileUrl="",(i=xh.call(this,t)||this).onCreated(),i.CLASS_NAME="AMap.CanvasLayer",i}var Ch,qi=(Ch=yt.lw,yt.Ei(Ah,Ch),Ah.prototype.getState=function(){return!this.eP&&this.map&&this.gx(this.canvas),{visible:this._visible,opacity:this.tl,zIndex:this.Qh,To:this,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF,kv:this._container,JD:this.UF}},Ah.prototype.Lo=function(){return{id:this.No,type:"custom",zooms:this.xt}},Ah.prototype.co=function(){return this.No},Ah.prototype.setOpacity=function(t){Ch.prototype.setOpacity.call(this,t),this.canvas.style.opacity=""+this.tl},Ah.prototype.setMap=function(t){Ch.prototype.setMap.call(this,t),this.gx(this.canvas)},Ah.prototype.setzIndex=function(t){this.Qh=t,this._container.style.zIndex=this.Qh+""},Ah.prototype.gx=function(t){this._container=document.createElement("div"),this._container.style.zIndex=this.Qh+"",this._container.className="amap-layer amap-e",this._container.appendChild(t),this.map.do.appendChild(this._container),this.eP=!0},Ah);function Ah(t,i){var n=Ch.call(this,i)||this;return n.CLASS_NAME="AMap.CustomLayer",n.eP=!1,n.UF=!1,n.render=i.render||function(){},n.canvas=t,n.Qh=i.zIndex||11,n.tl=void 0===i.opacity?1:i.opacity,n._visible=void 0===i.visible||i.visible,n.UF=void 0!==i.JD&&i.JD,n.xt=i.zooms||[2,22],n.canvas.style.opacity=""+n.tl,n.canvas.style.display=n._visible?"block":"none",n.map&&n.gx(n.canvas),n}var Sh,Ih=(Sh=qi,yt.Ei(zh,Sh),zh);function zh(t,i){return(i=Sh.call(this,t,i)||this).onCreated(),i}var Th,Lh={zIndex:120,opacity:1,zooms:[2,20],cursor:"pointer",JD:!0},Dh=(Th=yt.Event,yt.Ei(Fh,Th),Fh.prototype.setMap=function(t){t?(this._map=t).add(this.a$):this._map&&(this.clear(),this._map.remove(this.a$))},Fh.prototype.getMap=function(){return this._map||null},Fh.prototype.getData=function(){return this.VL},Fh.prototype.setData=function(t){var i=this;t&&(this.VL=t,this.XD(),AMap.Util.requestAnimFrame(function(){i.emit("complete")}))},Fh.prototype.getStyle=function(){return 1===this.Ze.length?this.Ze[0]:this.Ze},Fh.prototype.setStyle=function(t){if(t){Array.isArray(t)||(t=[t]);var i=this.Ze,n=[];if(i&&i.length)for(var e=0;e<t.length;e++){var s=t[e],r=i[e]||i[0];n.push(AMap.extend({},r,s))}else n=t;this.Ze=n,this.XD()}},Fh.prototype.getOpacity=function(){return this._opts.opacity},Fh.prototype.setOpacity=function(t){this._opts.opacity=t,this.a$&&this.a$.setOpacity(t)},Fh.prototype.getzIndex=function(){return this._opts.zIndex},Fh.prototype.setzIndex=function(t){this._opts.zIndex=t,this.a$&&this.a$.setzIndex(t)},Fh.prototype.getZooms=function(){return this._opts.zooms||[2,20]},Fh.prototype.setZooms=function(t){this._opts.zooms=t,this.a$&&this.a$.setZooms(t)},Fh.prototype.getCursor=function(){return this._opts.cursor||"default"},Fh.prototype.show=function(){this.a$.show()},Fh.prototype.hide=function(){this.a$.hide()},Fh.prototype.clear=function(){this.a$.clear(),this.VL=[]},Fh.prototype.XD=function(){var t=this.VL,i=this.Ze,n=[],e=this.getCursor();if(t&&i){for(var s=0,r=t;s<r.length;s++){var o,a,h,f=r[s],u=f.lnglat,c=f.style,l=void 0===c?0:c;u&&(o=(a=i[l]||i[0]).url,c=void 0===(h=a.anchor)?new AMap.Pixel(0,0):h,h=a.size,a.rotation,a=void 0===(a=a.zIndex)?l:a,h=h.width?h.toArray():h,c=c.x?c.toArray():c,(c=new AMap.LabelMarker({position:u,zIndex:a,cursor:e,icon:{image:o,size:h,anchor:c}})).qD=f,this.Rm(c),n.push(c))}this.jT=n,this.a$.clear(),this.a$.add(n)}},Fh.prototype.Rm=function(t){var r=this;t.on(["click","dblclick","mouseover","mousemove","mouseout","mouseup","mousedown","touchstart","touchend"],function(t){var i,n=t.type,e=r._map,s=r.getCursor();"default"!==s&&e&&(i=e.getDefaultCursor(),"mouseover"===n?e.setCursor(s):"mouseout"===n&&e.setCursor(i)),r.QD(t)})},Fh.prototype.QD=function(t){var i=t.type,t=this.KD(t);this.emit(i,t)},Fh.prototype.KD=function(t){var i=t.target;return t.target=this,{target:t.target,type:t.type,data:i.qD||{}}},Fh);function Fh(t,i){var n=Th.call(this)||this;n.CLASS_NAME="AMap.MassMarks",n._opts=AMap.extend({},Lh,i);var s=(e=n._opts).zIndex,r=e.opacity,i=e.zooms,e=e.style;return n.a$=new AMap.LabelsLayer({zIndex:s,opacity:r,zooms:i,collision:!1,allowCollision:!1,VT:!0}),n.setData(t),n.setStyle(e),n.XD(),n}var Hh,$h="AMap.Text",Eh="amap-overlay-text-container",Bh=(Hh=Da,yt.Ei(Oh,Hh),Oh.prototype.getText=function(){return this._opts.text},Oh.prototype.setText=function(t){t=this.wx(t),this.setContent(t)},Oh.prototype.setStyle=function(t){t&&(this._x=t,this._size=[0,0],this.updateOverlay())},Oh.prototype.updateOverlay=function(t){void 0===t&&(t={}),this.dom&&!yt.isEmpty(this._x)&&this.kx(this._x),Hh.prototype.updateOverlay.call(this,t)},Oh.prototype.wx=function(t){var i=document.createElement("div");return k.addClass(i,Eh),i.innerHTML=t||"",i},Oh.prototype.kx=function(t){void 0===t&&(t={});var i=this.dom.querySelector("."+Eh);if(i)for(var n in t)t.hasOwnProperty(n)&&(i.style[n]=t[n])},Oh);function Oh(t){void 0===t&&(t={});var i=Hh.call(this,t)||this;return i.className=$h,i.type=$h,i._x={},i._size=[0,0],t.style&&(i._x=t.style),t.text&&i.setText(t.text),i}var Ph,Rh={zooms:[2,20],opacity:1,rank:1,bubble:!1,visible:!0,zIndex:1,cursor:"pointer",noSelect:!1,icon:{clipOrigin:[0,0],anchor:[0,0],retina:!0},innerOverlay:!1,text:{content:"",direction:"right",offset:[0,0],zooms:[2,20],style:{fontSize:12,fontFamily:"sans-serif",fontWeight:"normal",fillColor:"#000",strokeWidth:0,padding:"3",fold:!1}}},Nh={uy:"AMap.LabelMarker",gy:Math.pow(2,31)},Wh=(Ph=Ci,yt.Ei(jh,Ph),jh.prototype._mergeOptions=function(t){var i,n=yt.yn(t);for(i in Rh)Rh.hasOwnProperty(i)&&void 0===n[i]&&(n[i]=yt.clone(Rh[i]));return n},jh.prototype.getName=function(){return this._opts.name},jh.prototype.setName=function(t){this._opts.name=t},jh.prototype.getBounds=function(){var t=this._position;return new Cn(t,t)},jh.prototype.getPosition=function(){return new yt.LngLat(this._position[0],this._position[1])},jh.prototype.setPosition=function(t){t&&("string"==typeof t?t=yt.map(t.split(","),function(t){return parseFloat(t)}):yt.Bs(t)&&(t=t.toJSON()),this._position=t,this.to())},jh.prototype.getZooms=function(){return this._opts.zooms},jh.prototype.setZooms=function(t){void 0===t&&(t=[3,20]),this._opts.zooms=t,this.to()},jh.prototype.getOpacity=function(){return this._opts.opacity},jh.prototype.setOpacity=function(t){void 0!==t&&(this._opts.opacity=t,this.to())},jh.prototype.getzIndex=function(){return this._opts.zIndex},jh.prototype.setzIndex=function(t){this._opts.zIndex=t,this.to()},jh.prototype.getRank=function(){return this._opts.rank},jh.prototype.setRank=function(t){this._opts.rank=t,this.to()},jh.prototype.getText=function(){return this._originOpts.text&&this._opts.text||null},jh.prototype.setText=function(t){t&&(yt.assign(this._opts.text,t),this.to())},jh.prototype.getIcon=function(){return this._originOpts.icon&&this._opts.icon||null},jh.prototype.setIcon=function(t){t&&(yt.assign(this._opts.icon,t),this.to())},jh.prototype.getOptions=function(){return this._opts},jh.prototype.getDraggable=function(){return!1},jh.prototype.getExtData=function(){return this._opts.extData||null},jh.prototype.setExtData=function(t){this._opts.extData=t},jh.prototype.setTop=function(t){void 0===t&&(t=!0),this._parent&&this._parent.setTop(this,t),t?(this.vL=this._opts.zIndex||1,this.setzIndex(Nh.gy)):(t=this.vL||this._opts.zIndex||1,this.setzIndex(t))},jh.prototype.setCursor=function(t){t&&(this._opts.cursor=t)},jh.prototype.getCursor=function(){return this._opts.cursor||"default"},jh.prototype.getVisible=function(){return this._opts.visible||!0},jh.prototype.getCollision=function(){var t,i=this.getVisible(),n=!1;return this._parent&&i&&(t=this.hS,n=this._parent.IL(t)),i&&n},jh.prototype.show=function(){this._opts.visible=!0,this.to()},jh.prototype.hide=function(){this._opts.visible=!1,this.to()},jh.prototype.emit=function(t,i){var n=this._opts||{},e=n.icon,s=n.text,r=s&&s.content,o=this.getCursor();return this._map&&("mouseout"===t?this._map.setCursor():this._map.setCursor(o)),s={data:{name:r,txt:r,position:this._position,extData:{},rank:n.rank,zooms:n.zooms},opts:{visible:n.visible,opacity:n.opacity,zooms:n.zooms,zIndex:n.zIndex,icon:e,text:s}},i.data=s,Ph.prototype.emit.call(this,t,i),this},jh.prototype.remove=function(){this._parent&&this._parent.remove(this)},jh.prototype.to=function(){this._parent&&this._parent.to()},jh.prototype.Cs=function(t){(this._parent=t)&&t.map?this._map=t.map:this._map=null},jh);function jh(t){var i=Ph.call(this)||this;return i.type=Nh.uy,i.className=Nh.uy,i.hS=yt.Util.stamp(i),i._originOpts=t,i._opts=i._mergeOptions(t),t.position&&i.setPosition(t.position),i}function Gh(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var e,s,r=Array.prototype.slice.call(arguments,1),o=0,a=r.length;o<a;o+=1)for(var h in e=r[o]||{})e.hasOwnProperty(h)&&("function"==typeof(s=e[h])&&t.prototype?t.prototype[h]=s:t[h]=s);return t}var Uh,Zh=(Uh=yt.Event,yt.Ei(Vh,Uh),Vh.prototype.addTo=function(t){this.map=t,this.map.controls.push(this),t.getControlContainer().appendChild(this._container),t.on("beforeDestroy",this.remove.bind(this))},Vh.prototype.removeFrom=function(t){t?(t.off("beforeDestroy",this.remove.bind(this)),t.getControlContainer().removeChild(this._container),delete this.map):this.map&&(this.map.off("beforeDestroy",this.remove.bind(this)),this.map.getControlContainer().removeChild(this._container),delete this.map)},Vh.prototype.remove=function(){this.map&&(this.map.off("beforeDestroy",this.remove.bind(this)),this.map.getControlContainer().removeChild(this._container),delete this.map)},Vh.prototype.show=function(){this._container.style.display="block",this.emit("show"),this._visible=!0},Vh.prototype.hide=function(){this._container.style.display="none",this.emit("hide"),this._visible=!1},Vh.prototype.initContainer=function(){this._className?(this._container=k.create("div",null,"amap-control amap-"+this._className),void 0===this._config.visible||this._config.visible||(this._container.style.display="none")):this._container=k.create("div",null,"amap-control"),this.Pb()},Vh.prototype.Pb=function(){var t=0,i=0,n=0,e=0;switch(this._config.offset&&0<this._config.offset.length&&(t=this._config.offset[0]+t,i=this._config.offset[1]+i,n=this._config.offset[0]+n,e=this._config.offset[1]+e),t+="px",i+="px",n+="px",e+="px",this._config.position){case"LT":this._container.style.top=i,this._container.style.left=t,this._container.style.bottom="",this._container.style.right="";break;case"RT":this._container.style.top=i,this._container.style.right=n,this._container.style.bottom="",this._container.style.left="";break;case"LB":this._container.style.bottom=e,this._container.style.left=t,this._container.style.top="",this._container.style.right="";break;case"RB":this._container.style.bottom=e,this._container.style.right=n,this._container.style.top="",this._container.style.left="";break;default:this._container.style.top=this._config.position.top||"",this._container.style.left=this._config.position.left||"",this._container.style.right=this._config.position.right||"",this._container.style.bottom=this._config.position.bottom||""}},Vh);function Vh(t){var i=Uh.call(this)||this;return i._visible=!0,i._config=t,i._visible=void 0===t.visible||t.visible,i}var Yh,Jh={ua:(ji=window.navigator).userAgent,mobile:yt._.$e,plat:yt._.plat,mac:yt._.mac,windows:yt._.windows,ios:yt._.ios,iPad:yt._.iPad,iPhone:yt._.iPhone,android:yt._.android,android23:yt._.android23,chrome:yt._.chrome,firefox:yt._.firefox,safari:yt._.safari,wechat:yt._.wechat,uc:yt._.SL,qq:yt._.qq,ie:yt._.ie,ie6:yt._.ie6,ie7:yt._.ie7,ie8:yt._.ielt9&&!yt._.ie7&&!yt._.ie6,ie9:yt._.ie9,ie10:yt._.ie10,ie11:yt._.ie11,edge:yt._.edge,ielt9:yt._.ielt9,baidu:yt._.baidu,isLocalStorage:yt._.RL,isGeolocation:!!ji.geolocation,mobileWebkit:yt._.mobileWebkit,mobileWebkit3d:yt._.mobileWebkit3d,mobileOpera:!!yt._.mobileOpera,retina:yt._.Ue,touch:!!yt._.touch,msPointer:!!yt._.msPointer,pointer:!!yt._.pointer,baseRender:yt._.baseRender,wasm:yt._.wasm,webkit:yt._.webkit,ie3d:yt._.ie3d,webkit3d:yt._.webkit3d,gecko3d:yt._.gecko3d,opera3d:yt._.opera3d,any3d:yt._.any3d,isCanvas:yt._.isCanvas,isSvg:yt._.isSvg,isVML:yt._.ie,isWorker:!!window.Worker,isWebsocket:!!window.WebSocket,isWebGL:yt._.isWebGL},Xh={zooms:[14.8,22],opacity:1,heightFactor:1,visible:!0,zIndex:11,wallColor:[.94,.94,.94,.9],roofColor:[.89,.89,.86,.9],u$:!1},Kh=(Yh=yt.BuildingLayer,yt.Ei(Qh,Yh),Qh.prototype.setStyle=function(t){this.fL=t,this.uL()},Qh.prototype.getState=function(){return{zooms:this.xt,heightFactor:this.Q_,visible:this._visible,zIndex:this.Qh,opacity:this.tl,wallColor:this.sz,roofColor:this.rz,vS:this.fL,To:this,u$:this.cL,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},Qh.prototype.uL=function(){this.map&&(this.getSource().reload(),this.map.setNeedUpdate(!0))},Qh);function Qh(t){void 0===t&&(t=Xh);var i=Yh.call(this)||this;return i.cL=!1,i.xt=(void 0===t.zooms?Xh:t).zooms,i.xt[0]=Math.max(i.xt[0],14.8),i.tl=(void 0===t.opacity?Xh:t).opacity,i.Q_=(void 0===t.heightFactor?Xh:t).heightFactor,i._visible=(void 0===t.visible?Xh:t).visible,i.Qh=(void 0===t.zIndex?Xh:t).zIndex,i.sz=void 0!==t.wallColor&&yt.Util.color2RgbaArray(t.wallColor),i.rz=void 0!==t.roofColor&&yt.Util.color2RgbaArray(t.roofColor),i.AF=void 0===t.depthTest||Boolean(t.depthTest),i.cL=t.u$,i.cL&&(i.No="nebula"),i.onCreated(),i}var qh,rf={high:{fillColor:"rgb(252, 249, 242)",strokeColor:"rgb(230,142,0)"},unHigh:{fillColor:"rgb(252, 249, 242)",strokeColor:"rgb(171,171,171)"}},of=(qh=yt.lw,yt.Ei(af,qh),af.prototype.Do=function(t){return(this.Jh=t).HF(this),this.Jh},af.prototype.onAdd=function(){var t;this.$F=new Cr({zIndex:this.Qh,visible:this._visible,TF:!0}),null!==(t=this.map)&&void 0!==t&&t.addLayer(this.$F)},af.prototype.v$=function(){var t;null!==(t=this.map)&&void 0!==t&&t.removeLayer(this.$F)},af.prototype.destroy=function(){qh.prototype.destroy.call(this),this.$F.destroy()},af.prototype.yD=function(){return{show:this.xD}},af.prototype.mD=function(t){this.xD=t},af.prototype.cD=function(){var n=this;if(this.dD)return!1;this.dD=!0,this._map.on("moveend",function(){var t=n._map.getZoom(),i=n.VR;n.VR.showId,i&&i.centerId&&i.indoor&&(!n.ZT(i.indoor)||t<n.xt[0]?(n.e$&&(n.e$.hide(),n.xD=!1),n.nD()):n.e$&&n.VR.visible&&(n.mL||n.e$.show(),n.xD=!0))})},af.prototype.uD=function(){for(var t=this.VR,i=t.indoor,n=t.centerId,e=Object.keys(i),s=rf,r=0;r<e.length;r++){var o=e[r];if(i[o]&&i[o].outline)for(var a=i[o].outline,h=0;h<a.length;h++){var f=a[h],u=f.getOptions();u.strokeColor=(o===n?s.high:s.unHigh).strokeColor,f.setOptions(u)}}},af.prototype.oZ=function(){for(var t=this.VR,i=t.indoor,n=(t.centerId,Object.keys(i)),e=rf,s=0;s<n.length;s++){var r=n[s];if(i[r]&&i[r].outline)for(var o=i[r].outline,a=0;a<o.length;a++){var h=o[a],f=h.getOptions();f.strokeColor=e.unHigh.strokeColor,h.setOptions(f)}}},af.prototype.BT=function(){var t=this;setTimeout(function(){t._emit("complete"),t._map&&t._map.emit("indoor_create")},500)},af.prototype.bL=function(t){this.VR.opacity=t,this.gL()},af.prototype.wL=function(t){this.VR.zIndex=t,this.gL()},af.prototype.ZI=function(){return this.VR},af.prototype.KI=function(t){this.VR=t},af.prototype.getState=function(){return{zooms:[17,23],visible:this._visible,opacity:this.tl,To:this,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},af.prototype.Lo=function(){return{id:this.No,type:"indoor",zooms:[17,22],url:""}},af.prototype.co=function(){return this.No},af.prototype.getMap=function(){return this._map},af.prototype.n$=function(t,i){this.VR.floorInfo||(this.VR.floorInfo={}),this.VR.floorInfo[t]=i},af.prototype._emit=function(t,i){return qh.prototype.emit.call(this,t,i),this},af.prototype.showId=function(t){this.VR.showId=t},af.prototype.setBar=function(t){this.e$=t},af.prototype.setBarOpt=function(t){this.VR.defaultBarFloor=t},af.prototype._hideLayer=function(t){this.VR.visible=t,this.DT(t),this._hideBar(!t),t?this.$F.show():this.$F.hide(),this.gL()},af.prototype._hideBar=function(t){this.mL=t,this.VR.hideFloorBar=t,this.e$&&t?this.e$.hide():this.e$&&this.e$.show()},af.prototype._showLabels=function(t){this.VR.showLabels=t;var i=this._map&&this._map.showLabel;this.VR.labelsLayer&&t&&i?this.VR.labelsLayer.show():this.VR.labelsLayer&&this.VR.labelsLayer.hide()},af.prototype.setShowId=function(t){this.VR.hasId=t},af.prototype.update=function(){this.gL()},af.prototype._getSelectedBuildingId=function(){return this.VR.centerId},af.prototype._getSelectedBuilding=function(){return this.VR.building},af.prototype.setRenderData=function(t){this.VR=yt.assign(this.VR,t)},af.prototype.getIntersectPoly=function(t){var i=!1,n=t.getBounds(),t=this._map&&this._map.getBounds();return n&&t&&(i=t.intersects(n)),i},af.prototype.getIntersect=function(t){if(!t)return!1;for(var i=!1,n=this._map&&this._map.getBounds(),e=0;e<t.length;e++){var s=t[e],s=new AMap.LngLat(s[0],s[1]);if(i=n.contains(s))return!0}return i},af.prototype.YR=function(t,e){var s=this;try{if(!this._map)return;var i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&200===i.status&&s._map.gn.JB(i.response,function(t,i){var n;t?console.log(t):(t=(n=Object.keys(i))[0]?i[n[0]].building:void 0)&&t.properties&&t.properties.outside_outline&&(n=i[n[0]].building.properties.outside_outline,(n=AMap.Bounds.xS(n))&&s._map.setBounds(n)),e&&e()})},i.open("GET",t,!0),i.responseType="arraybuffer",i.send()}catch(t){}},af.prototype.DT=function(t){for(var i=this.VR.indoor,n=Object.keys(i),e=0;e<n.length;e++){var s=i[n[e]];if(s.polygons)for(var r=0;r<s.polygons.length;r++){var o=s.polygons[r];t?o.show():o.hide()}if(s.markers)for(var a=0;a<s.markers.length;a++){var h=s.markers[a];t?h.show():h.hide()}}},af.prototype.ZT=function(t){for(var i=Object.keys(t),n=0;n<i.length;n++){var e=i[n];if(this._map&&t[e].outline&&(e=t[e].outline,e=this.getIntersectPoly(e[0])))return e}return!1},af.prototype.gL=function(){},af.prototype.nD=function(){for(var t=this.VR.indoor,i=Object.keys(t),n=0;n<i.length;n++){var e=i[n],s=t[e];s.polygons&&this.$F.remove(s.polygons),s&&s.markers&&0<s.markers.length&&this.VR.labelsLayer&&this.VR.labelsLayer.remove(s.markers),delete t[e]}},af);function af(t){var i=qh.call(this)||this;return i.CLASS_NAME="AMap.IndoorLayer",t=t||{},i.No="indoor",i._visible=!0,i.Qh=t.zIndex||5,i.tl=t.opacity||1,i.mL=t.hideFloorBar||!1,i.xL=t.cursor||"auto",i.xt=[17,22],i.xD=!1,i.dD=!1,0===t.opacity&&(i.tl=0),i.VR={opacity:i.tl,zIndex:i.Qh,visible:i._visible,cursor:i.xL,centerId:null,centerFloor:null,indoor:{},hideFloorBar:i.mL,showLabels:!0,reRender:!1,floorInfo:{},indoorState:{},centerBuilding:{}},t&&t.map&&(i._map=t.map,i.cD()),i._config=AMap.getConfig(),i.BT(),i}var hf=(ff.add=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i]},ff);function ff(){}function uf(t){return yt._.isWebGL?new ve(t):new $e(yt.Ln({id:"_defaultLayer_"+yt.Util.uuid(),tileUrl:AMap.getConfig().y_},t))}var cf,lf="gl_custom",Ui=(cf=yt.lw,yt.Ei(vf,cf),vf.prototype.getState=function(){return{visible:this._visible,opacity:this.tl,zIndex:this.Qh,To:this,rejectMapMask:this.lz,depthTest:this.AF,ce:this.IF}},vf.prototype.Lo=function(){return{id:lf,type:lf,zooms:this.xt}},vf.prototype.co=function(){return lf},vf.prototype.setMap=function(t){cf.prototype.setMap.call(this,t)},vf.prototype.setzIndex=function(t){this.Qh=t},vf);function vf(t){var i=cf.call(this,t)||this;return i.CLASS_NAME="AMap.GLCustomLayer",i.init=t.init||function(t){},i.render=t.render||function(t,i,n){},i.Qh=t.zIndex||120,i.tl=void 0===t.opacity?1:t.opacity,i._visible=void 0===t.visible||t.visible,i.xt=t.zooms||[2,22],i}var df,pf=(df=Ui,yt.Ei(mf,df),mf);function mf(t){return(t=df.call(this,t)||this).onCreated(),t}var yf,_f=(yf=yt.Event,yt.Ei(gf,yf),gf.prototype.setMap=function(t){var i=this;return t&&t!==this._map&&(this._map=t,yt.forEach(this.zv,function(t){i._map&&!i._map.hasLayer(t)&&t.setMap(i._map)})),this},gf.prototype.hasLayer=function(i){return!!yt.find(this.zv,function(t){return t===i})},gf.prototype.setOptions=function(s){var r=this.zv;return yt.vx(s,function(t,i){for(var n=0;n<r.length;n++){var e=r[n];if("AMap.Layer"===e.el)switch(i){case"visible":t?e.show():e.hide();break;case"opacity":e.setOpacity&&e.setOpacity(t);break;case"zIndex":e.setzIndex&&e.setzIndex(t);break;case"zooms":e.setZooms&&e.setZooms(t)}else e.setOptions&&e.setOptions(s)}}),this},gf.prototype.eachLayer=function(t){if(yt.isFunction(t))for(var i=0;i<this.zv.length;i++)t(this.zv[i],i,this.zv)},gf.prototype.addLayer=function(t){this.hasLayer(t)||(this.zv.push(t),t.setMap(this._map))},gf.prototype.addLayers=function(t){if(0<t.length)for(var i=0;i<t.length;i++){var n=t[i];this.addLayer(n)}},gf.prototype.removeLayer=function(t){for(var i=0;i<this.zv.length;i++)t===this.zv[i]&&this.zv.splice(i,1);return t.setMap(null),t},gf.prototype.removeLayers=function(t){if(t&&0<t.length)for(var i=0;i<t.length;i++){var n=t[i];this.removeLayer(n)}},gf.prototype.getLayers=function(){return this.zv},gf.prototype.clearLayers=function(){for(var t=0;t<this.zv.length;t++){var i=this.zv[t];this.removeLayer(i)}},gf.prototype.hide=function(){for(var t=0;t<this.zv.length;t++)this.zv[t].hide();return this},gf.prototype.show=function(){for(var t=0;t<this.zv.length;t++)this.zv[t].show();return this},gf.prototype.on=function(t,i){for(var n=0;n<this.zv.length;n++){var e=this.zv[n];e.on instanceof Function&&i instanceof Function&&e.on(t,i)}return this},gf.prototype.reload=function(){for(var t=0;t<this.zv.length;t++){var i=this.zv[t];i.reload&&i.reload()}return this},gf);function gf(t){var i=yf.call(this)||this;if(i.zv=[],i._map=null,t&&0<t.length)for(var n=0;n<t.length;n++){var e=t[n];i.addLayer(e)}return i}function bf(){console.log("jsapi2.0 AMap.Heatmap is renamed, please use AMap.HeatMap"),console.log("jsapi2.0  AMap.Heatmap 已重命名, 请使用 AMap.HeatMap")}var xf,kf=(xf=of,yt.Ei(wf,xf),wf.prototype.showIndoorMap=function(t,i,n){var e,s=i||1;t&&(this.pL=t,xf.prototype.showId.call(this,t),xf.prototype.n$.call(this,t,s),this.pL=t,e=[],i=this._config.server+"/v3/indoor/indoormaps?",e.push("poiid="+t),e.push("floor="+s),e.push("version=0"),e.push("s=rsv3"),e.push("from=indoorH5Map"),e.push("servicetype=unify"),e.push("key="+this._config.key),e=i+e.join("&"),xf.prototype.YR.call(this,e))},wf.prototype.showFloor=function(t,i){this.pL&&this.showIndoorMap(this.pL,t)},wf.prototype.show=function(){this._hideLayer(!0)},wf.prototype.hide=function(){this._hideLayer(!1)},wf.prototype.getMap=function(){return this._map},wf.prototype.setMap=function(t){var i=(this._map=t).getStatus().animateEnable;xf.prototype.setRenderData.call(this,{animateState:i}),t.setStatus({animateEnable:!1}),xf.prototype.setMap.call(this,t),xf.prototype.cD.call(this)},wf.prototype.setzIndex=function(t){xf.prototype.wL.call(this,t)},wf.prototype.showFloorBar=function(){this._hideBar(!1)},wf.prototype.hideFloorBar=function(){this._hideBar(!0)},wf.prototype.setOpacity=function(t){xf.prototype.bL.call(this,t)},wf.prototype.getOpacity=function(){return xf.prototype.getOpacity.call(this)},wf.prototype.showLabels=function(){this._showLabels(!0)},wf.prototype.hideLabels=function(){this._showLabels(!1)},wf.prototype.getSelectedBuildingId=function(){return xf.prototype._getSelectedBuildingId.call(this)},wf.prototype.getSelectedBuilding=function(){return xf.prototype._getSelectedBuilding.call(this)},wf);function wf(t){var i=xf.call(this,t)||this;return i.CLASS_NAME="AMap.IndoorMap",i._config=AMap.getConfig(),i.pL="",t&&t.map&&(i._map=t.map,t=t.map.getStatus().animateEnable,xf.prototype.setRenderData.call(i,{animateState:t})),i}var Mf,Zi=(Mf=yt.lw,yt.Ei(Cf,Mf),Cf.prototype.getState=function(){return{zooms:[17,23],visible:this._visible,zIndex:2,opacity:this.tl,To:this,depthTest:this.AF,ce:this.IF,tileUrl:this.Be}},Cf.prototype.Lo=function(){return{id:this.No,tileUrl:this.Be||"",type:"mapbox",tileSize:this.Xa||256,zooms:this.xt,dataZooms:this.Qs,projection:"EPS3857"}},Cf.prototype.co=function(){return this.No},Cf);function Cf(t){var i=Mf.call(this)||this;return i.CLASS_NAME="AMap.MapboxLayer",i.No="mapbox",i.Be=AMap.getConfig().protocol+"://fmap0{1234}.amap.com/v3/vectormap?version=v8&key="+AMap.getConfig().key+"&s=rsv3&x=[x]&y=[y]&zoom=[z]",i.Xa=t.tileSize||256,i.Qs=[2,22],i.Qh=2,i.xt=[9.8,22],i}var Af,Sf=(Af=Zi,yt.Ei(If,Af),If);function If(t){return Af.call(this,t)||this}var zf=(Object.defineProperty(Tf.prototype,"CLASS_NAME",{get:function(){return this.className},eb:!1,nb:!0}),Tf.prototype.addOverlay=function(t){this._overlays.indexOf(t)<0&&(this._overlays.push(t),this._map&&this._map.add(t))},Tf.prototype.addOverlays=function(t){for(var i=0,n=t;i<n.length;i++){var e=n[i];this.addOverlay(e)}},Tf.prototype.getOverlays=function(){return this._overlays},Tf.prototype.hasOverlay=function(t){return-1<this._overlays.indexOf(t)},Tf.prototype.removeOverlay=function(t){this.hasOverlay(t)&&(yt.Util.deleteItemFromArray(this._overlays,t),this._map&&this._map.remove(t))},Tf.prototype.removeOverlays=function(t){for(var i=0,n=t;i<n.length;i++){var e=n[i];this.removeOverlay(e)}},Tf.prototype.clearOverlays=function(){this._map&&this._map.remove(this._overlays),this._overlays=[]},Tf.prototype.eachOverlay=function(t){yt.forEach(this._overlays,t)},Tf.prototype.setMap=function(t){this._map=t},Tf.prototype.show=function(){for(var t=0,i=this._overlays;t<i.length;t++)i[t].show()},Tf.prototype.hide=function(){for(var t=0,i=this._overlays;t<i.length;t++)i[t].hide()},Tf.prototype.setOptions=function(t){for(var i=0,n=this._overlays;i<n.length;i++)n[i].setOptions(t)},Tf.prototype.on=function(i,n,e,s){this.eachOverlay(function(t){t.on(i,n,e,s)})},Tf.prototype.off=function(i,n,e,t){this.eachOverlay(function(t){t.off(i,n,e)})},Tf);function Tf(t){void 0===t&&(t=[]),this.className="Overlay.OverlayGroup",this._overlays=[],this.addOverlays(t)}var Lf,Bi=(Lf=Ci,yt.Ei(Df,Lf),Df.prototype.Cy=function(t){this.P$=!0,yt._.$e||t.originEvent.preventDefault(),this.Ay(t)},Df.prototype.Ly=function(t){this.P$=!1,yt._.$e||t.originEvent.preventDefault()},Df.prototype.Ay=function(t){this._dragObjects={sy:t.pixel,hy:t.pos,ly:t.lnglat}},Df.prototype.Mx=function(){this.on("dragstart",this.Cy.bind(this)),this.on("dragging",this._dragging.bind(this)),this.on("dragend",this.Ly.bind(this))},Df.prototype.Rx=function(){this.off("dragstart",this.Cy.bind(this)),this.off("dragging",this._dragging.bind(this)),this.off("dragend",this.Ly.bind(this))},Df);function Df(){var t=null!==Lf&&Lf.apply(this,arguments)||this;return t.P$=!1,t._dragObjects={sy:{x:0,y:0},hy:[0,0],ly:{lng:0,lat:0}},t}var Ff,C=(Ff=Bi,yt.Ei(Hf,Ff),Object.defineProperty(Hf.prototype,"CLASS_NAME",{get:function(){return this.className},eb:!1,nb:!0}),Hf.prototype.Zx=function(t){this._map=t,this._opts&&(this._opts.map=t)},Hf.prototype.setMap=function(t){this._map!==t&&(this._map&&this._map.remove(this),t&&t.add(this))},Hf.prototype.getMap=function(){return this._map||null},Hf.prototype.destroy=function(){this.Rx(),this._beforeRemoveMap&&this._beforeRemoveMap(),this._map=null},Hf.prototype.remove=function(){this.setMap(null)},Hf.prototype.hide=function(){this.visible&&(this.visible=!1,this._map&&this._map.setNeedUpdate(!0),this.emit("hide",{target:this}))},Hf.prototype.show=function(){this.visible||(this.visible=!0,this._map&&this._map.setNeedUpdate(!0),this.emit("show",{target:this}))},Hf.prototype.setDraggable=function(t){return this._opts.draggable=t},Hf.prototype.getOptions=function(){return Gh({},this._opts)},Hf.prototype.to=function(){this._map&&this._map.setNeedUpdate(!0)},Hf.prototype.getExtData=function(){var t=this._opts;if(t&&t.extData)return t.extData},Hf.prototype.setExtData=function(t){this.setOptions({extData:t})},Hf.prototype.getCursor=function(){var t=this._opts.cursor;return!t&&this._map&&(t=this._map.getDefaultCursor()),t},Hf.prototype.emit=function(t,i){var n=this.getCursor();return this._map&&("mouseout"===t?this._map.setCursor():this._map.setCursor(n)),("dragstart"!==t&&"dragging"!==t&&"dragend"!==t||this.getDraggable())&&Ff.prototype.emit.call(this,t,i),this},Hf.prototype.getDraggable=function(){var t=this._opts.draggable;return void 0!==t&&t},Hf.prototype.BB=function(){this.b_([0,0])},Hf.prototype.getDeltaCoord=function(){return this.zx},Hf.prototype.b_=function(t){this.zx=t},Hf.prototype._getDetalLocal=function(t){var i=this.Sx;return yt.Util.hp(i,t)},Hf.prototype._beforeRemoveMap=function(){var t;this.F$&&(null!==(t=this.F$.parentNode)&&void 0!==t&&t.removeChild(this.F$),delete this.F$)},Hf.prototype._mergeOptions=function(t){var i,n=this._opts;for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},Hf.prototype._dragging=function(t){var i,n,e,s,r;this.getDraggable()&&(e=this._dragObjects.hy,i=t.pos[0]-e[0],n=t.pos[1]-e[1],s=this._dragObjects.sy,this.F$&&"d"===this._map.baseRender?(e=t.pixel.x-s.x,s=t.pixel.y-s.y,r=this.B$,this.B$=[e+r[0],s+r[1]],r=" translate("+this.B$[0]+"px, "+this.B$[1]+"px)",this.F$.style.transform=r,this.F$.style.webkitTransform=r,this.F$.style.MozTransform=r,this.F$.style.msTransform=r):this.to(),r=this.getDeltaCoord(),this.b_([i+r[0],n+r[1]]),this.Ay(t))},Hf.prototype.Ly=function(t){this.Ay(t),this.F$&&"d"===this._map.baseRender?this.moveWithPixel(this.B$[0],-1*this.B$[1]):this.moveWithPos(this.zx[0],this.zx[1]),this.BB(),this.B$=[0,0],this.F$&&(this.F$.style.transform="",this.F$.style.webkitTransform="",this.F$.style.MozTransform="",this.F$.style.msTransform=""),this.to()},Hf.prototype.moveWithPixel=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];console.log("please implement movePixel")},Hf.prototype.moveWithPos=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];console.log("please implement moveWithPos")},Hf.prototype._checkMap=function(){this._opts&&this._opts.map!==this._map&&this.setMap(this._opts.map)},Hf.prototype.cE=function(){this._needUpdate=!0,this._map&&(this._map.fE||this.ZB())},Hf);function Hf(){var t=Ff.call(this)||this;return t._needUpdate=!1,t.className="Overlay",t.visible=!0,t.P$=!1,t.zx=[0,0],t.B$=[0,0],t.Ax=[0,0],t.hS=yt.Util.stamp(t),t.Mx(),t}var $f,qi=($f=C,yt.Ei(Ef,$f),Ef.prototype.Tx=function(t){t&&(t=yt.Bs(t)?yt.at.getProjection("EPSG:3857").project(t.KL,t.kT):yt.at.getProjection("EPSG:3857").project(t[0],t[1]),this.Sx=yt.lcs.getLocalByCoord(t))},Ef.prototype.toGeometry=function(){if(this._opts.path){var t=this._opts.path.slice(0);return yt.ys(t)?{type:"Polygon",coordinates:[t]}:yt.Ox(t)?{type:"Polygon",coordinates:t}:{type:"MultiPolygon",coordinates:t}}},Ef.prototype.toString=function(){var t=this._opts.path;return yt.ys(t)?""+t.join(";"):yt.Ox(t)?""+yt.map(t,function(t){return""+t.join(";")}).join("|"):yt.tL(t)?yt.map(t,function(t){return yt.map(t,function(t){return""+t.join(";")}).join("|")}).join("^"):""},Ef.prototype.reset=function(){this.Dx&&this.Dx.reset(),this.Px&&this.Px.reset(),this.XB&&this.XB.reset(),this.qB&&this.qB.reset()},Ef.prototype.destroy=function(){this.Dx&&(this.Dx.destroy(),delete this.Dx),this.Px&&(this.Px.destroy(),delete this.Px),$f.prototype.destroy.call(this)},Ef.prototype.X$=function(t){for(var i=[],n=0,e=t;n<e.length;n++){for(var s=e[n],r=[],o=[],a=0,h=s[0];a<h.length;a++){var f=h[a],u=yt.at.getProjection("EPSG:3857").project(f[0],f[1]);o.push([u[0],u[1]])}o.length&&(o.push(o[0].slice()),r.push(o));for(var c=1,l=s.length;c<l;c++){var v=s[c],d=[];if(v&&v.length){for(var p=0,m=v;p<m.length;p++)f=m[p],u=yt.at.getProjection("EPSG:3857").project(f[0],f[1]),d.push([u[0],u[1]]);d.push(d[0].slice()),r.push(d)}}i.push(r)}this.q$=i},Ef.prototype.Q$=function(t,i){this.BB(),this.JL(),this.reset();var n=this.Dx,e=this.Px,s=this.XB,r=this.qB;this.Tx(t[0][0][0]);for(var o=0,a=t;o<a.length;o++){for(var h=a[o],f=this.Sx.center,u=[],c=[],l=[],v=[],d=[],p=0,m=h[0];p<m.length;p++){var y=m[p],_=yt.at.getProjection("EPSG:3857").project(y[0],y[1]);u.push(_[0]-f[0],_[1]-f[1]),c.push(y)}for(var g=1,b=h.length;g<b;g++){for(var x=[],k=[],w=0,M=h[g];w<M.length;w++)y=M[w],yt.Bs(y)?(x.push(y.pos[0]-f[0],y.pos[1]-f[1]),k.push(y.toJSON())):(_=yt.at.getProjection("EPSG:3857").project(y[0],y[1]),x.push(_[0]-f[0],_[1]-f[1]),k.push(y));l.push(x),v.push(k)}for(var C=[],g=0,b=u.length;g<b;g+=2)C.push(yt.Bu(u[g],u[g+1]));yt.equals(C[0],C[C.length-1])||C.push(yt.Ex(C[0]));for(var A=u.length,g=0;g<l.length;g++)d.push(A/2),A+=l[g].length,yt.Util.Ig(u,l[g]);var S=n.Nx(u,d);s.add(S);var I=e.Nx(C,{lineJoin:"miter"}).Iw;for(r.add(I),g=0;g<l.length;g++){for(var z=[],T=0,b=(x=l[g]).length;T<b;T+=2)z.push(yt.Bu(x[T],x[T+1]));z.push(yt.Bu(x[0],x[1])),I=e.Nx(z,{lineJoin:"miter"}).Iw,r.add(I)}}i&&(this.Dx.upload(i),this.Px.upload(i))},Ef.prototype.JL=function(){this.Dx||(this.Dx=new yt.K_),this.Px||(this.Px=new yt.J_),this.XB||(this.XB=new yt.oE),this.qB||(this.qB=new yt.oE)},Ef);function Ef(){return null!==$f&&$f.apply(this,arguments)||this}var Bf,Of={map:void 0,fillColor:"#00D3FC",fillOpacity:.5,strokeColor:"#00B2D5",strokeWeight:2,strokeOpacity:.9,strokeStyle:"solid",draggable:!1,bubble:!1,strokeDasharray:[10,5],zIndex:50,extData:{},noSelect:!1,innerOverlay:!1,zooms:[2,20],async:!1},Pf=(Bf=qi,yt.Ei(Rf,Bf),Rf.prototype.getOptions=function(){return Gh({},this._opts)},Rf.prototype.setOptions=function(t){var i=this._mergeOptions(t),t=!yt.isEqual(this._opts.path,i.path);this._opts=i,this._checkMap(),t&&this.setPath(this._opts.path),this.to()},Rf.prototype.init=function(t){this.reset(),t=t||this._opts,this._opts=this._mergeOptions(t),this.setPath(this._opts.path),this._map&&this._map.setNeedUpdate(!0)},Rf.prototype.getPath=function(){if(this._opts&&this._opts.path)return yt.parseLngLatData(yt.yn(this._opts.path))},Rf.prototype.getBounds=function(){if(this.ir)i=this.ir;else{if(!(t=this._opts.path))return;if(!(t=yt.K$(t)))return;(t=Cn.ms(t))&&(i=this.ir=t)}if(i){if(!this._map||!this.zx||0===this.zx[0]&&0===this.zx[1])return this.ir;var t=i.getSouthWest(),i=i.getNorthEast(),t=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx),i=this._map.getView().ru().moveWithPos([i.KL,i.kT],this.zx);return new Cn(t,i)}},Rf.prototype.getArea=function(){if(this._opts&&this._opts.path){var t=yt.jsonLngLatData(this._opts.path);return yt.ys(t)?+yt.GeometryUtil.ringArea(t).toFixed(2):yt.Ox(t)?+yt.E$(t).toFixed(2):+yt.N$(t).toFixed(2)}return 0},Rf.prototype.contains=function(t){if(!this.jx())return!1;if(this.ir&&!this.ir.contains(t))return!1;var i=this._opts.path,t=yt.parseLngLatData(t);return yt.ys(i)?yt.pointInRing([t.lng,t.lat],i):yt.Ox(i)?yt.U$([t.lng,t.lat],i):yt.W$([t.lng,t.lat],i)},Rf.prototype.setPath=function(t){t&&(this.reset(),this.Ix(t),this.to())},Rf.prototype.iE=function(t){if(!this.jx())return-1;if(this.ir&&!this.ir.contains(t))return-1;var i=this._opts.path,t=yt.parseLngLatData(t);return yt.ys(i)||yt.Ox(i)?0:yt.rE([t.lng,t.lat],i)},Rf.prototype.ZB=function(t){var i,n=this;this._map&&(this._needUpdate=!1,!this._opts.path||(i=yt.K$(this._opts.path))&&(this._opts.async?this._map.gn.QB({data:i,type:"polygon"},function(t,i){t?console.log(t):(n.Dx=i.Dc,n.Px=i.$c,n.Sx=i.Sx,n.XB=i.Oc,n.qB=i.Uc)}):this.Q$(i,t)))},Rf.prototype.jx=function(){return Boolean(this._opts&&this._opts.path&&0<this._opts.path.length)},Rf.prototype.moveWithPixel=function(t,i){var n,e,s,r;this._map&&(n=this._map,r=yt.at.getProjection(n.getView().au()),e=this._opts.path,yt.ys(e)?(s=yt.G$(e,[t,i],n.getZoom(),r),this.setPath(s)):(r=yt.Ox(e)?yt.H$(e,[t,i],n.getZoom(),r):yt.V$(e,[t,i],n.getZoom(),r),this.setPath(r)))},Rf.prototype.moveWithPos=function(t,i){var n,e,s;this._map&&(e=this._map,s=yt.at.getProjection(e.getView().au()),n=this._opts.path.slice(0),yt.ys(n)?(e=yt.Z$(n,[t,i],s),this.setPath(e)):(s=yt.Ox(n)?yt.Y$(n,[t,i],s):yt.J$(n,[t,i],s),this.setPath(s)))},Rf);function Rf(t){void 0===t&&(t={});var n=Bf.call(this)||this;n.Ix=function(t){n._opts.path=yt.jsonLngLatData(t);var i=yt.K$(t);i&&(n.ir=Cn.ms(i),(t=n._map)&&("d"===t.baseRender?n.X$(i):n.cE()))};var i,e=t.path;return yt.iL(e)?(i=e[0],n.Tx(i)):yt.eL(e)?(i=e[0][0],n.Tx(i)):yt.yL(e)&&(i=e[0][0][0],n.Tx(i)),n.className="Overlay.Polygon",n._opts={fillColor:"#00D3FC",fillOpacity:.5,strokeColor:"#00B2D5",strokeWeight:2,strokeOpacity:.9,strokeStyle:"solid",draggable:!1,bubble:!1,strokeDasharray:[10,5],zIndex:50,extData:{},noSelect:!1,innerOverlay:!1,zooms:[2,20],async:!1},n._opts=n._mergeOptions(t),n._checkMap(),n}var Nf,ji=(Nf=qi,yt.Ei(Wf,Nf),Wf.prototype.getOptions=function(){return Gh({},this._opts)},Wf.prototype.getArea=function(){var t=this.aE;return t?+yt.N$(t).toFixed(2):0},Wf);function Wf(){var n=null!==Nf&&Nf.apply(this,arguments)||this;return n.contains=function(t){if(!n.aE)return!1;if(n.ir&&!n.ir.contains(t))return!1;var i=n.aE,t=yt.parseLngLatData(t);return yt.ys(i)?yt.pointInRing([t.lng,t.lat],i):yt.Ox(i)?yt.U$([t.lng,t.lat],i):yt.W$([t.lng,t.lat],i)},n}var jf,Gf=(jf=ji,yt.Ei(Uf,jf),Uf.prototype.init=function(t){t=t||this._opts,this._opts=this._mergeOptions(t),this.setBounds(t.bounds)},Uf.prototype.setBounds=function(t){t&&(yt.xs(t)||(t=new Cn(t)),this._opts.bounds=t,this.cE(),this.to())},Uf.prototype.ZB=function(t){var i,n,e;this._map&&(this._needUpdate=!1,(i=this._opts.bounds)&&(n=this._map,e=yt.sE(i),(e=yt.K$(e))&&(this.ir=i.clone(),this.aE=e,"d"===n.baseRender?this.X$(e):this.Q$(e,t)),this.to()))},Uf.prototype.moveWithPixel=function(t,i){var n,e,s;this._map&&(s=this._map,e=(n=this._opts.bounds).southWest.toJSON(),n=n.northEast.toJSON(),e=this._map.getView().ru().moveWithPixel(e,[t,i],s.getZoom()),s=this._map.getView().ru().moveWithPixel(n,[t,i],s.getZoom()),s=new Cn(e,s),this.setBounds(s))},Uf.prototype.moveWithPos=function(t,i){var n,e;this._map&&(e=(n=this._opts.bounds).southWest.toJSON(),n=n.northEast.toJSON(),e=this._map.getView().ru().moveWithPos(e,[t,i]),i=this._map.getView().ru().moveWithPos(n,[t,i]),i=new Cn(e,i),this.setBounds(i))},Uf.prototype.setOptions=function(t){var i=this._mergeOptions(t),t=!yt.isEqual(this._opts.bounds,i.bounds);this._opts=i,this._checkMap(),t&&this.setBounds(i.bounds),this.to()},Uf.prototype.getBounds=function(){if(this.ir)i=this.ir;else{if(!(t=this._opts.bounds))return;this.ir=t.clone(),i=this.ir}if(i){if(this.P$){var t=i.getSouthWest(),i=i.getNorthEast(),t=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx),i=this._map.getView().ru().moveWithPos([i.KL,i.kT],this.zx);return new Cn(t,i)}return this.ir}},Uf.prototype.getCenter=function(){if(this._opts.bounds)return this._opts.bounds.getCenter()},Uf);function Uf(t){void 0===t&&(t={});var n=jf.call(this)||this;return n.className="Overlay.Rectangle",n.contains=function(t){var i=n.getBounds();return!!i&&i.contains(t)},n._opts={fillColor:"#00D3FC",fillOpacity:.5,strokeColor:"#00B2D5",strokeWeight:2,strokeOpacity:.9,strokeStyle:"solid",draggable:!1,bubble:!1,strokeDasharray:[10,5],zIndex:50,extData:{},noSelect:!1,innerOverlay:!1,zooms:[2,20],async:!1},n._opts=n._mergeOptions(t),n._checkMap(),n}var Zf,Vf=(Zf=ji,yt.Ei(Yf,Zf),Yf.prototype.init=function(t){t=t||this._opts,this._opts=this._mergeOptions(t),this.setCenterAndRadius(this._opts.center,this._opts.radius)},Yf.prototype.setCenter=function(t){this.setCenterAndRadius(t,this._opts.radius)},Yf.prototype.setRadius=function(t){this.setCenterAndRadius(this._opts.center,t)},Yf.prototype.getCenter=function(){var t=yt.parseLngLatData(this._opts.center),t=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx);return new yt.LngLat(t[0],t[1])},Yf.prototype.getRadius=function(){return this._opts.radius},Yf.prototype.setCenterAndRadius=function(t,i){this._opts.center=t,this._opts.radius=i,this.cE(),this.to()},Yf.prototype.ZB=function(t){var i,n,e;this._map&&(this._needUpdate=!1,i=this._opts.center,e=this._opts.radius,i&&e&&(i=yt.jsonLngLatData(i),n=this._map,(e=yt.K$(yt.hE(i,e,yt._.$e)))&&(this.ir=Cn.ms(e),this.aE=e,"d"===n.baseRender?this.X$(e):this.Q$(e,t)),this.BB(),this._map.setNeedUpdate(!0)))},Yf.prototype.moveWithPixel=function(t,i){var n,e;this._map&&(e=this._map,n=yt.parseLngLatData(this._opts.center),e=this._map.getView().ru().moveWithPixel([n.KL,n.kT],[t,i],e.getZoom()),this.setCenter(e))},Yf.prototype.moveWithPos=function(t,i){var n;this._map&&(n=yt.parseLngLatData(this._opts.center),i=this._map.getView().ru().moveWithPos([n.KL,n.kT],[t,i]),this.setCenter(i))},Yf.prototype.getBounds=function(){if(this.ir)e=this.ir;else{var t=this._opts.center,i=this._opts.radius;if(!t||!i)return;var n=Math.max(i[0],i[1]),i=(t=yt.parseLngLatData(t)).offset(-n,-n),n=t.offset(n,n);this.ir=new Cn(i,n),e=this.ir}if(this.ir){if(this.P$){var n=e.getSouthWest(),e=e.getNorthEast(),n=this._map.getView().ru().moveWithPos([n.KL,n.kT],this.zx),e=this._map.getView().ru().moveWithPos([e.KL,e.kT],this.zx);return new Cn(n,e)}return this.ir}},Yf.prototype.setOptions=function(t){var i=this._mergeOptions(t),t=!yt.isEqual(this._opts.center,i.center)||!yt.isEqual(this._opts.radius,i.radius);this._opts=i,this._checkMap(),t&&this.setCenterAndRadius(this._opts.center,this._opts.radius),this.to()},Yf);function Yf(t){void 0===t&&(t={});var i=Zf.call(this)||this;return i.className="Overlay.Ellipse",i.Cx=yt.assign({center:void 0,radius:void 0},Of),i._opts={fillColor:"#00D3FC",fillOpacity:.5,strokeColor:"#00B2D5",strokeWeight:2,strokeOpacity:.9,strokeStyle:"solid",draggable:!1,bubble:!1,strokeDasharray:[10,5],zIndex:50,extData:{},noSelect:!1,innerOverlay:!1,zooms:[2,20],async:!1},i._opts=i._mergeOptions(t),i._checkMap(),i}var Jf,Xf=(Jf=ji,yt.Ei(Kf,Jf),Kf.prototype.init=function(t){t=t||this._opts,this._opts=this._mergeOptions(t),this.setCenterAndRadius(this._opts.center,this._opts.radius)},Kf.prototype.setCenter=function(t){this.setCenterAndRadius(t,this._opts.radius)},Kf.prototype.setRadius=function(t){this.setCenterAndRadius(this._opts.center,t)},Kf.prototype.getCenter=function(){var t=yt.parseLngLatData(this._opts.center);if(this.P$){var i=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx);return new yt.LngLat(i[0],i[1])}return t},Kf.prototype.getRadius=function(){return parseFloat(this._opts.radius)},Kf.prototype.setCenterAndRadius=function(t,i){this._opts.center=t,this._opts.radius=i,this.cE(),this.to()},Kf.prototype.ZB=function(t){var i,n,e;this._map&&(this._needUpdate=!1,i=this._opts.center,e=this._opts.radius,i&&e&&(n=this._map,(e=yt.K$(yt.lE(i,e)))&&(this.ir=Cn.ms(e),this.aE=e,"d"===n.baseRender?this.X$(e):this.Q$(e,t)),this.BB(),this._map.setNeedUpdate(!0)))},Kf.prototype.moveWithPixel=function(t,i){var n,e;this._map&&(e=this._map,n=yt.parseLngLatData(this._opts.center),e=this._map.getView().ru().moveWithPixel([n.KL,n.kT],[t,i],e.getZoom()),this.setCenter(e))},Kf.prototype.moveWithPos=function(t,i){var n;this._map&&(n=yt.parseLngLatData(this._opts.center),i=this._map.getView().ru().moveWithPos([n.KL,n.kT],[t,i]),this.setCenter(i))},Kf.prototype.setOptions=function(t){var i=this._mergeOptions(t),t=!yt.isEqual(this._opts.center,i.center)||!yt.isEqual(this._opts.radius,i.radius);this._opts=i,this._checkMap(),t&&this.setCenterAndRadius(this._opts.center,this._opts.radius),this.to()},Kf.prototype.O$=function(t,i,n){},Kf.prototype.getBounds=function(){if(this.ir)e=this.ir;else{var t=this._opts.center,i=this._opts.radius;if(!t||!i)return;var n=(t=yt.parseLngLatData(t)).offset(-i,-i),i=t.offset(i,i);this.ir=new Cn(n,i),e=this.ir}if(this.ir){if(this.P$){var i=e.getSouthWest(),e=e.getNorthEast(),i=this._map.getView().ru().moveWithPos([i.KL,i.kT],this.zx),e=this._map.getView().ru().moveWithPos([e.KL,e.kT],this.zx);return new Cn(i,e)}return this.ir}},Kf.prototype.ab=function(t){return delete(t=Gh({},t)).center,delete t.radius,delete t.map,delete t.path,t},Kf);function Kf(t){void 0===t&&(t={});var i=Jf.call(this)||this;return i.className="Overlay.Circle",i._opts={radius:1e3,fillColor:"#00D3FC",fillOpacity:.5,strokeColor:"#00B2D5",strokeWeight:2,strokeOpacity:.9,strokeStyle:"solid",draggable:!1,bubble:!1,strokeDasharray:[10,5],zIndex:50,extData:{},noSelect:!1,innerOverlay:!1,zooms:[2,20],async:!1},i._opts=i._mergeOptions(t),i}var Qf,Ui=(Qf=C,yt.Ei(qf,Qf),qf.prototype.Tx=function(t){t&&(t=yt.Bs(t)?yt.at.getProjection("EPSG:3857").project(t.KL,t.kT):yt.at.getProjection("EPSG:3857").project(t[0],t[1]),this.Sx=yt.lcs.getLocalByCoord(t))},qf.prototype.setCenter=function(t){t&&(this._opts.center=yt.parseLngLatData(t),this.ir=new Cn(this._opts.center,this._opts.center),this.cE(),this.to())},qf.prototype.destroy=function(){this.KB&&delete this.KB,Qf.prototype.destroy.call(this)},qf.prototype.reset=function(){this.KB&&delete this.KB},qf.prototype.toGeometry=function(){if(this._opts.center){var t=yt.parseLngLatData(this._opts.center);return{type:"Point",coordinates:t&&t.toJSON()}}},qf.prototype.XL=function(t){var i=yt.parseLngLatData(t);this.reset(),this.Tx(t),t=this.Sx.center,i=this._map.getView().ru().project(i.KL,i.kT),this.KB=[i[0]-t[0],i[1]-t[1]]},qf);function qf(t){var i=Qf.call(this)||this;return i.className="Overlay.Circle",i.Tx(t),i}var tu,iu=(tu=Ui,yt.Ei(nu,tu),nu.prototype.init=function(t){t=t||this._opts,this._opts=this._mergeOptions(t),this.setCenter(this._opts.center)},nu.prototype.setRadius=function(t){this._opts.radius=t,this.to()},nu.prototype.ZB=function(){var t;this._map&&(this._needUpdate=!1,(t=this._opts.center)&&this._map&&"d"!==this._map.baseRender&&(this.XL(t),this.BB()))},nu.prototype.getCenter=function(){var t=yt.parseLngLatData(this._opts.center),t=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx);return new yt.LngLat(t[0],t[1])},nu.prototype.getRadius=function(){return this._opts.radius},nu.prototype.moveWithPixel=function(t,i){var n,e;this._map&&(e=this._map,n=yt.parseLngLatData(this._opts.center),e=this._map.getView().ru().moveWithPixel([n.KL,n.kT],[t,i],e.getZoom()),this.setCenter(e))},nu.prototype.moveWithPos=function(t,i){var n;this._map&&(this._map,n=yt.parseLngLatData(this._opts.center),i=this._map.getView().ru().moveWithPos([n.KL,n.kT],[t,i]),this.setCenter(i))},nu.prototype.setOptions=function(t){var i=this._mergeOptions(t),t=!yt.isEqual(this._opts.center,i.center);this._opts=i,this._checkMap(),t&&this.setCenter(i.center),this.to()},nu.prototype.getOptions=function(){return Gh({},this._opts)},nu.prototype.getBounds=function(){if(this.ir)i=this.ir;else{if(!(t=this._opts.center))return;this.ir=new Cn(t,t),i=this.ir}if(i){if(this.P$){var t=i.getSouthWest(),i=i.getNorthEast(),t=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx),i=this._map.getView().ru().moveWithPos([i.KL,i.kT],this.zx);return new Cn(t,i)}return this.ir}},nu.prototype.Ib=function(){var t=(t=this._opts).radius+(t.strokeWeight||0);return Math.min(t,64)},nu);function nu(t){void 0===t&&(t={});var e=tu.call(this,t.center||void 0)||this;return e.contains=function(t){return!!e._map&&(t=e._map.lngLatToContainer(t),e.containsWithPixel(t))},e.containsWithPixel=function(t){if(!e._map)return!1;if(!e._opts.center)return!1;var i=e.Ib(),n=e._map.lngLatToContainer(e._opts.center);return!(Math.abs(n.x-t.x)>i||Math.abs(n.y-t.y)>i)&&(t=yt.Db(t.toJSON(),n.toJSON()),n=e._map.getView().Pu||0,t/Math.cos(n)<i)},e.className="Overlay.CircleMarker",e._opts={radius:20,fillColor:"#00D3FC",fillOpacity:.5,strokeColor:"#00B2D5",strokeWeight:2,strokeOpacity:.9,strokeStyle:"solid",draggable:!1,bubble:!1,strokeDasharray:[10,5],zIndex:50,extData:{},noSelect:!1,innerOverlay:!1,zooms:[2,20],async:!1},e._opts=e._mergeOptions(t),e._checkMap(),e}var eu,Zi=(eu=C,yt.Ei(su,eu),su.prototype.Tx=function(t){t&&(t=yt.Bs(t)?yt.at.getProjection("EPSG:3857").project(t.KL,t.kT):yt.at.getProjection("EPSG:3857").project(t[0],t[1]),this.Sx=yt.lcs.getLocalByCoord(t))},su.prototype.destroy=function(){this.Px&&(this.Px.destroy(),delete this.Px),eu.prototype.destroy.call(this)},su.prototype.toGeometry=function(){var t=this._opts.path;if(t)return yt.ys(t)?{type:"LineString",coordinates:t}:yt.Ox(t)?{type:"MultiLineString",coordinates:t}:void 0},su.prototype.U_=function(t){this.F_&&(this.E_||(this.E_=t.createTexture(this.F_,{Zi:!0}),this.E_.bind(t.gl.CLAMP_TO_EDGE,t.gl.LINEAR,t.gl.LINEAR)))},su.prototype.aC=function(t,i){this.rC||(i=function(t){var i=document.createElement("canvas");i.height=1,i.width=4096;for(var n=i.getContext("2d"),e=n.createImageData(4096,1),s=0,r=0;r<4096;r++){for(var o=void 0;s<t.length;s++){if(s===t.length-1){o=t[s][1];break}if(!(4096*t[s+1][0]<r)){o=t[s][1];break}}o=t[s][1];var a=yt.Util.color2RgbaArray(o);e.data[4*r]=255*a[0],e.data[4*r+1]=255*a[1],e.data[4*r+2]=255*a[2],e.data[4*r+3]=255*a[3]}return n.putImageData(e,0,0),i}(i.values),this.rC=t.createTexture(i,{Zi:!0}),t=t.gl,this.rC.bind(t.CLAMP_TO_EDGE,t.NEAREST,t.NEAREST_MIPMAP_NEAREST))},su.prototype.X$=function(t){for(var i=[],n=[],e=0,s=t;e<s.length;e++){for(var r=[],o=[],a=0,h=s[e];a<h.length;a++){var f=h[a],u=yt.at.getProjection("EPSG:3857").project(f[0],f[1]);r.push([u[0],u[1]]),o.push(f)}i.push(r),n.push(o)}this.$x=n,this.q$=i},su.prototype.Q$=function(t){for(var i=[],n=[],e=0,s=t;e<s.length;e++){for(var r=[],o=[],a=0,h=s[e];a<h.length;a++){var f=h[a],u=yt.at.getProjection("EPSG:3857").project(f[0],f[1]);r.push([u[0],u[1],0]),o.push(f)}this.P_(r),i.push(r),n.push(o)}this.$x=n,this.q$=i,this.cE()},su.prototype.D_=function(t,i){if(0!==t.length){this.Px?this.Px.reset():this.Px=new yt.J_;for(var n=this.Sx.center,e=0,s=yt.at.getProjection("EPSG:3857"),r=this.EI,o=s.getResolution(r),a=0,h=t;a<h.length;a++){for(var f=h[a],u=[],c=0,l=f.length;c<l;c+=1)u.push(yt.Bu(f[c][0]-n[0],f[c][1]-n[1]));var v=this._opts;10<=this.EI&&(this._opts.showDir||"dashed"===this._opts.strokeStyle)?e+=this.Px.eD(u,{X_:1,lineJoin:v.lineJoin,lineCap:v.lineCap},Math.floor(2048*o)).distance:e+=this.Px.hb(u,{X_:1,lineJoin:v.lineJoin,lineCap:v.lineCap}).distance}this.sC=e,i&&this.Px.upload(i)}},su.prototype.P_=function(t){t[0][2]=1/0,t[t.length-1][2]=1/0;var i=yt.at.getProjection("EPSG:3857").getResolution(16);!function t(i,n,e,s){for(var r=s,o=e-n>>1,a=e-n,h=e,f=i[n][0],u=i[n][1],c=i[e][0],l=i[e][1],v=n+1;v<e;v+=1){var d=function(t,i,n,e,s,r){var o,a=s-n,h=r-e;return 0===a&&0===h||(1<(o=((t-n)*a+(i-e)*h)/(a*a+h*h))?(n=s,e=r):0<o&&(n+=a*o,e+=h*o)),(a=t-n)*a+(h=i-e)*h}(i[v][0],i[v][1],f,u,c,l);r<d?(h=v,r=d):d!==r||(d=Math.abs(v-o))<a&&(h=v,a=d)}s<r&&(1<h-n&&t(i,n,h,s),i[h][2]=r,1<e-h&&t(i,h,e,s))}(t,0,t.length-1,i*i)},su);function su(){var f=null!==eu&&eu.apply(this,arguments)||this;return f.sC=0,f.W_=function(){if(Jh.isWebGL&&f._map&&f.q$&&!f._opts.geodesic&&!f._needUpdate){var t=f._map,i=Math.min(yt.Util.getOptimalZoom(t.getZoom()),20);if(f.EI!==i)if(i<18){f.EI=i;for(var n=yt.at.getProjection("EPSG:3857").getResolution(Math.min(yt.Util.getOptimalZoom(t.getZoom()),18)),e=[],s=0,r=f.q$;s<r.length;s++){for(var o=r[s],a=[],h=0;h<o.length;h+=1)o[h][2]>n*n*1&&a.push([o[h][0],o[h][1]]);e.push(a)}f.D_(e)}else f.EI=i,f.D_(f.q$)}},f}var ru,ou=(ru=Zi,yt.Ei(au,ru),au.prototype.getOptions=function(){return Gh({},this._opts)},au.prototype.getPath=function(){if(this._opts&&this._opts.path)return yt.parseLngLatData(yt.yn(this._opts.path))},au.prototype.destroy=function(){this.E_&&(this.E_.destroy(),delete this.E_),ru.prototype.destroy.call(this)},au.prototype.getBounds=function(){if(this.ir)i=this.ir;else{if(!(t=this._opts.path))return;if(!(t=yt.aL(t)))return;(t=Cn.bS(t))&&(i=this.ir=t)}if(i){if(!this._map||!this.zx||0===this.zx[0]&&0===this.zx[1])return this.ir;var t=i.getSouthWest(),i=i.getNorthEast(),t=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx),i=this._map.getView().ru().moveWithPos([i.KL,i.kT],this.zx);return new Cn(t,i)}},au.prototype.setPath=function(t){t&&(t&&this.Ix(t),this.to())},au.prototype.moveWithPixel=function(t,i){if(this._map){for(var n=this._map,e=yt.at.getProjection(n.getView().au()),s=[],r=0,o=this.$x;r<o.length;r++){for(var a=[],h=0,f=o[r];h<f.length;h++){var u=f[h];a.push(e.moveWithPixel(u,[t,i],n.getZoom()))}s.push(a)}this.setPath(s)}},au.prototype.moveWithPos=function(t,i){if(this._map){for(var n=this._map,e=yt.at.getProjection(n.getView().au()),s=[],r=0,o=this.$x;r<o.length;r++){for(var a=[],h=0,f=o[r];h<f.length;h++){var u=f[h];a.push(e.moveWithPos(u,[t,i]))}s.push(a)}this.setPath(yt.parseLngLatData(s))}},au.prototype.getLength=function(){var t=this._opts&&this._opts.path;return yt.ys(t)?+yt.nL(t).toFixed(2):yt.Ox(t)?+yt.oL(t).toFixed(2):0},au.prototype.rL=function(){return this.sC},au.prototype.ZB=function(t){this._map&&(this._needUpdate=!1,this.D_(this.q$,t))},au.prototype.setOptions=function(t){var i=this._mergeOptions(t),t=function(t,i,n){for(var e=0,s=n.length;e<s;e+=1){var r=n[e];if(t[r]!==i[r])return!0}return!1}(this._opts,i,["path","lineCap","lineJoin","geodesic"]);i.lineGradient!==this._opts.lineGradient&&this.rC&&(this.rC.destroy(),delete this.rC),this._opts=i,this._checkMap(),t&&this.setPath(this._opts.path),this.to()},au.prototype.init=function(t){var i,n=this,t=t||this._opts,t=this._mergeOptions(t);this._opts=t,this._opts.dirImg&&(this._opts.dirImg instanceof HTMLCanvasElement?this.F_=this._opts.dirImg:(i=this._opts.dirImg,this._map.z_.loadImage(this._opts.dirImg,{type:"dirImg",cb:function(t){t?n.F_=t.img:console.error("load dirImg error",i)}}))),this.setPath(this._opts.path),this._map&&(this.W_(),this._map.setNeedUpdate(!0))},au.prototype.contains=function(t){if(!this.jx())return!1;if(this.ir&&!this.ir.contains(t))return!1;for(var i=this._map.getView(),n=i.getStatus().pitch*Math.PI/180,t=yt.parseLngLatData(t),e=i.ru().project(t.lng,t.lat),s=i.ru().getResolution(this._map.getZoom()),r=0,o=this.q$;r<o.length;r++){var a=o[r];if(yt.hL.lr(e,a)*Math.cos(n)<this._opts.strokeWeight*s)return!0}return!1},au.prototype.jx=function(){return Boolean(this._opts&&this._opts.path&&0<this._opts.path.length)},au.prototype.Ix=function(t){var i=yt.jsonLngLatData(t);this._opts.path=i,i=yt.aL(t),yt.Ox(i)?(this._opts.geodesic&&(i=yt.map(i,function(t){return yt.sL(t)})),this.Tx(i[0][0]),this.ir=Cn.bS(i),this._map&&("d"===this._map.baseRender?this.X$(i):(this.Q$(i),this.BB()))):console.error("error Polyline path")},au.prototype.rD=function(t){var i=yt.jsonLngLatData(t);this._opts.path=i,i=yt.aL(t),yt.Ox(i)?(this._opts.geodesic&&(i=yt.map(i,function(t){return yt.sL(t)})),this.Tx(i[0][0]),this.ir=Cn.bS(i)):console.error("error Polyline path")},au);function au(t){void 0===t&&(t={});var i=ru.call(this)||this;return i.className="Overlay.Polyline",i._opts={cursor:"",strokeColor:"#00B2D5",strokeWeight:2,strokeOpacity:.5,strokeStyle:"solid",draggable:!1,bubble:!1,strokeDasharray:[10,5],isOutline:!1,geodesic:!1,showDir:!1,outlineColor:"#00B2D5",borderWeight:1,lineJoin:"miter",lineCap:"butt",extData:{},zIndex:50,dirColor:"white",dirImg:"",lineGradient:void 0,noSelect:!1,innerOverlay:!1,zooms:[2,20]},i.EI=-1,i._opts=i._mergeOptions(t),i._opts.path&&i.rD(i._opts.path),i._checkMap(),i}var hu,Ci=(hu=Zi,yt.Ei(fu,hu),fu.prototype.getOptions=function(){return Gh({},this._opts)},fu);function fu(){return null!==hu&&hu.apply(this,arguments)||this}var cu,lu=(cu=yt.LngLat,yt.Ei(vu,cu),vu.prototype.lL=function(){for(var t=[],i=0,n=this.controlPoints;i<n.length;i++){var e=n[i];t.push(e.toJSON())}return t.push(this.toJSON()),t},vu.prototype.moveWithPos=function(t,i,n){for(var e=t.moveWithPos(this.toJSON(),[i,n]),s=[],r=0,o=this.controlPoints.length;r<o;r++){var a=this.controlPoints[r];s.push(t.moveWithPos(a.toJSON(),[i,n]))}return s.push(e),new vu(s)},vu.prototype.moveWithPixel=function(t,i,n,e){for(var s=t.moveWithPixel(this.toJSON(),[i,n],e),r=[],o=0,a=this.controlPoints.length;o<a;o++){var h=this.controlPoints[o];r.push(t.moveWithPixel(h.toJSON(),[i,n],e))}return r.push(s),new vu(r)},vu);function vu(t){var i=this;if(yt.ys(t)){for(var n=t.length,i=cu.call(this,t[n-1][0],t[n-1][1])||this,e=[],s=0,r=n-1;s<r;s+=1){var o=t[s][0],a=t[s][1];e.push(new yt.LngLat(o,a))}i.controlPoints=e}else{for(n=t.length,i=cu.call(this,t[n-2],t[n-1])||this,e=[],s=0,r=n-2;s<r;s+=2)o=t[s],a=t[s+1],e.push(new yt.LngLat(o,a));i.controlPoints=e}return i}var du,pu=(du=Ci,yt.Ei(mu,du),mu.prototype.init=function(t){var i,n=this,t=t||this._opts;this._opts=this._mergeOptions(t),this._opts.dirImg&&(this._opts.dirImg instanceof HTMLCanvasElement?this.F_=this._opts.dirImg:(i=this._opts.dirImg,this._map.z_.loadImage(this._opts.dirImg,{type:"dirImg",cb:function(t){t?n.F_=t.img:console.error("load dirImg error",i)}}))),this.setPath(this._opts.path),this._map&&(this.W_(),this._map.setNeedUpdate(!0))},mu.prototype.setOptions=function(t){var i=this._mergeOptions(t),t=!yt.isEqual(this._opts.path,i.path);this._opts=i,this._checkMap(),t&&this.Ix(this._opts.path),this.BB(),this.to()},mu.prototype.ZB=function(t){this._map&&(this._needUpdate=!1,this.D_(this.q$,t))},mu.prototype.getPath=function(){if(this._opts)return this._opts.path},mu.prototype.setPath=function(t){t&&(this._opts.path=t,this.Ix(t))},mu.prototype.getBounds=function(){if(this.ir)i=this.ir;else{if(!(t=this.$x))return;if(!(t=yt.aL(t)))return;(t=Cn.bS(t))&&(i=this.ir=t)}if(i){if(!this._map||!this.zx||0===this.zx[0]&&0===this.zx[1])return this.ir;var t=i.getSouthWest(),i=i.getNorthEast(),t=this._map.getView().ru().moveWithPos([t.KL,t.kT],this.zx),i=this._map.getView().ru().moveWithPos([i.KL,i.kT],this.zx);return new Cn(t,i)}},mu.prototype.moveWithPos=function(t,i){if(this._map){var n=this._map,e=yt.at.getProjection(n.getView().au());if(n=this.getPath()){for(var s=[],r=0,o=n;r<o.length;r++){var a=o[r],a=(a=new lu(a)).moveWithPos(e,t,i);s.push(a.lL())}this.setPath(s)}}},mu.prototype.moveWithPixel=function(t,i){if(this._map){var n=this._map,e=yt.at.getProjection(n.getView().au()),s=this.getPath();if(s){for(var r=[],o=n.getZoom(),a=0,h=s;a<h.length;a++){var f=h[a],f=(f=new lu(f)).moveWithPixel(e,t,i,o);r.push(f.lL())}this.setPath(r)}}},mu.prototype.contains=function(t){if(!this.jx())return!1;if(this.ir&&!this.ir.contains(t))return!1;for(var i=this._map.getView(),n=i.getStatus().pitch*Math.PI/180,t=yt.parseLngLatData(t),e=i.ru().project(t.lng,t.lat),s=i.ru().getResolution(this._map.getZoom()),r=0,o=this.q$;r<o.length;r++){var a=o[r];if(yt.hL.lr(e,a)*Math.cos(n)<this._opts.strokeWeight*s)return!0}return!1},mu.prototype.Ix=function(t){var i=[];if(t)for(var n=0,e=t;n<e.length;n++){var s=e[n];i.push(new lu(s))}t=this.yb(i),t=yt.aL(t),this.Tx(t[0][0]),this.ir=Cn.bS(t),this._map&&("d"===this._map.baseRender?this.X$(t):(this.Q$(t),this.BB()))},mu.prototype.jx=function(){return Boolean(this._opts&&this._opts.path&&0<this._opts.path.length)},mu.prototype.yb=function(t){if(!this._map)return[];var i=yt.at.getProjection("EPSG:3857").getResolution(this._map.getZoom());return yt.bb.xb(t,i)},mu);function mu(t){void 0===t&&(t={});var i=du.call(this)||this;return i.className="Overlay.BezierCurve",i.bo=3,i.W_=function(){},i._opts={cursor:"",strokeColor:"#00D3FC",strokeWeight:2,strokeOpacity:.5,strokeStyle:"solid",draggable:!1,bubble:!1,strokeDasharray:[10,5],isOutline:!1,geodesic:!1,showDir:!1,outlineColor:"#00B2D5",borderWeight:1,lineJoin:"miter",lineCap:"butt",extData:{},zIndex:50,dirColor:"white",dirImg:"",lineGradient:void 0,noSelect:!1,innerOverlay:!1,zooms:[2,20]},i.EI=-1,i._opts=i._mergeOptions(t),i._checkMap(),i}function _u(t,i,n){this.x=i,this.y=n,this.z=t,this.key=t+","+i+","+n}var yu,Bi=(yu=$e,yt.Ei(gu,yu),gu.prototype.eo=function(){var t=yu.prototype.eo.call(this);return t.mapNumber="GS(2019)756",t},gu.prototype.Lo=function(){return{id:this.No,tileUrl:this.Be||"",type:"districtVectorTile",tileSize:this.Xa||256,zooms:this.xt,dataZooms:this.Qs||[3,16],projection:this.hl||"EPS3857",SOC:this.SOC}},gu.prototype.SS=function(){return{zIndex:this.Qh,visible:this._visible,zooms:this.xt,opacity:this.tl,adcode:this._adcode,styles:this.Ze,To:this,rejectMapMask:this.lz,depthTest:this.AF}},gu.prototype.getState=function(){return yt.Ln({},this.SS())},gu.prototype.getDistrictByContainerPos=function(t){if(i=this.map){var i,n=i.containerToLngLat(t),e=i.getProjection().project(n.lng,n.lat),s=i.getView().getStatus().optimalZoom,t=i.getTileCoordByLngLat(n,this.Xa||256,s-1);if(!(n=(i=this.getSource().getTileCache()).getTile(t))&&t.z<12&&(s=Math.pow(2,t.z)/((this.Xa||256)/256),n=i.getTile(new _u(t.z,t.x+s,t.y))||i.getTile(new _u(t.z,t.x-s,t.y))),n&&n.Ma&&n.data){var r=[e[0]-n.Ma.center[0],e[1]-n.Ma.center[1]],o=n.data;if(o.polygons)for(var a=0,h=o.polygons.length;a<h;a+=1){var f=o.polygons[a];if(3<f.path.length&&3===f.properties.lW){for(var u=[],c=0,l=f.path.length;c<l;c+=2)u.push([f.path[c],f.path[c+1]]);if(AMap.GeometryUtil.pointInRing(r,[[u]]))return f.properties}}}}},gu.prototype.co=function(){return this.No},gu.prototype.destroy=function(){this.Jh&&this.Jh.destroy&&(this.Jh.destroy(),delete this.Jh)},gu.prototype.reload=function(){var t;this.map&&((t=this.getSource()).setTileUrl(this.Be),t.reload(),this.map.setNeedUpdate(!0))},gu.prototype.yE=function(){var n=this;AMap.xE||AMap.bE||(AMap.bE="loading",AMap.Http.Ajax(this._E,{},function(t,i){i&&i.data&&(i=JSON.parse(i.data),AMap.xE||(AMap.xE=i,n.wE&&(i=n.wE,n.setFitViewByAdcode(i.CE,i.zE,i.avoid))))}))},gu);function gu(){var t=null!==yu&&yu.apply(this,arguments)||this;return t.CLASS_NAME="AMap.DistrictLayer",t._E=AMap.getConfig().protocol+"://mvt.amap.com/getDistrictInfo",t}var bu,xu=(bu=Bi,yt.Ei(ku,bu),ku.prototype.setSOC=function(t){this.SOC=t,this.Be=this.Ml.replace("[SOC]",this.SOC),this.reload()},ku.prototype.setDistricts=function(t){this.setAdcode(t)},ku.prototype.getDistricts=function(){return this._adcode},ku.prototype.setStyles=function(t){this.Ze=AMap.Util.baseAssign(AMap.Util.baseAssign({},this.tP.styles),t),this.map&&(this.getRender().clearStyleCache(),this.map.setNeedUpdate(!0))},ku.prototype.getStyle=function(){return this.Ze},ku.prototype.setAdcode=function(t){var i;t instanceof Array||(t=[t]);for(var n={},e=0;e<t.length;e+=1)n[t[e]]=1;t=n,this._adcode=t,null!==(i=this.map)&&void 0!==i&&i.setNeedUpdate(!0)},ku.prototype.setFitViewByAdcode=function(t,i,n){var e,s;if(void 0===i&&(i=!1),t instanceof Array||(t=[t]),this.RE||(this.RE=window.AE),AMap.xE){this.RE=AMap.xE;for(var r=0;r<t.length;r+=1){var o=this.RE[t[r]],o=new AMap.Bounds(yt.Pt(o[0],o[1]));s?s.union(o):s=o}this.map&&null!==(e=this.map)&&void 0!==e&&e.setBounds(s,i,n)}else this.wE={CE:t,zE:i,avoid:n}},ku.prototype.on=function(e,t,i,n){var s,r=this;void 0===n&&(n=!1);var o=this.getEvents(),a=!!o[e];return bu.prototype.on.call(this,e,t,i,n),this.map?a||("click"!==e&&"mousemove"!==e||null!==(s=this.map)&&void 0!==s&&s.on(e,function(t){if(!o[e])return r;t.type=e,t.target=r;var i=t.pixel,i=r.getDistrictByContainerPos(i),t={preProps:r.IE,props:i,origin:t};r.emit(e,t)}),/(mouseenter|mouseleave|mouseover|mouseout)/.test(e)&&(null!==(s=this.map)&&void 0!==s&&s.on("mouseleave",function(t){if("mouseleave"===e||"mouseout"===e){if(!o[e])return r;t.type=e,t={preProps:(t.target=r).IE,props:void 0,origin:t},r.emit(e,t),r.IE=void 0}}),null!==(s=this.map)&&void 0!==s&&s.on("mousemove",function(t){if(!o[e])return r;var i,n=t.pixel;(n=r.getDistrictByContainerPos(n))?r.IE&&r.IE.adcode===n.adcode&&r.IE.SOC===n.SOC||(t.type=e,i={preProps:(t.target=r).IE,props:n,origin:t},r.emit("mouseleave",i),r.emit("mouseout",i),r.emit("mouseenter",i),r.emit("mouseover",i),r.IE=n):r.IE&&("mouseout"!==e&&"mouseleave"!==e||(t.type=e,i={preProps:(t.target=r).IE,props:n,origin:t},r.emit("mouseleave",i),r.emit("mouseout",i),r.IE=n))}))):(n={fn:t,context:i,once:n},this.LE[e]?this.LE[e].push(n):this.LE[e]=[n]),this},ku.prototype.onAdd=function(){if(bu.prototype.onAdd.call(this),this.LE)for(var t in this.LE)if(this.LE.hasOwnProperty(t))for(var i=this.LE[t],n=0;n<i.length;n++)this.on(t,i[n].fn,i[n].context)},ku);function ku(t){var i=bu.call(this,t)||this;return i.LE={},i.tP={id:"DistrictLayer_"+AMap.Util.uuid(),tileUrl:AMap.getConfig().protocol+"://mvt.amap.com/district/[SOC]/[z]/[x]/[y]/4096?\nkey="+AMap.getConfig().key,zooms:[2,20],dataZooms:[1,18],opacity:1,visible:!0,depth:0,zIndex:80,styles:{"stroke-width":.5,"nation-stroke":[.35,.35,.35,1],"coastline-stroke":[.18,.63,.94,1],"province-stroke":[.5,.5,.5,1],"city-stroke":[.7,.7,.7,1],"county-stroke":[.85,.85,.85,1],fill:[1,1,1,1],dash:void 0,zIndex:0},SOC:"CHN"},i.SOC=t.SOC||i.tP.SOC,i.No=i.tP.id,t.adcode&&i.setAdcode(t.adcode),i._depth=t.depth||i.tP.depth,i.Ze=AMap.Util.baseAssign(AMap.Util.baseAssign({},i.tP.styles),t.styles||{}),i.Ml=i.tP.tileUrl,i.Be=i.tP.tileUrl.replace("[SOC]",i.SOC),i.xt=t.zooms||i.tP.zooms,i.tl=(void 0===t.opacity?i.tP:t).opacity,i._visible=(void 0===t.visible?i.tP:t).visible,i.Qh=(void 0===t.zIndex?i.tP:t).zIndex,i.Qs=i.tP.dataZooms,i.CLASS_NAME="AMap.DistrictLayer",i}var wu,qi=(wu=xu,yt.Ei(Mu,wu),Mu);function Mu(t){var i=this,n={id:"WorldLayer_"+AMap.Util.uuid(),zIndex:81,SOC:"WLD"};return(i=wu.call(this,t)||this).No=n.id,i.SOC=t.SOC||n.SOC,i.Qh=(void 0===t.zIndex?n:t).zIndex,i.Be=i.Ml.replace("[SOC]",i.SOC),i.CLASS_NAME="AMap.DistrictLayer.World",i}var Cu,ji=(Cu=xu,yt.Ei(Au,Cu),Au);function Au(t){var i=this,n={id:"CountryLayer_"+AMap.Util.uuid(),depth:1,zIndex:82,SOC:"CHN"};return 0===(t=t||n).depth&&(t.styles||(t.styles={}),t.styles["stroke-width"]=0),(i=Cu.call(this,t)||this).No=n.id,i._depth=void 0===t.depth?n.depth:+t.depth,i.SOC=t.SOC||n.SOC,i.Qh=(void 0===t.zIndex?n:t).zIndex,"CHN"===i.SOC&&1<i._depth&&(i.SOC="CHN2"),i.Be=i.Ml.replace("[SOC]",i.SOC),i.CLASS_NAME="AMap.DistrictLayer.Country",i}var Su,Ui=(Su=xu,yt.Ei(Iu,Su),Iu);function Iu(t){var i=this,n={id:"ProvinceLayer_"+AMap.Util.uuid(),depth:1,zIndex:83,SOC:"CHN5"};return(i=Su.call(this,t)||this).No=n.id,i._depth=void 0===t.depth?n.depth:+t.depth,i.SOC=t.SOC||n.SOC,i.Qh=(void 0===t.zIndex?n:t).zIndex,0===i._depth&&(i.SOC="CHN4"),1===i._depth&&(i.SOC="CHN5"),2===i._depth&&(i.SOC="CHN3"),i.Be=i.Ml.replace("[SOC]",i.SOC),i.CLASS_NAME="AMap.DistrictLayer.Province",i.onCreated(),i}xu.World=qi,xu.Country=ji,xu.Province=Ui;var zu=function(t){void 0===t&&(t=[]);var n=t[2]||"",s=t[4],r=t[0];return n+="/maps",yt.Module.module=function(t,i){Array.isArray(t)||(t=[t]);var e=o(t);0===e.length?i&&i():(u.add(e,i),a(n+"/plugin?v="+s+"&cls="+e.join()+"&key="+r,function(){for(var t=0,i=e;t<i.length;t++){var n=i[t];u.finish(n)}}))},function(t,i){Array.isArray(t)||(t=[t]);var e=o(t);0===e.length?i():(u.add(e,i),a(n+"/plugin?v="+s+"&cls="+e.join()+"&key="+r,function(){for(var t=0,i=e;t<i.length;t++){var n=i[t];u.finish(n)}}))}}(config);function Tu(){return Lu}e('.amap-custom{top:0;left:0;position:absolute}.amap-container img{max-width:none!important;max-height:none!important}.amap-container{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACC2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KD0UqkwAAAf1JREFUeAHtmtGpAkEQBE9TMAi/zMb8MzCGU/97Ye8QunDrfQ7qNFUMS8Pbtom/fd8fEx/b/FymdIDL85p/wmmLgEJa5Ad7FTIA0xorpEV+sFchAzCtsUJa5Ad7FTIA0xorpEV+sPcyW1oG33f8WwL3qZ+blebnMs4DXGzqGWFv6hvSYx83KyRi6Q0V0mMfNyskYukNFdJjHzcrJGLpDRXSYx8329QjltrQpp7QH2jWv/5fA5t6EtKc+YY06YfdCglQmiOFNOmH3QoJUJojhTTph90KCVCaI4U06YfdNvUApTiyqSf4NvVEZdGZbwhMvEIUAiMAi+OFKARGABbHC1EIjAAsjk2dJcSmnnzY1BOVRWc+6jDxClEIjAAsjheiEBgBWBwvRCEwArA4/9LUbx+uLxjbM3Fs6omaTT1RWXTmow4TrxCFwAjA4nghCoERgMXxQhQCIwCL8y9NHYb1dBybekJnU09UFp35qMPEK0QhMAKwOF6IQmAEYHG8EIXACMDi2NRZQmzqyYdNPVFZdOajDhOvEIXACMDieCEKgRGAxfFCFAIjAItjU2cJsaknHzb1RGXRmY86TLxCFAIjAIvjhSgERgAWxwtRCIwALI5NnSXEpp582NQTlUVnPuow8QpRCIwALI4XohAYAVgcL0QhMAKwON+m/oRlWjrOG2SeYNIaKe7fAAAAAElFTkSuQmCC);background-color:#f1f1f1;touch-action:none;position:relative;overflow:hidden;-ms-touch-action:none}.amap-drags,.amap-layers{width:100%;height:100%;position:absolute;overflow:hidden;transform:translateZ(0)}.amap-layers canvas{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.amap-layers .amap-layer-tile{transform:translateZ(0)}.amap-layers .amap-layer-tile,.amap-layers .amap-layer-tile img{position:absolute;top:0;left:0;user-select:none;-webkit-user-select:none}.amap-layers .amap-layer-image{position:absolute;top:0;left:0;transform:translateZ(0)}.amap-layers .amap-layer-image img{position:absolute;top:0;left:0}.amap-layer img{pointer-events:none;display:block}.amap-layers .amap-layer-overlay{position:absolute;top:0;left:0;transform:translateZ(0)}.amap-e,.amap-maps{width:100%;height:100%;outline:none}.amap-e,.amap-layers,.amap-maps,.amap-tile-container{position:absolute;left:0;top:0;overflow:hidden}.amap-context,.amap-marker,.amap-markers,.amap-overlays{position:absolute;left:0;top:0}.amap-layers{z-index:0}.amap-overlays{z-index:110;cursor:default}.amap-markers{z-index:120}.amap-controls{z-index:150}.amap-copyright{display:block!important;left:77px;height:16px;bottom:0;padding-bottom:2px;font-size:11px;font-family:Arial,sans-serif}.amap-copyright,.amap-logo{position:absolute;z-index:160;user-select:none;-webkit-user-select:none}.amap-logo{bottom:1px;left:1px;height:20px}.amap-logo img{width:73px!important;height:20px!important;border:none;vertical-align:baseline!important;user-select:none;-webkit-user-select:none}.amap-icon{position:relative;z-index:1}.amap-icon img{position:absolute;z-index:-1}.amap-marker-label{position:absolute;z-index:2;border:1px solid #00f;background-color:#fff;white-space:nowrap;cursor:default;padding:3px;font-size:12px;line-height:14px}.amap-info{left:0;width:fit-content;width:-webkit-fit-content;width:-moz-max-content}.amap-info,.amap-menu{position:absolute;z-index:140}.amap-info-close{position:absolute;right:5px;top:5px;color:#c3c3c3;text-decoration:none;font:700 16px/14px Tahoma,Verdana,sans-serif;width:14px;height:14px;cursor:pointer}.amap-info-outer,.amap-menu-outer{box-shadow:0 1px 2px rgba(0,0,0,.1);background:none repeat scroll 0 0 #fff;border-radius:2px;padding:1px;text-align:left}.amap-info-contentContainer:hover .amap-info-outer,.amap-menu-outer:hover{box-shadow:0 1px 2px rgba(0,0,0,.3)}.amap-info-content{position:relative;background:#fff;padding:10px 18px 10px 10px;line-height:1.4;overflow:auto}.amap-marker-content{position:relative}.amap-info-sharp-old{overflow:hidden;position:absolute;background-image:url(https://webapi.amap.com/images/arrows.png)}.bottom-center .amap-info-sharp-old{height:12px;width:20px;background-position:center 12px;top:100%;left:50%;margin:-9px auto 0 -10px}.bottom-left .amap-info-sharp-old{height:12px;width:13px;background-position:-16px -46px;top:100%;margin-top:-9px}.bottom-right .amap-info-sharp-old{height:12px;width:13px;top:-1px;background-position:-56px -46px;left:100%;margin-left:-13px;top:100%;margin-top:-9px}.middle-left .amap-info-sharp-old{height:20px;width:12px;background-position:0;top:50%;margin-top:-10px;margin-left:-11px}.center .amap-info-sharp-old{display:none}.middle-right .amap-info-sharp-old{height:20px;margin-right:0;width:12px;background-position:100%;left:100%;margin-left:-9px;top:50%;margin-top:-10px}.top-center .amap-info-sharp-old{height:12px;width:20px;background-position:top;top:0;left:50%;margin:-3px auto 0 -10px}.top-left .amap-info-sharp-old{height:12px;width:13px;background-position:-16px -3px;top:0;margin-top:-3px}.top-right .amap-info-sharp-old{height:12px;width:13px;background-position:-56px -3px;left:100%;margin-left:-13px;top:0;margin-top:-3px}.amap-info-sharp{position:absolute}.bottom-center .amap-info-sharp{bottom:0;left:50%;border-top:8px solid #fff}.bottom-center .amap-info-sharp,.bottom-center .amap-info-sharp:after{margin-left:-8px;border-left:8px solid transparent;border-right:8px solid transparent}.bottom-center .amap-info-sharp:after{position:absolute;content:"";margin-top:-7px;border-top:8px solid rgba(0,0,0,.3);filter:blur(2px);z-index:-1}.amap-info-contentContainer:hover.bottom-center .amap-info-sharp:after{border-top:8px solid rgba(0,0,0,.5)}.bottom-left .amap-info-sharp{border-color:transparent #fff;border-style:solid;border-width:0 0 10px 10px}.bottom-left .amap-info-sharp:after{position:absolute;content:"";margin-left:-10px;border-color:transparent rgba(0,0,0,.3);border-style:solid;border-width:0 0 10px 10px;filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.bottom-left .amap-info-sharp:after{border-color:transparent rgba(0,0,0,.5)}.bottom-left .amap-info-content{border-radius:2px 2px 2px 0}.bottom-right .amap-info-sharp{right:0;border-top:10px solid #fff;border-left:10px solid transparent}.bottom-right .amap-info-sharp:after{position:absolute;margin-top:-9px;margin-left:-10px;content:"";border-top:10px solid rgba(0,0,0,.3);border-left:10px solid transparent;filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.bottom-right .amap-info-sharp:after{border-top:10px solid rgba(0,0,0,.5)}.bottom-right .amap-info-content{border-radius:2px 2px 0 2px}.top-center .amap-info-sharp{top:0;left:50%;border-bottom:8px solid #fff}.top-center .amap-info-sharp,.top-center .amap-info-sharp:after{margin-left:-8px;border-left:8px solid transparent;border-right:8px solid transparent}.top-center .amap-info-sharp:after{position:absolute;content:"";margin-top:0;border-bottom:8px solid rgba(0,0,0,.3);filter:blur(1px);z-index:-1}.top-left .amap-info-sharp{left:0;top:0;border-bottom:10px solid #fff;border-right:10px solid transparent}.top-left .amap-info-sharp:after{position:absolute;content:"";margin-top:0;margin-left:0;border-bottom:10px solid rgba(0,0,0,.3);border-right:10px solid transparent;filter:blur(1px);z-index:-1}.top-right .amap-info-sharp{right:0;top:0;border-bottom:10px solid #fff;border-left:10px solid transparent}.top-right .amap-info-sharp:after{position:absolute;content:"";margin-top:0;margin-left:-10px;border-bottom:10px solid rgba(0,0,0,.3);border-left:10px solid transparent;filter:blur(1px);z-index:-1}.middle-right .amap-info-sharp{right:0;top:50%;border-left:8px solid #fff}.middle-right .amap-info-sharp,.middle-right .amap-info-sharp:after{margin-top:-8px;border-top:8px solid transparent;border-bottom:8px solid transparent}.middle-right .amap-info-sharp:after{position:absolute;content:"";margin-left:-8px;border-left:8px solid rgba(0,0,0,.3);filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.middle-right .amap-info-sharp:after{border-left:8px solid rgba(0,0,0,.5)}.middle-left .amap-info-sharp{left:0;top:50%;border-right:8px solid #fff}.middle-left .amap-info-sharp,.middle-left .amap-info-sharp:after{margin-top:-8px;border-top:8px solid transparent;border-bottom:8px solid transparent}.middle-left .amap-info-sharp:after{position:absolute;content:"";margin-left:0;border-right:8px solid rgba(0,0,0,.3);filter:blur(1px);z-index:-1}.amap-info-contentContainer:hover.middle-left .amap-info-sharp:after{border-right:8px solid rgba(0,0,0,.5)}.amap-info-contentContainer.top-center,.amap-info-contentContainer.top-left,.amap-info-contentContainer.top-right{padding-top:8px}.amap-info-contentContainer.bottom-center,.amap-info-contentContainer.bottom-left,.amap-info-contentContainer.bottom-right{padding-bottom:8px}.amap-info-contentContainer.middle-right{padding-right:8px}.amap-info-contentContainer.middle-left{padding-left:8px}.amap-menu-outer{margin:0;padding:0;list-style-type:none}ul.amap-menu-outer li{height:35px;line-height:35px;word-break:break-all;padding:0 10px;font-size:12px;white-space:nowrap}ul.amap-menu-outer li a{text-decoration:none;font-size:13px;margin:0 5px;color:#000;padding:5px}ul.amap-menu-outer li:hover{background-color:#f3f3ee}.amap-overlay-text-container{display:block;width:auto;word-break:keep-all;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;background:#fff;padding:2px 3px;border:1px solid #ccc;border-radius:3px}.amap-overlay-text-container.amap-overlay-text-empty{display:none}.amap-info-content-ie8{border:1px solid #9c9c9c}.amap-control{position:absolute;-webkit-tap-highlight-color:transparent}.amap-toolbar{background-color:#fff;border-radius:4px;box-shadow:0 0 3px rgba(0,0,0,.5)}.amap-toolbar span{display:block;width:30px;height:30px;line-height:30px;text-align:center;border-radius:0 0 4px 4px;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:20px}.amap-toolbar span:first-child{border-bottom:1px solid #eee;border-radius:4px 4px 0 0}.amap-toolbar span:hover{font-weight:bolder;background-color:#f0f0f0}.amap-scalecontrol{pointer-events:none;background-color:hsla(0,0%,100%,.5);border-radius:2px;user-select:none}.amap-scalecontrol .amap-scale-text{font-size:10px;text-align:center;transition:width .3s;user-select:none}.amap-scalecontrol .amap-scale-line{position:relative;height:8px;left:2px;user-select:none}.amap-scalecontrol .amap-scale-edgeleft,.amap-scalecontrol .amap-scale-edgeright,.amap-scalecontrol .amap-scale-middle{position:absolute;background-color:#333;overflow:hidden;box-sizing:content-box!important}.amap-scalecontrol .amap-scale-edgeright{width:1px;height:6px;border:1px solid #fff;transition:left .3s}.amap-scalecontrol .amap-scale-middle{height:2px;left:2px;top:2px;border-top:1px solid #fff;border-bottom:1px solid #fff;transition:width .3s}.amap-scalecontrol .amap-scale-edgeleft{width:1px;height:6px;border:1px solid #fff}.amap-controlbar,.amap-controlbar *{user-select:none}.amap-controlbar .amap-luopan{width:92px;height:92px;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -22px -30px no-repeat;background-size:348px 270px;user-select:none}.amap-luopan .amap-compass{top:46px;left:50%;position:absolute;margin:-24px;width:48px;height:48px;z-index:10;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -231px -26px no-repeat;background-size:348px 270px}.amap-luopan .amap-compass.amap-compass-black{background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) no-repeat -231px -79px;background-size:348px 270px}.amap-luopan .amap-compass .amap-pointers{position:absolute;width:30px;height:48px;top:0;left:9px;border:none;z-index:2;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -281px -26px no-repeat;background-size:348px 270px}.amap-pitchDown,.amap-pitchUp{width:30px;height:25.5px;position:absolute;top:3.5px;margin-left:-15px;left:50%;z-index:1;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -302.5px -49px no-repeat;background-size:348px 270px}.amap-pitchDown:hover,.amap-pitchUp:hover{background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) no-repeat -302.5px -23.5px;background-size:348px 270px}.amap-pitchDown{top:66px;transform:rotate(180deg);-ms-transform:rotate(180deg);-webkit-transform:rotate(180deg);-o-transform:rotate(180deg);-moz-transform:rotate(180deg)}.amap-rotateLeft,.amap-rotateRight{width:21px;height:52px;top:19px;position:absolute;z-index:2;background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) -301.5px -77px no-repeat;background-size:348px 270px}.amap-rotateLeft:hover,.amap-rotateRight:hover{background:url(https://webapi.amap.com/theme/v1.3/controlbar/ctb.png) no-repeat -278.5px -76.5px;background-size:348px 270px}.amap-rotateLeft{left:5px}.amap-rotateRight{right:5px;transform:rotateY(180deg);-ms-transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-o-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}.amap-ctrl-icon-layer{width:30px;height:30px}.amap-ctrl-icon-layer,.amap-ctrl-list-layer{background-color:#fff;border-radius:3px;box-shadow:0 0 4px 1px rgba(0,0,0,.2)}.amap-ctrl-list-layer{position:absolute;top:0;right:0;overflow:hidden;z-index:1}.amap-ctrl-list-layer ul{overflow:hidden;list-style:none;margin:0;padding:5px 8px}.amap-ctrl-list-layer ul li{float:left;width:100%}.amap-ctrl-list-layer ul p{white-space:nowrap;font-size:12px;height:20px;line-height:20px;padding-left:5px;margin:0 10px}.amap-ctrl-list-layer input{float:left;height:20px;width:12px;margin:0 5px}.amap-ctrl-base-layer{border-bottom:1px solid #eee}.amap-ranging-label{_width:10px;font-size:12px;line-height:14px;background:#fff;border:1px solid #ccc;padding:3px 7px 3px 2px;white-space:nowrap}.amap-ranging-label span{height:12px;vertical-align:center;display:inline-block;white-space:nowrap;margin-left:5px}.amap-popup{text-align:center;position:fixed;top:50%;left:50%;margin-left:-165px;margin-top:-170px}.amap-popup-content{vertical-align:middle;line-height:200px;overflow:hidden;background-color:#fff;border:solid;border-width:3px 1px;border-radius:5px;border-color:#ddf;margin:0 auto;text-align:center;height:340px}.amap-labellayers{position:absolute;top:0;left:0;transform-origin:0 0}.amap-indoormap-floorbar-control{position:absolute;width:40px;text-align:center;line-height:1.3em;border-radius:20px;box-shadow:0 0 3px 3px rgba(0,0,0,.1);background-color:#fff;margin-top:-100px}.amap-indoormap-floorbar-control .floor-list-box{max-height:160px;overflow:scroll;-ms-overflow-style:none;overflow:-moz-scrollbars-none;-webkit-user-select:none;-moz-user-select:none}.floor-list-box::-webkit-scrollbar{width:0!important;height:0!important}.amap-indoormap-floorbar-control ul{list-style:none;margin:0;padding:0 4px;width:40px;box-sizing:border-box}.amap-indoormap-floorbar-control ul li{height:32px;width:32px;border-radius:16px}.amap-indoormap-floorbar-control ul li:hover{background-color:#efefef}.amap-indoormap-floorbar-control ul li div{height:32px;text-align:center;line-height:32px;font-size:12px}.amap-indoormap-floorbar-control ul li.selected{color:#fff;background-color:#4196ff}.amap-indoormap-floorbar-control .floor-minus,.amap-indoormap-floorbar-control .floor-plus{height:32px;width:32px;margin:0 auto;border-radius:16px;position:relative}.amap-indoormap-floorbar-control .floor-minus:after,.amap-indoormap-floorbar-control .floor-plus:after{content:"";position:absolute;margin:auto;bottom:4px;left:0;right:0;width:0;height:0;border:7px solid transparent;border-top-color:#777}.amap-indoormap-floorbar-control .floor-plus:after{border-bottom-color:#777;border-top-color:transparent;bottom:11px}.amap-indoormap-floorbar-control .floor-plus:hover:after{border-bottom-color:#222}.amap-indoormap-floorbar-control .floor-minus:hover:after{border-top-color:#222}.amap-indoormap-floorbar-control .floor-plus.disabled:after{border-bottom-color:#ddd}.amap-indoormap-floorbar-control .floor-minus.disabled:after{border-top-color:#ddd}.amap-indoormap-floorbar-control .floor-list-item.selected:after{right:0;left:auto;border-left-color:transparent;border-right-color:#4196ff}.amap-indoormap-floorbar-control .floor-btn.disabled,.amap-indoormap-floorbar-control .floor-btn.disabled *,.amap-indoormap-floorbar-control.with-indrm-loader *{-webkit-pointer-events:none!important;pointer-events:none!important}.amap-indoormap-floorbar-control .with-indrm-loader .floor-nonas{opacity:.5}'),0!==(C=window.location.href).indexOf("http")&&window.parent&&window.parent!==window&&(C=window.parent.location.href),C=encodeURIComponent(C);var Ci=(Zi=config[2].split(":")[0])+"://restapi.amap.com",qi=(Bi=config[2].split(",")[0])+"/theme/v1.3/markers/"+(yt._.Ue?"b":"n"),ji=Zi+"://webrd0{1,2,3,4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x=[x]&y=[y]&z=[z]",Ui=Zi+"://wprd0{1,2,3,4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=7&x=[x]&y=[y]&z=[z]",Lu={key:config[0],host:config[2],server:Ci,protocol:Zi,version:config[4],adcode:config[6],callback:config[5],appname:C,client:Bi,markers:qi,pc:"http://gaode.com",mo:"http://m.amap.com",workerUrl:"",YT:ji,qT:Ui,y_:yt._.$e?Ui:ji,v_:"\x3c!--v2.0--\x3e &copy "+(new Date).getFullYear()+" AutoNavi ",db:config[14]||"",JH:config[15]||""};return ji=(new Date).getTime(),(ji=["platform=JS&s=rsv3&logversion=2.0&product=JsInit&key="+Lu.key,"t="+ji]).push("sdkversion=2.0"),ji.push("appname="+C),ji.push("csid="+yt.Util.uuid()),ji.push("resolution="+window.screen.width+"*"+window.screen.height),ji.push("mob="+(yt._.$e?1:0)),ji.push("vt="+(yt._.isWebGL?1:0)),ji.push("dpr="+window.devicePixelRatio),ji.push("scale="+(yt._.Ue?2:1)),ji.push("detect="+yt._.Ue),ji=Lu.server+"/v3/log/init?"+ji.join("&"),qn.JSONP(ji),function(t){return t[1]&&(ch=t[1].slice(-2),hh=t[1].slice(0,4)),{Map:vh,ImageLayer:gh,createDefaultLayer:uf,TileLayer:$e,NebulaLayer:ve,Buildings:Kh,Indoor:of,SkyLayer:fo,DistrictLayer:xu,CanvasLayer:wh,CustomLayer:Ih,GLCustomLayer:pf,LabelsLayer:Ur,MassMarks:Dh,Event:yt.Event,version:"2.0",plugin:zu,LngLat:yt.LngLat,Pixel:yt.Pixel,Size:yt.Size,Icon:oa,Bounds:Cn,extent:Mn,Marker:Da,Text:Bh,InfoWindow:ja,ContextMenu:th,LabelMarker:Wh,Polygon:Pf,Rectangle:Gf,Ellipse:Vf,Circle:Xf,CircleMarker:iu,Polyline:ou,BezierCurve:pu,OverlayGroup:zf,VectorLayer:Cr,LayerGroup:_f,Control:Zh,DomUtil:k,Util:yt.Util,GeometryUtil:yt.GeometryUtil,Browser:Jh,UA:{ie:Jh.ie,ie9:Jh.ie9,ie11:Jh.ie11,mobile:Jh.mobile,android:Jh.android,ios:Jh.ios},getConfig:Tu,WebService:rh,extend:Gh,Http:qn,addCss:e,BuryPoint:hf,lcs:yt.lcs,convertFrom:ah,Heatmap:bf,IndoorMap:kf,Mapbox:Sf,BuildingLayer:Kh}}});var __AMap_callback=AMap.getConfig().callback,tryGetCallback,tryCallback;return __AMap_callback&&(tryGetCallback=function(){var c=__AMap_callback.split("."),context=window;do{if(!(context=context[c.shift()]))return null}while(c.length);return context||null},tryCallback=function(isFinalTry){var func=tryGetCallback();if(func){if("function"!=typeof func)throw new Error(__AMap_callback+" is not a function!");setTimeout(func,1)}else if(isFinalTry)throw new Error("Can not find callback: "+__AMap_callback+", try define it before load JsApi!")},document.body&&tryGetCallback()?tryCallback():setTimeout(function(){tryCallback(!0)},1)),AMap});
(typeof _cssload_=="function")&&_cssload_("logo",".amap-logo{display:block!important;pointer-events:none;}",true)})(["6e79f6d236e295632f21b385e363b6e8",[112.721177,34.262109,114.220961,34.989506,113.665412,34.757975],"https://webapi.amap.com",1,"2.0",null,"410100","AMap.PolygonEditor",true,false,false,true,"1614103611-20201123-1",false,"D","3_21_03_03_01"])
_jsload_('AMap.PolygonEditor', '!function(AMap){"use strict";function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function(obj){return typeof obj}}else{_typeof=function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called")}return self}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||Object.prototype.toString.call(arr)==="[object Arguments]")){return}var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function getNearestPoint(pt,pts){var nearest=null;pts.forEach(function(p,i){var lngDiff=p[0]-pt[0];var latDiff=p[1]-pt[1];var l=Math.sqrt(Math.pow(lngDiff,2)+Math.pow(latDiff,2));var cur={distance:l,point:p,index:i};if(nearest){if(nearest.distance>l){nearest=cur}}else{nearest=cur}});return nearest}function getPixelDistance(_map,_ref){var _ref2=_slicedToArray(_ref,2),p1=_ref2[0],p2=_ref2[1];var toPixel=function toPixel(p){var lnglat=new AMap.LngLat(p[0],p[1]);return _map.lngLatToContainer(lnglat)};var pixel1=toPixel(p1);var pixel2=toPixel(p2);var xDiff=pixel1.x-pixel2.x;var yDiff=pixel1.y-pixel2.y;var l=Math.sqrt(Math.pow(xDiff,2)+Math.pow(yDiff,2));return l}function e2ll(e){if(e&&e.lnglat){return e.lnglat}return null}function getPolygonOptions(opt){return{path:opt["path"],map:opt["map"],strokeColor:opt["strokeColor"]||"#1791fc",strokeOpacity:opt["strokeOpacity"]||.8,strokeWeight:opt["strokeWeight"]||2,fillColor:opt["fillColor"]||"#1791fc",fillOpacity:opt["fillOpacity"]||.35,strokeStyle:opt["strokeStyle"]||"solid",strokeDasharray:opt["strokeDasharray"]||[10,5],zIndex:opt["zIndex"]||10,extData:opt["extData"]||{},bubble:!!opt["bubble"]}}function createPolygon(path,opt){var _opt=AMap.extend({},getPolygonOptions(opt),{path:path});var p=new AMap.Polygon(_opt);if(_opt["map"]){_opt["map"].add(p)}return p}var commonjsGlobal=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function unwrapExports(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x["default"]:x}function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var helpers=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});exports.earthRadius=6371008.8;exports.factors={centimeters:exports.earthRadius*100,centimetres:exports.earthRadius*100,degrees:exports.earthRadius/111325,feet:exports.earthRadius*3.28084,inches:exports.earthRadius*39.37,kilometers:exports.earthRadius/1e3,kilometres:exports.earthRadius/1e3,meters:exports.earthRadius,metres:exports.earthRadius,miles:exports.earthRadius/1609.344,millimeters:exports.earthRadius*1e3,millimetres:exports.earthRadius*1e3,nauticalmiles:exports.earthRadius/1852,radians:1,yards:exports.earthRadius/1.0936};exports.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/exports.earthRadius,yards:1/1.0936};exports.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function feature(geom,properties,options){if(options===void 0){options={}}var feat={type:"Feature"};if(options.id===0||options.id){feat.id=options.id}if(options.bbox){feat.bbox=options.bbox}feat.properties=properties||{};feat.geometry=geom;return feat}exports.feature=feature;function geometry(type,coordinates,options){switch(type){case"Point":return point(coordinates).geometry;case"LineString":return lineString(coordinates).geometry;case"Polygon":return polygon(coordinates).geometry;case"MultiPoint":return multiPoint(coordinates).geometry;case"MultiLineString":return multiLineString(coordinates).geometry;case"MultiPolygon":return multiPolygon(coordinates).geometry;default:throw new Error(type+" is invalid")}}exports.geometry=geometry;function point(coordinates,properties,options){if(options===void 0){options={}}var geom={type:"Point",coordinates:coordinates};return feature(geom,properties,options)}exports.point=point;function points(coordinates,properties,options){if(options===void 0){options={}}return featureCollection(coordinates.map(function(coords){return point(coords,properties)}),options)}exports.points=points;function polygon(coordinates,properties,options){if(options===void 0){options={}}for(var _i=0,coordinates_1=coordinates;_i<coordinates_1.length;_i++){var ring=coordinates_1[_i];if(ring.length<4){throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.")}for(var j=0;j<ring[ring.length-1].length;j++){if(ring[ring.length-1][j]!==ring[0][j]){throw new Error("First and last Position are not equivalent.")}}}var geom={type:"Polygon",coordinates:coordinates};return feature(geom,properties,options)}exports.polygon=polygon;function polygons(coordinates,properties,options){if(options===void 0){options={}}return featureCollection(coordinates.map(function(coords){return polygon(coords,properties)}),options)}exports.polygons=polygons;function lineString(coordinates,properties,options){if(options===void 0){options={}}if(coordinates.length<2){throw new Error("coordinates must be an array of two or more positions")}var geom={type:"LineString",coordinates:coordinates};return feature(geom,properties,options)}exports.lineString=lineString;function lineStrings(coordinates,properties,options){if(options===void 0){options={}}return featureCollection(coordinates.map(function(coords){return lineString(coords,properties)}),options)}exports.lineStrings=lineStrings;function featureCollection(features,options){if(options===void 0){options={}}var fc={type:"FeatureCollection"};if(options.id){fc.id=options.id}if(options.bbox){fc.bbox=options.bbox}fc.features=features;return fc}exports.featureCollection=featureCollection;function multiLineString(coordinates,properties,options){if(options===void 0){options={}}var geom={type:"MultiLineString",coordinates:coordinates};return feature(geom,properties,options)}exports.multiLineString=multiLineString;function multiPoint(coordinates,properties,options){if(options===void 0){options={}}var geom={type:"MultiPoint",coordinates:coordinates};return feature(geom,properties,options)}exports.multiPoint=multiPoint;function multiPolygon(coordinates,properties,options){if(options===void 0){options={}}var geom={type:"MultiPolygon",coordinates:coordinates};return feature(geom,properties,options)}exports.multiPolygon=multiPolygon;function geometryCollection(geometries,properties,options){if(options===void 0){options={}}var geom={type:"GeometryCollection",geometries:geometries};return feature(geom,properties,options)}exports.geometryCollection=geometryCollection;function round(num,precision){if(precision===void 0){precision=0}if(precision&&!(precision>=0)){throw new Error("precision must be a positive number")}var multiplier=Math.pow(10,precision||0);return Math.round(num*multiplier)/multiplier}exports.round=round;function radiansToLength(radians,units){if(units===void 0){units="kilometers"}var factor=exports.factors[units];if(!factor){throw new Error(units+" units is invalid")}return radians*factor}exports.radiansToLength=radiansToLength;function lengthToRadians(distance,units){if(units===void 0){units="kilometers"}var factor=exports.factors[units];if(!factor){throw new Error(units+" units is invalid")}return distance/factor}exports.lengthToRadians=lengthToRadians;function lengthToDegrees(distance,units){return radiansToDegrees(lengthToRadians(distance,units))}exports.lengthToDegrees=lengthToDegrees;function bearingToAzimuth(bearing){var angle=bearing%360;if(angle<0){angle+=360}return angle}exports.bearingToAzimuth=bearingToAzimuth;function radiansToDegrees(radians){var degrees=radians%(2*Math.PI);return degrees*180/Math.PI}exports.radiansToDegrees=radiansToDegrees;function degreesToRadians(degrees){var radians=degrees%360;return radians*Math.PI/180}exports.degreesToRadians=degreesToRadians;function convertLength(length,originalUnit,finalUnit){if(originalUnit===void 0){originalUnit="kilometers"}if(finalUnit===void 0){finalUnit="kilometers"}if(!(length>=0)){throw new Error("length must be a positive number")}return radiansToLength(lengthToRadians(length,originalUnit),finalUnit)}exports.convertLength=convertLength;function convertArea(area,originalUnit,finalUnit){if(originalUnit===void 0){originalUnit="meters"}if(finalUnit===void 0){finalUnit="kilometers"}if(!(area>=0)){throw new Error("area must be a positive number")}var startFactor=exports.areaFactors[originalUnit];if(!startFactor){throw new Error("invalid original units")}var finalFactor=exports.areaFactors[finalUnit];if(!finalFactor){throw new Error("invalid final units")}return area/startFactor*finalFactor}exports.convertArea=convertArea;function isNumber(num){return!isNaN(num)&&num!==null&&!Array.isArray(num)&&!/^\\s*$/.test(num)}exports.isNumber=isNumber;function isObject(input){return!!input&&input.constructor===Object}exports.isObject=isObject;function validateBBox(bbox){if(!bbox){throw new Error("bbox is required")}if(!Array.isArray(bbox)){throw new Error("bbox must be an Array")}if(bbox.length!==4&&bbox.length!==6){throw new Error("bbox must be an Array of 4 or 6 numbers")}bbox.forEach(function(num){if(!isNumber(num)){throw new Error("bbox must only contain numbers")}})}exports.validateBBox=validateBBox;function validateId(id){if(!id){throw new Error("id is required")}if(["string","number"].indexOf(_typeof(id))===-1){throw new Error("id must be a number or a string")}}exports.validateId=validateId;function radians2degrees(){throw new Error("method has been renamed to `radiansToDegrees`")}exports.radians2degrees=radians2degrees;function degrees2radians(){throw new Error("method has been renamed to `degreesToRadians`")}exports.degrees2radians=degrees2radians;function distanceToDegrees(){throw new Error("method has been renamed to `lengthToDegrees`")}exports.distanceToDegrees=distanceToDegrees;function distanceToRadians(){throw new Error("method has been renamed to `lengthToRadians`")}exports.distanceToRadians=distanceToRadians;function radiansToDistance(){throw new Error("method has been renamed to `radiansToLength`")}exports.radiansToDistance=radiansToDistance;function bearingToAngle(){throw new Error("method has been renamed to `bearingToAzimuth`")}exports.bearingToAngle=bearingToAngle;function convertDistance(){throw new Error("method has been renamed to `convertLength`")}exports.convertDistance=convertDistance});unwrapExports(helpers);var helpers_1=helpers.earthRadius;var helpers_2=helpers.factors;var helpers_3=helpers.unitsFactors;var helpers_4=helpers.areaFactors;var helpers_5=helpers.feature;var helpers_6=helpers.geometry;var helpers_7=helpers.point;var helpers_8=helpers.points;var helpers_9=helpers.polygon;var helpers_10=helpers.polygons;var helpers_11=helpers.lineString;var helpers_12=helpers.lineStrings;var helpers_13=helpers.featureCollection;var helpers_14=helpers.multiLineString;var helpers_15=helpers.multiPoint;var helpers_16=helpers.multiPolygon;var helpers_17=helpers.geometryCollection;var helpers_18=helpers.round;var helpers_19=helpers.radiansToLength;var helpers_20=helpers.lengthToRadians;var helpers_21=helpers.lengthToDegrees;var helpers_22=helpers.bearingToAzimuth;var helpers_23=helpers.radiansToDegrees;var helpers_24=helpers.degreesToRadians;var helpers_25=helpers.convertLength;var helpers_26=helpers.convertArea;var helpers_27=helpers.isNumber;var helpers_28=helpers.isObject;var helpers_29=helpers.validateBBox;var helpers_30=helpers.validateId;var helpers_31=helpers.radians2degrees;var helpers_32=helpers.degrees2radians;var helpers_33=helpers.distanceToDegrees;var helpers_34=helpers.distanceToRadians;var helpers_35=helpers.radiansToDistance;var helpers_36=helpers.bearingToAngle;var helpers_37=helpers.convertDistance;var invariant=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function getCoord(coord){if(!coord){throw new Error("coord is required")}if(!Array.isArray(coord)){if(coord.type==="Feature"&&coord.geometry!==null&&coord.geometry.type==="Point"){return coord.geometry.coordinates}if(coord.type==="Point"){return coord.coordinates}}if(Array.isArray(coord)&&coord.length>=2&&!Array.isArray(coord[0])&&!Array.isArray(coord[1])){return coord}throw new Error("coord must be GeoJSON Point or an Array of numbers")}exports.getCoord=getCoord;function getCoords(coords){if(Array.isArray(coords)){return coords}if(coords.type==="Feature"){if(coords.geometry!==null){return coords.geometry.coordinates}}else{if(coords.coordinates){return coords.coordinates}}throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}exports.getCoords=getCoords;function containsNumber(coordinates){if(coordinates.length>1&&helpers.isNumber(coordinates[0])&&helpers.isNumber(coordinates[1])){return true}if(Array.isArray(coordinates[0])&&coordinates[0].length){return containsNumber(coordinates[0])}throw new Error("coordinates must only contain numbers")}exports.containsNumber=containsNumber;function geojsonType(value,type,name){if(!type||!name){throw new Error("type and name required")}if(!value||value.type!==type){throw new Error("Invalid input to "+name+": must be a "+type+", given "+value.type)}}exports.geojsonType=geojsonType;function featureOf(feature,type,name){if(!feature){throw new Error("No feature passed")}if(!name){throw new Error(".featureOf() requires a name")}if(!feature||feature.type!=="Feature"||!feature.geometry){throw new Error("Invalid input to "+name+", Feature with geometry required")}if(!feature.geometry||feature.geometry.type!==type){throw new Error("Invalid input to "+name+": must be a "+type+", given "+feature.geometry.type)}}exports.featureOf=featureOf;function collectionOf(featureCollection,type,name){if(!featureCollection){throw new Error("No featureCollection passed")}if(!name){throw new Error(".collectionOf() requires a name")}if(!featureCollection||featureCollection.type!=="FeatureCollection"){throw new Error("Invalid input to "+name+", FeatureCollection required")}for(var _i=0,_a=featureCollection.features;_i<_a.length;_i++){var feature=_a[_i];if(!feature||feature.type!=="Feature"||!feature.geometry){throw new Error("Invalid input to "+name+", Feature with geometry required")}if(!feature.geometry||feature.geometry.type!==type){throw new Error("Invalid input to "+name+": must be a "+type+", given "+feature.geometry.type)}}}exports.collectionOf=collectionOf;function getGeom(geojson){if(geojson.type==="Feature"){return geojson.geometry}return geojson}exports.getGeom=getGeom;function getType(geojson,name){if(geojson.type==="FeatureCollection"){return"FeatureCollection"}if(geojson.type==="GeometryCollection"){return"GeometryCollection"}if(geojson.type==="Feature"&&geojson.geometry!==null){return geojson.geometry.type}return geojson.type}exports.getType=getType});unwrapExports(invariant);var invariant_1=invariant.getCoord;var invariant_2=invariant.getCoords;var invariant_3=invariant.containsNumber;var invariant_4=invariant.geojsonType;var invariant_5=invariant.featureOf;var invariant_6=invariant.collectionOf;var invariant_7=invariant.getGeom;var invariant_8=invariant.getType;var bearing_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function bearing(start,end,options){if(options===void 0){options={}}if(options.final===true){return calculateFinalBearing(start,end)}var coordinates1=invariant.getCoord(start);var coordinates2=invariant.getCoord(end);var lon1=helpers.degreesToRadians(coordinates1[0]);var lon2=helpers.degreesToRadians(coordinates2[0]);var lat1=helpers.degreesToRadians(coordinates1[1]);var lat2=helpers.degreesToRadians(coordinates2[1]);var a=Math.sin(lon2-lon1)*Math.cos(lat2);var b=Math.cos(lat1)*Math.sin(lat2)-Math.sin(lat1)*Math.cos(lat2)*Math.cos(lon2-lon1);return helpers.radiansToDegrees(Math.atan2(a,b))}function calculateFinalBearing(start,end){var bear=bearing(end,start);bear=(bear+180)%360;return bear}exports.default=bearing});unwrapExports(bearing_1);var distance_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function distance(from,to,options){if(options===void 0){options={}}var coordinates1=invariant.getCoord(from);var coordinates2=invariant.getCoord(to);var dLat=helpers.degreesToRadians(coordinates2[1]-coordinates1[1]);var dLon=helpers.degreesToRadians(coordinates2[0]-coordinates1[0]);var lat1=helpers.degreesToRadians(coordinates1[1]);var lat2=helpers.degreesToRadians(coordinates2[1]);var a=Math.pow(Math.sin(dLat/2),2)+Math.pow(Math.sin(dLon/2),2)*Math.cos(lat1)*Math.cos(lat2);return helpers.radiansToLength(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),options.units)}exports.default=distance});unwrapExports(distance_1);var destination_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function destination(origin,distance,bearing,options){if(options===void 0){options={}}var coordinates1=invariant.getCoord(origin);var longitude1=helpers.degreesToRadians(coordinates1[0]);var latitude1=helpers.degreesToRadians(coordinates1[1]);var bearingRad=helpers.degreesToRadians(bearing);var radians=helpers.lengthToRadians(distance,options.units);var latitude2=Math.asin(Math.sin(latitude1)*Math.cos(radians)+Math.cos(latitude1)*Math.sin(radians)*Math.cos(bearingRad));var longitude2=longitude1+Math.atan2(Math.sin(bearingRad)*Math.sin(radians)*Math.cos(latitude1),Math.cos(radians)-Math.sin(latitude1)*Math.sin(latitude2));var lng=helpers.radiansToDegrees(longitude2);var lat=helpers.radiansToDegrees(latitude2);return helpers.point([lng,lat],options.properties)}exports.default=destination});unwrapExports(destination_1);var meta=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function coordEach(geojson,callback,excludeWrapCoord){if(geojson===null)return;var j,k,l,geometry,stopG,coords,geometryMaybeCollection,wrapShrink=0,coordIndex=0,isGeometryCollection,type=geojson.type,isFeatureCollection=type==="FeatureCollection",isFeature=type==="Feature",stop=isFeatureCollection?geojson.features.length:1;for(var featureIndex=0;featureIndex<stop;featureIndex++){geometryMaybeCollection=isFeatureCollection?geojson.features[featureIndex].geometry:isFeature?geojson.geometry:geojson;isGeometryCollection=geometryMaybeCollection?geometryMaybeCollection.type==="GeometryCollection":false;stopG=isGeometryCollection?geometryMaybeCollection.geometries.length:1;for(var geomIndex=0;geomIndex<stopG;geomIndex++){var multiFeatureIndex=0;var geometryIndex=0;geometry=isGeometryCollection?geometryMaybeCollection.geometries[geomIndex]:geometryMaybeCollection;if(geometry===null)continue;coords=geometry.coordinates;var geomType=geometry.type;wrapShrink=excludeWrapCoord&&(geomType==="Polygon"||geomType==="MultiPolygon")?1:0;switch(geomType){case null:break;case"Point":if(callback(coords,coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++;multiFeatureIndex++;break;case"LineString":case"MultiPoint":for(j=0;j<coords.length;j++){if(callback(coords[j],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++;if(geomType==="MultiPoint")multiFeatureIndex++}if(geomType==="LineString")multiFeatureIndex++;break;case"Polygon":case"MultiLineString":for(j=0;j<coords.length;j++){for(k=0;k<coords[j].length-wrapShrink;k++){if(callback(coords[j][k],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++}if(geomType==="MultiLineString")multiFeatureIndex++;if(geomType==="Polygon")geometryIndex++}if(geomType==="Polygon")multiFeatureIndex++;break;case"MultiPolygon":for(j=0;j<coords.length;j++){geometryIndex=0;for(k=0;k<coords[j].length;k++){for(l=0;l<coords[j][k].length-wrapShrink;l++){if(callback(coords[j][k][l],coordIndex,featureIndex,multiFeatureIndex,geometryIndex)===false)return false;coordIndex++}geometryIndex++}multiFeatureIndex++}break;case"GeometryCollection":for(j=0;j<geometry.geometries.length;j++){if(coordEach(geometry.geometries[j],callback,excludeWrapCoord)===false)return false}break;default:throw new Error("Unknown Geometry Type")}}}}function coordReduce(geojson,callback,initialValue,excludeWrapCoord){var previousValue=initialValue;coordEach(geojson,function(currentCoord,coordIndex,featureIndex,multiFeatureIndex,geometryIndex){if(coordIndex===0&&initialValue===undefined)previousValue=currentCoord;else previousValue=callback(previousValue,currentCoord,coordIndex,featureIndex,multiFeatureIndex,geometryIndex)},excludeWrapCoord);return previousValue}function propEach(geojson,callback){var i;switch(geojson.type){case"FeatureCollection":for(i=0;i<geojson.features.length;i++){if(callback(geojson.features[i].properties,i)===false)break}break;case"Feature":callback(geojson.properties,0);break}}function propReduce(geojson,callback,initialValue){var previousValue=initialValue;propEach(geojson,function(currentProperties,featureIndex){if(featureIndex===0&&initialValue===undefined)previousValue=currentProperties;else previousValue=callback(previousValue,currentProperties,featureIndex)});return previousValue}function featureEach(geojson,callback){if(geojson.type==="Feature"){callback(geojson,0)}else if(geojson.type==="FeatureCollection"){for(var i=0;i<geojson.features.length;i++){if(callback(geojson.features[i],i)===false)break}}}function featureReduce(geojson,callback,initialValue){var previousValue=initialValue;featureEach(geojson,function(currentFeature,featureIndex){if(featureIndex===0&&initialValue===undefined)previousValue=currentFeature;else previousValue=callback(previousValue,currentFeature,featureIndex)});return previousValue}function coordAll(geojson){var coords=[];coordEach(geojson,function(coord){coords.push(coord)});return coords}function geomEach(geojson,callback){var i,j,g,geometry,stopG,geometryMaybeCollection,isGeometryCollection,featureProperties,featureBBox,featureId,featureIndex=0,isFeatureCollection=geojson.type==="FeatureCollection",isFeature=geojson.type==="Feature",stop=isFeatureCollection?geojson.features.length:1;for(i=0;i<stop;i++){geometryMaybeCollection=isFeatureCollection?geojson.features[i].geometry:isFeature?geojson.geometry:geojson;featureProperties=isFeatureCollection?geojson.features[i].properties:isFeature?geojson.properties:{};featureBBox=isFeatureCollection?geojson.features[i].bbox:isFeature?geojson.bbox:undefined;featureId=isFeatureCollection?geojson.features[i].id:isFeature?geojson.id:undefined;isGeometryCollection=geometryMaybeCollection?geometryMaybeCollection.type==="GeometryCollection":false;stopG=isGeometryCollection?geometryMaybeCollection.geometries.length:1;for(g=0;g<stopG;g++){geometry=isGeometryCollection?geometryMaybeCollection.geometries[g]:geometryMaybeCollection;if(geometry===null){if(callback(null,featureIndex,featureProperties,featureBBox,featureId)===false)return false;continue}switch(geometry.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(callback(geometry,featureIndex,featureProperties,featureBBox,featureId)===false)return false;break}case"GeometryCollection":{for(j=0;j<geometry.geometries.length;j++){if(callback(geometry.geometries[j],featureIndex,featureProperties,featureBBox,featureId)===false)return false}break}default:throw new Error("Unknown Geometry Type")}}featureIndex++}}function geomReduce(geojson,callback,initialValue){var previousValue=initialValue;geomEach(geojson,function(currentGeometry,featureIndex,featureProperties,featureBBox,featureId){if(featureIndex===0&&initialValue===undefined)previousValue=currentGeometry;else previousValue=callback(previousValue,currentGeometry,featureIndex,featureProperties,featureBBox,featureId)});return previousValue}function flattenEach(geojson,callback){geomEach(geojson,function(geometry,featureIndex,properties,bbox,id){var type=geometry===null?null:geometry.type;switch(type){case null:case"Point":case"LineString":case"Polygon":if(callback(helpers.feature(geometry,properties,{bbox:bbox,id:id}),featureIndex,0)===false)return false;return}var geomType;switch(type){case"MultiPoint":geomType="Point";break;case"MultiLineString":geomType="LineString";break;case"MultiPolygon":geomType="Polygon";break}for(var multiFeatureIndex=0;multiFeatureIndex<geometry.coordinates.length;multiFeatureIndex++){var coordinate=geometry.coordinates[multiFeatureIndex];var geom={type:geomType,coordinates:coordinate};if(callback(helpers.feature(geom,properties),featureIndex,multiFeatureIndex)===false)return false}})}function flattenReduce(geojson,callback,initialValue){var previousValue=initialValue;flattenEach(geojson,function(currentFeature,featureIndex,multiFeatureIndex){if(featureIndex===0&&multiFeatureIndex===0&&initialValue===undefined)previousValue=currentFeature;else previousValue=callback(previousValue,currentFeature,featureIndex,multiFeatureIndex)});return previousValue}function segmentEach(geojson,callback){flattenEach(geojson,function(feature,featureIndex,multiFeatureIndex){var segmentIndex=0;if(!feature.geometry)return;var type=feature.geometry.type;if(type==="Point"||type==="MultiPoint")return;var previousCoords;var previousFeatureIndex=0;var previousMultiIndex=0;var prevGeomIndex=0;if(coordEach(feature,function(currentCoord,coordIndex,featureIndexCoord,multiPartIndexCoord,geometryIndex){if(previousCoords===undefined||featureIndex>previousFeatureIndex||multiPartIndexCoord>previousMultiIndex||geometryIndex>prevGeomIndex){previousCoords=currentCoord;previousFeatureIndex=featureIndex;previousMultiIndex=multiPartIndexCoord;prevGeomIndex=geometryIndex;segmentIndex=0;return}var currentSegment=helpers.lineString([previousCoords,currentCoord],feature.properties);if(callback(currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex)===false)return false;segmentIndex++;previousCoords=currentCoord})===false)return false})}function segmentReduce(geojson,callback,initialValue){var previousValue=initialValue;var started=false;segmentEach(geojson,function(currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex){if(started===false&&initialValue===undefined)previousValue=currentSegment;else previousValue=callback(previousValue,currentSegment,featureIndex,multiFeatureIndex,geometryIndex,segmentIndex);started=true});return previousValue}function lineEach(geojson,callback){if(!geojson)throw new Error("geojson is required");flattenEach(geojson,function(feature,featureIndex,multiFeatureIndex){if(feature.geometry===null)return;var type=feature.geometry.type;var coords=feature.geometry.coordinates;switch(type){case"LineString":if(callback(feature,featureIndex,multiFeatureIndex,0,0)===false)return false;break;case"Polygon":for(var geometryIndex=0;geometryIndex<coords.length;geometryIndex++){if(callback(helpers.lineString(coords[geometryIndex],feature.properties),featureIndex,multiFeatureIndex,geometryIndex)===false)return false}break}})}function lineReduce(geojson,callback,initialValue){var previousValue=initialValue;lineEach(geojson,function(currentLine,featureIndex,multiFeatureIndex,geometryIndex){if(featureIndex===0&&initialValue===undefined)previousValue=currentLine;else previousValue=callback(previousValue,currentLine,featureIndex,multiFeatureIndex,geometryIndex)});return previousValue}function findSegment(geojson,options){options=options||{};if(!helpers.isObject(options))throw new Error("options is invalid");var featureIndex=options.featureIndex||0;var multiFeatureIndex=options.multiFeatureIndex||0;var geometryIndex=options.geometryIndex||0;var segmentIndex=options.segmentIndex||0;var properties=options.properties;var geometry;switch(geojson.type){case"FeatureCollection":if(featureIndex<0)featureIndex=geojson.features.length+featureIndex;properties=properties||geojson.features[featureIndex].properties;geometry=geojson.features[featureIndex].geometry;break;case"Feature":properties=properties||geojson.properties;geometry=geojson.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":geometry=geojson;break;default:throw new Error("geojson is invalid")}if(geometry===null)return null;var coords=geometry.coordinates;switch(geometry.type){case"Point":case"MultiPoint":return null;case"LineString":if(segmentIndex<0)segmentIndex=coords.length+segmentIndex-1;return helpers.lineString([coords[segmentIndex],coords[segmentIndex+1]],properties,options);case"Polygon":if(geometryIndex<0)geometryIndex=coords.length+geometryIndex;if(segmentIndex<0)segmentIndex=coords[geometryIndex].length+segmentIndex-1;return helpers.lineString([coords[geometryIndex][segmentIndex],coords[geometryIndex][segmentIndex+1]],properties,options);case"MultiLineString":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(segmentIndex<0)segmentIndex=coords[multiFeatureIndex].length+segmentIndex-1;return helpers.lineString([coords[multiFeatureIndex][segmentIndex],coords[multiFeatureIndex][segmentIndex+1]],properties,options);case"MultiPolygon":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(geometryIndex<0)geometryIndex=coords[multiFeatureIndex].length+geometryIndex;if(segmentIndex<0)segmentIndex=coords[multiFeatureIndex][geometryIndex].length-segmentIndex-1;return helpers.lineString([coords[multiFeatureIndex][geometryIndex][segmentIndex],coords[multiFeatureIndex][geometryIndex][segmentIndex+1]],properties,options)}throw new Error("geojson is invalid")}function findPoint(geojson,options){options=options||{};if(!helpers.isObject(options))throw new Error("options is invalid");var featureIndex=options.featureIndex||0;var multiFeatureIndex=options.multiFeatureIndex||0;var geometryIndex=options.geometryIndex||0;var coordIndex=options.coordIndex||0;var properties=options.properties;var geometry;switch(geojson.type){case"FeatureCollection":if(featureIndex<0)featureIndex=geojson.features.length+featureIndex;properties=properties||geojson.features[featureIndex].properties;geometry=geojson.features[featureIndex].geometry;break;case"Feature":properties=properties||geojson.properties;geometry=geojson.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":geometry=geojson;break;default:throw new Error("geojson is invalid")}if(geometry===null)return null;var coords=geometry.coordinates;switch(geometry.type){case"Point":return helpers.point(coords,properties,options);case"MultiPoint":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;return helpers.point(coords[multiFeatureIndex],properties,options);case"LineString":if(coordIndex<0)coordIndex=coords.length+coordIndex;return helpers.point(coords[coordIndex],properties,options);case"Polygon":if(geometryIndex<0)geometryIndex=coords.length+geometryIndex;if(coordIndex<0)coordIndex=coords[geometryIndex].length+coordIndex;return helpers.point(coords[geometryIndex][coordIndex],properties,options);case"MultiLineString":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(coordIndex<0)coordIndex=coords[multiFeatureIndex].length+coordIndex;return helpers.point(coords[multiFeatureIndex][coordIndex],properties,options);case"MultiPolygon":if(multiFeatureIndex<0)multiFeatureIndex=coords.length+multiFeatureIndex;if(geometryIndex<0)geometryIndex=coords[multiFeatureIndex].length+geometryIndex;if(coordIndex<0)coordIndex=coords[multiFeatureIndex][geometryIndex].length-coordIndex;return helpers.point(coords[multiFeatureIndex][geometryIndex][coordIndex],properties,options)}throw new Error("geojson is invalid")}exports.coordEach=coordEach;exports.coordReduce=coordReduce;exports.propEach=propEach;exports.propReduce=propReduce;exports.featureEach=featureEach;exports.featureReduce=featureReduce;exports.coordAll=coordAll;exports.geomEach=geomEach;exports.geomReduce=geomReduce;exports.flattenEach=flattenEach;exports.flattenReduce=flattenReduce;exports.segmentEach=segmentEach;exports.segmentReduce=segmentReduce;exports.lineEach=lineEach;exports.lineReduce=lineReduce;exports.findSegment=findSegment;exports.findPoint=findPoint});unwrapExports(meta);var meta_1=meta.coordEach;var meta_2=meta.coordReduce;var meta_3=meta.propEach;var meta_4=meta.propReduce;var meta_5=meta.featureEach;var meta_6=meta.featureReduce;var meta_7=meta.coordAll;var meta_8=meta.geomEach;var meta_9=meta.geomReduce;var meta_10=meta.flattenEach;var meta_11=meta.flattenReduce;var meta_12=meta.segmentEach;var meta_13=meta.segmentReduce;var meta_14=meta.lineEach;var meta_15=meta.lineReduce;var meta_16=meta.findSegment;var meta_17=meta.findPoint;var lineSegment_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function lineSegment(geojson){if(!geojson){throw new Error("geojson is required")}var results=[];meta.flattenEach(geojson,function(feature){lineSegmentFeature(feature,results)});return helpers.featureCollection(results)}function lineSegmentFeature(geojson,results){var coords=[];var geometry=geojson.geometry;if(geometry!==null){switch(geometry.type){case"Polygon":coords=invariant.getCoords(geometry);break;case"LineString":coords=[invariant.getCoords(geometry)]}coords.forEach(function(coord){var segments=createSegments(coord,geojson.properties);segments.forEach(function(segment){segment.id=results.length;results.push(segment)})})}}function createSegments(coords,properties){var segments=[];coords.reduce(function(previousCoords,currentCoords){var segment=helpers.lineString([previousCoords,currentCoords],properties);segment.bbox=bbox(previousCoords,currentCoords);segments.push(segment);return currentCoords});return segments}function bbox(coords1,coords2){var x1=coords1[0];var y1=coords1[1];var x2=coords2[0];var y2=coords2[1];var west=x1<x2?x1:x2;var south=y1<y2?y1:y2;var east=x1>x2?x1:x2;var north=y1>y2?y1:y2;return[west,south,east,north]}exports.default=lineSegment});unwrapExports(lineSegment_1);var quickselect=createCommonjsModule(function(module,exports){(function(global,factory){module.exports=factory()})(commonjsGlobal,function(){function quickselect(arr,k,left,right,compare){quickselectStep(arr,k,left||0,right||arr.length-1,compare||defaultCompare)}function quickselectStep(arr,k,left,right,compare){while(right>left){if(right-left>600){var n=right-left+1;var m=k-left+1;var z=Math.log(n);var s=.5*Math.exp(2*z/3);var sd=.5*Math.sqrt(z*s*(n-s)/n)*(m-n/2<0?-1:1);var newLeft=Math.max(left,Math.floor(k-m*s/n+sd));var newRight=Math.min(right,Math.floor(k+(n-m)*s/n+sd));quickselectStep(arr,k,newLeft,newRight,compare)}var t=arr[k];var i=left;var j=right;swap(arr,left,k);if(compare(arr[right],t)>0)swap(arr,left,right);while(i<j){swap(arr,i,j);i++;j--;while(compare(arr[i],t)<0){i++}while(compare(arr[j],t)>0){j--}}if(compare(arr[left],t)===0)swap(arr,left,j);else{j++;swap(arr,j,right)}if(j<=k)left=j+1;if(k<=j)right=j-1}}function swap(arr,i,j){var tmp=arr[i];arr[i]=arr[j];arr[j]=tmp}function defaultCompare(a,b){return a<b?-1:a>b?1:0}return quickselect})});var _rbush_2_0_2_rbush=rbush;var default_1=rbush;function rbush(maxEntries,format){if(!(this instanceof rbush))return new rbush(maxEntries,format);this._maxEntries=Math.max(4,maxEntries||9);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4));if(format){this._initFormat(format)}this.clear()}rbush.prototype={all:function all(){return this._all(this.data,[])},search:function search(bbox){var node=this.data,result=[],toBBox=this.toBBox;if(!intersects(bbox,node))return result;var nodesToSearch=[],i,len,child,childBBox;while(node){for(i=0,len=node.children.length;i<len;i++){child=node.children[i];childBBox=node.leaf?toBBox(child):child;if(intersects(bbox,childBBox)){if(node.leaf)result.push(child);else if(contains(bbox,childBBox))this._all(child,result);else nodesToSearch.push(child)}}node=nodesToSearch.pop()}return result},collides:function collides(bbox){var node=this.data,toBBox=this.toBBox;if(!intersects(bbox,node))return false;var nodesToSearch=[],i,len,child,childBBox;while(node){for(i=0,len=node.children.length;i<len;i++){child=node.children[i];childBBox=node.leaf?toBBox(child):child;if(intersects(bbox,childBBox)){if(node.leaf||contains(bbox,childBBox))return true;nodesToSearch.push(child)}}node=nodesToSearch.pop()}return false},load:function load(data){if(!(data&&data.length))return this;if(data.length<this._minEntries){for(var i=0,len=data.length;i<len;i++){this.insert(data[i])}return this}var node=this._build(data.slice(),0,data.length-1,0);if(!this.data.children.length){this.data=node}else if(this.data.height===node.height){this._splitRoot(this.data,node)}else{if(this.data.height<node.height){var tmpNode=this.data;this.data=node;node=tmpNode}this._insert(node,this.data.height-node.height-1,true)}return this},insert:function insert(item){if(item)this._insert(item,this.data.height-1);return this},clear:function clear(){this.data=createNode([]);return this},remove:function remove(item,equalsFn){if(!item)return this;var node=this.data,bbox=this.toBBox(item),path=[],indexes=[],i,parent,index,goingUp;while(node||path.length){if(!node){node=path.pop();parent=path[path.length-1];i=indexes.pop();goingUp=true}if(node.leaf){index=findItem(item,node.children,equalsFn);if(index!==-1){node.children.splice(index,1);path.push(node);this._condense(path);return this}}if(!goingUp&&!node.leaf&&contains(node,bbox)){path.push(node);indexes.push(i);i=0;parent=node;node=node.children[0]}else if(parent){i++;node=parent.children[i];goingUp=false}else node=null}return this},toBBox:function toBBox(item){return item},compareMinX:compareNodeMinX,compareMinY:compareNodeMinY,toJSON:function toJSON(){return this.data},fromJSON:function fromJSON(data){this.data=data;return this},_all:function _all(node,result){var nodesToSearch=[];while(node){if(node.leaf)result.push.apply(result,node.children);else nodesToSearch.push.apply(nodesToSearch,node.children);node=nodesToSearch.pop()}return result},_build:function _build(items,left,right,height){var N=right-left+1,M=this._maxEntries,node;if(N<=M){node=createNode(items.slice(left,right+1));calcBBox(node,this.toBBox);return node}if(!height){height=Math.ceil(Math.log(N)/Math.log(M));M=Math.ceil(N/Math.pow(M,height-1))}node=createNode([]);node.leaf=false;node.height=height;var N2=Math.ceil(N/M),N1=N2*Math.ceil(Math.sqrt(M)),i,j,right2,right3;multiSelect(items,left,right,N1,this.compareMinX);for(i=left;i<=right;i+=N1){right2=Math.min(i+N1-1,right);multiSelect(items,i,right2,N2,this.compareMinY);for(j=i;j<=right2;j+=N2){right3=Math.min(j+N2-1,right2);node.children.push(this._build(items,j,right3,height-1))}}calcBBox(node,this.toBBox);return node},_chooseSubtree:function _chooseSubtree(bbox,node,level,path){var i,len,child,targetNode,area,enlargement,minArea,minEnlargement;while(true){path.push(node);if(node.leaf||path.length-1===level)break;minArea=minEnlargement=Infinity;for(i=0,len=node.children.length;i<len;i++){child=node.children[i];area=bboxArea(child);enlargement=enlargedArea(bbox,child)-area;if(enlargement<minEnlargement){minEnlargement=enlargement;minArea=area<minArea?area:minArea;targetNode=child}else if(enlargement===minEnlargement){if(area<minArea){minArea=area;targetNode=child}}}node=targetNode||node.children[0]}return node},_insert:function _insert(item,level,isNode){var toBBox=this.toBBox,bbox=isNode?item:toBBox(item),insertPath=[];var node=this._chooseSubtree(bbox,this.data,level,insertPath);node.children.push(item);extend(node,bbox);while(level>=0){if(insertPath[level].children.length>this._maxEntries){this._split(insertPath,level);level--}else break}this._adjustParentBBoxes(bbox,insertPath,level)},_split:function _split(insertPath,level){var node=insertPath[level],M=node.children.length,m=this._minEntries;this._chooseSplitAxis(node,m,M);var splitIndex=this._chooseSplitIndex(node,m,M);var newNode=createNode(node.children.splice(splitIndex,node.children.length-splitIndex));newNode.height=node.height;newNode.leaf=node.leaf;calcBBox(node,this.toBBox);calcBBox(newNode,this.toBBox);if(level)insertPath[level-1].children.push(newNode);else this._splitRoot(node,newNode)},_splitRoot:function _splitRoot(node,newNode){this.data=createNode([node,newNode]);this.data.height=node.height+1;this.data.leaf=false;calcBBox(this.data,this.toBBox)},_chooseSplitIndex:function _chooseSplitIndex(node,m,M){var i,bbox1,bbox2,overlap,area,minOverlap,minArea,index;minOverlap=minArea=Infinity;for(i=m;i<=M-m;i++){bbox1=distBBox(node,0,i,this.toBBox);bbox2=distBBox(node,i,M,this.toBBox);overlap=intersectionArea(bbox1,bbox2);area=bboxArea(bbox1)+bboxArea(bbox2);if(overlap<minOverlap){minOverlap=overlap;index=i;minArea=area<minArea?area:minArea}else if(overlap===minOverlap){if(area<minArea){minArea=area;index=i}}}return index},_chooseSplitAxis:function _chooseSplitAxis(node,m,M){var compareMinX=node.leaf?this.compareMinX:compareNodeMinX,compareMinY=node.leaf?this.compareMinY:compareNodeMinY,xMargin=this._allDistMargin(node,m,M,compareMinX),yMargin=this._allDistMargin(node,m,M,compareMinY);if(xMargin<yMargin)node.children.sort(compareMinX)},_allDistMargin:function _allDistMargin(node,m,M,compare){node.children.sort(compare);var toBBox=this.toBBox,leftBBox=distBBox(node,0,m,toBBox),rightBBox=distBBox(node,M-m,M,toBBox),margin=bboxMargin(leftBBox)+bboxMargin(rightBBox),i,child;for(i=m;i<M-m;i++){child=node.children[i];extend(leftBBox,node.leaf?toBBox(child):child);margin+=bboxMargin(leftBBox)}for(i=M-m-1;i>=m;i--){child=node.children[i];extend(rightBBox,node.leaf?toBBox(child):child);margin+=bboxMargin(rightBBox)}return margin},_adjustParentBBoxes:function _adjustParentBBoxes(bbox,path,level){for(var i=level;i>=0;i--){extend(path[i],bbox)}},_condense:function _condense(path){for(var i=path.length-1,siblings;i>=0;i--){if(path[i].children.length===0){if(i>0){siblings=path[i-1].children;siblings.splice(siblings.indexOf(path[i]),1)}else this.clear()}else calcBBox(path[i],this.toBBox)}},_initFormat:function _initFormat(format){var compareArr=["return a"," - b",";"];this.compareMinX=new Function("a","b",compareArr.join(format[0]));this.compareMinY=new Function("a","b",compareArr.join(format[1]));this.toBBox=new Function("a","return {minX: a"+format[0]+", minY: a"+format[1]+", maxX: a"+format[2]+", maxY: a"+format[3]+"};")}};function findItem(item,items,equalsFn){if(!equalsFn)return items.indexOf(item);for(var i=0;i<items.length;i++){if(equalsFn(item,items[i]))return i}return-1}function calcBBox(node,toBBox){distBBox(node,0,node.children.length,toBBox,node)}function distBBox(node,k,p,toBBox,destNode){if(!destNode)destNode=createNode(null);destNode.minX=Infinity;destNode.minY=Infinity;destNode.maxX=-Infinity;destNode.maxY=-Infinity;for(var i=k,child;i<p;i++){child=node.children[i];extend(destNode,node.leaf?toBBox(child):child)}return destNode}function extend(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,b.maxY);return a}function compareNodeMinX(a,b){return a.minX-b.minX}function compareNodeMinY(a,b){return a.minY-b.minY}function bboxArea(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function bboxMargin(a){return a.maxX-a.minX+(a.maxY-a.minY)}function enlargedArea(a,b){return(Math.max(b.maxX,a.maxX)-Math.min(b.minX,a.minX))*(Math.max(b.maxY,a.maxY)-Math.min(b.minY,a.minY))}function intersectionArea(a,b){var minX=Math.max(a.minX,b.minX),minY=Math.max(a.minY,b.minY),maxX=Math.min(a.maxX,b.maxX),maxY=Math.min(a.maxY,b.maxY);return Math.max(0,maxX-minX)*Math.max(0,maxY-minY)}function contains(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function intersects(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function createNode(children){return{children:children,height:1,leaf:true,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function multiSelect(arr,left,right,n,compare){var stack=[left,right],mid;while(stack.length){right=stack.pop();left=stack.pop();if(right-left<=n)continue;mid=left+Math.ceil((right-left)/n/2)*n;quickselect(arr,mid,left,right,compare);stack.push(left,mid,mid,right)}}_rbush_2_0_2_rbush.default=default_1;var bbox_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function bbox(geojson){var result=[Infinity,Infinity,-Infinity,-Infinity];meta.coordEach(geojson,function(coord){if(result[0]>coord[0]){result[0]=coord[0]}if(result[1]>coord[1]){result[1]=coord[1]}if(result[2]<coord[0]){result[2]=coord[0]}if(result[3]<coord[1]){result[3]=coord[1]}});return result}exports.default=bbox});unwrapExports(bbox_1);var turfBBox=bbox_1.default;var featureEach=meta.featureEach;var coordEach=meta.coordEach;var polygon=helpers.polygon;var featureCollection=helpers.featureCollection;function geojsonRbush(maxEntries){var tree=_rbush_2_0_2_rbush(maxEntries);tree.insert=function(feature){if(feature.type!=="Feature")throw new Error("invalid feature");feature.bbox=feature.bbox?feature.bbox:turfBBox(feature);return _rbush_2_0_2_rbush.prototype.insert.call(this,feature)};tree.load=function(features){var load=[];if(Array.isArray(features)){features.forEach(function(feature){if(feature.type!=="Feature")throw new Error("invalid features");feature.bbox=feature.bbox?feature.bbox:turfBBox(feature);load.push(feature)})}else{featureEach(features,function(feature){if(feature.type!=="Feature")throw new Error("invalid features");feature.bbox=feature.bbox?feature.bbox:turfBBox(feature);load.push(feature)})}return _rbush_2_0_2_rbush.prototype.load.call(this,load)};tree.remove=function(feature,equals){if(feature.type!=="Feature")throw new Error("invalid feature");feature.bbox=feature.bbox?feature.bbox:turfBBox(feature);return _rbush_2_0_2_rbush.prototype.remove.call(this,feature,equals)};tree.clear=function(){return _rbush_2_0_2_rbush.prototype.clear.call(this)};tree.search=function(geojson){var features=_rbush_2_0_2_rbush.prototype.search.call(this,this.toBBox(geojson));return featureCollection(features)};tree.collides=function(geojson){return _rbush_2_0_2_rbush.prototype.collides.call(this,this.toBBox(geojson))};tree.all=function(){var features=_rbush_2_0_2_rbush.prototype.all.call(this);return featureCollection(features)};tree.toJSON=function(){return _rbush_2_0_2_rbush.prototype.toJSON.call(this)};tree.fromJSON=function(json){return _rbush_2_0_2_rbush.prototype.fromJSON.call(this,json)};tree.toBBox=function(geojson){var bbox;if(geojson.bbox)bbox=geojson.bbox;else if(Array.isArray(geojson)&&geojson.length===4)bbox=geojson;else if(Array.isArray(geojson)&&geojson.length===6)bbox=[geojson[0],geojson[1],geojson[3],geojson[4]];else if(geojson.type==="Feature")bbox=turfBBox(geojson);else if(geojson.type==="FeatureCollection")bbox=turfBBox(geojson);else throw new Error("invalid geojson");return{minX:bbox[0],minY:bbox[1],maxX:bbox[2],maxY:bbox[3]}};return tree}var _geojsonRbush_3_1_2_geojsonRbush=geojsonRbush;var default_1$1=geojsonRbush;_geojsonRbush_3_1_2_geojsonRbush.default=default_1$1;var lineIntersect_1=createCommonjsModule(function(module,exports){var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});var line_segment_1=__importDefault(lineSegment_1);var geojson_rbush_1=__importDefault(_geojsonRbush_3_1_2_geojsonRbush);function lineIntersect(line1,line2){var unique={};var results=[];if(line1.type==="LineString"){line1=helpers.feature(line1)}if(line2.type==="LineString"){line2=helpers.feature(line2)}if(line1.type==="Feature"&&line2.type==="Feature"&&line1.geometry!==null&&line2.geometry!==null&&line1.geometry.type==="LineString"&&line2.geometry.type==="LineString"&&line1.geometry.coordinates.length===2&&line2.geometry.coordinates.length===2){var intersect=intersects(line1,line2);if(intersect){results.push(intersect)}return helpers.featureCollection(results)}var tree=geojson_rbush_1.default();tree.load(line_segment_1.default(line2));meta.featureEach(line_segment_1.default(line1),function(segment){meta.featureEach(tree.search(segment),function(match){var intersect=intersects(segment,match);if(intersect){var key=invariant.getCoords(intersect).join(",");if(!unique[key]){unique[key]=true;results.push(intersect)}}})});return helpers.featureCollection(results)}function intersects(line1,line2){var coords1=invariant.getCoords(line1);var coords2=invariant.getCoords(line2);if(coords1.length!==2){throw new Error("<intersects> line1 must only contain 2 coordinates")}if(coords2.length!==2){throw new Error("<intersects> line2 must only contain 2 coordinates")}var x1=coords1[0][0];var y1=coords1[0][1];var x2=coords1[1][0];var y2=coords1[1][1];var x3=coords2[0][0];var y3=coords2[0][1];var x4=coords2[1][0];var y4=coords2[1][1];var denom=(y4-y3)*(x2-x1)-(x4-x3)*(y2-y1);var numeA=(x4-x3)*(y1-y3)-(y4-y3)*(x1-x3);var numeB=(x2-x1)*(y1-y3)-(y2-y1)*(x1-x3);if(denom===0){if(numeA===0&&numeB===0){return null}return null}var uA=numeA/denom;var uB=numeB/denom;if(uA>=0&&uA<=1&&uB>=0&&uB<=1){var x=x1+uA*(x2-x1);var y=y1+uA*(y2-y1);return helpers.point([x,y])}return null}exports.default=lineIntersect});unwrapExports(lineIntersect_1);var nearestPointOnLine_1=createCommonjsModule(function(module,exports){Object.defineProperty(exports,"__esModule",{value:true});function nearestPointOnLine(lines,pt,options){if(options===void 0){options={}}var closestPt=helpers.point([Infinity,Infinity],{dist:Infinity});var length=0;meta.flattenEach(lines,function(line){var coords=invariant.getCoords(line);for(var i=0;i<coords.length-1;i++){var start=helpers.point(coords[i]);start.properties.dist=distance_1.default(pt,start,options);var stop_1=helpers.point(coords[i+1]);stop_1.properties.dist=distance_1.default(pt,stop_1,options);var sectionLength=distance_1.default(start,stop_1,options);var heightDistance=Math.max(start.properties.dist,stop_1.properties.dist);var direction=bearing_1.default(start,stop_1);var perpendicularPt1=destination_1.default(pt,heightDistance,direction+90,options);var perpendicularPt2=destination_1.default(pt,heightDistance,direction-90,options);var intersect=lineIntersect_1.default(helpers.lineString([perpendicularPt1.geometry.coordinates,perpendicularPt2.geometry.coordinates]),helpers.lineString([start.geometry.coordinates,stop_1.geometry.coordinates]));var intersectPt=null;if(intersect.features.length>0){intersectPt=intersect.features[0];intersectPt.properties.dist=distance_1.default(pt,intersectPt,options);intersectPt.properties.location=length+distance_1.default(start,intersectPt,options)}if(start.properties.dist<closestPt.properties.dist){closestPt=start;closestPt.properties.index=i;closestPt.properties.location=length}if(stop_1.properties.dist<closestPt.properties.dist){closestPt=stop_1;closestPt.properties.index=i+1;closestPt.properties.location=length+sectionLength}if(intersectPt&&intersectPt.properties.dist<closestPt.properties.dist){closestPt=intersectPt;closestPt.properties.index=i}length+=sectionLength}});return closestPt}exports.default=nearestPointOnLine});var nearestPointOnLine=unwrapExports(nearestPointOnLine_1);var freeGlobal=(typeof global==="undefined"?"undefined":_typeof(global))=="object"&&global&&global.Object===Object&&global;var freeSelf=(typeof self==="undefined"?"undefined":_typeof(self))=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var _Symbol=root.Symbol;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=_Symbol?_Symbol.toStringTag:undefined;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}var objectProto$1=Object.prototype;var nativeObjectToString$1=objectProto$1.toString;function objectToString(value){return nativeObjectToString$1.call(value)}var nullTag="[object Null]",undefinedTag="[object Undefined]";var symToStringTag$1=_Symbol?_Symbol.toStringTag:undefined;function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag$1&&symToStringTag$1 in Object(value)?getRawTag(value):objectToString(value)}function isObjectLike(value){return value!=null&&_typeof(value)=="object"}var symbolTag="[object Symbol]";function isSymbol(value){return _typeof(value)=="symbol"||isObjectLike(value)&&baseGetTag(value)==symbolTag}function arrayMap(array,iteratee){var index=-1,length=array==null?0:array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}var isArray=Array.isArray;var INFINITY=1/0;var symbolProto=_Symbol?_Symbol.prototype:undefined,symbolToString=symbolProto?symbolProto.toString:undefined;function baseToString(value){if(typeof value=="string"){return value}if(isArray(value)){return arrayMap(value,baseToString)+""}if(isSymbol(value)){return symbolToString?symbolToString.call(value):""}var result=value+"";return result=="0"&&1/value==-INFINITY?"-0":result}function isObject(value){var type=_typeof(value);return value!=null&&(type=="object"||type=="function")}function identity(value){return value}var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}var coreJsData=root["__core-js_shared__"];var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}var funcProto=Function.prototype;var funcToString=funcProto.toString;function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}var reRegExpChar=/[\\\\^$.*+?()[\\]{}|]/g;var reIsHostCtor=/^\\[object .+?Constructor\\]$/;var funcProto$1=Function.prototype,objectProto$2=Object.prototype;var funcToString$1=funcProto$1.toString;var hasOwnProperty$1=objectProto$2.hasOwnProperty;var reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,"\\\\$&").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,"$1.*?")+"$");function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function getValue(object,key){return object==null?undefined:object[key]}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}var WeakMap=getNative(root,"WeakMap");function arrayEach(array,iteratee){var index=-1,length=array==null?0:array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}var MAX_SAFE_INTEGER=9007199254740991;var reIsUint=/^(?:0|[1-9]\\d*)$/;function isIndex(value,length){var type=_typeof(value);length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=="number"||type!="symbol"&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function eq(value,other){return value===other||value!==value&&other!==other}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER$1}function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}var objectProto$3=Object.prototype;function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto$3;return value===proto}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}var argsTag="[object Arguments]";function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}var objectProto$4=Object.prototype;var hasOwnProperty$2=objectProto$4.hasOwnProperty;var propertyIsEnumerable=objectProto$4.propertyIsEnumerable;var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty$2.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};function stubFalse(){return false}var freeExports=(typeof exports==="undefined"?"undefined":_typeof(exports))=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&(typeof module==="undefined"?"undefined":_typeof(module))=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var Buffer=moduleExports?root.Buffer:undefined;var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined;var isBuffer=nativeIsBuffer||stubFalse;var argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseUnary(func){return function(value){return func(value)}}var freeExports$1=(typeof exports==="undefined"?"undefined":_typeof(exports))=="object"&&exports&&!exports.nodeType&&exports;var freeModule$1=freeExports$1&&(typeof module==="undefined"?"undefined":_typeof(module))=="object"&&module&&!module.nodeType&&module;var moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1;var freeProcess=moduleExports$1&&freeGlobal.process;var nodeUtil=function(){try{var types=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;if(types){return types}return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;var objectProto$5=Object.prototype;var hasOwnProperty$3=objectProto$5.hasOwnProperty;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty$3.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}function overArg(func,transform){return function(arg){return func(transform(arg))}}var nativeKeys=overArg(Object.keys,Object);var objectProto$6=Object.prototype;var hasOwnProperty$4=objectProto$6.hasOwnProperty;function baseKeys(object){if(!isPrototype(object)){return nativeKeys(object)}var result=[];for(var key in Object(object)){if(hasOwnProperty$4.call(object,key)&&key!="constructor"){result.push(key)}}return result}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):baseKeys(object)}var reIsDeepProp=/\\.|\\[(?:[^[\\]]*|(["\'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,reIsPlainProp=/^\\w*$/;function isKey(value,object){if(isArray(value)){return false}var type=_typeof(value);if(type=="number"||type=="symbol"||type=="boolean"||value==null||isSymbol(value)){return true}return reIsPlainProp.test(value)||!reIsDeepProp.test(value)||object!=null&&value in Object(object)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}var HASH_UNDEFINED="__lodash_hash_undefined__";var objectProto$7=Object.prototype;var hasOwnProperty$5=objectProto$7.hasOwnProperty;function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty$5.call(data,key)?data[key]:undefined}var objectProto$8=Object.prototype;var hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty$6.call(data,key)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED$1:value;return this}function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[];this.size=0}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}var arrayProto=Array.prototype;var splice=arrayProto.splice;function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map=getNative(root,"Map");function mapCacheClear(){this.size=0;this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function isKeyable(value){var type=_typeof(value);return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(func,resolver){if(typeof func!="function"||resolver!=null&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function memoized(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result)||cache;return result};memoized.cache=new(memoize.Cache||MapCache);return memoized}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(func){var result=memoize(func,function(key){if(cache.size===MAX_MEMOIZE_SIZE){cache.clear()}return key});var cache=result.cache;return result}var rePropName=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|(["\'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;var reEscapeChar=/\\\\(\\\\)?/g;var stringToPath=memoizeCapped(function(string){var result=[];if(string.charCodeAt(0)===46){result.push("")}string.replace(rePropName,function(match,number,quote,subString){result.push(quote?subString.replace(reEscapeChar,"$1"):number||match)});return result});function toString(value){return value==null?"":baseToString(value)}function castPath(value,object){if(isArray(value)){return value}return isKey(value,object)?[value]:stringToPath(toString(value))}var INFINITY$1=1/0;function toKey(value){if(typeof value=="string"||isSymbol(value)){return value}var result=value+"";return result=="0"&&1/value==-INFINITY$1?"-0":result}function baseGet(object,path){path=castPath(path,object);var index=0,length=path.length;while(object!=null&&index<length){object=object[toKey(path[index++])]}return index&&index==length?object:undefined}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,path);return result===undefined?defaultValue:result}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}function stackClear(){this.__data__=new ListCache;this.size=0}function stackDelete(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}var LARGE_ARRAY_SIZE=200;function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayFilter(array,predicate){var index=-1,length=array==null?0:array.length,resIndex=0,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[resIndex++]=value}}return result}function stubArray(){return[]}var objectProto$9=Object.prototype;var propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable;var nativeGetSymbols=Object.getOwnPropertySymbols;var getSymbols=!nativeGetSymbols?stubArray:function(object){if(object==null){return[]}object=Object(object);return arrayFilter(nativeGetSymbols(object),function(symbol){return propertyIsEnumerable$1.call(object,symbol)})};function baseGetAllKeys(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:arrayPush(result,symbolsFunc(object))}function getAllKeys(object){return baseGetAllKeys(object,keys,getSymbols)}var DataView=getNative(root,"DataView");var Promise=getNative(root,"Promise");var Set=getNative(root,"Set");var mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag$1="[object WeakMap]";var dataViewTag$1="[object DataView]";var dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap);var getTag=baseGetTag;if(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag$1||Map&&getTag(new Map)!=mapTag$1||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$1||WeakMap&&getTag(new WeakMap)!=weakMapTag$1){getTag=function getTag(value){var result=baseGetTag(value),Ctor=result==objectTag$1?value.constructor:undefined,ctorString=Ctor?toSource(Ctor):"";if(ctorString){switch(ctorString){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag$1}}return result}}var getTag$1=getTag;var Uint8Array=root.Uint8Array;var HASH_UNDEFINED$2="__lodash_hash_undefined__";function setCacheAdd(value){this.__data__.set(value,HASH_UNDEFINED$2);return this}function setCacheHas(value){return this.__data__.has(value)}function SetCache(values){var index=-1,length=values==null?0:values.length;this.__data__=new MapCache;while(++index<length){this.add(values[index])}}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(array,predicate){var index=-1,length=array==null?0:array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}function cacheHas(cache,key){return cache.has(key)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function equalArrays(array,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isPartial&&othLength>arrLength)){return false}var stacked=stack.get(array);if(stacked&&stack.get(other)){return stacked==other}var index=-1,result=true,seen=bitmask&COMPARE_UNORDERED_FLAG?new SetCache:undefined;stack.set(array,other);stack.set(other,array);while(++index<arrLength){var arrValue=array[index],othValue=other[index];if(customizer){var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)}if(compared!==undefined){if(compared){continue}result=false;break}if(seen){if(!arraySome(other,function(othValue,othIndex){if(!cacheHas(seen,othIndex)&&(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){return seen.push(othIndex)}})){result=false;break}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,bitmask,customizer,stack))){result=false;break}}stack["delete"](array);stack["delete"](other);return result}function mapToArray(map){var index=-1,result=Array(map.size);map.forEach(function(value,key){result[++index]=[key,value]});return result}function setToArray(set){var index=-1,result=Array(set.size);set.forEach(function(value){result[++index]=value});return result}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;var boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]";var arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]";var symbolProto$1=_Symbol?_Symbol.prototype:undefined,symbolValueOf=symbolProto$1?symbolProto$1.valueOf:undefined;function equalByTag(object,other,tag,bitmask,customizer,equalFunc,stack){switch(tag){case dataViewTag$2:if(object.byteLength!=other.byteLength||object.byteOffset!=other.byteOffset){return false}object=object.buffer;other=other.buffer;case arrayBufferTag$1:if(object.byteLength!=other.byteLength||!equalFunc(new Uint8Array(object),new Uint8Array(other))){return false}return true;case boolTag$1:case dateTag$1:case numberTag$1:return eq(+object,+other);case errorTag$1:return object.name==other.name&&object.message==other.message;case regexpTag$1:case stringTag$1:return object==other+"";case mapTag$2:var convert=mapToArray;case setTag$2:var isPartial=bitmask&COMPARE_PARTIAL_FLAG$1;convert||(convert=setToArray);if(object.size!=other.size&&!isPartial){return false}var stacked=stack.get(object);if(stacked){return stacked==other}bitmask|=COMPARE_UNORDERED_FLAG$1;stack.set(object,other);var result=equalArrays(convert(object),convert(other),bitmask,customizer,equalFunc,stack);stack["delete"](object);return result;case symbolTag$1:if(symbolValueOf){return symbolValueOf.call(object)==symbolValueOf.call(other)}}return false}var COMPARE_PARTIAL_FLAG$2=1;var objectProto$a=Object.prototype;var hasOwnProperty$7=objectProto$a.hasOwnProperty;function equalObjects(object,other,bitmask,customizer,equalFunc,stack){var isPartial=bitmask&COMPARE_PARTIAL_FLAG$2,objProps=getAllKeys(object),objLength=objProps.length,othProps=getAllKeys(other),othLength=othProps.length;if(objLength!=othLength&&!isPartial){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isPartial?key in other:hasOwnProperty$7.call(other,key))){return false}}var stacked=stack.get(object);if(stacked&&stack.get(other)){return stacked==other}var result=true;stack.set(object,other);stack.set(other,object);var skipCtor=isPartial;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key];if(customizer){var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)}if(!(compared===undefined?objValue===othValue||equalFunc(objValue,othValue,bitmask,customizer,stack):compared)){result=false;break}skipCtor||(skipCtor=key=="constructor")}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){result=false}}stack["delete"](object);stack["delete"](other);return result}var COMPARE_PARTIAL_FLAG$3=1;var argsTag$2="[object Arguments]",arrayTag$1="[object Array]",objectTag$2="[object Object]";var objectProto$b=Object.prototype;var hasOwnProperty$8=objectProto$b.hasOwnProperty;function baseIsEqualDeep(object,other,bitmask,customizer,equalFunc,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=objIsArr?arrayTag$1:getTag$1(object),othTag=othIsArr?arrayTag$1:getTag$1(other);objTag=objTag==argsTag$2?objectTag$2:objTag;othTag=othTag==argsTag$2?objectTag$2:othTag;var objIsObj=objTag==objectTag$2,othIsObj=othTag==objectTag$2,isSameTag=objTag==othTag;if(isSameTag&&isBuffer(object)){if(!isBuffer(other)){return false}objIsArr=true;objIsObj=false}if(isSameTag&&!objIsObj){stack||(stack=new Stack);return objIsArr||isTypedArray(object)?equalArrays(object,other,bitmask,customizer,equalFunc,stack):equalByTag(object,other,objTag,bitmask,customizer,equalFunc,stack)}if(!(bitmask&COMPARE_PARTIAL_FLAG$3)){var objIsWrapped=objIsObj&&hasOwnProperty$8.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty$8.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){var objUnwrapped=objIsWrapped?object.value():object,othUnwrapped=othIsWrapped?other.value():other;stack||(stack=new Stack);return equalFunc(objUnwrapped,othUnwrapped,bitmask,customizer,stack)}}if(!isSameTag){return false}stack||(stack=new Stack);return equalObjects(object,other,bitmask,customizer,equalFunc,stack)}function baseIsEqual(value,other,bitmask,customizer,stack){if(value===other){return true}if(value==null||other==null||!isObjectLike(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,bitmask,customizer,baseIsEqual,stack)}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2;function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=Object(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false}}else{var stack=new Stack;if(customizer){var result=customizer(objValue,srcValue,key,object,source,stack)}if(!(result===undefined?baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG$4|COMPARE_UNORDERED_FLAG$2,customizer,stack):result)){return false}}}return true}function isStrictComparable(value){return value===value&&!isObject(value)}function getMatchData(object){var result=keys(object),length=result.length;while(length--){var key=result[length],value=object[key];result[length]=[key,value,isStrictComparable(value)]}return result}function matchesStrictComparable(key,srcValue){return function(object){if(object==null){return false}return object[key]===srcValue&&(srcValue!==undefined||key in Object(object))}}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){return matchesStrictComparable(matchData[0][0],matchData[0][1])}return function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseHasIn(object,key){return object!=null&&key in Object(object)}function hasPath(object,path,hasFunc){path=castPath(path,object);var index=-1,length=path.length,result=false;while(++index<length){var key=toKey(path[index]);if(!(result=object!=null&&hasFunc(object,key))){break}object=object[key]}if(result||++index!=length){return result}length=object==null?0:object.length;return!!length&&isLength(length)&&isIndex(key,length)&&(isArray(object)||isArguments(object))}function hasIn(object,path){return object!=null&&hasPath(object,path,baseHasIn)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function baseMatchesProperty(path,srcValue){if(isKey(path)&&isStrictComparable(srcValue)){return matchesStrictComparable(toKey(path),srcValue)}return function(object){var objValue=get(object,path);return objValue===undefined&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,COMPARE_PARTIAL_FLAG$5|COMPARE_UNORDERED_FLAG$3)}}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function property(path){return isKey(path)?baseProperty(toKey(path)):basePropertyDeep(path)}function baseIteratee(value){if(typeof value=="function"){return value}if(value==null){return identity}if(_typeof(value)=="object"){return isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value)}return property(value)}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}var baseFor=createBaseFor();function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(collection==null){return collection}if(!isArrayLike(collection)){return eachFunc(collection,iteratee)}var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}var baseEach=createBaseEach(baseForOwn);function castFunction(value){return typeof value=="function"?value:identity}function forEach(collection,iteratee){var func=isArray(collection)?arrayEach:baseEach;return func(collection,castFunction(iteratee))}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)});return result}function map(collection,iteratee){var func=isArray(collection)?arrayMap:baseMap;return func(collection,baseIteratee(iteratee))}function _typeof$1(obj){if(typeof Symbol==="function"&&_typeof(Symbol.iterator)==="symbol"){_typeof$1=function _typeof$1(obj){return _typeof(obj)}}else{_typeof$1=function _typeof$1(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof(obj)}}return _typeof$1(obj)}function boundMethod(target,key,descriptor){var fn=descriptor.value;if(typeof fn!=="function"){throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(_typeof$1(fn)))}var definingProperty=false;return{configurable:true,get:function get(){if(definingProperty||this===target.prototype||this.hasOwnProperty(key)||typeof fn!=="function"){return fn}var boundFn=fn.bind(this);definingProperty=true;Object.defineProperty(this,key,{configurable:true,get:function get(){return boundFn},set:function set(value){fn=value;delete this[key]}});definingProperty=false;return boundFn},set:function set(value){fn=value}}}function boundClass(target){var keys;if(typeof Reflect!=="undefined"&&typeof Reflect.ownKeys==="function"){keys=Reflect.ownKeys(target.prototype)}else{keys=Object.getOwnPropertyNames(target.prototype);if(typeof Object.getOwnPropertySymbols==="function"){keys=keys.concat(Object.getOwnPropertySymbols(target.prototype))}}keys.forEach(function(key){if(key==="constructor"){return}var descriptor=Object.getOwnPropertyDescriptor(target.prototype,key);if(typeof descriptor.value==="function"){Object.defineProperty(target.prototype,key,boundMethod(target,key,descriptor))}});return target}function autobind(){if(arguments.length===1){return boundClass.apply(void 0,arguments)}return boundMethod.apply(void 0,arguments)}var callbacks=[];document.addEventListener("keydown",function(e){for(var i=0,len=callbacks.length;i<len;i++){var cb=callbacks[i];try{cb(e)}catch(error){console.log(error)}}});function onKeyDown(cb){if(callbacks.indexOf(cb)<0){callbacks.push(cb)}}var __decorate=undefined&&undefined.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if((typeof Reflect==="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r}return c>3&&r&&Object.defineProperty(target,key,r),r};var isMobile=AMap.Browser.mobile;var amplify=1;var createOptions={zIndex:50,strokeColor:"#FF33FF",strokeOpacity:.2,strokeWeight:6,strokeStyle:"solid",bubble:false,fillColor:"#1791fc",fillOpacity:.4};var defaultOpt={createOptions:createOptions,adsorbPolygons:[],adsorb:true,editable:false,drawable:false,overlap:false,adsorbDistance:{line:10,point:15},editOptions:{fillOpacity:.3,cursor:"pointer",strokeWeight:4,strokeStyle:"solid",strokeColor:"#1791fc",strokeOpacity:.8}};var PolygonEditor=function(_AMap$Event){_inherits(PolygonEditor,_AMap$Event);function PolygonEditor(map,target){var _this;var opt=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,PolygonEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(PolygonEditor).call(this));_this.movePoint={};_this._editing=false;_this.className="PolygonEditor";_this.GRAPH_NAME="Polygon";_this.onAddPick=_this.onAddPick.bind(_assertThisInitialized(_this));_this.onAddingMouseMove=_this.onAddingMouseMove.bind(_assertThisInitialized(_this));_this.onBreakPointClick=_this.onBreakPointClick.bind(_assertThisInitialized(_this));_this.onEditMouseMove=_this.onEditMouseMove.bind(_assertThisInitialized(_this));_this.open=_this.open.bind(_assertThisInitialized(_this));_this.close=_this.close.bind(_assertThisInitialized(_this));_this.OPEN_STATUS=false;_this._opt=AMap.extend(defaultOpt,opt,{bubble:false});var _this$_opt=_this._opt,originPaths=_this$_opt.paths,adsorbPolygons=_this$_opt.adsorbPolygons,adsorb=_this$_opt.adsorb,editable=_this$_opt.editable,drawable=_this$_opt.drawable,adsorbDistance=_this$_opt.adsorbDistance,overlap=_this$_opt.overlap;if(!map)return _possibleConstructorReturn(_this);_this.map=map;_this.drawable=drawable;_this.editable=editable;_this.adsorb=adsorb;_this.adsorbDistance=adsorbDistance;_this.overlap=overlap;_this.adsorbPolygons=adsorbPolygons||[];_this.originPaths=originPaths;_this.editingVertexMarkerList=[];_this.editingMidTipMarkerList=[];_this.addingPoly=null;_this.showTipMarker=true;_this.editingPolyObj=target&&{poly:target}||null;_this.defaultMarkerOpt={zIndex:999998,bubble:false,cursor:"pointer",clickable:true,draggable:true,radius:isMobile?6:6,strokeColor:"#1791fc",strokeWeight:isMobile?6:2,strokeOpacity:isMobile?.2:1,fillColor:"white",fillOpacity:1,innerOverlay:true};_this.midControlPoint=AMap.extend({zIndex:999999,bubble:false,cursor:"pointer",clickable:true,radius:6,strokeColor:"white",strokeWeight:isMobile?6:2,strokeOpacity:isMobile?.6:1,fillColor:"#1791fc",fillOpacity:1},opt.midControlPoint||{});_this.controlPoint=AMap.extend({draggable:true,cursor:"pointer",bubble:false,zIndex:999999},opt.controlPoint||{});_this.movePoint=AMap.extend({bubble:true},opt.controlPoint||{});_this.defaultCursor=map.getDefaultCursor();onKeyDown(_this.onHandleKeydown.bind(_assertThisInitialized(_this)));return _this}_createClass(PolygonEditor,[{key:"onMapDblclick",value:function onMapDblclick(e){if(this.drawable){this.finishAddingPolygon(false,e)}}},{key:"onMapRightclick",value:function onMapRightclick(e){if(this.drawable){this.finishAddingPolygon(true,e)}}},{key:"innerOpen",value:function innerOpen(){var _this2=this;if(!this.OPEN_STATUS){this.OPEN_STATUS=true;var markerNames=["mvPickMarker"];if(this.showTipMarker){markerNames.forEach(function(name){_this2.mvPickMarker=_this2.createMarker(AMap.extend({center:new AMap.LngLat(0,0),bubble:true},_this2.movePoint));_this2["mvPickMarker"].hide();_this2.map.add(_this2[name])})}var opt=AMap.extend({},this.midControlPoint,{zIndex:999990,center:new AMap.LngLat(0,0),bubble:false});this.lineBreakMarker=this.createMarker(opt);this.lineBreakMarker.hide();this.map.add(this.lineBreakMarker);this._mapStatusDb=this.map["getStatus"]()["doubleClickZoom"]}}},{key:"onBreakPointClick",value:function onBreakPointClick(e){var _this$editingPolyObj=this.editingPolyObj,breakPoint=_this$editingPolyObj.breakPoint,poly=_this$editingPolyObj.poly,breakIndex=_this$editingPolyObj.breakIndex;var path=poly.getPath();var lnglat=breakPoint;if(!breakPoint.lng){lnglat=new AMap.LngLat(breakPoint[0],breakPoint[1])}var index=breakIndex+1;path.splice(index,0,lnglat);poly.setPath(path);this.emit("addnode",{target:this.getTarget(),pixel:e.pixel,lnglat:e.lnglat});this.highLightEditPoly()}},{key:"editPoly",value:function editPoly(){this.mvPickMarker.hide();this.lineBreakMarker.show();this.chosedPoint=null;var poly=this.editingPolyObj.poly;if(poly){var path=poly.getPath();this.editingPolyObj.origin_path=path;var opt=poly.getOptions();delete opt.path;delete opt.map;this.editingPolyObj.origin_options=opt;this.highLightEditPoly()}}},{key:"setLayerOptions",value:function setLayerOptions(layer,changeOpt){var opt=layer.getOptions();var _opt=AMap.extend({},opt,changeOpt);layer.setOptions(_opt)}},{key:"deleteChosedItem",value:function deleteChosedItem(e){if(this.editingPolyObj){if(this.chosedPoint){var _this$chosedPoint=this.chosedPoint,marker=_this$chosedPoint.marker,pointIndex=_this$chosedPoint.pointIndex,_point=_this$chosedPoint.point,path=_this$chosedPoint.path,poly=_this$chosedPoint.poly,lnglat=_this$chosedPoint.lnglat,pixel=_this$chosedPoint.pixel;if(path.length>3){path.splice(pointIndex,1);poly.setPath(path);this.map.remove(marker);this.emit("removenode",{target:this.getTarget(),lnglat:_point,pixel:pixel});this.highLightEditPoly();this.onEditMouseMove(e)}else{var _poly=this.editingPolyObj&&this.editingPolyObj.poly;if(_poly){_poly.setPath([]);_poly.remove()}this.setTarget(null)}}}}},{key:"highLightEditPoly",value:function highLightEditPoly(){var _this3=this;var poly=this.editingPolyObj.poly;var style=this._opt.editOptions||{fillColor:"#f00",fillOpacity:1};var opt=AMap.extend({},this._opt,style);poly.setOptions(opt);var path=poly.getPath();var pointOnClick=function pointOnClick(chosedObj){var marker=chosedObj.marker;var _markerOpt=_this3.getMergeMkrOptions(_this3.controlPoint);var chosedOpt=_this3.getMergeMkrOptions({radius:3});if(_this3.chosedPoint){var cm=_this3.chosedPoint.marker;cm.setOptions(_markerOpt)}marker.setOptions(chosedOpt);_this3.chosedPoint=chosedObj};this.editingVertexMarkerList.forEach(function(mkr){_this3.map.remove(mkr)});this.editingVertexMarkerList=[];this.editingVertexMarkerList=map(path,function(pt,pointIndex){var opt=AMap.extend({},_this3.controlPoint,{center:pt});var m=_this3.createMarker(opt);_this3.map.add(m);m.on("click",function(e){pointOnClick({lnglat:e.lnglat,pixel:e.pixel,marker:m,pointIndex:pointIndex,point:pt,path:path,poly:poly});_this3.deleteChosedItem(e)});m.on("dragging",function(e){_this3.lineBreakMarker.hide();_this3.clearTipMarkers();var _paths=_this3.getPath();var ll=_this3.getAdjustedPoint(_paths,e2ll(e));path[pointIndex]=ll;poly.setPath(path)});m.on("dragend",function(e){_this3.highLightEditPoly();_this3.emit("adjust",{target:_this3.getTarget(),pixel:e.pixel,lnglat:e.lnglat})});return m});this.editingMidTipMarkerList.forEach(function(mkr){_this3.map.remove(mkr)});this.editingMidTipMarkerList=[];var _loop=function _loop(i){var cur=path[i];var next=i===path.length-1?path[0]:path[i+1];var lng=(cur.lng+next.lng)/2;var lat=(cur.lat+next.lat)/2;var midll=new AMap.LngLat(lng,lat);var opt=AMap.extend({},_this3.midControlPoint,{zIndex:999997,center:midll,bubble:false,draggable:true});var m=_this3.createMarker(opt);_this3.map.add(m);m.on("dragstart",function(e){var poly=_this3.editingPolyObj.poly;var breakPoint=midll;var breakIndex=i;var path=AMap.Util.parseLngLatData(poly.getPath());var lnglat=breakPoint;if(!breakPoint.lng){lnglat=new AMap.LngLat(breakPoint[0],breakPoint[1])}var index=breakIndex+1;path.splice(index,0,lnglat);poly.setPath(path);var option=_this3.getMergeMkrOptions(_this3.controlPoint);m.setOptions(option)});m.on("dragging",function(e){var path=poly.getPath();_this3.lineBreakMarker.hide();var _paths=_this3.getPath();var ll=_this3.getAdjustedPoint(_paths,e2ll(e));var pointIndex=i+1;path[pointIndex]=ll;poly.setPath(path)});m.on("dragend",function(e){_this3.emit("addnode",{target:_this3.getTarget(),pixel:e.pixel,lnglat:e.lnglat});_this3.highLightEditPoly()});_this3.editingMidTipMarkerList.push(m)};for(var i=0;i<path.length;i++){_loop(i)}}},{key:"getIcon",value:function getIcon(){var size=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[10,10];var icon=new AMap.Icon({size:new AMap.Size(size[0],size[1]),image:"http://webapi.amap.com/images/dd-via.png",imageSize:new AMap.Size(size[0],size[1])});return icon}},{key:"getMergeMkrOptions",value:function getMergeMkrOptions(opt){var _opt=AMap.extend({},this.defaultMarkerOpt,opt);_opt.radius*=amplify;return _opt}},{key:"createMarker",value:function createMarker(opt){var _opt=this.getMergeMkrOptions(opt);return new AMap.CircleMarker(_opt)}},{key:"onAddPick",value:function onAddPick(e){if(!this.drawable)return;var adsorbPt=isMobile?e.lnglat:this.mvPickMarker.getCenter();var insertIndex=0;if(!this.addingPoly){var _path=[[adsorbPt.lng,adsorbPt.lat],[adsorbPt.lng,adsorbPt.lat]];if(isMobile){_path.pop()}var opt=AMap.extend({},this._opt,{bubble:true});this.addingPoly=createPolygon(_path,opt.editOptions);this.map.add(this.addingPoly);this._mapStatusDb=this.map.getStatus().doubleClickZoom;this.map["setStatus"]({doubleClickZoom:false})}else{var arr=this.addingPoly["getPath"]();if(!isMobile){arr.pop();arr.push(adsorbPt)}arr.push(adsorbPt);insertIndex=arr.length-2;this.addingPoly["setPath"](arr)}this.emit("addnode",{target:this.addingPoly,pixel:e.pixel,lnglat:e.lnglat})}},{key:"getPointOnLine",value:function getPointOnLine(_paths,ll){if(this.GRAPH_NAME==="Polygon"){_paths.forEach(function(path){if(path.length>2&&path[0]!==path[path.length-1]){path.push(path[0])}})}var mvPt=[ll.lng,ll.lat];var lines=helpers_14(_paths);var pt=helpers_7(mvPt);var _nearestPointOnLine=nearestPointOnLine(lines,pt,{units:"kilometers"}),linePt=_nearestPointOnLine.geometry.coordinates,properties=_nearestPointOnLine.properties;return{point:linePt,properties:properties}}},{key:"onAddingMouseMove",value:function onAddingMouseMove(e){if(!this.drawable)return;var ll=e2ll(e);var _paths=this.getPath();var ajustPt=this.getAdjustedPoint(_paths,ll);if(this.mvPickMarker){this.mvPickMarker.setCenter(ajustPt);if(ajustPt==ll){this.mvPickMarker.hide()}else{this.mvPickMarker.show()}}if(this.addingPoly){var arr=this.addingPoly["getPath"]();arr.pop();arr.push(ajustPt);this.addingPoly["setPath"](arr)}}},{key:"getPolyArrPath",value:function getPolyArrPath(poly){var path=poly.getPath();var _path=map(path,function(loc){return[loc.lng,loc.lat]});return _path}},{key:"onEditMouseMove",value:function onEditMouseMove(e){}},{key:"getAdjustedPoint",value:function getAdjustedPoint(_paths,ll){var ajustPt=ll;if(this.adsorb&&_paths&&_paths.length>0){var mvPt=[ll.lng,ll.lat];var allPoints=_paths.reduce(function(pre,n){return pre.concat(n)});var _this$getPointOnLine=this.getPointOnLine(_paths,ll),linePt=_this$getPointOnLine.point;var _this$adsorbDistance=this.adsorbDistance,lAbPx=_this$adsorbDistance.line,vAbPx=_this$adsorbDistance.point;var nearVPt=getNearestPoint(mvPt,allPoints);if(!nearVPt){return ajustPt}var vDist=getPixelDistance(this.map,[nearVPt.point,mvPt]);var linePtDist=getPixelDistance(this.map,[linePt,mvPt]);if(this.showTipMarker){var mvp=new AMap.LngLat(mvPt[0],mvPt[1]);this.mvPickMarker.setCenter(mvp)}if(vDist<vAbPx){var refLoc=new AMap.LngLat(nearVPt.point[0],nearVPt.point[1]);ajustPt=refLoc}else{if(linePtDist<lAbPx){var _refLoc=new AMap.LngLat(linePt[0],linePt[1]);ajustPt=_refLoc}}}return ajustPt}},{key:"finishAddingPolygon",value:function finishAddingPolygon(){var stripLast=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var e=arguments.length>1?arguments[1]:undefined;if(this.addingPoly){var arr=this.addingPoly["getPath"]();if(stripLast){if(!isMobile){arr.pop()}}else{arr.pop();if(!isMobile){arr.pop()}}if(arr.length>2){this.addingPoly["setPath"](arr);var success=this.tailorPolygonOverlaps();if(success){this.emit("add",{target:this.addingPoly,obj:this.addingPoly,lnglat:e.lnglat,pixel:e.pixel});this.editingPolyObj={poly:this.addingPoly};this.addingPoly=undefined;this.openEdit();this.editingPolyObj.origin_options=this._opt.createOptions}else{alert("您正在编辑的多边形不合规（边不能交叉），请重新添加")}}else{this.cancel()}}if(this.addingPoly){this.drawable=false}else{this.emit("cancel",{lnglat:e.lnglat,pixel:e.pixel})}}},{key:"getClosePath",value:function getClosePath(path){var last=path[path.length-1];if(last&&last!==path[0]){return path.concat([path[0]])}else{return path}}},{key:"tailorPolygonOverlaps",value:function tailorPolygonOverlaps(){return true}},{key:"getPolygons",value:function getPolygons(){return this.adsorbPolygons}},{key:"getPath",value:function getPath(){var _this4=this;var result=[];forEach(this.adsorbPolygons,function(p){if(!_this4.editingPolyObj){return}if(p===_this4.editingPolyObj.poly){return}result.push(p.getPath().map(function(loc){return[loc.lng,loc.lat]}))});return result}},{key:"addAddListener",value:function addAddListener(){this.map.on("click",this.onAddPick);this.map.on("mousemove",this.onAddingMouseMove);this.map.on("dblclick",this.onMapDblclick);this.map.on("rightclick",this.onMapRightclick)}},{key:"removeAddListener",value:function removeAddListener(){this.map.off("click",this.onAddPick);this.map.off("mousemove",this.onAddingMouseMove);this.map.off("dblclick",this.onMapDblclick);this.map.off("rightclick",this.onMapRightclick)}},{key:"addEditListener",value:function addEditListener(){this.map.on("mousemove",this.onEditMouseMove)}},{key:"removeEditListener",value:function removeEditListener(){this.map.off("mousemove",this.onEditMouseMove)}},{key:"open",value:function open(){if(this.editingPolyObj&&this.editingPolyObj.poly){this.openEdit()}else{this.openAdd()}}},{key:"setTarget",value:function setTarget(tar){this.close();this._opt.target=tar;this.editingPolyObj={poly:tar}}},{key:"getTarget",value:function getTarget(){return this.editingPolyObj&&this.editingPolyObj.poly}},{key:"openAdd",value:function openAdd(){this.innerOpen();this.closeEdit();this.drawable=true;this.map.setDefaultCursor("crosshair");this.addAddListener();this.setAllBubble()}},{key:"setAllBubble",value:function setAllBubble(){this._oldBubble=this.map.getStatus().allBubble;this.map.setStatus({allBubble:true})}},{key:"restoreBubble",value:function restoreBubble(){this.map.setStatus({allBubble:this._oldBubble})}},{key:"closeAdd",value:function closeAdd(){this.drawable=false;this.clearAddingPolygon();this.removeAddListener()}},{key:"openEdit",value:function openEdit(){if(this.editable){return}this.innerOpen();this.closeAdd();this.clearAddingPolygon();this.editable=true;this.map.setDefaultCursor(this.defaultCursor);this.addEditListener();this.editPoly();this.setAllBubble()}},{key:"closeEdit",value:function closeEdit(){this.editable=false;this.clearEditingPolyStatus();this.removeEditListener();this.map.setDefaultCursor(this.defaultCursor)}},{key:"clearAddingPolygon",value:function clearAddingPolygon(){if(this.addingPoly){this.map.remove(this.addingPoly)}this.addingPoly=null}},{key:"clearEditingPolyStatus",value:function clearEditingPolyStatus(){var _this5=this;this.lineBreakMarker&&this.lineBreakMarker.hide();if(this.editingPolyObj&&this.editingPolyObj.poly){var _this$editingPolyObj2=this.editingPolyObj,poly=_this$editingPolyObj2.poly,origin_options=_this$editingPolyObj2.origin_options;if(poly){origin_options&&poly.setOptions(origin_options);delete poly.origin_options}}this.editingVertexMarkerList&&this.editingVertexMarkerList.forEach(function(mk){_this5.map.remove(mk)});this.editingVertexMarkerList=[];this.clearTipMarkers()}},{key:"clearTipMarkers",value:function clearTipMarkers(){var _this6=this;this.editingMidTipMarkerList&&this.editingMidTipMarkerList.forEach(function(mk){_this6.map.remove(mk)});this.editingMidTipMarkerList=[]}},{key:"setAdsorbPolygons",value:function setAdsorbPolygons(list){this.clearAdsorbPolygons();this.addAdsorbPolygons(list)}},{key:"clearAdsorbPolygons",value:function clearAdsorbPolygons(){this.adsorbPolygons=[]}},{key:"addAdsorbPolygons",value:function addAdsorbPolygons(list){if(!Array.isArray(list)){list=[list]}Array.prototype.push.apply(this.adsorbPolygons,list)}},{key:"removeAdsorbPolygons",value:function removeAdsorbPolygons(list){if(!Array.isArray(list)){list=[list]}for(var i=0,len=list.length;i<len;i++){var item=list[i];var index=this.adsorbPolygons.indexOf(item);if(index>=0){this.adsorbPolygons.splice(index,1)}}}},{key:"close",value:function close(){this.map.setDefaultCursor(this.defaultCursor);this.clearAddingPolygon();this.closeAdd();this.closeEdit();this.clearEditingPolyStatus();this.editingPolyObj={poly:this.editingPolyObj&&this.editingPolyObj.poly};this.lineBreakMarker&&this.map.remove(this.lineBreakMarker);this.lineBreakMarker=null;this.mvPickMarker&&this.map.remove(this.mvPickMarker);this.mvPickMarker=null;this.OPEN_STATUS=false;this.restoreBubble();this.emit("end",{target:this.getTarget()})}},{key:"onHandleKeydown",value:function onHandleKeydown(e){if(e.key==="Escape"){this.cancel()}}},{key:"cancel",value:function cancel(){if(this.addingPoly){this.map.remove(this.addingPoly);this.addingPoly=undefined;this.emit("cancel",{})}}},{key:"CLASS_NAME",get:function get(){return this.className}}]);return PolygonEditor}(AMap.Event);__decorate([autobind],PolygonEditor.prototype,"onMapDblclick",null);__decorate([autobind],PolygonEditor.prototype,"onMapRightclick",null);AMap["PolygonEditor"]=PolygonEditor}(window.AMap); ')